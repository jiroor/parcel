// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles

require = (function (modules, cache, entry) {
  // Save the require from previous bundle to this closure if any
  var previousRequire = typeof require === "function" && require;

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire = typeof require === "function" && require;
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        var err = new Error('Cannot find module \'' + name + '\'');
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      function localRequire(x) {
        return newRequire(localRequire.resolve(x));
      }

      localRequire.resolve = function (x) {
        return modules[name][1][x] || x;
      };

      var module = cache[name] = new newRequire.Module;
      modules[name][0].call(module.exports, localRequire, module, module.exports);
    }

    return cache[name].exports;
  }

  function Module() {
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;

  for (var i = 0; i < entry.length; i++) {
    newRequire(entry[i]);
  }

  // Override the current require with this new one
  return newRequire;
})({5:[function(require,module,exports) {
module.exports = {};
},{"./../font/Splatfont.ttf":["7032356cb24922c52a5cc01a65357d50.ttf",45],"./../font/Splatfont2.ttf":["8b5b1cc5cb93b8587ed83dd0d3691428.ttf",46]}],119:[function(require,module,exports) {
"use strict";function r(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===r[t-2]?2:"="===r[t-1]?1:0}function t(t){return 3*t.length/4-r(t)}function e(t){var e,n,o,a,h,A=t.length;a=r(t),h=new u(3*A/4-a),n=a>0?A-4:A;var i=0;for(e=0;e<n;e+=4)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],h[i++]=o>>16&255,h[i++]=o>>8&255,h[i++]=255&o;return 2===a?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,h[i++]=255&o):1===a&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,h[i++]=o>>8&255,h[i++]=255&o),h}function n(r){return h[r>>18&63]+h[r>>12&63]+h[r>>6&63]+h[63&r]}function o(r,t,e){for(var o,a=[],h=t;h<e;h+=3)o=(r[h]<<16)+(r[h+1]<<8)+r[h+2],a.push(n(o));return a.join("")}function a(r){for(var t,e=r.length,n=e%3,a="",c=[],u=0,A=e-n;u<A;u+=16383)c.push(o(r,u,u+16383>A?A:u+16383));return 1===n?(t=r[e-1],a+=h[t>>2],a+=h[t<<4&63],a+="=="):2===n&&(t=(r[e-2]<<8)+r[e-1],a+=h[t>>10],a+=h[t>>4&63],a+=h[t<<2&63],a+="="),c.push(a),c.join("")}exports.byteLength=t,exports.toByteArray=e,exports.fromByteArray=a;for(var h=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,d=A.length;i<d;++i)h[i]=A[i],c[A.charCodeAt(i)]=i;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;
},{}],120:[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],121:[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],50:[function(require,module,exports) {

var global = (1,eval)("this");
function t(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function r(){return n.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return n.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=n.prototype:(null===t&&(t=new n(e)),t.length=e),t}function n(t,r,e){if(!(n.TYPED_ARRAY_SUPPORT||this instanceof n))return new n(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return i(this,t,r,e)}function i(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?a(t,r,e,n):"string"==typeof r?s(t,r,e):c(t,r)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,r,n,i){return o(r),r<=0?e(t,r):void 0!==n?"string"==typeof i?e(t,r).fill(n,i):e(t,r).fill(n):e(t,r)}function u(t,r){if(o(r),t=e(t,r<0?0:0|l(r)),!n.TYPED_ARRAY_SUPPORT)for(var i=0;i<r;++i)t[i]=0;return t}function s(t,r,i){if("string"==typeof i&&""!==i||(i="utf8"),!n.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(r,i),f=(t=e(t,o)).write(r,i);return f!==o&&(t=t.slice(0,f)),t}function h(t,r){var n=r.length<0?0:0|l(r.length);t=e(t,n);for(var i=0;i<n;i+=1)t[i]=255&r[i];return t}function a(t,r,e,i){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,e):new Uint8Array(r,e,i),n.TYPED_ARRAY_SUPPORT?(t=r).__proto__=n.prototype:t=h(t,r),t}function c(t,r){if(n.isBuffer(r)){var i=0|l(r.length);return 0===(t=e(t,i)).length?t:(r.copy(t,0,0,i),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||Z(r.length)?e(t,0):h(t,r);if("Buffer"===r.type&&K(r.data))return h(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function l(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function p(t){return+t!=t&&(t=0),n.alloc(+t)}function g(t,r){if(n.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return X(t).length;default:if(i)return j(t).length;r=(""+r).toLowerCase(),i=!0}}function y(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if(e>>>=0,r>>>=0,e<=r)return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,r,e);case"utf8":case"utf-8":return T(this,r,e);case"ascii":return U(this,r,e);case"latin1":case"binary":return S(this,r,e);case"base64":return P(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function w(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function d(t,r,e,i,o){if(0===t.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=o?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(o)return-1;e=t.length-1}else if(e<0){if(!o)return-1;e=0}if("string"==typeof r&&(r=n.from(r,i)),n.isBuffer(r))return 0===r.length?-1:v(t,r,e,i,o);if("number"==typeof r)return r&=255,n.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):v(t,[r],e,i,o);throw new TypeError("val must be string, number or Buffer")}function v(t,r,e,n,i){function o(t,r){return 1===f?t[r]:t.readUInt16BE(r*f)}var f=1,u=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;f=2,u/=2,s/=2,e/=2}var h;if(i){var a=-1;for(h=e;h<u;h++)if(o(t,h)===o(r,-1===a?0:h-a)){if(-1===a&&(a=h),h-a+1===s)return a*f}else-1!==a&&(h-=h-a),a=-1}else for(e+s>u&&(e=u-s),h=e;h>=0;h--){for(var c=!0,l=0;l<s;l++)if(o(t,h+l)!==o(r,l)){c=!1;break}if(c)return h}return-1}function E(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(r.substr(2*f,2),16);if(isNaN(u))return f;t[e+f]=u}return f}function b(t,r,e,n){return J(j(r,t.length-e),t,e,n)}function R(t,r,e,n){return J(q(r),t,e,n)}function _(t,r,e,n){return R(t,r,e,n)}function A(t,r,e,n){return J(X(r),t,e,n)}function m(t,r,e,n){return J(V(r,t.length-e),t,e,n)}function P(t,r,e){return 0===r&&e===t.length?G.fromByteArray(t):G.fromByteArray(t.slice(r,e))}function T(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o=t[i],f=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=e){var s,h,a,c;switch(u){case 1:o<128&&(f=o);break;case 2:128==(192&(s=t[i+1]))&&(c=(31&o)<<6|63&s)>127&&(f=c);break;case 3:s=t[i+1],h=t[i+2],128==(192&s)&&128==(192&h)&&(c=(15&o)<<12|(63&s)<<6|63&h)>2047&&(c<55296||c>57343)&&(f=c);break;case 4:s=t[i+1],h=t[i+2],a=t[i+3],128==(192&s)&&128==(192&h)&&128==(192&a)&&(c=(15&o)<<18|(63&s)<<12|(63&h)<<6|63&a)>65535&&c<1114112&&(f=c)}}null===f?(f=65533,u=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=u}return B(n)}function B(t){var r=t.length;if(r<=Q)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=Q));return e}function U(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function S(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function Y(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=F(t[o]);return i}function I(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function L(t,r,e,i,o,f){if(!n.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<f)throw new RangeError('"value" argument is out of bounds');if(e+i>t.length)throw new RangeError("Index out of range")}function D(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function x(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function C(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function M(t,r,e,n,i){return i||C(t,r,e,4,3.4028234663852886e38,-3.4028234663852886e38),H.write(t,r,e,n,23,4),e+4}function k(t,r,e,n,i){return i||C(t,r,e,8,1.7976931348623157e308,-1.7976931348623157e308),H.write(t,r,e,n,52,8),e+8}function N(t){if((t=z(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,r){r=r||1/0;for(var e,n=t.length,i=null,o=[],f=0;f<n;++f){if((e=t.charCodeAt(f))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function q(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function V(t,r){for(var e,n,i,o=[],f=0;f<t.length&&!((r-=2)<0);++f)n=(e=t.charCodeAt(f))>>8,i=e%256,o.push(i),o.push(n);return o}function X(t){return G.toByteArray(N(t))}function J(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function Z(t){return t!=t}var $=(0,eval)("this"),G=require("base64-js"),H=require("ieee754"),K=require("isarray");exports.Buffer=n,exports.SlowBuffer=p,exports.INSPECT_MAX_BYTES=50,n.TYPED_ARRAY_SUPPORT=void 0!==$.TYPED_ARRAY_SUPPORT?$.TYPED_ARRAY_SUPPORT:t(),exports.kMaxLength=r(),n.poolSize=8192,n._augment=function(t){return t.__proto__=n.prototype,t},n.from=function(t,r,e){return i(null,t,r,e)},n.TYPED_ARRAY_SUPPORT&&(n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0})),n.alloc=function(t,r,e){return f(null,t,r,e)},n.allocUnsafe=function(t){return u(null,t)},n.allocUnsafeSlow=function(t){return u(null,t)},n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,r){if(!n.isBuffer(t)||!n.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,i=r.length,o=0,f=Math.min(e,i);o<f;++o)if(t[o]!==r[o]){e=t[o],i=r[o];break}return e<i?-1:i<e?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,r){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return n.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=n.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var f=t[e];if(!n.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)w(this,r,r+1);return this},n.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)w(this,r,r+3),w(this,r+1,r+2);return this},n.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)w(this,r,r+7),w(this,r+1,r+6),w(this,r+2,r+5),w(this,r+3,r+4);return this},n.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):y.apply(this,arguments)},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===n.compare(this,t)},n.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t,r,e,i,o){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||e>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=e)return 0;if(i>=o)return-1;if(r>=e)return 1;if(r>>>=0,e>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var f=o-i,u=e-r,s=Math.min(f,u),h=this.slice(i,o),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){f=h[c],u=a[c];break}return f<u?-1:u<f?1:0},n.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},n.prototype.indexOf=function(t,r,e){return d(this,t,r,e,!0)},n.prototype.lastIndexOf=function(t,r,e){return d(this,t,r,e,!1)},n.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,t,r,e);case"utf8":case"utf-8":return b(this,t,r,e);case"ascii":return R(this,t,r,e);case"latin1":case"binary":return _(this,t,r,e);case"base64":return A(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;n.prototype.slice=function(t,r){var e=this.length;t=~~t,r=void 0===r?e:~~r,t<0?(t+=e)<0&&(t=0):t>e&&(t=e),r<0?(r+=e)<0&&(r=0):r>e&&(r=e),r<t&&(r=t);var i;if(n.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,r)).__proto__=n.prototype;else{var o=r-t;i=new n(o,void 0);for(var f=0;f<o;++f)i[f]=this[f+t]}return i},n.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},n.prototype.readUInt8=function(t,r){return r||O(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,r){return r||O(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,r){return r||O(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,r){return r||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,r){return r||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*r)),n},n.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||O(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o},n.prototype.readInt8=function(t,r){return r||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,r){r||O(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},n.prototype.readInt16BE=function(t,r){r||O(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},n.prototype.readInt32LE=function(t,r){return r||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,r){return r||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,r){return r||O(t,4,this.length),H.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,r){return r||O(t,4,this.length),H.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,r){return r||O(t,8,this.length),H.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,r){return r||O(t,8,this.length),H.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,r,e,n){if(t=+t,r|=0,e|=0,!n){L(this,t,r,e,Math.pow(2,8*e)-1,0)}var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},n.prototype.writeUIntBE=function(t,r,e,n){if(t=+t,r|=0,e|=0,!n){L(this,t,r,e,Math.pow(2,8*e)-1,0)}var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},n.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},n.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):D(this,t,r,!0),r+2},n.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):D(this,t,r,!1),r+2},n.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):x(this,t,r,!0),r+4},n.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):x(this,t,r,!1),r+4},n.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);L(this,t,r,e,i-1,-i)}var o=0,f=1,u=0;for(this[r]=255&t;++o<e&&(f*=256);)t<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},n.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);L(this,t,r,e,i-1,-i)}var o=e-1,f=1,u=0;for(this[r+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},n.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},n.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):D(this,t,r,!0),r+2},n.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):D(this,t,r,!1),r+2},n.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):x(this,t,r,!0),r+4},n.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||L(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):x(this,t,r,!1),r+4},n.prototype.writeFloatLE=function(t,r,e){return M(this,t,r,!0,e)},n.prototype.writeFloatBE=function(t,r,e){return M(this,t,r,!1,e)},n.prototype.writeDoubleLE=function(t,r,e){return k(this,t,r,!0,e)},n.prototype.writeDoubleBE=function(t,r,e){return k(this,t,r,!1,e)},n.prototype.copy=function(t,r,e,i){if(e||(e=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<e&&(i=e),i===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-e&&(i=t.length-r+e);var o,f=i-e;if(this===t&&e<r&&r<i)for(o=f-1;o>=0;--o)t[o+r]=this[o+e];else if(f<1e3||!n.TYPED_ARRAY_SUPPORT)for(o=0;o<f;++o)t[o+r]=this[o+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+f),r);return f},n.prototype.fill=function(t,r,e,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,e=this.length):"string"==typeof e&&(i=e,e=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!n.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0);var f;if("number"==typeof t)for(f=r;f<e;++f)this[f]=t;else{var u=n.isBuffer(t)?t:j(new n(t,i).toString()),s=u.length;for(f=0;f<e-r;++f)this[f+r]=u[f%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;
},{"buffer":50,"base64-js":119,"ieee754":120,"isarray":121}],23:[function(require,module,exports) {
var global = (1,eval)("this");
var Buffer = require("buffer").Buffer;
var n=(0,eval)("this"),t=require("buffer").Buffer;(function(){function t(n,t){return n.set(t[0],t[1]),n}function r(n,t){return n.add(t),n}function e(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function u(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function i(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function o(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function f(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function a(n,t){return!!(null==n?0:n.length)&&d(n,t,0)>-1}function l(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function s(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function h(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function p(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function _(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function v(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function g(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function y(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function d(n,t,r){return t==t?function(n,t,r){var e=r-1,u=n.length;for(;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):y(n,w,r)}function b(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function w(n){return n!=n}function m(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:dn}function x(n){return function(t){return null==t?M:t[n]}}function j(n){return function(t){return null==n?M:n[t]}}function A(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==M&&(r=r===M?i:r+i)}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n){return function(t){return n(t)}}function R(n,t){return s(t,function(t){return n[t]})}function z(n,t){return n.has(t)}function E(n,t){for(var r=-1,e=n.length;++r<e&&d(t,n[r],0)>-1;);return r}function S(n,t){for(var r=n.length;r--&&d(t,n[r],0)>-1;);return r}function W(n){return"\\"+wr[n]}function L(n){return _r.test(n)}function C(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function B(n,t){return function(r){return n(t(r))}}function U(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==K||(n[r]=K,i[u++]=r)}return i}function T(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function $(n){return L(n)?function(n){var t=hr.lastIndex=0;for(;hr.test(n);)++t;return t}(n):Tr(n)}function D(n){return L(n)?function(n){return n.match(hr)||[]}(n):function(n){return n.split("")}(n)}var M,F=200,N="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",q="__lodash_hash_undefined__",Z=500,K="__lodash_placeholder__",V=1,G=2,H=4,J=1,Y=2,Q=1,X=2,nn=4,tn=8,rn=16,en=32,un=64,on=128,fn=256,cn=512,an=30,ln="...",sn=800,hn=16,pn=1,_n=2,vn=1/0,gn=9007199254740991,yn=1.7976931348623157e308,dn=NaN,bn=4294967295,wn=bn-1,mn=bn>>>1,xn=[["ary",on],["bind",Q],["bindKey",X],["curry",tn],["curryRight",rn],["flip",cn],["partial",en],["partialRight",un],["rearg",fn]],jn="[object Arguments]",An="[object Array]",kn="[object AsyncFunction]",On="[object Boolean]",In="[object Date]",Rn="[object DOMException]",zn="[object Error]",En="[object Function]",Sn="[object GeneratorFunction]",Wn="[object Map]",Ln="[object Number]",Cn="[object Null]",Bn="[object Object]",Un="[object Promise]",Tn="[object Proxy]",$n="[object RegExp]",Dn="[object Set]",Mn="[object String]",Fn="[object Symbol]",Nn="[object Undefined]",Pn="[object WeakMap]",qn="[object WeakSet]",Zn="[object ArrayBuffer]",Kn="[object DataView]",Vn="[object Float32Array]",Gn="[object Float64Array]",Hn="[object Int8Array]",Jn="[object Int16Array]",Yn="[object Int32Array]",Qn="[object Uint8Array]",Xn="[object Uint8ClampedArray]",nt="[object Uint16Array]",tt="[object Uint32Array]",rt=/\b__p \+= '';/g,et=/\b(__p \+=) '' \+/g,ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,it=/&(?:amp|lt|gt|quot|#39);/g,ot=/[&<>"']/g,ft=RegExp(it.source),ct=RegExp(ot.source),at=/<%-([\s\S]+?)%>/g,lt=/<%([\s\S]+?)%>/g,st=/<%=([\s\S]+?)%>/g,ht=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,_t=/^\./,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gt=/[\\^$.*+?()[\]{}|]/g,yt=RegExp(gt.source),dt=/^\s+|\s+$/g,bt=/^\s+/,wt=/\s+$/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kt=/\\(\\)?/g,Ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,It=/\w*$/,Rt=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,Et=/^\[object .+?Constructor\]$/,St=/^0o[0-7]+$/i,Wt=/^(?:0|[1-9]\d*)$/,Lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ct=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Ut="\\ud800-\\udfff",Tt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$t="\\u2700-\\u27bf",Dt="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ft="\\ufe0e\\ufe0f",Nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+Ut+"]",qt="["+Nt+"]",Zt="["+Tt+"]",Kt="\\d+",Vt="["+$t+"]",Gt="["+Dt+"]",Ht="[^"+Ut+Nt+Kt+$t+Dt+Mt+"]",Jt="\\ud83c[\\udffb-\\udfff]",Yt="[^"+Ut+"]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",nr="["+Mt+"]",tr="(?:"+Gt+"|"+Ht+")",rr="(?:"+nr+"|"+Ht+")",er="(?:['’](?:d|ll|m|re|s|t|ve))?",ur="(?:['’](?:D|LL|M|RE|S|T|VE))?",ir="(?:"+Zt+"|"+Jt+")"+"?",or="["+Ft+"]?",fr=or+ir+("(?:\\u200d(?:"+[Yt,Qt,Xt].join("|")+")"+or+ir+")*"),cr="(?:"+[Vt,Qt,Xt].join("|")+")"+fr,ar="(?:"+[Yt+Zt+"?",Zt,Qt,Xt,Pt].join("|")+")",lr=RegExp("['’]","g"),sr=RegExp(Zt,"g"),hr=RegExp(Jt+"(?="+Jt+")|"+ar+fr,"g"),pr=RegExp([nr+"?"+Gt+"+"+er+"(?="+[qt,nr,"$"].join("|")+")",rr+"+"+ur+"(?="+[qt,nr+tr,"$"].join("|")+")",nr+"?"+tr+"+"+er,nr+"+"+ur,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Kt,cr].join("|"),"g"),_r=RegExp("[\\u200d"+Ut+Tt+Ft+"]"),vr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yr=-1,dr={};dr[Vn]=dr[Gn]=dr[Hn]=dr[Jn]=dr[Yn]=dr[Qn]=dr[Xn]=dr[nt]=dr[tt]=!0,dr[jn]=dr[An]=dr[Zn]=dr[On]=dr[Kn]=dr[In]=dr[zn]=dr[En]=dr[Wn]=dr[Ln]=dr[Bn]=dr[$n]=dr[Dn]=dr[Mn]=dr[Pn]=!1;var br={};br[jn]=br[An]=br[Zn]=br[Kn]=br[On]=br[In]=br[Vn]=br[Gn]=br[Hn]=br[Jn]=br[Yn]=br[Wn]=br[Ln]=br[Bn]=br[$n]=br[Dn]=br[Mn]=br[Fn]=br[Qn]=br[Xn]=br[nt]=br[tt]=!0,br[zn]=br[En]=br[Pn]=!1;var wr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mr=parseFloat,xr=parseInt,jr="object"==typeof n&&n&&n.Object===Object&&n,Ar="object"==typeof self&&self&&self.Object===Object&&self,kr=jr||Ar||Function("return this")(),Or="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ir=Or&&"object"==typeof module&&module&&!module.nodeType&&module,Rr=Ir&&Ir.exports===Or,zr=Rr&&jr.process,Er=function(){try{return zr&&zr.binding&&zr.binding("util")}catch(n){}}(),Sr=Er&&Er.isArrayBuffer,Wr=Er&&Er.isDate,Lr=Er&&Er.isMap,Cr=Er&&Er.isRegExp,Br=Er&&Er.isSet,Ur=Er&&Er.isTypedArray,Tr=x("length"),$r=j({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Dr=j({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Mr=j({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Fr=function n(j){function Ut(n){if(pi(n)&&!uc(n)&&!(n instanceof Dt)){if(n instanceof $t)return n;if(ro.call(n,"__wrapped__"))return Uu(n)}return new $t(n)}function Tt(){}function $t(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=M}function Dt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bn,this.__views__=[]}function Mt(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Ft(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Nt(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Pt(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Nt;++t<r;)this.add(n[t])}function qt(n){var t=this.__data__=new Ft(n);this.size=t.size}function Zt(n,t){var r=uc(n),e=!r&&ec(n),u=!r&&!e&&oc(n),i=!r&&!e&&!u&&sc(n),o=r||e||u||i,f=o?O(n.length,Hi):[],c=f.length;for(var a in n)!t&&!ro.call(n,a)||o&&("length"==a||u&&("offset"==a||"parent"==a)||i&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||xu(a,c))||f.push(a);return f}function Kt(n){var t=n.length;return t?n[fe(0,t-1)]:M}function Vt(n,t){return Lu($e(n),rr(t,0,n.length))}function Gt(n){return Lu($e(n))}function Ht(n,t,r){(r===M||ii(n[t],r))&&(r!==M||t in n)||nr(n,t,r)}function Jt(n,t,r){var e=n[t];ro.call(n,t)&&ii(e,r)&&(r!==M||t in n)||nr(n,t,r)}function Yt(n,t){for(var r=n.length;r--;)if(ii(n[r][0],t))return r;return-1}function Qt(n,t,r,e){return tf(n,function(n,u,i){t(e,n,r(n),i)}),e}function Xt(n,t){return n&&De(t,Ii(t),n)}function nr(n,t,r){"__proto__"==t&&mo?mo(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function tr(n,t){for(var r=-1,e=t.length,u=Ni(e),i=null==n;++r<e;)u[r]=i?M:ki(n,t[r]);return u}function rr(n,t,r){return n==n&&(r!==M&&(n=n<=r?n:r),t!==M&&(n=n>=t?n:t)),n}function er(n,e,u,o,f,c){var a,l=e&V,s=e&G,h=e&H;if(u&&(a=f?u(n,o,f,c):u(n)),a!==M)return a;if(!hi(n))return n;var _=uc(n);if(_){if(a=function(n){var t=n.length,r=n.constructor(t);return t&&"string"==typeof n[0]&&ro.call(n,"index")&&(r.index=n.index,r.input=n.input),r}(n),!l)return $e(n,a)}else{var v=_f(n),g=v==En||v==Sn;if(oc(n))return We(n,l);if(v==Bn||v==jn||g&&!f){if(a=s||g?{}:wu(n),!l)return s?function(n,t){return De(n,pf(n),t)}(n,function(n,t){return n&&De(t,Ri(t),n)}(a,n)):function(n,t){return De(n,hf(n),t)}(n,Xt(a,n))}else{if(!br[v])return f?n:{};a=function(n,e,u,i){var o=n.constructor;switch(e){case Zn:return Le(n);case On:case In:return new o(+n);case Kn:return function(n,t){var r=t?Le(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}(n,i);case Vn:case Gn:case Hn:case Jn:case Yn:case Qn:case Xn:case nt:case tt:return Ce(n,i);case Wn:return function(n,r,e){return p(r?e(C(n),V):C(n),t,new n.constructor)}(n,i,u);case Ln:case Mn:return new o(n);case $n:return function(n){var t=new n.constructor(n.source,It.exec(n));return t.lastIndex=n.lastIndex,t}(n);case Dn:return function(n,t,e){return p(t?e(T(n),V):T(n),r,new n.constructor)}(n,i,u);case Fn:return function(n){return Qo?Vi(Qo.call(n)):{}}(n)}}(n,v,er,l)}}c||(c=new qt);var y=c.get(n);if(y)return y;c.set(n,a);var d=_?M:(h?s?hu:su:s?Ri:Ii)(n);return i(d||n,function(t,r){d&&(t=n[r=t]),Jt(a,r,er(t,e,u,r,n,c))}),a}function ur(n,t,r){var e=r.length;if(null==n)return!e;for(n=Vi(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===M&&!(u in n)||!i(o))return!1}return!0}function ir(n,t,r){if("function"!=typeof n)throw new Ji(P);return yf(function(){n.apply(M,r)},t)}function or(n,t,r,e){var u=-1,i=a,o=!0,f=n.length,c=[],h=t.length;if(!f)return c;r&&(t=s(t,I(r))),e?(i=l,o=!1):t.length>=F&&(i=z,o=!1,t=new Pt(t));n:for(;++u<f;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,o&&_==_){for(var v=h;v--;)if(t[v]===_)continue n;c.push(p)}else i(t,_,e)||c.push(p)}return c}function fr(n,t){var r=!0;return tf(n,function(n,e,u){return r=!!t(n,e,u)}),r}function cr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===M?o==o&&!yi(o):r(o,f)))var f=o,c=i}return c}function ar(n,t){var r=[];return tf(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function hr(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=mu),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?hr(f,t-1,r,e,u):h(u,f):e||(u[u.length]=f)}return u}function _r(n,t){return n&&ef(n,t,Ii)}function wr(n,t){return n&&uf(n,t,Ii)}function jr(n,t){return c(t,function(t){return ai(n[t])})}function Ar(n,t){for(var r=0,e=(t=Ee(t,n)).length;null!=n&&r<e;)n=n[Cu(t[r++])];return r&&r==e?n:M}function Or(n,t,r){var e=t(n);return uc(n)?e:h(e,r(n))}function Ir(n){return null==n?n===M?Nn:Cn:wo&&wo in Vi(n)?function(n){var t=ro.call(n,wo),r=n[wo];try{n[wo]=M;var e=!0}catch(n){}var u=io.call(n);return e&&(t?n[wo]=r:delete n[wo]),u}(n):function(n){return io.call(n)}(n)}function zr(n,t){return n>t}function Er(n,t){return null!=n&&ro.call(n,t)}function Tr(n,t){return null!=n&&t in Vi(n)}function Nr(n,t,r){for(var e=r?l:a,u=n[0].length,i=n.length,o=i,f=Ni(i),c=1/0,h=[];o--;){var p=n[o];o&&t&&(p=s(p,I(t))),c=Lo(p.length,c),f[o]=!r&&(t||u>=120&&p.length>=120)?new Pt(o&&p):M}p=n[0];var _=-1,v=f[0];n:for(;++_<u&&h.length<c;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?z(v,y):e(h,y,r))){for(o=i;--o;){var d=f[o];if(!(d?z(d,y):e(n[o],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Pr(n,t,r){var u=null==(n=Eu(n,t=Ee(t,n)))?n:n[Cu(Fu(t))];return null==u?M:e(u,n,r)}function qr(n){return pi(n)&&Ir(n)==jn}function Zr(n,t,r,e,u){return n===t||(null==n||null==t||!pi(n)&&!pi(t)?n!=n&&t!=t:function(n,t,r,e,u,i){var o=uc(n),f=uc(t),c=o?An:_f(n),a=f?An:_f(t),l=(c=c==jn?Bn:c)==Bn,s=(a=a==jn?Bn:a)==Bn,h=c==a;if(h&&oc(n)){if(!oc(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new qt),o||sc(n)?au(n,t,r,e,u,i):function(n,t,r,e,u,i,o){switch(r){case Kn:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Zn:return!(n.byteLength!=t.byteLength||!i(new so(n),new so(t)));case On:case In:case Ln:return ii(+n,+t);case zn:return n.name==t.name&&n.message==t.message;case $n:case Mn:return n==t+"";case Wn:var f=C;case Dn:var c=e&J;if(f||(f=T),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=Y,o.set(n,t);var l=au(f(n),f(t),e,u,i,o);return o.delete(n),l;case Fn:if(Qo)return Qo.call(n)==Qo.call(t)}return!1}(n,t,c,r,e,u,i);if(!(r&J)){var p=l&&ro.call(n,"__wrapped__"),_=s&&ro.call(t,"__wrapped__");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new qt),u(v,g,r,e,i)}}return!!h&&(i||(i=new qt),function(n,t,r,e,u,i){var o=r&J,f=su(n),c=f.length,a=su(t).length;if(c!=a&&!o)return!1;for(var l=c;l--;){var s=f[l];if(!(o?s in t:ro.call(t,s)))return!1}var h=i.get(n);if(h&&i.get(t))return h==t;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++l<c;){s=f[l];var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(!(y===M?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_="constructor"==s)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&"constructor"in n&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),i.delete(t),p}(n,t,r,e,u,i))}(n,t,r,e,Zr,u))}function Kr(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Vi(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){var c=(f=r[u])[0],a=n[c],l=f[1];if(o&&f[2]){if(a===M&&!(c in n))return!1}else{var s=new qt;if(e)var h=e(a,l,c,n,t,s);if(!(h===M?Zr(l,a,J|Y,e,s):h))return!1}}return!0}function Vr(n){return!(!hi(n)||function(n){return!!uo&&uo in n}(n))&&(ai(n)?co:Et).test(Bu(n))}function Gr(n){return"function"==typeof n?n:null==n?Bi:"object"==typeof n?uc(n)?ne(n[0],n[1]):Xr(n):Di(n)}function Hr(n){if(!Ou(n))return So(n);var t=[];for(var r in Vi(n))ro.call(n,r)&&"constructor"!=r&&t.push(r);return t}function Jr(n){if(!hi(n))return function(n){var t=[];if(null!=n)for(var r in Vi(n))t.push(r);return t}(n);var t=Ou(n),r=[];for(var e in n)("constructor"!=e||!t&&ro.call(n,e))&&r.push(e);return r}function Yr(n,t){return n<t}function Qr(n,t){var r=-1,e=oi(n)?Ni(n.length):[];return tf(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Xr(n){var t=yu(n);return 1==t.length&&t[0][2]?Ru(t[0][0],t[0][1]):function(r){return r===n||Kr(r,n,t)}}function ne(n,t){return Au(n)&&Iu(t)?Ru(Cu(n),t):function(r){var e=ki(r,n);return e===M&&e===t?Oi(r,n):Zr(t,e,J|Y)}}function te(n,t,r,e,u){n!==t&&ef(t,function(i,o){if(hi(i))u||(u=new qt),function(n,t,r,e,u,i,o){var f=n[r],c=t[r],a=o.get(c);if(a)Ht(n,r,a);else{var l=i?i(f,c,r+"",n,t,o):M,s=l===M;if(s){var h=uc(c),p=!h&&oc(c),_=!h&&!p&&sc(c);l=c,h||p||_?uc(f)?l=f:fi(f)?l=$e(f):p?(s=!1,l=We(c,!0)):_?(s=!1,l=Ce(c,!0)):l=[]:vi(c)||ec(c)?(l=f,ec(f)?l=ji(f):(!hi(f)||e&&ai(f))&&(l=wu(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Ht(n,r,l)}}(n,t,o,r,te,e,u);else{var f=e?e(n[o],i,o+"",n,t,u):M;f===M&&(f=i),Ht(n,o,f)}},Ri)}function re(n,t){var r=n.length;if(r)return t+=t<0?r:0,xu(t,r)?n[t]:M}function ee(n,t,r){var e=-1;return t=s(t.length?t:[Bi],I(vu())),function(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}(Qr(n,function(n,r,u){return{criteria:s(t,function(t){return t(n)}),index:++e,value:n}}),function(n,t){return function(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Be(u[e],i[e]);if(c){if(e>=f)return c;var a=r[e];return c*("desc"==a?-1:1)}}return n.index-t.index}(n,t,r)})}function ue(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=Ar(n,o);r(f,o)&&he(i,Ee(o,n),f)}return i}function ie(n,t,r,e){var u=e?b:d,i=-1,o=t.length,f=n;for(n===t&&(t=$e(t)),r&&(f=s(n,I(r)));++i<o;)for(var c=0,a=t[i],l=r?r(a):a;(c=u(f,l,c,e))>-1;)f!==n&&go.call(f,c,1),go.call(n,c,1);return n}function oe(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;xu(u)?go.call(n,u,1):xe(n,u)}}return n}function fe(n,t){return n+Oo(Uo()*(t-n+1))}function ce(n,t){var r="";if(!n||t<1||t>gn)return r;do{t%2&&(r+=n),(t=Oo(t/2))&&(n+=n)}while(t);return r}function ae(n,t){return df(zu(n,t,Bi),n+"")}function le(n){return Kt(Ei(n))}function se(n,t){var r=Ei(n);return Lu(r,rr(t,0,r.length))}function he(n,t,r,e){if(!hi(n))return n;for(var u=-1,i=(t=Ee(t,n)).length,o=i-1,f=n;null!=f&&++u<i;){var c=Cu(t[u]),a=r;if(u!=o){var l=f[c];(a=e?e(l,c,f):M)===M&&(a=hi(l)?l:xu(t[u+1])?[]:{})}Jt(f,c,a),f=f[c]}return n}function pe(n){return Lu(Ei(n))}function _e(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Ni(u);++e<u;)i[e]=n[e+t];return i}function ve(n,t){var r;return tf(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function ge(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=mn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!yi(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return ye(n,t,Bi,r)}function ye(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!=t,f=null===t,c=yi(t),a=t===M;u<i;){var l=Oo((u+i)/2),s=r(n[l]),h=s!==M,p=null===s,_=s==s,v=yi(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Lo(i,wn)}function de(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!ii(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function be(n){return"number"==typeof n?n:yi(n)?dn:+n}function we(n){if("string"==typeof n)return n;if(uc(n))return s(n,we)+"";if(yi(n))return Xo?Xo.call(n):"";var t=n+"";return"0"==t&&1/n==-vn?"-0":t}function me(n,t,r){var e=-1,u=a,i=n.length,o=!0,f=[],c=f;if(r)o=!1,u=l;else if(i>=F){var s=t?null:lf(n);if(s)return T(s);o=!1,u=z,c=new Pt}else c=t?[]:f;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,o&&p==p){for(var _=c.length;_--;)if(c[_]===p)continue n;t&&c.push(p),f.push(h)}else u(c,p,r)||(c!==f&&c.push(p),f.push(h))}return f}function xe(n,t){return t=Ee(t,n),null==(n=Eu(n,t))||delete n[Cu(Fu(t))]}function je(n,t,r,e){return he(n,t,r(Ar(n,t)),e)}function Ae(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?_e(n,e?0:i,e?i+1:u):_e(n,e?i+1:0,e?u:i)}function ke(n,t){var r=n;return r instanceof Dt&&(r=r.value()),p(t,function(n,t){return t.func.apply(t.thisArg,h([n],t.args))},r)}function Oe(n,t,r){var e=n.length;if(e<2)return e?me(n[0]):[];for(var u=-1,i=Ni(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=or(i[u]||o,n[f],t,r));return me(hr(i,1),t,r)}function Ie(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){var f=e<i?t[e]:M;r(o,n[e],f)}return o}function Re(n){return fi(n)?n:[]}function ze(n){return"function"==typeof n?n:Bi}function Ee(n,t){return uc(n)?n:Au(n,t)?[n]:bf(Ai(n))}function Se(n,t,r){var e=n.length;return r=r===M?e:r,!t&&r>=e?n:_e(n,t,r)}function We(n,t){if(t)return n.slice();var r=n.length,e=ho?ho(r):new n.constructor(r);return n.copy(e),e}function Le(n){var t=new n.constructor(n.byteLength);return new so(t).set(new so(n)),t}function Ce(n,t){var r=t?Le(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function Be(n,t){if(n!==t){var r=n!==M,e=null===n,u=n==n,i=yi(n),o=t!==M,f=null===t,c=t==t,a=yi(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Ue(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Wo(i-o,0),l=Ni(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function Te(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Wo(i-f,0),s=Ni(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function $e(n,t){var r=-1,e=n.length;for(t||(t=Ni(e));++r<e;)t[r]=n[r];return t}function De(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):M;c===M&&(c=n[f]),u?nr(r,f,c):Jt(r,f,c)}return r}function Me(n,t){return function(r,e){var i=uc(r)?u:Qt,o=t?t():{};return i(r,n,vu(e,2),o)}}function Fe(n){return ae(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:M,o=u>2?r[2]:M;for(i=n.length>3&&"function"==typeof i?(u--,i):M,o&&ju(r[0],r[1],o)&&(i=u<3?M:i,u=1),t=Vi(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Ne(n,t){return function(r,e){if(null==r)return r;if(!oi(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Vi(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function Pe(n){return function(t,r,e){for(var u=-1,i=Vi(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(!1===r(i[c],c,i))break}return t}}function qe(n){return function(t){var r=L(t=Ai(t))?D(t):M,e=r?r[0]:t.charAt(0),u=r?Se(r,1).join(""):t.slice(1);return e[n]()+u}}function Ze(n){return function(t){return p(Li(Wi(t).replace(lr,"")),n,"")}}function Ke(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=nf(n.prototype),e=n.apply(r,t);return hi(e)?e:r}}function Ve(n){return function(t,r,e){var u=Vi(t);if(!oi(t)){var i=vu(r,3);t=Ii(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:M}}function Ge(n){return lu(function(t){var r=t.length,e=r,u=$t.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new Ji(P);if(u&&!o&&"wrapper"==pu(i))var o=new $t([],!0)}for(e=o?e:r;++e<r;){var f=pu(i=t[e]),c="wrapper"==f?sf(i):M;o=c&&ku(c[0])&&c[1]==(on|tn|en|fn)&&!c[4].length&&1==c[9]?o[pu(c[0])].apply(o,c[3]):1==i.length&&ku(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&uc(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function He(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=Ni(y),b=y;b--;)d[b]=arguments[b];if(_)var w=_u(l),m=function(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}(d,w);if(e&&(d=Ue(d,e,u,_)),i&&(d=Te(d,i,o,_)),y-=m,_&&y<a){var x=U(d,w);return ru(n,t,He,l.placeholder,r,d,x,f,c,a-y)}var j=h?r:this,A=p?j[n]:n;return y=d.length,f?d=function(n,t){for(var r=n.length,e=Lo(t.length,r),u=$e(n);e--;){var i=t[e];n[e]=xu(i,r)?u[i]:M}return n}(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==kr&&this instanceof l&&(A=g||Ke(A)),A.apply(j,d)}var s=t&on,h=t&Q,p=t&X,_=t&(tn|rn),v=t&cn,g=p?M:Ke(n);return l}function Je(n,t){return function(r,e){return function(n,t,r,e){return _r(n,function(n,u,i){t(e,r(n),u,i)}),e}(r,n,t(e),{})}}function Ye(n,t){return function(r,e){var u;if(r===M&&e===M)return t;if(r!==M&&(u=r),e!==M){if(u===M)return e;"string"==typeof r||"string"==typeof e?(r=we(r),e=we(e)):(r=be(r),e=be(e)),u=n(r,e)}return u}}function Qe(n){return lu(function(t){return t=s(t,I(vu())),ae(function(r){var u=this;return n(t,function(n){return e(n,u,r)})})})}function Xe(n,t){var r=(t=t===M?" ":we(t)).length;if(r<2)return r?ce(t,n):t;var e=ce(t,ko(n/$(t)));return L(t)?Se(D(e),0,n).join(""):e.slice(0,n)}function nu(n){return function(t,r,e){return e&&"number"!=typeof e&&ju(t,r,e)&&(r=e=M),t=bi(t),r===M?(r=t,t=0):r=bi(r),e=e===M?t<r?1:-1:bi(e),function(n,t,r,e){for(var u=-1,i=Wo(ko((t-n)/(r||1)),0),o=Ni(i);i--;)o[e?i:++u]=n,n+=r;return o}(t,r,e,n)}}function tu(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=xi(t),r=xi(r)),n(t,r)}}function ru(n,t,r,e,u,i,o,f,c,a){var l=t&tn;t|=l?en:un,(t&=~(l?un:en))&nn||(t&=~(Q|X));var s=[n,t,u,l?i:M,l?o:M,l?M:i,l?M:o,f,c,a],h=r.apply(M,s);return ku(n)&&gf(h,s),h.placeholder=e,Su(h,n,t)}function eu(n){var t=Ki[n];return function(n,r){if(n=xi(n),r=null==r?0:Lo(wi(r),292)){var e=(Ai(n)+"e").split("e");return+((e=(Ai(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"))[0]+"e"+(+e[1]-r))}return t(n)}}function uu(n){return function(t){var r=_f(t);return r==Wn?C(t):r==Dn?function(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}(t):function(n,t){return s(t,function(t){return[t,n[t]]})}(t,n(t))}}function iu(n,t,r,u,i,o,f,c){var a=t&X;if(!a&&"function"!=typeof n)throw new Ji(P);var l=u?u.length:0;if(l||(t&=~(en|un),u=i=M),f=f===M?f:Wo(wi(f),0),c=c===M?c:wi(c),l-=i?i.length:0,t&un){var s=u,h=i;u=i=M}var p=a?M:sf(n),_=[n,t,r,u,i,s,h,o,f,c];if(p&&function(n,t){var r=n[1],e=t[1],u=r|e,i=u<(Q|X|on),o=e==on&&r==tn||e==on&&r==fn&&n[7].length<=t[8]||e==(on|fn)&&t[7].length<=t[8]&&r==tn;if(!i&&!o)return n;e&Q&&(n[2]=t[2],u|=r&Q?0:nn);var f=t[3];if(f){var c=n[3];n[3]=c?Ue(c,f,t[4]):f,n[4]=c?U(n[3],K):t[4]}(f=t[5])&&(c=n[5],n[5]=c?Te(c,f,t[6]):f,n[6]=c?U(n[5],K):t[6]),(f=t[7])&&(n[7]=f),e&on&&(n[8]=null==n[8]?t[8]:Lo(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u}(_,p),n=_[0],t=_[1],r=_[2],u=_[3],i=_[4],!(c=_[9]=_[9]===M?a?0:n.length:Wo(_[9]-l,0))&&t&(tn|rn)&&(t&=~(tn|rn)),t&&t!=Q)v=t==tn||t==rn?function(n,t,r){function u(){for(var o=arguments.length,f=Ni(o),c=o,a=_u(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:U(f,a);return(o-=l.length)<r?ru(n,t,He,u.placeholder,M,f,l,M,M,r-o):e(this&&this!==kr&&this instanceof u?i:n,this,f)}var i=Ke(n);return u}(n,t,c):t!=en&&t!=(Q|en)||i.length?He.apply(M,_):function(n,t,r,u){function i(){for(var t=-1,c=arguments.length,a=-1,l=u.length,s=Ni(l+c),h=this&&this!==kr&&this instanceof i?f:n;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++t];return e(h,o?r:this,s)}var o=t&Q,f=Ke(n);return i}(n,t,r,u);else var v=function(n,t,r){function e(){return(this&&this!==kr&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&Q,i=Ke(n);return e}(n,t,r);return Su((p?of:gf)(v,_),n,t)}function ou(n,t,r,e){return n===M||ii(n,Xi[r])&&!ro.call(e,r)?t:n}function fu(n,t,r,e,u,i){return hi(n)&&hi(t)&&(i.set(t,n),te(n,t,M,fu,i),i.delete(t)),n}function cu(n){return vi(n)?M:n}function au(n,t,r,e,u,i){var o=r&J,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n);if(a&&i.get(t))return a==t;var l=-1,s=!0,h=r&Y?new Pt:M;for(i.set(n,t),i.set(t,n);++l<f;){var p=n[l],_=t[l];if(e)var g=o?e(_,p,l,t,n,i):e(p,_,l,n,t,i);if(g!==M){if(g)continue;s=!1;break}if(h){if(!v(t,function(n,t){if(!z(h,t)&&(p===n||u(p,n,r,e,i)))return h.push(t)})){s=!1;break}}else if(p!==_&&!u(p,_,r,e,i)){s=!1;break}}return i.delete(n),i.delete(t),s}function lu(n){return df(zu(n,M,Du),n+"")}function su(n){return Or(n,Ii,hf)}function hu(n){return Or(n,Ri,pf)}function pu(n){for(var t=n.name+"",r=Zo[t],e=ro.call(Zo,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function _u(n){return(ro.call(Ut,"placeholder")?Ut:n).placeholder}function vu(){var n=Ut.iteratee||Ui;return n=n===Ui?Gr:n,arguments.length?n(arguments[0],arguments[1]):n}function gu(n,t){var r=n.__data__;return function(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}(t)?r["string"==typeof t?"string":"hash"]:r.map}function yu(n){for(var t=Ii(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Iu(u)]}return t}function du(n,t){var r=function(n,t){return null==n?M:n[t]}(n,t);return Vr(r)?r:M}function bu(n,t,r){for(var e=-1,u=(t=Ee(t,n)).length,i=!1;++e<u;){var o=Cu(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:!!(u=null==n?0:n.length)&&si(u)&&xu(o,u)&&(uc(n)||ec(n))}function wu(n){return"function"!=typeof n.constructor||Ou(n)?{}:nf(po(n))}function mu(n){return uc(n)||ec(n)||!!(yo&&n&&n[yo])}function xu(n,t){return!!(t=null==t?gn:t)&&("number"==typeof n||Wt.test(n))&&n>-1&&n%1==0&&n<t}function ju(n,t,r){if(!hi(r))return!1;var e=typeof t;return!!("number"==e?oi(r)&&xu(t,r.length):"string"==e&&t in r)&&ii(r[t],n)}function Au(n,t){if(uc(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!yi(n))||pt.test(n)||!ht.test(n)||null!=t&&n in Vi(t)}function ku(n){var t=pu(n),r=Ut[t];if("function"!=typeof r||!(t in Dt.prototype))return!1;if(n===r)return!0;var e=sf(r);return!!e&&n===e[0]}function Ou(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Xi)}function Iu(n){return n==n&&!hi(n)}function Ru(n,t){return function(r){return null!=r&&r[n]===t&&(t!==M||n in Vi(r))}}function zu(n,t,r){return t=Wo(t===M?n.length-1:t,0),function(){for(var u=arguments,i=-1,o=Wo(u.length-t,0),f=Ni(o);++i<o;)f[i]=u[t+i];i=-1;for(var c=Ni(t+1);++i<t;)c[i]=u[i];return c[t]=r(f),e(n,this,c)}}function Eu(n,t){return t.length<2?n:Ar(n,_e(t,0,-1))}function Su(n,t,r){var e=t+"";return df(n,function(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(mt,"{\n/* [wrapped with "+t+"] */\n")}(e,function(n,t){return i(xn,function(r){var e="_."+r[0];t&r[1]&&!a(n,e)&&n.push(e)}),n.sort()}(function(n){var t=n.match(xt);return t?t[1].split(jt):[]}(e),r)))}function Wu(n){var t=0,r=0;return function(){var e=Co(),u=hn-(e-r);if(r=e,u>0){if(++t>=sn)return arguments[0]}else t=0;return n.apply(M,arguments)}}function Lu(n,t){var r=-1,e=n.length,u=e-1;for(t=t===M?e:t;++r<t;){var i=fe(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function Cu(n){if("string"==typeof n||yi(n))return n;var t=n+"";return"0"==t&&1/n==-vn?"-0":t}function Bu(n){if(null!=n){try{return to.call(n)}catch(n){}try{return n+""}catch(n){}}return""}function Uu(n){if(n instanceof Dt)return n.clone();var t=new $t(n.__wrapped__,n.__chain__);return t.__actions__=$e(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Tu(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:wi(r);return u<0&&(u=Wo(e+u,0)),y(n,vu(t,3),u)}function $u(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==M&&(u=wi(r),u=r<0?Wo(e+u,0):Lo(u,e-1)),y(n,vu(t,3),u,!0)}function Du(n){return null!=n&&n.length?hr(n,1):[]}function Mu(n){return n&&n.length?n[0]:M}function Fu(n){var t=null==n?0:n.length;return t?n[t-1]:M}function Nu(n,t){return n&&n.length&&t&&t.length?ie(n,t):n}function Pu(n){return null==n?n:To.call(n)}function qu(n){if(!n||!n.length)return[];var t=0;return n=c(n,function(n){if(fi(n))return t=Wo(n.length,t),!0}),O(t,function(t){return s(n,x(t))})}function Zu(n,t){if(!n||!n.length)return[];var r=qu(n);return null==t?r:s(r,function(n){return e(t,M,n)})}function Ku(n){var t=Ut(n);return t.__chain__=!0,t}function Vu(n,t){return t(n)}function Gu(){return this}function Hu(n,t){return(uc(n)?i:tf)(n,vu(t,3))}function Ju(n,t){return(uc(n)?o:rf)(n,vu(t,3))}function Yu(n,t){return(uc(n)?s:Qr)(n,vu(t,3))}function Qu(n,t,r){return t=r?M:t,t=n&&null==t?n.length:t,iu(n,on,M,M,M,M,t)}function Xu(n,t){var r;if("function"!=typeof t)throw new Ji(P);return n=wi(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=M),r}}function ni(n,t,r){var e=iu(n,tn,M,M,M,M,M,t=r?M:t);return e.placeholder=ni.placeholder,e}function ti(n,t,r){var e=iu(n,rn,M,M,M,M,M,t=r?M:t);return e.placeholder=ti.placeholder,e}function ri(n,t,r){function e(t){var r=c,e=a;return c=a=M,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return p===M||r>=t||r<0||g&&n-_>=l}function i(){var n=Kf();if(u(n))return o(n);h=yf(i,function(n){var r=t-(n-p);return g?Lo(r,l-(n-_)):r}(n))}function o(n){return h=M,y&&c?e(n):(c=a=M,s)}function f(){var n=Kf(),r=u(n);if(c=arguments,a=this,p=n,r){if(h===M)return function(n){return _=n,h=yf(i,t),v?e(n):s}(p);if(g)return h=yf(i,t),e(p)}return h===M&&(h=yf(i,t)),s}var c,a,l,s,h,p,_=0,v=!1,g=!1,y=!0;if("function"!=typeof n)throw new Ji(P);return t=xi(t)||0,hi(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Wo(xi(r.maxWait)||0,t):l,y="trailing"in r?!!r.trailing:y),f.cancel=function(){h!==M&&af(h),_=0,c=p=a=h=M},f.flush=function(){return h===M?s:o(Kf())},f}function ei(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new Ji(P);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(ei.Cache||Nt),r}function ui(n){if("function"!=typeof n)throw new Ji(P);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function ii(n,t){return n===t||n!=n&&t!=t}function oi(n){return null!=n&&si(n.length)&&!ai(n)}function fi(n){return pi(n)&&oi(n)}function ci(n){if(!pi(n))return!1;var t=Ir(n);return t==zn||t==Rn||"string"==typeof n.message&&"string"==typeof n.name&&!vi(n)}function ai(n){if(!hi(n))return!1;var t=Ir(n);return t==En||t==Sn||t==kn||t==Tn}function li(n){return"number"==typeof n&&n==wi(n)}function si(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=gn}function hi(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function pi(n){return null!=n&&"object"==typeof n}function _i(n){return"number"==typeof n||pi(n)&&Ir(n)==Ln}function vi(n){if(!pi(n)||Ir(n)!=Bn)return!1;var t=po(n);if(null===t)return!0;var r=ro.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&to.call(r)==oo}function gi(n){return"string"==typeof n||!uc(n)&&pi(n)&&Ir(n)==Mn}function yi(n){return"symbol"==typeof n||pi(n)&&Ir(n)==Fn}function di(n){if(!n)return[];if(oi(n))return gi(n)?D(n):$e(n);if(bo&&n[bo])return function(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}(n[bo]());var t=_f(n);return(t==Wn?C:t==Dn?T:Ei)(n)}function bi(n){return n?(n=xi(n))===vn||n===-vn?(n<0?-1:1)*yn:n==n?n:0:0===n?n:0}function wi(n){var t=bi(n),r=t%1;return t==t?r?t-r:t:0}function mi(n){return n?rr(wi(n),0,bn):0}function xi(n){if("number"==typeof n)return n;if(yi(n))return dn;if(hi(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=hi(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(dt,"");var r=zt.test(n);return r||St.test(n)?xr(n.slice(2),r?2:8):Rt.test(n)?dn:+n}function ji(n){return De(n,Ri(n))}function Ai(n){return null==n?"":we(n)}function ki(n,t,r){var e=null==n?M:Ar(n,t);return e===M?r:e}function Oi(n,t){return null!=n&&bu(n,t,Tr)}function Ii(n){return oi(n)?Zt(n):Hr(n)}function Ri(n){return oi(n)?Zt(n,!0):Jr(n)}function zi(n,t){if(null==n)return{};var r=s(hu(n),function(n){return[n]});return t=vu(t),ue(n,r,function(n,r){return t(n,r[0])})}function Ei(n){return null==n?[]:R(n,Ii(n))}function Si(n){return Tc(Ai(n).toLowerCase())}function Wi(n){return(n=Ai(n))&&n.replace(Lt,$r).replace(sr,"")}function Li(n,t,r){return n=Ai(n),(t=r?M:t)===M?function(n){return vr.test(n)}(n)?function(n){return n.match(pr)||[]}(n):function(n){return n.match(At)||[]}(n):n.match(t)||[]}function Ci(n){return function(){return n}}function Bi(n){return n}function Ui(n){return Gr("function"==typeof n?n:er(n,V))}function Ti(n,t,r){var e=Ii(t),u=jr(t,e);null!=r||hi(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=jr(t,Ii(t)));var o=!(hi(r)&&"chain"in r&&!r.chain),f=ai(n);return i(u,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=$e(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,h([this.value()],arguments))})}),n}function $i(){}function Di(n){return Au(n)?x(Cu(n)):function(n){return function(t){return Ar(t,n)}}(n)}function Mi(){return[]}function Fi(){return!1}var Ni=(j=null==j?kr:Fr.defaults(kr.Object(),j,Fr.pick(kr,gr))).Array,Pi=j.Date,qi=j.Error,Zi=j.Function,Ki=j.Math,Vi=j.Object,Gi=j.RegExp,Hi=j.String,Ji=j.TypeError,Yi=Ni.prototype,Qi=Zi.prototype,Xi=Vi.prototype,no=j["__core-js_shared__"],to=Qi.toString,ro=Xi.hasOwnProperty,eo=0,uo=function(){var n=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),io=Xi.toString,oo=to.call(Vi),fo=kr._,co=Gi("^"+to.call(ro).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=Rr?j.Buffer:M,lo=j.Symbol,so=j.Uint8Array,ho=ao?ao.allocUnsafe:M,po=B(Vi.getPrototypeOf,Vi),_o=Vi.create,vo=Xi.propertyIsEnumerable,go=Yi.splice,yo=lo?lo.isConcatSpreadable:M,bo=lo?lo.iterator:M,wo=lo?lo.toStringTag:M,mo=function(){try{var n=du(Vi,"defineProperty");return n({},"",{}),n}catch(n){}}(),xo=j.clearTimeout!==kr.clearTimeout&&j.clearTimeout,jo=Pi&&Pi.now!==kr.Date.now&&Pi.now,Ao=j.setTimeout!==kr.setTimeout&&j.setTimeout,ko=Ki.ceil,Oo=Ki.floor,Io=Vi.getOwnPropertySymbols,Ro=ao?ao.isBuffer:M,zo=j.isFinite,Eo=Yi.join,So=B(Vi.keys,Vi),Wo=Ki.max,Lo=Ki.min,Co=Pi.now,Bo=j.parseInt,Uo=Ki.random,To=Yi.reverse,$o=du(j,"DataView"),Do=du(j,"Map"),Mo=du(j,"Promise"),Fo=du(j,"Set"),No=du(j,"WeakMap"),Po=du(Vi,"create"),qo=No&&new No,Zo={},Ko=Bu($o),Vo=Bu(Do),Go=Bu(Mo),Ho=Bu(Fo),Jo=Bu(No),Yo=lo?lo.prototype:M,Qo=Yo?Yo.valueOf:M,Xo=Yo?Yo.toString:M,nf=function(){function n(){}return function(t){if(!hi(t))return{};if(_o)return _o(t);n.prototype=t;var r=new n;return n.prototype=M,r}}();Ut.templateSettings={escape:at,evaluate:lt,interpolate:st,variable:"",imports:{_:Ut}},(Ut.prototype=Tt.prototype).constructor=Ut,($t.prototype=nf(Tt.prototype)).constructor=$t,(Dt.prototype=nf(Tt.prototype)).constructor=Dt,Mt.prototype.clear=function(){this.__data__=Po?Po(null):{},this.size=0},Mt.prototype.delete=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},Mt.prototype.get=function(n){var t=this.__data__;if(Po){var r=t[n];return r===q?M:r}return ro.call(t,n)?t[n]:M},Mt.prototype.has=function(n){var t=this.__data__;return Po?t[n]!==M:ro.call(t,n)},Mt.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Po&&t===M?q:t,this},Ft.prototype.clear=function(){this.__data__=[],this.size=0},Ft.prototype.delete=function(n){var t=this.__data__,r=Yt(t,n);return!(r<0||(r==t.length-1?t.pop():go.call(t,r,1),--this.size,0))},Ft.prototype.get=function(n){var t=this.__data__,r=Yt(t,n);return r<0?M:t[r][1]},Ft.prototype.has=function(n){return Yt(this.__data__,n)>-1},Ft.prototype.set=function(n,t){var r=this.__data__,e=Yt(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new Mt,map:new(Do||Ft),string:new Mt}},Nt.prototype.delete=function(n){var t=gu(this,n).delete(n);return this.size-=t?1:0,t},Nt.prototype.get=function(n){return gu(this,n).get(n)},Nt.prototype.has=function(n){return gu(this,n).has(n)},Nt.prototype.set=function(n,t){var r=gu(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Pt.prototype.add=Pt.prototype.push=function(n){return this.__data__.set(n,q),this},Pt.prototype.has=function(n){return this.__data__.has(n)},qt.prototype.clear=function(){this.__data__=new Ft,this.size=0},qt.prototype.delete=function(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r},qt.prototype.get=function(n){return this.__data__.get(n)},qt.prototype.has=function(n){return this.__data__.has(n)},qt.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Ft){var e=r.__data__;if(!Do||e.length<F-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Nt(e)}return r.set(n,t),this.size=r.size,this};var tf=Ne(_r),rf=Ne(wr,!0),ef=Pe(),uf=Pe(!0),of=qo?function(n,t){return qo.set(n,t),n}:Bi,ff=mo?function(n,t){return mo(n,"toString",{configurable:!0,enumerable:!1,value:Ci(t),writable:!0})}:Bi,cf=ae,af=xo||function(n){return kr.clearTimeout(n)},lf=Fo&&1/T(new Fo([,-0]))[1]==vn?function(n){return new Fo(n)}:$i,sf=qo?function(n){return qo.get(n)}:$i,hf=Io?function(n){return null==n?[]:(n=Vi(n),c(Io(n),function(t){return vo.call(n,t)}))}:Mi,pf=Io?function(n){for(var t=[];n;)h(t,hf(n)),n=po(n);return t}:Mi,_f=Ir;($o&&_f(new $o(new ArrayBuffer(1)))!=Kn||Do&&_f(new Do)!=Wn||Mo&&_f(Mo.resolve())!=Un||Fo&&_f(new Fo)!=Dn||No&&_f(new No)!=Pn)&&(_f=function(n){var t=Ir(n),r=t==Bn?n.constructor:M,e=r?Bu(r):"";if(e)switch(e){case Ko:return Kn;case Vo:return Wn;case Go:return Un;case Ho:return Dn;case Jo:return Pn}return t});var vf=no?ai:Fi,gf=Wu(of),yf=Ao||function(n,t){return kr.setTimeout(n,t)},df=Wu(ff),bf=function(n){var t=ei(n,function(n){return r.size===Z&&r.clear(),n}),r=t.cache;return t}(function(n){var t=[];return _t.test(n)&&t.push(""),n.replace(vt,function(n,r,e,u){t.push(e?u.replace(kt,"$1"):r||n)}),t}),wf=ae(function(n,t){return fi(n)?or(n,hr(t,1,fi,!0)):[]}),mf=ae(function(n,t){var r=Fu(t);return fi(r)&&(r=M),fi(n)?or(n,hr(t,1,fi,!0),vu(r,2)):[]}),xf=ae(function(n,t){var r=Fu(t);return fi(r)&&(r=M),fi(n)?or(n,hr(t,1,fi,!0),M,r):[]}),jf=ae(function(n){var t=s(n,Re);return t.length&&t[0]===n[0]?Nr(t):[]}),Af=ae(function(n){var t=Fu(n),r=s(n,Re);return t===Fu(r)?t=M:r.pop(),r.length&&r[0]===n[0]?Nr(r,vu(t,2)):[]}),kf=ae(function(n){var t=Fu(n),r=s(n,Re);return(t="function"==typeof t?t:M)&&r.pop(),r.length&&r[0]===n[0]?Nr(r,M,t):[]}),Of=ae(Nu),If=lu(function(n,t){var r=null==n?0:n.length,e=tr(n,t);return oe(n,s(t,function(n){return xu(n,r)?+n:n}).sort(Be)),e}),Rf=ae(function(n){return me(hr(n,1,fi,!0))}),zf=ae(function(n){var t=Fu(n);return fi(t)&&(t=M),me(hr(n,1,fi,!0),vu(t,2))}),Ef=ae(function(n){var t=Fu(n);return t="function"==typeof t?t:M,me(hr(n,1,fi,!0),M,t)}),Sf=ae(function(n,t){return fi(n)?or(n,t):[]}),Wf=ae(function(n){return Oe(c(n,fi))}),Lf=ae(function(n){var t=Fu(n);return fi(t)&&(t=M),Oe(c(n,fi),vu(t,2))}),Cf=ae(function(n){var t=Fu(n);return t="function"==typeof t?t:M,Oe(c(n,fi),M,t)}),Bf=ae(qu),Uf=ae(function(n){var t=n.length,r=t>1?n[t-1]:M;return r="function"==typeof r?(n.pop(),r):M,Zu(n,r)}),Tf=lu(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Dt&&xu(r)?((e=e.slice(r,+r+(t?1:0))).__actions__.push({func:Vu,args:[u],thisArg:M}),new $t(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(M),n})):this.thru(u)}),$f=Me(function(n,t,r){ro.call(n,r)?++n[r]:nr(n,r,1)}),Df=Ve(Tu),Mf=Ve($u),Ff=Me(function(n,t,r){ro.call(n,r)?n[r].push(t):nr(n,r,[t])}),Nf=ae(function(n,t,r){var u=-1,i="function"==typeof t,o=oi(n)?Ni(n.length):[];return tf(n,function(n){o[++u]=i?e(t,n,r):Pr(n,t,r)}),o}),Pf=Me(function(n,t,r){nr(n,r,t)}),qf=Me(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Zf=ae(function(n,t){if(null==n)return[];var r=t.length;return r>1&&ju(n,t[0],t[1])?t=[]:r>2&&ju(t[0],t[1],t[2])&&(t=[t[0]]),ee(n,hr(t,1),[])}),Kf=jo||function(){return kr.Date.now()},Vf=ae(function(n,t,r){var e=Q;if(r.length){var u=U(r,_u(Vf));e|=en}return iu(n,e,t,r,u)}),Gf=ae(function(n,t,r){var e=Q|X;if(r.length){var u=U(r,_u(Gf));e|=en}return iu(t,e,n,r,u)}),Hf=ae(function(n,t){return ir(n,1,t)}),Jf=ae(function(n,t,r){return ir(n,xi(t)||0,r)});ei.Cache=Nt;var Yf=cf(function(n,t){var r=(t=1==t.length&&uc(t[0])?s(t[0],I(vu())):s(hr(t,1),I(vu()))).length;return ae(function(u){for(var i=-1,o=Lo(u.length,r);++i<o;)u[i]=t[i].call(this,u[i]);return e(n,this,u)})}),Qf=ae(function(n,t){var r=U(t,_u(Qf));return iu(n,en,M,t,r)}),Xf=ae(function(n,t){var r=U(t,_u(Xf));return iu(n,un,M,t,r)}),nc=lu(function(n,t){return iu(n,fn,M,M,M,t)}),tc=tu(zr),rc=tu(function(n,t){return n>=t}),ec=qr(function(){return arguments}())?qr:function(n){return pi(n)&&ro.call(n,"callee")&&!vo.call(n,"callee")},uc=Ni.isArray,ic=Sr?I(Sr):function(n){return pi(n)&&Ir(n)==Zn},oc=Ro||Fi,fc=Wr?I(Wr):function(n){return pi(n)&&Ir(n)==In},cc=Lr?I(Lr):function(n){return pi(n)&&_f(n)==Wn},ac=Cr?I(Cr):function(n){return pi(n)&&Ir(n)==$n},lc=Br?I(Br):function(n){return pi(n)&&_f(n)==Dn},sc=Ur?I(Ur):function(n){return pi(n)&&si(n.length)&&!!dr[Ir(n)]},hc=tu(Yr),pc=tu(function(n,t){return n<=t}),_c=Fe(function(n,t){if(Ou(t)||oi(t))De(t,Ii(t),n);else for(var r in t)ro.call(t,r)&&Jt(n,r,t[r])}),vc=Fe(function(n,t){De(t,Ri(t),n)}),gc=Fe(function(n,t,r,e){De(t,Ri(t),n,e)}),yc=Fe(function(n,t,r,e){De(t,Ii(t),n,e)}),dc=lu(tr),bc=ae(function(n){return n.push(M,ou),e(gc,M,n)}),wc=ae(function(n){return n.push(M,fu),e(kc,M,n)}),mc=Je(function(n,t,r){n[t]=r},Ci(Bi)),xc=Je(function(n,t,r){ro.call(n,t)?n[t].push(r):n[t]=[r]},vu),jc=ae(Pr),Ac=Fe(function(n,t,r){te(n,t,r)}),kc=Fe(function(n,t,r,e){te(n,t,r,e)}),Oc=lu(function(n,t){var r={};if(null==n)return r;var e=!1;t=s(t,function(t){return t=Ee(t,n),e||(e=t.length>1),t}),De(n,hu(n),r),e&&(r=er(r,V|G|H,cu));for(var u=t.length;u--;)xe(r,t[u]);return r}),Ic=lu(function(n,t){return null==n?{}:function(n,t){return ue(n,t,function(t,r){return Oi(n,r)})}(n,t)}),Rc=uu(Ii),zc=uu(Ri),Ec=Ze(function(n,t,r){return t=t.toLowerCase(),n+(r?Si(t):t)}),Sc=Ze(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Wc=Ze(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Lc=qe("toLowerCase"),Cc=Ze(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Bc=Ze(function(n,t,r){return n+(r?" ":"")+Tc(t)}),Uc=Ze(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Tc=qe("toUpperCase"),$c=ae(function(n,t){try{return e(n,M,t)}catch(n){return ci(n)?n:new qi(n)}}),Dc=lu(function(n,t){return i(t,function(t){t=Cu(t),nr(n,t,Vf(n[t],n))}),n}),Mc=Ge(),Fc=Ge(!0),Nc=ae(function(n,t){return function(r){return Pr(r,n,t)}}),Pc=ae(function(n,t){return function(r){return Pr(n,r,t)}}),qc=Qe(s),Zc=Qe(f),Kc=Qe(v),Vc=nu(),Gc=nu(!0),Hc=Ye(function(n,t){return n+t},0),Jc=eu("ceil"),Yc=Ye(function(n,t){return n/t},1),Qc=eu("floor"),Xc=Ye(function(n,t){return n*t},1),na=eu("round"),ta=Ye(function(n,t){return n-t},0);return Ut.after=function(n,t){if("function"!=typeof t)throw new Ji(P);return n=wi(n),function(){if(--n<1)return t.apply(this,arguments)}},Ut.ary=Qu,Ut.assign=_c,Ut.assignIn=vc,Ut.assignInWith=gc,Ut.assignWith=yc,Ut.at=dc,Ut.before=Xu,Ut.bind=Vf,Ut.bindAll=Dc,Ut.bindKey=Gf,Ut.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return uc(n)?n:[n]},Ut.chain=Ku,Ut.chunk=function(n,t,r){t=(r?ju(n,t,r):t===M)?1:Wo(wi(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=Ni(ko(e/t));u<e;)o[i++]=_e(n,u,u+=t);return o},Ut.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},Ut.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Ni(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return h(uc(r)?$e(r):[r],hr(t,1))},Ut.cond=function(n){var t=null==n?0:n.length,r=vu();return n=t?s(n,function(n){if("function"!=typeof n[1])throw new Ji(P);return[r(n[0]),n[1]]}):[],ae(function(r){for(var u=-1;++u<t;){var i=n[u];if(e(i[0],this,r))return e(i[1],this,r)}})},Ut.conforms=function(n){return function(n){var t=Ii(n);return function(r){return ur(r,n,t)}}(er(n,V))},Ut.constant=Ci,Ut.countBy=$f,Ut.create=function(n,t){var r=nf(n);return null==t?r:Xt(r,t)},Ut.curry=ni,Ut.curryRight=ti,Ut.debounce=ri,Ut.defaults=bc,Ut.defaultsDeep=wc,Ut.defer=Hf,Ut.delay=Jf,Ut.difference=wf,Ut.differenceBy=mf,Ut.differenceWith=xf,Ut.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===M?1:wi(t),_e(n,t<0?0:t,e)):[]},Ut.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===M?1:wi(t),t=e-t,_e(n,0,t<0?0:t)):[]},Ut.dropRightWhile=function(n,t){return n&&n.length?Ae(n,vu(t,3),!0,!0):[]},Ut.dropWhile=function(n,t){return n&&n.length?Ae(n,vu(t,3),!0):[]},Ut.fill=function(n,t,r,e){var u=null==n?0:n.length;return u?(r&&"number"!=typeof r&&ju(n,t,r)&&(r=0,e=u),function(n,t,r,e){var u=n.length;for((r=wi(r))<0&&(r=-r>u?0:u+r),(e=e===M||e>u?u:wi(e))<0&&(e+=u),e=r>e?0:mi(e);r<e;)n[r++]=t;return n}(n,t,r,e)):[]},Ut.filter=function(n,t){return(uc(n)?c:ar)(n,vu(t,3))},Ut.flatMap=function(n,t){return hr(Yu(n,t),1)},Ut.flatMapDeep=function(n,t){return hr(Yu(n,t),vn)},Ut.flatMapDepth=function(n,t,r){return r=r===M?1:wi(r),hr(Yu(n,t),r)},Ut.flatten=Du,Ut.flattenDeep=function(n){return null!=n&&n.length?hr(n,vn):[]},Ut.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===M?1:wi(t),hr(n,t)):[]},Ut.flip=function(n){return iu(n,cn)},Ut.flow=Mc,Ut.flowRight=Fc,Ut.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},Ut.functions=function(n){return null==n?[]:jr(n,Ii(n))},Ut.functionsIn=function(n){return null==n?[]:jr(n,Ri(n))},Ut.groupBy=Ff,Ut.initial=function(n){return null!=n&&n.length?_e(n,0,-1):[]},Ut.intersection=jf,Ut.intersectionBy=Af,Ut.intersectionWith=kf,Ut.invert=mc,Ut.invertBy=xc,Ut.invokeMap=Nf,Ut.iteratee=Ui,Ut.keyBy=Pf,Ut.keys=Ii,Ut.keysIn=Ri,Ut.map=Yu,Ut.mapKeys=function(n,t){var r={};return t=vu(t,3),_r(n,function(n,e,u){nr(r,t(n,e,u),n)}),r},Ut.mapValues=function(n,t){var r={};return t=vu(t,3),_r(n,function(n,e,u){nr(r,e,t(n,e,u))}),r},Ut.matches=function(n){return Xr(er(n,V))},Ut.matchesProperty=function(n,t){return ne(n,er(t,V))},Ut.memoize=ei,Ut.merge=Ac,Ut.mergeWith=kc,Ut.method=Nc,Ut.methodOf=Pc,Ut.mixin=Ti,Ut.negate=ui,Ut.nthArg=function(n){return n=wi(n),ae(function(t){return re(t,n)})},Ut.omit=Oc,Ut.omitBy=function(n,t){return zi(n,ui(vu(t)))},Ut.once=function(n){return Xu(2,n)},Ut.orderBy=function(n,t,r,e){return null==n?[]:(uc(t)||(t=null==t?[]:[t]),r=e?M:r,uc(r)||(r=null==r?[]:[r]),ee(n,t,r))},Ut.over=qc,Ut.overArgs=Yf,Ut.overEvery=Zc,Ut.overSome=Kc,Ut.partial=Qf,Ut.partialRight=Xf,Ut.partition=qf,Ut.pick=Ic,Ut.pickBy=zi,Ut.property=Di,Ut.propertyOf=function(n){return function(t){return null==n?M:Ar(n,t)}},Ut.pull=Of,Ut.pullAll=Nu,Ut.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?ie(n,t,vu(r,2)):n},Ut.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?ie(n,t,M,r):n},Ut.pullAt=If,Ut.range=Vc,Ut.rangeRight=Gc,Ut.rearg=nc,Ut.reject=function(n,t){return(uc(n)?c:ar)(n,ui(vu(t,3)))},Ut.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=vu(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return oe(n,u),r},Ut.rest=function(n,t){if("function"!=typeof n)throw new Ji(P);return t=t===M?t:wi(t),ae(n,t)},Ut.reverse=Pu,Ut.sampleSize=function(n,t,r){return t=(r?ju(n,t,r):t===M)?1:wi(t),(uc(n)?Vt:se)(n,t)},Ut.set=function(n,t,r){return null==n?n:he(n,t,r)},Ut.setWith=function(n,t,r,e){return e="function"==typeof e?e:M,null==n?n:he(n,t,r,e)},Ut.shuffle=function(n){return(uc(n)?Gt:pe)(n)},Ut.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&ju(n,t,r)?(t=0,r=e):(t=null==t?0:wi(t),r=r===M?e:wi(r)),_e(n,t,r)):[]},Ut.sortBy=Zf,Ut.sortedUniq=function(n){return n&&n.length?de(n):[]},Ut.sortedUniqBy=function(n,t){return n&&n.length?de(n,vu(t,2)):[]},Ut.split=function(n,t,r){return r&&"number"!=typeof r&&ju(n,t,r)&&(t=r=M),(r=r===M?bn:r>>>0)?(n=Ai(n))&&("string"==typeof t||null!=t&&!ac(t))&&!(t=we(t))&&L(n)?Se(D(n),0,r):n.split(t,r):[]},Ut.spread=function(n,t){if("function"!=typeof n)throw new Ji(P);return t=null==t?0:Wo(wi(t),0),ae(function(r){var u=r[t],i=Se(r,0,t);return u&&h(i,u),e(n,this,i)})},Ut.tail=function(n){var t=null==n?0:n.length;return t?_e(n,1,t):[]},Ut.take=function(n,t,r){return n&&n.length?(t=r||t===M?1:wi(t),_e(n,0,t<0?0:t)):[]},Ut.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===M?1:wi(t),t=e-t,_e(n,t<0?0:t,e)):[]},Ut.takeRightWhile=function(n,t){return n&&n.length?Ae(n,vu(t,3),!1,!0):[]},Ut.takeWhile=function(n,t){return n&&n.length?Ae(n,vu(t,3)):[]},Ut.tap=function(n,t){return t(n),n},Ut.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Ji(P);return hi(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ri(n,t,{leading:e,maxWait:t,trailing:u})},Ut.thru=Vu,Ut.toArray=di,Ut.toPairs=Rc,Ut.toPairsIn=zc,Ut.toPath=function(n){return uc(n)?s(n,Cu):yi(n)?[n]:$e(bf(Ai(n)))},Ut.toPlainObject=ji,Ut.transform=function(n,t,r){var e=uc(n),u=e||oc(n)||sc(n);if(t=vu(t,4),null==r){var o=n&&n.constructor;r=u?e?new o:[]:hi(n)&&ai(o)?nf(po(n)):{}}return(u?i:_r)(n,function(n,e,u){return t(r,n,e,u)}),r},Ut.unary=function(n){return Qu(n,1)},Ut.union=Rf,Ut.unionBy=zf,Ut.unionWith=Ef,Ut.uniq=function(n){return n&&n.length?me(n):[]},Ut.uniqBy=function(n,t){return n&&n.length?me(n,vu(t,2)):[]},Ut.uniqWith=function(n,t){return t="function"==typeof t?t:M,n&&n.length?me(n,M,t):[]},Ut.unset=function(n,t){return null==n||xe(n,t)},Ut.unzip=qu,Ut.unzipWith=Zu,Ut.update=function(n,t,r){return null==n?n:je(n,t,ze(r))},Ut.updateWith=function(n,t,r,e){return e="function"==typeof e?e:M,null==n?n:je(n,t,ze(r),e)},Ut.values=Ei,Ut.valuesIn=function(n){return null==n?[]:R(n,Ri(n))},Ut.without=Sf,Ut.words=Li,Ut.wrap=function(n,t){return Qf(ze(t),n)},Ut.xor=Wf,Ut.xorBy=Lf,Ut.xorWith=Cf,Ut.zip=Bf,Ut.zipObject=function(n,t){return Ie(n||[],t||[],Jt)},Ut.zipObjectDeep=function(n,t){return Ie(n||[],t||[],he)},Ut.zipWith=Uf,Ut.entries=Rc,Ut.entriesIn=zc,Ut.extend=vc,Ut.extendWith=gc,Ti(Ut,Ut),Ut.add=Hc,Ut.attempt=$c,Ut.camelCase=Ec,Ut.capitalize=Si,Ut.ceil=Jc,Ut.clamp=function(n,t,r){return r===M&&(r=t,t=M),r!==M&&(r=(r=xi(r))==r?r:0),t!==M&&(t=(t=xi(t))==t?t:0),rr(xi(n),t,r)},Ut.clone=function(n){return er(n,H)},Ut.cloneDeep=function(n){return er(n,V|H)},Ut.cloneDeepWith=function(n,t){return t="function"==typeof t?t:M,er(n,V|H,t)},Ut.cloneWith=function(n,t){return t="function"==typeof t?t:M,er(n,H,t)},Ut.conformsTo=function(n,t){return null==t||ur(n,t,Ii(t))},Ut.deburr=Wi,Ut.defaultTo=function(n,t){return null==n||n!=n?t:n},Ut.divide=Yc,Ut.endsWith=function(n,t,r){n=Ai(n),t=we(t);var e=n.length,u=r=r===M?e:rr(wi(r),0,e);return(r-=t.length)>=0&&n.slice(r,u)==t},Ut.eq=ii,Ut.escape=function(n){return(n=Ai(n))&&ct.test(n)?n.replace(ot,Dr):n},Ut.escapeRegExp=function(n){return(n=Ai(n))&&yt.test(n)?n.replace(gt,"\\$&"):n},Ut.every=function(n,t,r){var e=uc(n)?f:fr;return r&&ju(n,t,r)&&(t=M),e(n,vu(t,3))},Ut.find=Df,Ut.findIndex=Tu,Ut.findKey=function(n,t){return g(n,vu(t,3),_r)},Ut.findLast=Mf,Ut.findLastIndex=$u,Ut.findLastKey=function(n,t){return g(n,vu(t,3),wr)},Ut.floor=Qc,Ut.forEach=Hu,Ut.forEachRight=Ju,Ut.forIn=function(n,t){return null==n?n:ef(n,vu(t,3),Ri)},Ut.forInRight=function(n,t){return null==n?n:uf(n,vu(t,3),Ri)},Ut.forOwn=function(n,t){return n&&_r(n,vu(t,3))},Ut.forOwnRight=function(n,t){return n&&wr(n,vu(t,3))},Ut.get=ki,Ut.gt=tc,Ut.gte=rc,Ut.has=function(n,t){return null!=n&&bu(n,t,Er)},Ut.hasIn=Oi,Ut.head=Mu,Ut.identity=Bi,Ut.includes=function(n,t,r,e){n=oi(n)?n:Ei(n),r=r&&!e?wi(r):0;var u=n.length;return r<0&&(r=Wo(u+r,0)),gi(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&d(n,t,r)>-1},Ut.indexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:wi(r);return u<0&&(u=Wo(e+u,0)),d(n,t,u)},Ut.inRange=function(n,t,r){return t=bi(t),r===M?(r=t,t=0):r=bi(r),n=xi(n),function(n,t,r){return n>=Lo(t,r)&&n<Wo(t,r)}(n,t,r)},Ut.invoke=jc,Ut.isArguments=ec,Ut.isArray=uc,Ut.isArrayBuffer=ic,Ut.isArrayLike=oi,Ut.isArrayLikeObject=fi,Ut.isBoolean=function(n){return!0===n||!1===n||pi(n)&&Ir(n)==On},Ut.isBuffer=oc,Ut.isDate=fc,Ut.isElement=function(n){return pi(n)&&1===n.nodeType&&!vi(n)},Ut.isEmpty=function(n){if(null==n)return!0;if(oi(n)&&(uc(n)||"string"==typeof n||"function"==typeof n.splice||oc(n)||sc(n)||ec(n)))return!n.length;var t=_f(n);if(t==Wn||t==Dn)return!n.size;if(Ou(n))return!Hr(n).length;for(var r in n)if(ro.call(n,r))return!1;return!0},Ut.isEqual=function(n,t){return Zr(n,t)},Ut.isEqualWith=function(n,t,r){var e=(r="function"==typeof r?r:M)?r(n,t):M;return e===M?Zr(n,t,M,r):!!e},Ut.isError=ci,Ut.isFinite=function(n){return"number"==typeof n&&zo(n)},Ut.isFunction=ai,Ut.isInteger=li,Ut.isLength=si,Ut.isMap=cc,Ut.isMatch=function(n,t){return n===t||Kr(n,t,yu(t))},Ut.isMatchWith=function(n,t,r){return r="function"==typeof r?r:M,Kr(n,t,yu(t),r)},Ut.isNaN=function(n){return _i(n)&&n!=+n},Ut.isNative=function(n){if(vf(n))throw new qi(N);return Vr(n)},Ut.isNil=function(n){return null==n},Ut.isNull=function(n){return null===n},Ut.isNumber=_i,Ut.isObject=hi,Ut.isObjectLike=pi,Ut.isPlainObject=vi,Ut.isRegExp=ac,Ut.isSafeInteger=function(n){return li(n)&&n>=-gn&&n<=gn},Ut.isSet=lc,Ut.isString=gi,Ut.isSymbol=yi,Ut.isTypedArray=sc,Ut.isUndefined=function(n){return n===M},Ut.isWeakMap=function(n){return pi(n)&&_f(n)==Pn},Ut.isWeakSet=function(n){return pi(n)&&Ir(n)==qn},Ut.join=function(n,t){return null==n?"":Eo.call(n,t)},Ut.kebabCase=Sc,Ut.last=Fu,Ut.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==M&&(u=(u=wi(r))<0?Wo(e+u,0):Lo(u,e-1)),t==t?function(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}(n,t,u):y(n,w,u,!0)},Ut.lowerCase=Wc,Ut.lowerFirst=Lc,Ut.lt=hc,Ut.lte=pc,Ut.max=function(n){return n&&n.length?cr(n,Bi,zr):M},Ut.maxBy=function(n,t){return n&&n.length?cr(n,vu(t,2),zr):M},Ut.mean=function(n){return m(n,Bi)},Ut.meanBy=function(n,t){return m(n,vu(t,2))},Ut.min=function(n){return n&&n.length?cr(n,Bi,Yr):M},Ut.minBy=function(n,t){return n&&n.length?cr(n,vu(t,2),Yr):M},Ut.stubArray=Mi,Ut.stubFalse=Fi,Ut.stubObject=function(){return{}},Ut.stubString=function(){return""},Ut.stubTrue=function(){return!0},Ut.multiply=Xc,Ut.nth=function(n,t){return n&&n.length?re(n,wi(t)):M},Ut.noConflict=function(){return kr._===this&&(kr._=fo),this},Ut.noop=$i,Ut.now=Kf,Ut.pad=function(n,t,r){n=Ai(n);var e=(t=wi(t))?$(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return Xe(Oo(u),r)+n+Xe(ko(u),r)},Ut.padEnd=function(n,t,r){n=Ai(n);var e=(t=wi(t))?$(n):0;return t&&e<t?n+Xe(t-e,r):n},Ut.padStart=function(n,t,r){n=Ai(n);var e=(t=wi(t))?$(n):0;return t&&e<t?Xe(t-e,r)+n:n},Ut.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Bo(Ai(n).replace(bt,""),t||0)},Ut.random=function(n,t,r){if(r&&"boolean"!=typeof r&&ju(n,t,r)&&(t=r=M),r===M&&("boolean"==typeof t?(r=t,t=M):"boolean"==typeof n&&(r=n,n=M)),n===M&&t===M?(n=0,t=1):(n=bi(n),t===M?(t=n,n=0):t=bi(t)),n>t){var e=n;n=t,t=e}if(r||n%1||t%1){var u=Uo();return Lo(n+u*(t-n+mr("1e-"+((u+"").length-1))),t)}return fe(n,t)},Ut.reduce=function(n,t,r){var e=uc(n)?p:A,u=arguments.length<3;return e(n,vu(t,4),r,u,tf)},Ut.reduceRight=function(n,t,r){var e=uc(n)?_:A,u=arguments.length<3;return e(n,vu(t,4),r,u,rf)},Ut.repeat=function(n,t,r){return t=(r?ju(n,t,r):t===M)?1:wi(t),ce(Ai(n),t)},Ut.replace=function(){var n=arguments,t=Ai(n[0]);return n.length<3?t:t.replace(n[1],n[2])},Ut.result=function(n,t,r){var e=-1,u=(t=Ee(t,n)).length;for(u||(u=1,n=M);++e<u;){var i=null==n?M:n[Cu(t[e])];i===M&&(e=u,i=r),n=ai(i)?i.call(n):i}return n},Ut.round=na,Ut.runInContext=n,Ut.sample=function(n){return(uc(n)?Kt:le)(n)},Ut.size=function(n){if(null==n)return 0;if(oi(n))return gi(n)?$(n):n.length;var t=_f(n);return t==Wn||t==Dn?n.size:Hr(n).length},Ut.snakeCase=Cc,Ut.some=function(n,t,r){var e=uc(n)?v:ve;return r&&ju(n,t,r)&&(t=M),e(n,vu(t,3))},Ut.sortedIndex=function(n,t){return ge(n,t)},Ut.sortedIndexBy=function(n,t,r){return ye(n,t,vu(r,2))},Ut.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=ge(n,t);if(e<r&&ii(n[e],t))return e}return-1},Ut.sortedLastIndex=function(n,t){return ge(n,t,!0)},Ut.sortedLastIndexBy=function(n,t,r){return ye(n,t,vu(r,2),!0)},Ut.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=ge(n,t,!0)-1;if(ii(n[r],t))return r}return-1},Ut.startCase=Bc,Ut.startsWith=function(n,t,r){return n=Ai(n),r=null==r?0:rr(wi(r),0,n.length),t=we(t),n.slice(r,r+t.length)==t},Ut.subtract=ta,Ut.sum=function(n){return n&&n.length?k(n,Bi):0},Ut.sumBy=function(n,t){return n&&n.length?k(n,vu(t,2)):0},Ut.template=function(n,t,r){var e=Ut.templateSettings;r&&ju(n,t,r)&&(t=M),n=Ai(n),t=gc({},t,e,ou);var u,i,o=gc({},t.imports,e.imports,ou),f=Ii(o),c=R(o,f),a=0,l=t.interpolate||Ct,s="__p += '",h=Gi((t.escape||Ct).source+"|"+l.source+"|"+(l===st?Ot:Ct).source+"|"+(t.evaluate||Ct).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++yr+"]")+"\n";n.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Bt,W),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),a=c+t.length,t}),s+="';\n";var _=t.variable;_||(s="with (obj) {\n"+s+"\n}\n"),s=(i?s.replace(rt,""):s).replace(et,"$1").replace(ut,"$1;"),s="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var v=$c(function(){return Zi(f,p+"return "+s).apply(M,c)});if(v.source=s,ci(v))throw v;return v},Ut.times=function(n,t){if((n=wi(n))<1||n>gn)return[];var r=bn,e=Lo(n,bn);t=vu(t),n-=bn;for(var u=O(e,t);++r<n;)t(r);return u},Ut.toFinite=bi,Ut.toInteger=wi,Ut.toLength=mi,Ut.toLower=function(n){return Ai(n).toLowerCase()},Ut.toNumber=xi,Ut.toSafeInteger=function(n){return n?rr(wi(n),-gn,gn):0===n?n:0},Ut.toString=Ai,Ut.toUpper=function(n){return Ai(n).toUpperCase()},Ut.trim=function(n,t,r){if((n=Ai(n))&&(r||t===M))return n.replace(dt,"");if(!n||!(t=we(t)))return n;var e=D(n),u=D(t);return Se(e,E(e,u),S(e,u)+1).join("")},Ut.trimEnd=function(n,t,r){if((n=Ai(n))&&(r||t===M))return n.replace(wt,"");if(!n||!(t=we(t)))return n;var e=D(n);return Se(e,0,S(e,D(t))+1).join("")},Ut.trimStart=function(n,t,r){if((n=Ai(n))&&(r||t===M))return n.replace(bt,"");if(!n||!(t=we(t)))return n;var e=D(n);return Se(e,E(e,D(t))).join("")},Ut.truncate=function(n,t){var r=an,e=ln;if(hi(t)){var u="separator"in t?t.separator:u;r="length"in t?wi(t.length):r,e="omission"in t?we(t.omission):e}var i=(n=Ai(n)).length;if(L(n)){var o=D(n);i=o.length}if(r>=i)return n;var f=r-$(e);if(f<1)return e;var c=o?Se(o,0,f).join(""):n.slice(0,f);if(u===M)return c+e;if(o&&(f+=c.length-f),ac(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=Gi(u.source,Ai(It.exec(u))+"g")),u.lastIndex=0;a=u.exec(l);)var s=a.index;c=c.slice(0,s===M?f:s)}}else if(n.indexOf(we(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e},Ut.unescape=function(n){return(n=Ai(n))&&ft.test(n)?n.replace(it,Mr):n},Ut.uniqueId=function(n){var t=++eo;return Ai(n)+t},Ut.upperCase=Uc,Ut.upperFirst=Tc,Ut.each=Hu,Ut.eachRight=Ju,Ut.first=Mu,Ti(Ut,function(){var n={};return _r(Ut,function(t,r){ro.call(Ut.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),Ut.VERSION="4.17.4",i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Ut[n].placeholder=Ut}),i(["drop","take"],function(n,t){Dt.prototype[n]=function(r){r=r===M?1:Wo(wi(r),0);var e=this.__filtered__&&!t?new Dt(this):this.clone();return e.__filtered__?e.__takeCount__=Lo(r,e.__takeCount__):e.__views__.push({size:Lo(r,bn),type:n+(e.__dir__<0?"Right":"")}),e},Dt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),i(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==pn||3==r;Dt.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:vu(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),i(["head","last"],function(n,t){var r="take"+(t?"Right":"");Dt.prototype[n]=function(){return this[r](1).value()[0]}}),i(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Dt.prototype[n]=function(){return this.__filtered__?new Dt(this):this[r](1)}}),Dt.prototype.compact=function(){return this.filter(Bi)},Dt.prototype.find=function(n){return this.filter(n).head()},Dt.prototype.findLast=function(n){return this.reverse().find(n)},Dt.prototype.invokeMap=ae(function(n,t){return"function"==typeof n?new Dt(this):this.map(function(r){return Pr(r,n,t)})}),Dt.prototype.reject=function(n){return this.filter(ui(vu(n)))},Dt.prototype.slice=function(n,t){n=wi(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Dt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==M&&(r=(t=wi(t))<0?r.dropRight(-t):r.take(t-n)),r)},Dt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Dt.prototype.toArray=function(){return this.take(bn)},_r(Dt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=Ut[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(Ut.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Dt,c=o[0],a=f||uc(t),l=function(n){var t=u.apply(Ut,h([n],o));return e&&s?t[0]:t};a&&r&&"function"==typeof c&&1!=c.length&&(f=a=!1);var s=this.__chain__,p=!!this.__actions__.length,_=i&&!s,v=f&&!p;if(!i&&a){t=v?t:new Dt(this);var g=n.apply(t,o);return g.__actions__.push({func:Vu,args:[l],thisArg:M}),new $t(g,s)}return _&&v?n.apply(this,o):(g=this.thru(l),_?e?g.value()[0]:g.value():g)})}),i(["pop","push","shift","sort","splice","unshift"],function(n){var t=Yi[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);Ut.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(uc(u)?u:[],n)}return this[r](function(r){return t.apply(uc(r)?r:[],n)})}}),_r(Dt.prototype,function(n,t){var r=Ut[t];if(r){var e=r.name+"";(Zo[e]||(Zo[e]=[])).push({name:t,func:r})}}),Zo[He(M,X).name]=[{name:"wrapper",func:M}],Dt.prototype.clone=function(){var n=new Dt(this.__wrapped__);return n.__actions__=$e(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=$e(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=$e(this.__views__),n},Dt.prototype.reverse=function(){if(this.__filtered__){var n=new Dt(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},Dt.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,r=uc(n),e=t<0,u=r?n.length:0,i=function(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Lo(t,n+o);break;case"takeRight":n=Wo(n,t-o)}}return{start:n,end:t}}(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Lo(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return ke(n,this.__actions__);var _=[];n:for(;c--&&h<p;){for(var v=-1,g=n[a+=t];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==_n)g=w;else if(!w){if(b==pn)continue n;break n}}_[h++]=g}return _},Ut.prototype.at=Tf,Ut.prototype.chain=function(){return Ku(this)},Ut.prototype.commit=function(){return new $t(this.value(),this.__chain__)},Ut.prototype.next=function(){this.__values__===M&&(this.__values__=di(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?M:this.__values__[this.__index__++]}},Ut.prototype.plant=function(n){for(var t,r=this;r instanceof Tt;){var e=Uu(r);e.__index__=0,e.__values__=M,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t},Ut.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof Dt){var t=n;return this.__actions__.length&&(t=new Dt(this)),(t=t.reverse()).__actions__.push({func:Vu,args:[Pu],thisArg:M}),new $t(t,this.__chain__)}return this.thru(Pu)},Ut.prototype.toJSON=Ut.prototype.valueOf=Ut.prototype.value=function(){return ke(this.__wrapped__,this.__actions__)},Ut.prototype.first=Ut.prototype.head,bo&&(Ut.prototype[bo]=Gu),Ut}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(kr._=Fr,define(function(){return Fr})):Ir?((Ir.exports=Fr)._=Fr,Or._=Fr):kr._=Fr}).call(this);
},{"buffer":50}],6:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),r=e(t);module.exports=((e,t)=>({data:()=>({}),firestore:{},methods:{},template:"#template-page-home"}));
},{"lodash":23}],7:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),s=e(t);module.exports=((e,t)=>({data:()=>({name:"",key:"",isCreating:!1}),firestore:{},computed:{eventDisabled(){return!(this.name&&this.key)}},methods:{create(){const e=t.events.doc(this.name);this.isCreating=!0,e.get().then(t=>{this.isCreating=!1,t.exists||(e.set({key:this.key}),this.$router.push("/event"))})}},template:"#template-page-event__create"}));
},{"lodash":23}],8:[function(require,module,exports) {
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=require("lodash"),o=t(e);module.exports=((t,e)=>({data:()=>({events:[{title:"作成",text:"イベントを作成します。",actionText:"作成する",to:"/event/create"},{title:"登録",text:"作成したイベントにデータを登録します。",actionText:"登録する",to:"/event/auth/register"},{title:"参加",text:"イベントに参加します。",actionText:"参加する",to:"/event/join"}]}),firestore:{},methods:{to(t){this.$router.push(t.to)}},template:"#template-page-event"}));
},{"lodash":23}],9:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var o=require("lodash"),d=e(o);module.exports=((e,o)=>({data:()=>({id:"",todos:[],filter:{doing:{label:"実行中",checked:!0},done:{label:"終了済み",checked:!1}}}),firestore:{todos:o.todos.orderBy("insert","asc")},methods:{add(){o.todos.doc(this.id).set({done:!1,insert:new Date}),this.id=""},done(e){o.todos.doc(e.id).update({done:!e.done})},remove(e){this.$refs.dialogRemove[0].show()},onAcceptToRemove(e){o.todos.doc(e.id).delete()},onCancelToRemove(){}},template:"#template-page-todo"}));
},{"lodash":23}],10:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),s=e(t);module.exports=((e,t)=>({data:()=>({name:"",users:[]}),firestore(){return{users:t.events.doc(this.$route.params.name).collection("users")}},computed:{filteredUsers(){return s.default.isEmpty(this.name)?[]:s.default.filter(this.users,e=>!e.joined&&new RegExp(`.*${this.name}.*`,"i").test(e.id))}},methods:{join(e){this.$router.push(`/event/confirm/${this.$route.params.name}/${e.id}`)}},template:"#template-page-event__join"}));
},{"lodash":23}],11:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),s=e(t);module.exports=((e,t)=>({data:()=>({data:"",isRegistering:!1}),firestore:{},computed:{},methods:{register(){const i=t.events.doc(this.$route.params.name).collection("users"),a=s.default.split(this.data,"\n"),r=s.default.split(a.shift(),",").slice(1),l=e.batch();s.default.each(a,e=>{const t=s.default.split(e,","),a=t.shift();l.set(i.doc(a),{displayable:s.default.zipObject(r,t)})}),this.isRegistering=!0,l.commit().then(()=>{this.isRegistering=!1,this.$router.push("/event")})}},template:"#template-page-event__register"}));
},{"lodash":23}],12:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),s=e(t);module.exports=((e,t)=>({data:()=>({name:"",key:"",isAuthing:!1}),firestore:{},computed:{eventDisabled(){return!(this.name&&this.key)}},methods:{auth(){const e=t.events.doc(this.name);this.isAuthing=!0,e.get().then(e=>{this.isAuthing=!1,e.exists&&s.default.eq(this.key,e.data().key)&&this.$router.push(`/event/${this.$route.params.to}/${this.name}`)})}},template:"#template-page-event__auth"}));
},{"lodash":23}],13:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),r=e(t);module.exports=((e,t)=>({data:()=>({user:{}}),firestore(){return{user:t.events.doc(this.$route.params.name).collection("users").doc(this.$route.params.id)}},computed:{},methods:{back(){this.$router.push(`/event/join/${this.$route.params.name}`)},accept(){this.$firestoreRefs.user.update({joined:!0}),this.$router.push(`/event/complete/${this.$route.params.name}`)}},template:"#template-page-event__confirm"}));
},{"lodash":23}],14:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("lodash"),o=e(t);module.exports=((e,t)=>({data:()=>({}),firestore:()=>({}),computed:{},methods:{},template:"#template-page-event__complete"}));
},{"lodash":23}],15:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var s=require("lodash"),t=e(s);module.exports=((e,s)=>({data:()=>({messageText:"",messages:[]}),firestore:{messages:s.messages.orderBy("insert","desc")},methods:{sendMessage(){this.messageText&&(s.messages.add({text:this.messageText,insert:new Date}),this.messageText="")}},template:"#template-page-chat"}));
},{"lodash":23}],44:[function(require,module,exports) {
!function(e){function n(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(e){return void r(n.promise,e)}i(n.promise,o)}else(1===e._state?i:r)(n.promise,e._value)})):e._deferreds.push(n)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if("function"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(n){r(e,n)}}function r(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,i=e._deferreds.length;n<i;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,r(n,e))})}catch(e){if(t)return;t=!0,r(n,e)}}var c=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var i=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(e,t,i)),i},t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}i[e]=f,0==--r&&n(i)}catch(e){t(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);for(var r=i.length,f=0;f<i.length;f++)o(f,i[f])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,i=e.length;o<i;o++)e[o].then(n,t)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},t._setImmediateFn=function(e){t._immediateFn=e},t._setUnhandledRejectionFn=function(e){t._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=t:e.Promise||(e.Promise=t)}(this);
},{}],36:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this"),o=function(){if(void 0!==e)return e;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(o.Promise=Promise=require("promise-polyfill"));
},{"promise-polyfill":44}],37:[function(require,module,exports) {
Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(r){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),t=e.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<t;){var i=e[o];if(r.call(n,i,o,e))return o;o++}return-1}});
},{}],38:[function(require,module,exports) {
Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(r){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<e;){var i=t[o];if(r.call(n,i,o,t))return i;o++}}});
},{}],29:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./src/polyfills/promise"),require("./src/shims/find"),require("./src/shims/findIndex");
},{"./src/polyfills/promise":36,"./src/shims/findIndex":37,"./src/shims/find":38}],141:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};
},{}],140:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./constants");exports.assert=function(r,e){if(!r)throw exports.assertionError(e)},exports.assertionError=function(e){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
},{"./constants":141}],142:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){for(var r=[],e=0,a=0;a<t.length;a++){var h=t.charCodeAt(a);h<128?r[e++]=h:h<2048?(r[e++]=h>>6|192,r[e++]=63&h|128):55296==(64512&h)&&a+1<t.length&&56320==(64512&t.charCodeAt(a+1))?(h=65536+((1023&h)<<10)+(1023&t.charCodeAt(++a)),r[e++]=h>>18|240,r[e++]=h>>12&63|128,r[e++]=h>>6&63|128,r[e++]=63&h|128):(r[e++]=h>>12|224,r[e++]=h>>6&63|128,r[e++]=63&h|128)}return r},r=function(t){for(var r=[],e=0,a=0;e<t.length;){var h=t[e++];if(h<128)r[a++]=String.fromCharCode(h);else if(h>191&&h<224){var o=t[e++];r[a++]=String.fromCharCode((31&h)<<6|63&o)}else if(h>239&&h<365){var n=((7&h)<<18|(63&(o=t[e++]))<<12|(63&(i=t[e++]))<<6|63&t[e++])-65536;r[a++]=String.fromCharCode(55296+(n>>10)),r[a++]=String.fromCharCode(56320+(1023&n))}else{o=t[e++];var i=t[e++];r[a++]=String.fromCharCode((15&h)<<12|(63&o)<<6|63&i)}}return r.join("")};exports.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,r){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[],h=0;h<t.length;h+=3){var o=t[h],n=h+1<t.length,i=n?t[h+1]:0,s=h+2<t.length,_=s?t[h+2]:0,c=o>>2,S=(3&o)<<4|i>>4,A=(15&i)<<2|_>>6,f=63&_;s||(f=64,n||(A=64)),a.push(e[c],e[S],e[A],e[f])}return a.join("")},encodeString:function(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(t(r),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,r){this.init_();for(var e=r?this.charToByteMapWebSafe_:this.charToByteMap_,a=[],h=0;h<t.length;){var o=e[t.charAt(h++)],n=h<t.length?e[t.charAt(h)]:0,i=++h<t.length?e[t.charAt(h)]:64,s=++h<t.length?e[t.charAt(h)]:64;if(++h,null==o||null==n||null==i||null==s)throw Error();var _=o<<2|n>>4;if(a.push(_),64!=i){var c=n<<4&240|i>>2;if(a.push(c),64!=s){var S=i<<6&192|s;a.push(S)}}}return a},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},exports.base64Encode=function(r){var e=t(r);return exports.base64.encodeByteArray(e,!0)},exports.base64Decode=function(t){try{return exports.base64.decodeString(t,!0)}catch(t){}return null};
},{}],143:[function(require,module,exports) {
"use strict";function e(e){return r(void 0,e)}function r(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var o in t)t.hasOwnProperty(o)&&(e[o]=r(e[o],t[o]));return e}function t(e,r,t){e[r]=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepCopy=e,exports.deepExtend=r,exports.patchProperty=t;
},{}],144:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})}return e.prototype.wrapCallback=function(e){var t=this;return function(r,n){r?t.reject(r):t.resolve(n),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(r):e(r,n))}},e}();exports.Deferred=e;
},{}],145:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants");exports.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},exports.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(exports.getUA())},exports.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},exports.isNodeSdk=function(){return!0===e.CONSTANTS.NODE_CLIENT||!0===e.CONSTANTS.NODE_ADMIN};
},{"./constants":141}],146:[function(require,module,exports) {
"use strict";function r(r){var t=e;return e=r,t}Object.defineProperty(exports,"__esModule",{value:!0});var t="FirebaseError",e=Error.captureStackTrace;exports.patchCapture=r;var o=function(){return function(r,o){if(this.code=r,this.message=o,e)e(this,i.prototype.create);else{var s=Error.apply(this,arguments);this.name=t,Object.defineProperty(this,"stack",{get:function(){return s.stack}})}}}();exports.FirebaseError=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name=t;var i=function(){function r(r,t,e){this.service=r,this.serviceName=t,this.errors=e,this.pattern=/\{\$([^}]+)}/g}return r.prototype.create=function(r,t){void 0===t&&(t={});var e,i=this.errors[r],s=this.service+"/"+r;e=void 0===i?"Error":i.replace(this.pattern,function(r,e){var o=t[e];return void 0!==o?o.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+s+").";var a=new o(s,e);for(var n in t)t.hasOwnProperty(n)&&"_"!==n.slice(-1)&&(a[n]=t[n]);return a},r}();exports.ErrorFactory=i;
},{}],147:[function(require,module,exports) {
"use strict";function e(e){return JSON.parse(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonEval=e,exports.stringify=r;
},{}],148:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./crypt"),t=require("./json");exports.decode=function(r){var o={},a={},s={},i="";try{var n=r.split(".");o=t.jsonEval(e.base64Decode(n[0])||""),a=t.jsonEval(e.base64Decode(n[1])||""),i=n[2],s=a.d||{},delete a.d}catch(e){}return{header:o,claims:a,data:s,signature:i}},exports.isValidTimestamp=function(e){var t,r,o=exports.decode(e).claims,a=Math.floor((new Date).getTime()/1e3);return"object"==typeof o&&(o.hasOwnProperty("nbf")?t=o.nbf:o.hasOwnProperty("iat")&&(t=o.iat),r=o.hasOwnProperty("exp")?o.exp:t+86400),a&&t&&r&&a>=t&&a<=r},exports.issuedAtTime=function(e){var t=exports.decode(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},exports.isValidFormat=function(e){var t=exports.decode(e),r=t.claims;return!!t.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},exports.isAdmin=function(e){var t=exports.decode(e).claims;return"object"==typeof t&&!0===t.admin};
},{"./json":147,"./crypt":142}],149:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.contains=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},exports.safeGet=function(r,t){if(Object.prototype.hasOwnProperty.call(r,t))return r[t]},exports.forEach=function(r,t){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])},exports.extend=function(r,t){return exports.forEach(t,function(t,e){r[t]=e}),r},exports.clone=function(r){return exports.extend({},r)},exports.isNonNullObject=function(r){return"object"==typeof r&&null!==r},exports.isEmpty=function(r){for(var t in r)return!1;return!0},exports.getCount=function(r){var t=0;for(var e in r)t++;return t},exports.map=function(r,t,e){var n={};for(var o in r)n[o]=t.call(e,r[o],o,r);return n},exports.findKey=function(r,t,e){for(var n in r)if(t.call(e,r[n],n,r))return n},exports.findValue=function(r,t,e){var n=exports.findKey(r,t,e);return n&&r[n]},exports.getAnyKey=function(r){for(var t in r)return t},exports.getValues=function(r){var t=[],e=0;for(var n in r)t[e++]=r[n];return t},exports.every=function(r,t){for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&!t(e,r[e]))return!1;return!0};
},{}],150:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./obj");exports.querystring=function(n){var o=[];return e.forEach(n,function(e,n){Array.isArray(n)?n.forEach(function(n){o.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):o.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),o.length?"&"+o.join("&"):""},exports.querystringDecode=function(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var o=e.split("=");n[o[0]]=o[1]}}),n};
},{"./obj":149}],198:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(){this.blockSize=-1}}();exports.Hash=e;
},{}],151:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var h in i)i.hasOwnProperty(h)&&(t[h]=i[h])};return function(i,h){function s(){this.constructor=i}t(i,h),i.prototype=null===h?Object.create(h):(s.prototype=h.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./hash"),h=function(i){function h(){var t=i.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var h=1;h<t.blockSize;++h)t.pad_[h]=0;return t.reset(),t}return t(h,i),h.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},h.prototype.compress_=function(t,i){i||(i=0);var h=this.W_;if("string"==typeof t)for(var s=0;s<16;s++)h[s]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(s=0;s<16;s++)h[s]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(s=16;s<80;s++){var o=h[s-3]^h[s-8]^h[s-14]^h[s-16];h[s]=4294967295&(o<<1|o>>>31)}var r,e,n=this.chain_[0],a=this.chain_[1],_=this.chain_[2],c=this.chain_[3],f=this.chain_[4];for(s=0;s<80;s++){s<40?s<20?(r=c^a&(_^c),e=1518500249):(r=a^_^c,e=1859775393):s<60?(r=a&_|c&(a|_),e=2400959708):(r=a^_^c,e=3395469782);o=(n<<5|n>>>27)+r+f+e+h[s]&4294967295;f=c,c=_,_=4294967295&(a<<30|a>>>2),a=n,n=o}this.chain_[0]=this.chain_[0]+n&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+_&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},h.prototype.update=function(t,i){if(null!=t){void 0===i&&(i=t.length);for(var h=i-this.blockSize,s=0,o=this.buf_,r=this.inbuf_;s<i;){if(0==r)for(;s<=h;)this.compress_(t,s),s+=this.blockSize;if("string"==typeof t){for(;s<i;)if(o[r]=t.charCodeAt(s),++r,++s,r==this.blockSize){this.compress_(o),r=0;break}}else for(;s<i;)if(o[r]=t[s],++r,++s,r==this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=i}},h.prototype.digest=function(){var t=[],i=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var h=this.blockSize-1;h>=56;h--)this.buf_[h]=255&i,i/=256;this.compress_(this.buf_);var s=0;for(h=0;h<5;h++)for(var o=24;o>=0;o-=8)t[s]=this.chain_[h]>>o&255,++s;return t},h}(i.Hash);exports.Sha1=h;
},{"./hash":198}],152:[function(require,module,exports) {
"use strict";function e(e,r){var t=new s(e,r);return t.subscribe.bind(t)}function r(e,r){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];Promise.resolve(!0).then(function(){e.apply(void 0,t)}).catch(function(e){r&&r(e)})}}function t(e,r){if("object"!=typeof e||null===e)return!1;for(var t=0,o=r;t<o.length;t++){var s=o[t];if(s in e&&"function"==typeof e[s])return!0}return!1}function o(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSubscribe=e;var s=function(){function e(e,r){var t=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(function(){e(t)}).catch(function(e){t.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(r){r.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(r){r.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,r,s){var i,n=this;if(void 0===e&&void 0===r&&void 0===s)throw new Error("Missing Observer.");void 0===(i=t(e,["next","error","complete"])?e:{next:e,error:r,complete:s}).next&&(i.next=o),void 0===i.error&&(i.error=o),void 0===i.complete&&(i.complete=o);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{n.finalError?i.error(n.finalError):i.complete()}catch(e){}}),this.observers.push(i),c},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,e)},e.prototype.sendOne=function(e,r){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[e])try{r(t.observers[e])}catch(e){"undefined"!=typeof console&&console.error}})},e.prototype.close=function(e){var r=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},e}();exports.async=r;
},{}],153:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./assert");exports.stringToByteArray=function(e){for(var t=[],a=0,o=0;o<e.length;o++){var s=e.charCodeAt(o);if(s>=55296&&s<=56319){var n=s-55296;o++,r.assert(o<e.length,"Surrogate pair missing trail surrogate.");s=65536+(n<<10)+(e.charCodeAt(o)-56320)}s<128?t[a++]=s:s<2048?(t[a++]=s>>6|192,t[a++]=63&s|128):s<65536?(t[a++]=s>>12|224,t[a++]=s>>6&63|128,t[a++]=63&s|128):(t[a++]=s>>18|240,t[a++]=s>>12&63|128,t[a++]=s>>6&63|128,t[a++]=63&s|128)}return t},exports.stringLength=function(r){for(var e=0,t=0;t<r.length;t++){var a=r.charCodeAt(t);a<128?e++:a<2048?e+=2:a>=55296&&a<=56319?(e+=4,t++):e+=3}return e};
},{"./assert":140}],154:[function(require,module,exports) {
"use strict";function e(e,r,t){var a="";switch(r){case 1:a=t?"first":"First";break;case 2:a=t?"second":"Second";break;case 3:a=t?"third":"Third";break;case 4:a=t?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=a+" argument "}function r(r,t,a,o){if((!o||a)&&"string"!=typeof a)throw new Error(e(r,t,o)+"must be a valid firebase namespace.")}function t(r,t,a,o){if((!o||a)&&"function"!=typeof a)throw new Error(e(r,t,o)+"must be a valid function.")}function a(r,t,a,o){if((!o||a)&&("object"!=typeof a||null===a))throw new Error(e(r,t,o)+"must be a valid context object.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateArgCount=function(e,r,t,a){var o;if(a<r?o="at least "+r:a>t&&(o=0===t?"none":"no more than "+t),o){var n=e+" failed: Was called with "+a+(1===a?" argument.":" arguments.")+" Expects "+o+".";throw new Error(n)}},exports.errorPrefix=e,exports.validateNamespace=r,exports.validateCallback=t,exports.validateContextObject=a;
},{}],78:[function(require,module,exports) {
"use strict";function r(r){for(var e in r)exports.hasOwnProperty(e)||(exports[e]=r[e])}Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./src/assert")),r(require("./src/crypt")),r(require("./src/constants")),r(require("./src/deepCopy")),r(require("./src/deferred")),r(require("./src/environment")),r(require("./src/errors")),r(require("./src/json")),r(require("./src/jwt")),r(require("./src/obj")),r(require("./src/query")),r(require("./src/sha1")),r(require("./src/subscribe")),r(require("./src/validation")),r(require("./src/utf8"));
},{"./src/assert":140,"./src/constants":141,"./src/crypt":142,"./src/deepCopy":143,"./src/deferred":144,"./src/environment":145,"./src/errors":146,"./src/json":147,"./src/jwt":148,"./src/obj":149,"./src/query":150,"./src/sha1":151,"./src/subscribe":152,"./src/utf8":153,"./src/validation":154}],157:[function(require,module,exports) {
"use strict";function e(){function a(e){return e=e||i,r(u,e)||t("no-app",{name:e}),u[e]}function s(){return Object.keys(u).map(function(e){return u[e]})}function p(e,t){Object.keys(d).forEach(function(n){var r=c(e,n);null!==r&&f[r]&&f[r](t,e)})}function c(e,t){if("serverAuth"===t)return null;var n=t;e.options;return n}var u={},d={},f={},l={__esModule:!0,initializeApp:function(e,n){void 0===n?n=i:"string"==typeof n&&""!==n||t("bad-app-name",{name:n+""}),r(u,n)&&t("duplicate-app",{name:n});var a=new o(e,n,l);return u[n]=a,p(a,"create"),a},app:a,apps:null,Promise:Promise,SDK_VERSION:"4.8.1",INTERNAL:{registerService:function(e,r,i,p,c){d[e]&&t("duplicate-service",{name:e}),d[e]=r,p&&(f[e]=p,s().forEach(function(e){p("create",e)}));var u=function(n){return void 0===n&&(n=a()),"function"!=typeof n[e]&&t("invalid-app-argument",{name:e}),n[e]()};return void 0!==i&&n.deepExtend(u,i),l[e]=u,o.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,c?t:[])},u},createFirebaseNamespace:e,extendNamespace:function(e){n.deepExtend(l,e)},createSubscribe:n.createSubscribe,ErrorFactory:n.ErrorFactory,removeApp:function(e){p(u[e],"delete"),delete u[e]},factories:d,useAsService:c,Promise:Promise,deepExtend:n.deepExtend}};return n.patchProperty(l,"default",l),Object.defineProperty(l,"apps",{get:s}),n.patchProperty(a,"App",o),l}function t(e,t){throw p.create(e,t)}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("@firebase/util"),r=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i="[DEFAULT]",a=[],o=function(){function e(e,t,r){this.firebase_=r,this.isDeleted_=!1,this.services_={},this.name_=t,this.options_=n.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){a.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){a=a.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=i),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==i?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;n.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(a.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),a=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&t("app-deleted",{name:this.name_})},e}();o.prototype.name&&o.prototype.options||o.prototype.delete,exports.createFirebaseNamespace=e;var s={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},p=new n.ErrorFactory("app","Firebase",s);
},{"@firebase/util":78}],30:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./src/firebaseApp");exports.firebase=e.createFirebaseNamespace(),exports.default=exports.firebase;
},{"./src/firebaseApp":157}],24:[function(require,module,exports) {
require("@firebase/polyfill"),module.exports=require("@firebase/app").default;
},{"@firebase/polyfill":29,"@firebase/app":30}],155:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=function(){function t(e){this.domStorage_=e,this.prefix_="firebase:"}return t.prototype.set=function(t,r){null==r?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),e.stringify(r))},t.prototype.get=function(t){var r=this.domStorage_.getItem(this.prefixedName_(t));return null==r?null:e.jsonEval(r)},t.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},t.prototype.prefixedName_=function(e){return this.prefix_+e},t.prototype.toString=function(){return this.domStorage_.toString()},t}();exports.DOMStorageWrapper=t;
},{"@firebase/util":78}],156:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},t.prototype.get=function(t){return e.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(e){delete this.cache_[e]},t}();exports.MemoryStorage=t;
},{"@firebase/util":78}],108:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./DOMStorageWrapper"),r=require("./MemoryStorage"),t=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var o=window[t];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new e.DOMStorageWrapper(o)}}catch(e){}return new r.MemoryStorage};exports.PersistentStorage=t("localStorage"),exports.SessionStorage=t("sessionStorage");
},{"./DOMStorageWrapper":155,"./MemoryStorage":156}],66:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("@firebase/util"),r=require("@firebase/util"),o=require("@firebase/util"),n=require("@firebase/util"),i=require("@firebase/util"),s=require("../storage/storage"),a=require("@firebase/util");exports.LUIDGenerator=function(){var e=1;return function(){return e++}}(),exports.sha1=function(e){var t=n.stringToByteArray(e),i=new o.Sha1;i.update(t);var s=i.digest();return r.base64.encodeByteArray(s)};var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",o=0;o<e.length;o++)Array.isArray(e[o])||e[o]&&"object"==typeof e[o]&&"number"==typeof e[o].length?r+=u.apply(null,e[o]):"object"==typeof e[o]?r+=i.stringify(e[o]):r+=e[o],r+=" ";return r};exports.logger=null;var p=!0;exports.enableLogging=function(t,r){e.assert(!r||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?exports.logger=void 0:"object"==typeof console.log&&(exports.logger=function(e){})),r&&s.SessionStorage.set("logging_enabled",!0)):"function"==typeof t?exports.logger=t:(exports.logger=null,s.SessionStorage.remove("logging_enabled"))},exports.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===p&&(p=!1,null===exports.logger&&!0===s.SessionStorage.get("logging_enabled")&&exports.enableLogging(!0)),exports.logger){var r=u.apply(null,e);exports.logger(r)}},exports.logWrapper=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];exports.log.apply(void 0,[e].concat(t))}},exports.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){u.apply(void 0,e);console.error}},exports.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.apply(void 0,e);throw new Error("FIREBASE FATAL ERROR: "+r)},exports.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){u.apply(void 0,e);console.warn}},exports.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&exports.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},exports.warnAboutUnsupportedMethod=function(e){exports.warn(e+" is unsupported and will likely change soon.  Please do not use.")},exports.isInvalidJSONNumber=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},exports.executeWhenDOMReady=function(e){if(a.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,r=function(){document.body?t||(t=!0,e()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}},exports.MIN_NAME="[MIN_NAME]",exports.MAX_NAME="[MAX_NAME]",exports.nameCompare=function(e,t){if(e===t)return 0;if(e===exports.MIN_NAME||t===exports.MAX_NAME)return-1;if(t===exports.MIN_NAME||e===exports.MAX_NAME)return 1;var r=exports.tryParseInt(e),o=exports.tryParseInt(t);return null!==r?null!==o?r-o==0?e.length-t.length:r-o:-1:null!==o?1:e<t?-1:1},exports.stringCompare=function(e,t){return e===t?0:e<t?-1:1},exports.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+i.stringify(t))},exports.ObjectToUniqueKey=function(e){if("object"!=typeof e||null===e)return i.stringify(e);var t=[];for(var r in e)t.push(r);t.sort();for(var o="{",n=0;n<t.length;n++)0!==n&&(o+=","),o+=i.stringify(t[n]),o+=":",o+=exports.ObjectToUniqueKey(e[t[n]]);return o+="}"},exports.splitStringBySize=function(e,t){var r=e.length;if(r<=t)return[e];for(var o=[],n=0;n<r;n+=t)n+t>r?o.push(e.substring(n,r)):o.push(e.substring(n,n+t));return o},exports.each=function(e,r){if(Array.isArray(e))for(var o=0;o<e.length;++o)r(o,e[o]);else t.forEach(e,function(e,t){return r(t,e)})},exports.bindCallback=function(e,t){return t?e.bind(t):e},exports.doubleToIEEE754String=function(t){e.assert(!exports.isInvalidJSONNumber(t),"Invalid JSON number");var r,o,n,i,s,a,u;for(0===t?(o=0,n=0,r=1/t==-1/0?1:0):(r=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(o=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,n=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(o=0,n=Math.round(t/Math.pow(2,-1074)))),a=[],s=52;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);for(s=11;s;s-=1)a.push(o%2?1:0),o=Math.floor(o/2);a.push(r?1:0),a.reverse(),u=a.join("");var p="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),p+=l}return p.toLowerCase()},exports.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},exports.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},exports.errorForServerCode=function(e,t){var r="Unknown Error";"too_big"===e?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?r="Client doesn't have permission to access the desired data.":"unavailable"==e&&(r="The service is unavailable");var o=new Error(e+" at "+t.path.toString()+": "+r);return o.code=e.toUpperCase(),o},exports.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),exports.tryParseInt=function(e){if(exports.INTEGER_REGEXP_.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},exports.exceptionGuard=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||"";throw exports.warn("Exception was thrown by user callback.",t),e},Math.floor(0))}},exports.callUserCallback=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"function"==typeof e&&exports.exceptionGuard(function(){e.apply(void 0,t)})},exports.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},exports.exportPropGetter=function(e,t,r){Object.defineProperty(e,t,{get:r})},exports.setTimeoutNonBlocking=function(e,t){var r=setTimeout(e,t);return"object"==typeof r&&r.unref&&r.unref(),r};
},{"@firebase/util":78,"../storage/storage":108}],104:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util"),t=require("@firebase/util"),i=function(){function t(e,t){if(void 0===t){this.pieces_=e.split("/");for(var i=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},t.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},t.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],i=this.pieceNum_;i<this.pieces_.length-1;i++)e.push(this.pieces_[i]);return new t(e,0)},t.prototype.child=function(e){for(var i=[],r=this.pieceNum_;r<this.pieces_.length;r++)i.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)i.push(e.pieces_[r]);else{var n=e.split("/");for(r=0;r<n.length;r++)n[r].length>0&&i.push(n[r])}return new t(i,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,i){var r=e.getFront(),n=i.getFront();if(null===r)return i;if(r===n)return t.relativePath(e.popFront(),i.popFront());throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+e+")")},t.comparePaths=function(t,i){for(var r=t.slice(),n=i.slice(),s=0;s<r.length&&s<n.length;s++){var h=e.nameCompare(r[s],n[s]);if(0!==h)return h}return r.length===n.length?0:r.length<n.length?-1:1},t.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,i=e.pieceNum_;t<=this.pieces_.length;t++,i++)if(this.pieces_[t]!==e.pieces_[i])return!1;return!0},t.prototype.contains=function(e){var t=this.pieceNum_,i=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0},t}();exports.Path=i;var r=function(){function e(e,i){this.errorPrefix_=i,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=t.stringLength(this.parts_[r]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=t.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=t.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}();exports.ValidationPath=r;
},{"./util":66,"@firebase/util":78}],186:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=function(){function e(){this.set={}}return e.prototype.add=function(t,e){this.set[t]=null===e||e},e.prototype.contains=function(e){return t.contains(this.set,e)},e.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},e.prototype.remove=function(t){delete this.set[t]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return t.isEmpty(this.set)},e.prototype.count=function(){return t.getCount(this.set)},e.prototype.each=function(e){t.forEach(this.set,function(t,o){return e(t,o)})},e.prototype.keys=function(){var e=[];return t.forEach(this.set,function(t){e.push(t)}),e},e}();exports.CountedSet=e;
},{"@firebase/util":78}],190:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}();exports.NamedNode=e;
},{}],197:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Node"),t=require("../../util/util"),r=function(){function r(){}return r.prototype.getCompare=function(){return this.compare.bind(this)},r.prototype.indexedValueChanged=function(r,o){var n=new e.NamedNode(t.MIN_NAME,r),i=new e.NamedNode(t.MIN_NAME,o);return 0!==this.compare(n,i)},r.prototype.minPost=function(){return e.NamedNode.MIN},r}();exports.Index=r;
},{"../Node":190,"../../util/util":66}],215:[function(require,module,exports) {
"use strict";function e(e){t=e}Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("@firebase/util"),i=require("../util/util"),o=require("@firebase/util");exports.setMaxNode=e,exports.priorityHashText=function(e){return"number"==typeof e?"number:"+i.doubleToIEEE754String(e):"string:"+e},exports.validatePriorityNode=function(e){if(e.isLeafNode()){var i=e.val();r.assert("string"==typeof i||"number"==typeof i||"object"==typeof i&&o.contains(i,".sv"),"Priority must be a string or number.")}else r.assert(e===t||e.isEmpty(),"priority of unexpected type.");r.assert(e===t||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
},{"@firebase/util":78,"../util/util":66}],183:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("@firebase/util"),r=require("../util/util"),i=require("./snap"),o=function(){function o(t,r){void 0===r&&(r=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=r,this.lazyHash_=null,e.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),i.validatePriorityNode(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return t},set:function(e){t=e},enumerable:!0,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(t){return new o(this.value_,t)},o.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(t,e){return null},o.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(t,r){var i=t.getFront();return null===i?r:r.isEmpty()&&".priority"!==i?this:(e.assert(".priority"!==i||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),r)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(t,e){return!1},o.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+i.priorityHashText(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?r.doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=r.sha1(t)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(t){return t===o.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof o.__childrenNodeConstructor?-1:(e.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},o.prototype.compareToLeafNode_=function(t){var r=typeof t.value_,i=typeof this.value_,n=o.VALUE_TYPE_ORDER.indexOf(r),u=o.VALUE_TYPE_ORDER.indexOf(i);return e.assert(n>=0,"Unknown leaf type: "+r),e.assert(u>=0,"Unknown leaf type: "+i),n===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-n},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}();exports.LeafNode=o;
},{"@firebase/util":78,"../util/util":66,"./snap":215}],125:[function(require,module,exports) {
"use strict";function e(e){o=e}function t(e){n=e}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var o,n,i=require("./Index"),u=require("../../util/util"),p=require("../Node"),a=require("../LeafNode");exports.setNodeFromJSON=e,exports.setMaxNode=t;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.compare=function(e,t){var r=e.node.getPriority(),o=t.node.getPriority(),n=r.compareTo(o);return 0===n?u.nameCompare(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return p.NamedNode.MIN},t.prototype.maxPost=function(){return new p.NamedNode(u.MAX_NAME,new a.LeafNode("[PRIORITY-POST]",n))},t.prototype.makePost=function(e,t){var r=o(e);return new p.NamedNode(t,new a.LeafNode("[PRIORITY-POST]",r))},t.prototype.toString=function(){return".priority"},t}(i.Index);exports.PriorityIndex=c,exports.PRIORITY_INDEX=new c;
},{"./Index":197,"../../util/util":66,"../Node":190,"../LeafNode":183}],129:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/Path"),t=require("./snap/indexes/PriorityIndex"),i=require("./util/CountedSet"),n=function(){function n(){this.value_=null,this.children_=null}return n.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();if(e=e.popFront(),this.children_.contains(t)){return this.children_.get(t).find(e)}return null},n.prototype.remember=function(e,t){if(e.isEmpty())this.value_=t,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,t);else{null==this.children_&&(this.children_=new i.CountedSet);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new n);var l=this.children_.get(r);e=e.popFront(),l.remember(e,t)}},n.prototype.forget=function(i){if(i.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var n=this.value_;this.value_=null;var r=this;return n.forEachChild(t.PRIORITY_INDEX,function(t,i){r.remember(new e.Path(t),i)}),this.forget(i)}if(null!==this.children_){var l=i.getFront();if(i=i.popFront(),this.children_.contains(l)){this.children_.get(l).forget(i)&&this.children_.remove(l)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},n.prototype.forEachTree=function(t,i){null!==this.value_?i(t,this.value_):this.forEachChild(function(n,r){var l=new e.Path(t.toString()+"/"+n);r.forEachTree(l,i)})},n.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,i){e(t,i)})},n}();exports.SparseSnapshotTree=n;
},{"./util/Path":104,"./util/CountedSet":186,"./snap/indexes/PriorityIndex":125}],214:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,r,o,n){void 0===n&&(n=null),this.isReverse_=o,this.resultGenerator_=n,this.nodeStack_=[];for(var i=1;!t.isEmpty();)if(t=t,i=e?r(t.key,e):1,o&&(i*=-1),i<0)t=this.isReverse_?t.left:t.right;else{if(0===i){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}();exports.SortedMapIterator=t;var e=function(){function t(e,r,n,i,l){this.key=e,this.value=r,this.color=null!=n?n:t.RED,this.left=null!=i?i:o.EMPTY_NODE,this.right=null!=l?l:o.EMPTY_NODE}return t.prototype.copy=function(e,r,o,n,i){return new t(null!=e?e:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=n?n:this.left,null!=i?i:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,r){var o,n;return n=this,o=r(t,n.key),(n=o<0?n.copy(null,null,null,n.left.insert(t,e,r),null):0===o?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,r))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return o.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var r,n;if(r=this,e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return o.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}();exports.LLRBNode=e;var r=function(){function t(){}return t.prototype.copy=function(t,e,r,o,n){return this},t.prototype.insert=function(t,r,o){return new e(t,r,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}();exports.LLRBEmptyNode=r;var o=function(){function o(t,e){void 0===e&&(e=o.EMPTY_NODE),this.comparator_=t,this.root_=e}return o.prototype.insert=function(t,r){return new o(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,e.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,e.BLACK,null,null))},o.prototype.get=function(t){for(var e,r=this.root_;!r.isEmpty();){if(0===(e=this.comparator_(t,r.key)))return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null},o.prototype.getPredecessorKey=function(t){for(var e,r=this.root_,o=null;!r.isEmpty();){if(0===(e=this.comparator_(t,r.key))){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},o.prototype.isEmpty=function(){return this.root_.isEmpty()},o.prototype.count=function(){return this.root_.count()},o.prototype.minKey=function(){return this.root_.minKey()},o.prototype.maxKey=function(){return this.root_.maxKey()},o.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},o.prototype.getIterator=function(e){return new t(this.root_,null,this.comparator_,!1,e)},o.prototype.getIteratorFrom=function(e,r){return new t(this.root_,e,this.comparator_,!1,r)},o.prototype.getReverseIteratorFrom=function(e,r){return new t(this.root_,e,this.comparator_,!0,r)},o.prototype.getReverseIterator=function(e){return new t(this.root_,null,this.comparator_,!0,e)},o.EMPTY_NODE=new r,o}();exports.SortedMap=o;
},{}],191:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/SortedMap"),n=require("../util/SortedMap"),e=Math.log(2),r=function(){function t(t){this.count=function(t){return parseInt(Math.log(t)/e,10)}(t+1),this.current_=this.count-1;var n=function(t){return parseInt(Array(t+1).join("1"),2)}(this.count);this.bits_=t+1&n}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}();exports.buildChildSet=function(e,o,u,i){e.sort(o);var l=function(n,r){var o,i,a=r-n;if(0==a)return null;if(1==a)return o=e[n],i=u?u(o):o,new t.LLRBNode(i,o.node,t.LLRBNode.BLACK,null,null);var s=parseInt(a/2,10)+n,c=l(n,s),L=l(s+1,r);return o=e[s],i=u?u(o):o,new t.LLRBNode(i,o.node,t.LLRBNode.BLACK,c,L)},a=function(n){for(var r=null,o=null,i=e.length,a=function(n,r){var o=i-n,a=i;i-=n;var c=l(o+1,a),L=e[o],d=u?u(L):L;s(new t.LLRBNode(d,L.node,r,null,c))},s=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<n.count;++c){var L=n.nextBitIsOne(),d=Math.pow(2,n.count-(c+1));L?a(d,t.LLRBNode.BLACK):(a(d,t.LLRBNode.BLACK),a(d,t.LLRBNode.RED))}return o}(new r(e.length));return new n.SortedMap(i||o,a)};
},{"../util/SortedMap":214}],124:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t,n=require("./Index"),r=require("../Node"),o=require("../../util/util"),i=require("@firebase/util"),u=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return e(u,n),Object.defineProperty(u,"__EMPTY_NODE",{get:function(){return t},set:function(e){t=e},enumerable:!0,configurable:!0}),u.prototype.compare=function(e,t){return o.nameCompare(e.name,t.name)},u.prototype.isDefinedOn=function(e){throw i.assertionError("KeyIndex.isDefinedOn not expected to be called.")},u.prototype.indexedValueChanged=function(e,t){return!1},u.prototype.minPost=function(){return r.NamedNode.MIN},u.prototype.maxPost=function(){return new r.NamedNode(o.MAX_NAME,t)},u.prototype.makePost=function(e,n){return i.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new r.NamedNode(e,t)},u.prototype.toString=function(){return".key"},u}(n.Index);exports.KeyIndex=u,exports.KEY_INDEX=new u;
},{"../Node":190,"./Index":197,"../../util/util":66,"@firebase/util":78}],193:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@firebase/util"),n=require("./childSet"),r=require("@firebase/util"),i=require("./Node"),o=require("./indexes/PriorityIndex"),d=require("./indexes/KeyIndex"),a={},s=function(){function s(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(s,"Default",{get:function(){return t.assert(a&&o.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),e=e||new s({".priority":a},{".priority":o.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),s.prototype.get=function(e){var t=r.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===a?null:t},s.prototype.hasIndex=function(e){return r.contains(this.indexSet_,e.toString())},s.prototype.addIndex=function(e,o){t.assert(e!==d.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var u=[],x=!1,f=o.getIterator(i.NamedNode.Wrap),p=f.getNext();p;)x=x||e.isDefinedOn(p.node),u.push(p),p=f.getNext();var h;h=x?n.buildChildSet(u,e.getCompare()):a;var m=e.toString(),l=r.clone(this.indexSet_);l[m]=e;var c=r.clone(this.indexes_);return c[m]=h,new s(c,l)},s.prototype.addToIndexes=function(e,o){var d=this;return new s(r.map(this.indexes_,function(s,u){var x=r.safeGet(d.indexSet_,u);if(t.assert(x,"Missing index implementation for "+u),s===a){if(x.isDefinedOn(e.node)){for(var f=[],p=o.getIterator(i.NamedNode.Wrap),h=p.getNext();h;)h.name!=e.name&&f.push(h),h=p.getNext();return f.push(e),n.buildChildSet(f,x.getCompare())}return a}var m=o.get(e.name),l=s;return m&&(l=l.remove(new i.NamedNode(e.name,m))),l.insert(e,e.node)}),this.indexSet_)},s.prototype.removeFromIndexes=function(e,t){return new s(r.map(this.indexes_,function(n){if(n===a)return n;var r=t.get(e.name);return r?n.remove(new i.NamedNode(e.name,r)):n}),this.indexSet_)},s}();exports.IndexMap=s;
},{"@firebase/util":78,"./childSet":191,"./Node":190,"./indexes/PriorityIndex":125,"./indexes/KeyIndex":124}],192:[function(require,module,exports) {
"use strict";function e(e,r){return t.nameCompare(e.name,r.name)}function r(e,r){return t.nameCompare(e,r)}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/util");exports.NAME_ONLY_COMPARATOR=e,exports.NAME_COMPARATOR=r;
},{"../util/util":66}],163:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t,r=require("@firebase/util"),i=require("../util/util"),n=require("../util/SortedMap"),o=require("./Node"),s=require("./snap"),a=require("./indexes/PriorityIndex"),u=require("./indexes/KeyIndex"),d=require("./IndexMap"),p=require("./LeafNode"),h=require("./comparators"),l=function(){function e(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&s.validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&r.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return t||(t=new e(new n.SortedMap(h.NAME_COMPARATOR),null,d.IndexMap.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||t},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var r=this.children_.get(e);return null===r?t:r},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(i,n){if(r.assert(n,"We should always be passing snapshot nodes"),".priority"===i)return this.updatePriority(n);var s=new o.NamedNode(i,n),a=void 0,u=void 0,d=void 0;return n.isEmpty()?(a=this.children_.remove(i),u=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(i,n),u=this.indexMap_.addToIndexes(s,this.children_)),d=a.isEmpty()?t:this.priorityNode_,new e(a,d,u)},e.prototype.updateChild=function(e,t){var i=e.getFront();if(null===i)return t;r.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var n=this.getImmediateChild(i).updateChild(e.popFront(),t);return this.updateImmediateChild(i,n)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var r={},i=0,n=0,o=!0;if(this.forEachChild(a.PRIORITY_INDEX,function(s,a){r[s]=a.val(t),i++,o&&e.INTEGER_REGEXP_.test(s)?n=Math.max(n,Number(s)):o=!1}),!t&&o&&n<2*i){var s=[];for(var u in r)s[u]=r[u];return s}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+s.priorityHashText(this.getPriority().val())+":"),this.forEachChild(a.PRIORITY_INDEX,function(t,r){var i=r.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":i.sha1(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,r){var i=this.resolveIndex_(r);if(i){var n=i.getPredecessorKey(new o.NamedNode(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.minKey();return r&&r.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new o.NamedNode(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.maxKey();return r&&r.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new o.NamedNode(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,function(e){return e});for(var i=this.children_.getIteratorFrom(e.name,o.NamedNode.Wrap),n=i.peek();null!=n&&t.compare(n,e)<0;)i.getNext(),n=i.peek();return i},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,function(e){return e});for(var i=this.children_.getReverseIteratorFrom(e.name,o.NamedNode.Wrap),n=i.peek();null!=n&&t.compare(n,e)>0;)i.getNext(),n=i.peek();return i},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===exports.MAX_NODE?-1:0},e.prototype.withIndex=function(t){if(t===u.KEY_INDEX||this.indexMap_.hasIndex(t))return this;var r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)},e.prototype.isIndexed=function(e){return e===u.KEY_INDEX||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var r=this.getIterator(a.PRIORITY_INDEX),i=t.getIterator(a.PRIORITY_INDEX),n=r.getNext(),o=i.getNext();n&&o;){if(n.name!==o.name||!n.node.equals(o.node))return!1;n=r.getNext(),o=i.getNext()}return null===n&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===u.KEY_INDEX?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}();exports.ChildrenNode=l;var c=function(t){function r(){return t.call(this,new n.SortedMap(h.NAME_COMPARATOR),l.EMPTY_NODE,d.IndexMap.Default)||this}return e(r,t),r.prototype.compareTo=function(e){return e===this?0:1},r.prototype.equals=function(e){return e===this},r.prototype.getPriority=function(){return this},r.prototype.getImmediateChild=function(e){return l.EMPTY_NODE},r.prototype.isEmpty=function(){return!1},r}(l);exports.MaxNode=c,exports.MAX_NODE=new c,Object.defineProperties(o.NamedNode,{MIN:{value:new o.NamedNode(i.MIN_NAME,l.EMPTY_NODE)},MAX:{value:new o.NamedNode(i.MAX_NAME,exports.MAX_NODE)}}),u.KeyIndex.__EMPTY_NODE=l.EMPTY_NODE,p.LeafNode.__childrenNodeConstructor=l,s.setMaxNode(exports.MAX_NODE),a.setMaxNode(exports.MAX_NODE);
},{"@firebase/util":78,"./Node":190,"./indexes/PriorityIndex":125,"./IndexMap":193,"./LeafNode":183,"./comparators":192,"../util/util":66,"../util/SortedMap":214,"./snap":215,"./indexes/KeyIndex":124}],162:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,e){this.node_=t,this.fullyInitialized_=i,this.filtered_=e}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var i=t.getFront();return this.isCompleteForChild(i)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();exports.CacheNode=t;
},{}],164:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../snap/ChildrenNode"),t=require("./CacheNode"),n=function(){function n(e,t){this.eventCache_=e,this.serverCache_=t}return n.prototype.updateEventSnap=function(e,r,o){return new n(new t.CacheNode(e,r,o),this.serverCache_)},n.prototype.updateServerSnap=function(e,r,o){return new n(this.eventCache_,new t.CacheNode(e,r,o))},n.prototype.getEventCache=function(){return this.eventCache_},n.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},n.prototype.getServerCache=function(){return this.serverCache_},n.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},n.Empty=new n(new t.CacheNode(e.ChildrenNode.EMPTY_NODE,!1,!1),new t.CacheNode(e.ChildrenNode.EMPTY_NODE,!1,!1)),n}();exports.ViewCache=n;
},{"../snap/ChildrenNode":163,"./CacheNode":162}],217:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n,t,d,h){this.type=e,this.snapshotNode=n,this.childName=t,this.oldSnap=d,this.prevName=h}return e.valueChange=function(n){return new e(e.VALUE,n)},e.childAddedChange=function(n,t){return new e(e.CHILD_ADDED,t,n)},e.childRemovedChange=function(n,t){return new e(e.CHILD_REMOVED,t,n)},e.childChangedChange=function(n,t,d){return new e(e.CHILD_CHANGED,t,n,d)},e.childMovedChange=function(n,t){return new e(e.CHILD_MOVED,t,n)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}();exports.Change=e;
},{}],187:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),i=require("../Change"),t=require("../../snap/ChildrenNode"),d=require("../../snap/indexes/PriorityIndex"),n=function(){function n(e){this.index_=e}return n.prototype.updateChild=function(t,d,n,h,a,r){e.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=t.getImmediateChild(d);return o.getChild(h).equals(n.getChild(h))&&o.isEmpty()==n.isEmpty()?t:(null!=r&&(n.isEmpty()?t.hasChild(d)?r.trackChildChange(i.Change.childRemovedChange(d,o)):e.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?r.trackChildChange(i.Change.childAddedChange(d,n)):r.trackChildChange(i.Change.childChangedChange(d,n,o))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(d,n).withIndex(this.index_))},n.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(d.PRIORITY_INDEX,function(e,d){t.hasChild(e)||n.trackChildChange(i.Change.childRemovedChange(e,d))}),t.isLeafNode()||t.forEachChild(d.PRIORITY_INDEX,function(t,d){if(e.hasChild(t)){var h=e.getImmediateChild(t);h.equals(d)||n.trackChildChange(i.Change.childChangedChange(t,d,h))}else n.trackChildChange(i.Change.childAddedChange(t,d))})),t.withIndex(this.index_)},n.prototype.updatePriority=function(e,i){return e.isEmpty()?t.ChildrenNode.EMPTY_NODE:e.updatePriority(i)},n.prototype.filtersNodes=function(){return!1},n.prototype.getIndexedFilter=function(){return this},n.prototype.getIndex=function(){return this.index_},n}();exports.IndexedFilter=n;
},{"@firebase/util":78,"../Change":217,"../../snap/ChildrenNode":163,"../../snap/indexes/PriorityIndex":125}],204:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r=require("@firebase/util");!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(e=exports.OperationType||(exports.OperationType={}));var t=function(){function e(e,t,n,s){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=s,r.assert(!s||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(r){return new e(!1,!0,r,!0)},e}();exports.OperationSource=t;
},{"@firebase/util":78}],223:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),a=require("./Change"),n=require("@firebase/util"),h=function(){function h(){this.changeMap_={}}return h.prototype.trackChildChange=function(h){var t=h.type,C=h.childName;n.assert(t==a.Change.CHILD_ADDED||t==a.Change.CHILD_CHANGED||t==a.Change.CHILD_REMOVED,"Only child changes supported for tracking"),n.assert(".priority"!==C,"Only non-priority child changes can be tracked.");var i=e.safeGet(this.changeMap_,C);if(i){var g=i.type;if(t==a.Change.CHILD_ADDED&&g==a.Change.CHILD_REMOVED)this.changeMap_[C]=a.Change.childChangedChange(C,h.snapshotNode,i.snapshotNode);else if(t==a.Change.CHILD_REMOVED&&g==a.Change.CHILD_ADDED)delete this.changeMap_[C];else if(t==a.Change.CHILD_REMOVED&&g==a.Change.CHILD_CHANGED)this.changeMap_[C]=a.Change.childRemovedChange(C,i.oldSnap);else if(t==a.Change.CHILD_CHANGED&&g==a.Change.CHILD_ADDED)this.changeMap_[C]=a.Change.childAddedChange(C,h.snapshotNode);else{if(t!=a.Change.CHILD_CHANGED||g!=a.Change.CHILD_CHANGED)throw n.assertionError("Illegal combination of changes: "+h+" occurred after "+i);this.changeMap_[C]=a.Change.childChangedChange(C,h.snapshotNode,i.oldSnap)}}else this.changeMap_[C]=h},h.prototype.getChanges=function(){return e.getValues(this.changeMap_)},h}();exports.ChildChangeAccumulator=h;
},{"@firebase/util":78,"./Change":217}],200:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("./SortedMap"),r=require("./Path"),n=require("./util"),i=require("@firebase/util"),o=function(){return t||(t=new e.SortedMap(n.stringCompare)),t},h=function(){function t(t,e){void 0===e&&(e=o()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return i.forEach(e,function(t,e){n=n.set(new r.Path(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:r.Path.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var o=i.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=o){return{path:new r.Path(n).child(o.path),value:o.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var r=e.getFront(),n=this.children.get(r);return null!==n?n.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,r){if(e.isEmpty())return new t(r,this.children);var n=e.getFront(),i=(this.children.get(n)||t.Empty).set(e.popFront(),r),o=this.children.insert(n,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var r=e.getFront(),n=this.children.get(r);if(n){var i=n.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),r=this.children.get(e);return r?r.get(t.popFront()):null},t.prototype.setTree=function(e,r){if(e.isEmpty())return r;var n=e.getFront(),i=(this.children.get(n)||t.Empty).setTree(e.popFront(),r),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(r.Path.Empty,t)},t.prototype.fold_=function(t,e){var r={};return this.children.inorderTraversal(function(n,i){r[n]=i.fold_(t.child(n),e)}),e(t,this.value,r)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,r.Path.Empty,e)},t.prototype.findOnPath_=function(t,e,r){var n=!!this.value&&r(e,this.value);if(n)return n;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),r):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,r.Path.Empty,e)},t.prototype.foreachOnPath_=function(e,r,n){if(e.isEmpty())return this;this.value&&n(r,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),r.child(i),n):t.Empty},t.prototype.foreach=function(t){this.foreach_(r.Path.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(r,n){n.foreach_(t.child(r),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,r){r.value&&t(e,r.value)})},t.Empty=new t(null),t}();exports.ImmutableTree=h;
},{"./Path":104,"./util":66,"@firebase/util":78,"./SortedMap":214}],224:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./CacheNode"),t=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,r){return null},e}();exports.NoCompleteChildSource_=t,exports.NO_COMPLETE_CHILD_SOURCE=new t;var r=function(){function t(e,t,r){void 0===r&&(r=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}return t.prototype.getCompleteChild=function(t){var r=this.viewCache_.getEventCache();if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);var i=null!=this.optCompleteServerCache_?new e.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,i)},t.prototype.getChildAfterChild=function(e,t,r){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(i,t,1,r,e);return 0===o.length?null:o[0]},t}();exports.WriteTreeCompleteChildSource=r;
},{"./CacheNode":162}],216:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../operation/Operation"),t=require("@firebase/util"),r=require("./ChildChangeAccumulator"),i=require("./Change"),a=require("../snap/ChildrenNode"),l=require("../snap/indexes/KeyIndex"),n=require("../util/ImmutableTree"),o=require("../util/Path"),d=require("./CompleteChildSource"),p=function(){return function(e,t){this.viewCache=e,this.changes=t}}();exports.ProcessorResult=p;var s=function(){function s(e){this.filter_=e}return s.prototype.assertIndexed=function(e){t.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),t.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},s.prototype.applyOperation=function(i,a,l,n){var o,d,h=new r.ChildChangeAccumulator;if(a.type===e.OperationType.OVERWRITE){var v=a;v.source.fromUser?o=this.applyUserOverwrite_(i,v.path,v.snap,l,n,h):(t.assert(v.source.fromServer,"Unknown source."),d=v.source.tagged||i.getServerCache().isFiltered()&&!v.path.isEmpty(),o=this.applyServerOverwrite_(i,v.path,v.snap,l,n,d,h))}else if(a.type===e.OperationType.MERGE){var u=a;u.source.fromUser?o=this.applyUserMerge_(i,u.path,u.children,l,n,h):(t.assert(u.source.fromServer,"Unknown source."),d=u.source.tagged||i.getServerCache().isFiltered(),o=this.applyServerMerge_(i,u.path,u.children,l,n,d,h))}else if(a.type===e.OperationType.ACK_USER_WRITE){var g=a;o=g.revert?this.revertUserWrite_(i,g.path,l,n,h):this.ackUserWrite_(i,g.path,g.affectedTree,l,n,h)}else{if(a.type!==e.OperationType.LISTEN_COMPLETE)throw t.assertionError("Unknown operation type: "+a.type);o=this.listenComplete_(i,a.path,l,h)}var c=h.getChanges();return s.maybeAddValueEvent_(i,o,c),new p(o,c)},s.maybeAddValueEvent_=function(e,t,r){var a=t.getEventCache();if(a.isFullyInitialized()){var l=a.getNode().isLeafNode()||a.getNode().isEmpty(),n=e.getCompleteEventSnap();(r.length>0||!e.getEventCache().isFullyInitialized()||l&&!a.getNode().equals(n)||!a.getNode().getPriority().equals(n.getPriority()))&&r.push(i.Change.valueChange(t.getCompleteEventSnap()))}},s.prototype.generateEventCacheAfterServerEvent_=function(e,r,i,l,n){var o=e.getEventCache();if(null!=i.shadowingWrite(r))return e;var d=void 0,p=void 0;if(r.isEmpty())if(t.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var s=e.getCompleteServerSnap(),h=s instanceof a.ChildrenNode?s:a.ChildrenNode.EMPTY_NODE,v=i.calcCompleteEventChildren(h);d=this.filter_.updateFullNode(e.getEventCache().getNode(),v,n)}else{var u=i.calcCompleteEventCache(e.getCompleteServerSnap());d=this.filter_.updateFullNode(e.getEventCache().getNode(),u,n)}else{var g=r.getFront();if(".priority"==g){t.assert(1==r.getLength(),"Can't have a priority with additional path components");var c=o.getNode();p=e.getServerCache().getNode();var C=i.calcEventCacheAfterServerOverwrite(r,c,p);d=null!=C?this.filter_.updatePriority(c,C):o.getNode()}else{var f=r.popFront(),y=void 0;if(o.isCompleteForChild(g)){p=e.getServerCache().getNode();var m=i.calcEventCacheAfterServerOverwrite(r,o.getNode(),p);y=null!=m?o.getNode().getImmediateChild(g).updateChild(f,m):o.getNode().getImmediateChild(g)}else y=i.calcCompleteChild(g,e.getServerCache());d=null!=y?this.filter_.updateChild(o.getNode(),g,y,f,l,n):o.getNode()}}return e.updateEventSnap(d,o.isFullyInitialized()||r.isEmpty(),this.filter_.filtersNodes())},s.prototype.applyServerOverwrite_=function(e,t,r,i,a,l,n){var o,p=e.getServerCache(),s=l?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())o=s.updateFullNode(p.getNode(),r,null);else if(s.filtersNodes()&&!p.isFiltered()){var h=p.getNode().updateChild(t,r);o=s.updateFullNode(p.getNode(),h,null)}else{var v=t.getFront();if(!p.isCompleteForPath(t)&&t.getLength()>1)return e;var u=t.popFront(),g=p.getNode().getImmediateChild(v).updateChild(u,r);o=".priority"==v?s.updatePriority(p.getNode(),g):s.updateChild(p.getNode(),v,g,u,d.NO_COMPLETE_CHILD_SOURCE,null)}var c=e.updateServerSnap(o,p.isFullyInitialized()||t.isEmpty(),s.filtersNodes()),C=new d.WriteTreeCompleteChildSource(i,c,a);return this.generateEventCacheAfterServerEvent_(c,t,i,C,n)},s.prototype.applyUserOverwrite_=function(e,t,r,i,l,n){var o,p,s=e.getEventCache(),h=new d.WriteTreeCompleteChildSource(i,e,l);if(t.isEmpty())p=this.filter_.updateFullNode(e.getEventCache().getNode(),r,n),o=e.updateEventSnap(p,!0,this.filter_.filtersNodes());else{var v=t.getFront();if(".priority"===v)p=this.filter_.updatePriority(e.getEventCache().getNode(),r),o=e.updateEventSnap(p,s.isFullyInitialized(),s.isFiltered());else{var u=t.popFront(),g=s.getNode().getImmediateChild(v),c=void 0;if(u.isEmpty())c=r;else{var C=h.getCompleteChild(v);c=null!=C?".priority"===u.getBack()&&C.getChild(u.parent()).isEmpty()?C:C.updateChild(u,r):a.ChildrenNode.EMPTY_NODE}if(g.equals(c))o=e;else{var f=this.filter_.updateChild(s.getNode(),v,c,u,h,n);o=e.updateEventSnap(f,s.isFullyInitialized(),this.filter_.filtersNodes())}}}return o},s.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},s.prototype.applyUserMerge_=function(e,t,r,i,a,l){var n=this,o=e;return r.foreach(function(r,d){var p=t.child(r);s.cacheHasChild_(e,p.getFront())&&(o=n.applyUserOverwrite_(o,p,d,i,a,l))}),r.foreach(function(r,d){var p=t.child(r);s.cacheHasChild_(e,p.getFront())||(o=n.applyUserOverwrite_(o,p,d,i,a,l))}),o},s.prototype.applyMerge_=function(e,t){return t.foreach(function(t,r){e=e.updateChild(t,r)}),e},s.prototype.applyServerMerge_=function(e,t,r,i,a,l,d){var p=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var s,h=e;s=t.isEmpty()?r:n.ImmutableTree.Empty.setTree(t,r);var v=e.getServerCache().getNode();return s.children.inorderTraversal(function(t,r){if(v.hasChild(t)){var n=e.getServerCache().getNode().getImmediateChild(t),s=p.applyMerge_(n,r);h=p.applyServerOverwrite_(h,new o.Path(t),s,i,a,l,d)}}),s.children.inorderTraversal(function(t,r){var n=!e.getServerCache().isCompleteForChild(t)&&null==r.value;if(!v.hasChild(t)&&!n){var s=e.getServerCache().getNode().getImmediateChild(t),u=p.applyMerge_(s,r);h=p.applyServerOverwrite_(h,new o.Path(t),u,i,a,l,d)}}),h},s.prototype.ackUserWrite_=function(e,t,r,i,a,d){if(null!=i.shadowingWrite(t))return e;var p=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=r.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),i,a,p,d);if(t.isEmpty()){var h=n.ImmutableTree.Empty;return s.getNode().forEachChild(l.KEY_INDEX,function(e,t){h=h.set(new o.Path(e),t)}),this.applyServerMerge_(e,t,h,i,a,p,d)}return e}var v=n.ImmutableTree.Empty;return r.foreach(function(e,r){var i=t.child(e);s.isCompleteForPath(i)&&(v=v.set(e,s.getNode().getChild(i)))}),this.applyServerMerge_(e,t,v,i,a,p,d)},s.prototype.listenComplete_=function(e,t,r,i){var a=e.getServerCache(),l=e.updateServerSnap(a.getNode(),a.isFullyInitialized()||t.isEmpty(),a.isFiltered());return this.generateEventCacheAfterServerEvent_(l,t,r,d.NO_COMPLETE_CHILD_SOURCE,i)},s.prototype.revertUserWrite_=function(e,r,i,l,n){var p;if(null!=i.shadowingWrite(r))return e;var s=new d.WriteTreeCompleteChildSource(i,e,l),h=e.getEventCache().getNode(),v=void 0;if(r.isEmpty()||".priority"===r.getFront()){var u=void 0;if(e.getServerCache().isFullyInitialized())u=i.calcCompleteEventCache(e.getCompleteServerSnap());else{var g=e.getServerCache().getNode();t.assert(g instanceof a.ChildrenNode,"serverChildren would be complete if leaf node"),u=i.calcCompleteEventChildren(g)}u=u,v=this.filter_.updateFullNode(h,u,n)}else{var c=r.getFront(),C=i.calcCompleteChild(c,e.getServerCache());null==C&&e.getServerCache().isCompleteForChild(c)&&(C=h.getImmediateChild(c)),(v=null!=C?this.filter_.updateChild(h,c,C,r.popFront(),s,n):e.getEventCache().getNode().hasChild(c)?this.filter_.updateChild(h,c,a.ChildrenNode.EMPTY_NODE,r.popFront(),s,n):h).isEmpty()&&e.getServerCache().isFullyInitialized()&&(p=i.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(v=this.filter_.updateFullNode(v,p,n))}return p=e.getServerCache().isFullyInitialized()||null!=i.shadowingWrite(o.Path.Empty),e.updateEventSnap(v,p,this.filter_.filtersNodes())},s}();exports.ViewProcessor=s;
},{"../operation/Operation":204,"@firebase/util":78,"./Change":217,"../snap/ChildrenNode":163,"../snap/indexes/KeyIndex":124,"./ChildChangeAccumulator":223,"../util/ImmutableTree":200,"./CompleteChildSource":224,"../util/Path":104}],218:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../snap/Node"),n=require("./Change"),t=require("@firebase/util"),r=function(){function r(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return r.prototype.generateEventsForChanges=function(e,t,r){var a=this,o=[],i=[];return e.forEach(function(e){e.type===n.Change.CHILD_CHANGED&&a.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&i.push(n.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,n.Change.CHILD_REMOVED,e,r,t),this.generateEventsForType_(o,n.Change.CHILD_ADDED,e,r,t),this.generateEventsForType_(o,n.Change.CHILD_MOVED,i,r,t),this.generateEventsForType_(o,n.Change.CHILD_CHANGED,e,r,t),this.generateEventsForType_(o,n.Change.VALUE,e,r,t),o},r.prototype.generateEventsForType_=function(e,n,t,r,a){var o=this,i=t.filter(function(e){return e.type===n});i.sort(this.compareChanges_.bind(this)),i.forEach(function(n){var t=o.materializeSingleChange_(n,a);r.forEach(function(r){r.respondsTo(n.type)&&e.push(r.createEvent(t,o.query_))})})},r.prototype.materializeSingleChange_=function(e,n){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},r.prototype.compareChanges_=function(n,r){if(null==n.childName||null==r.childName)throw t.assertionError("Should only compare child_ events.");var a=new e.NamedNode(n.childName,n.snapshotNode),o=new e.NamedNode(r.childName,r.snapshotNode);return this.index_.compare(a,o)},r}();exports.EventGenerator=r;
},{"./Change":217,"@firebase/util":78,"../snap/Node":190}],165:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./filter/IndexedFilter"),t=require("./ViewProcessor"),r=require("../snap/ChildrenNode"),i=require("./CacheNode"),n=require("./ViewCache"),a=require("./EventGenerator"),s=require("@firebase/util"),o=require("../operation/Operation"),h=require("./Change"),l=require("../snap/indexes/PriorityIndex"),u=function(){function u(s,o){this.query_=s,this.eventRegistrations_=[];var h=this.query_.getQueryParams(),l=new e.IndexedFilter(h.getIndex()),u=h.getNodeFilter();this.processor_=new t.ViewProcessor(u);var c=o.getServerCache(),v=o.getEventCache(),g=l.updateFullNode(r.ChildrenNode.EMPTY_NODE,c.getNode(),null),d=u.updateFullNode(r.ChildrenNode.EMPTY_NODE,v.getNode(),null),p=new i.CacheNode(g,c.isFullyInitialized(),l.filtersNodes()),C=new i.CacheNode(d,v.isFullyInitialized(),u.filtersNodes());this.viewCache_=new n.ViewCache(C,p),this.eventGenerator_=new a.EventGenerator(this.query_)}return u.prototype.getQuery=function(){return this.query_},u.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},u.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},u.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},u.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},u.prototype.removeEventRegistration=function(e,t){var r=[];if(t){s.assert(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var n=e.createCancelEvent(t,i);n&&r.push(n)})}if(e){for(var n=[],a=0;a<this.eventRegistrations_.length;++a){var o=this.eventRegistrations_[a];if(o.matches(e)){if(e.hasAnyCallback()){n=n.concat(this.eventRegistrations_.slice(a+1));break}}else n.push(o)}this.eventRegistrations_=n}else this.eventRegistrations_=[];return r},u.prototype.applyOperation=function(e,t,r){e.type===o.OperationType.MERGE&&null!==e.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,n=this.processor_.applyOperation(i,e,t,r);return this.processor_.assertIndexed(n.viewCache),s.assert(n.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},u.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),r=[];if(!t.getNode().isLeafNode()){t.getNode().forEachChild(l.PRIORITY_INDEX,function(e,t){r.push(h.Change.childAddedChange(e,t))})}return t.isFullyInitialized()&&r.push(h.Change.valueChange(t.getNode())),this.generateEventsForChanges_(r,t.getNode(),e)},u.prototype.generateEventsForChanges_=function(e,t,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,i)},u}();exports.View=u;
},{"./filter/IndexedFilter":187,"@firebase/util":78,"../snap/indexes/PriorityIndex":125,"../snap/ChildrenNode":163,"./ViewCache":164,"./ViewProcessor":216,"./CacheNode":162,"./Change":217,"./EventGenerator":218,"../operation/Operation":204}],102:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("./view/CacheNode"),r=require("./snap/ChildrenNode"),i=require("@firebase/util"),n=require("@firebase/util"),o=require("./view/ViewCache"),a=require("./view/View"),s=function(){function s(){this.views_={}}return Object.defineProperty(s,"__referenceConstructor",{get:function(){return i.assert(e,"Reference.ts has not been loaded"),e},set:function(t){i.assert(!e,"__referenceConstructor has already been defined"),e=t},enumerable:!0,configurable:!0}),s.prototype.isEmpty=function(){return n.isEmpty(this.views_)},s.prototype.applyOperation=function(e,t,r){var o=e.source.queryId;if(null!==o){var a=n.safeGet(this.views_,o);return i.assert(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,r)}var s=[];return n.forEach(this.views_,function(i,n){s=s.concat(n.applyOperation(e,t,r))}),s},s.prototype.addEventRegistration=function(e,i,s,u,l){var c=e.queryIdentifier(),p=n.safeGet(this.views_,c);if(!p){var v=s.calcCompleteEventCache(l?u:null),f=!1;v?f=!0:u instanceof r.ChildrenNode?(v=s.calcCompleteEventChildren(u),f=!1):(v=r.ChildrenNode.EMPTY_NODE,f=!1);var h=new o.ViewCache(new t.CacheNode(v,f,!1),new t.CacheNode(u,l,!1));p=new a.View(e,h),this.views_[c]=p}return p.addEventRegistration(i),p.getInitialEvents(i)},s.prototype.removeEventRegistration=function(e,t,r){var i=e.queryIdentifier(),o=[],a=[],u=this.hasCompleteView();if("default"===i){var l=this;n.forEach(this.views_,function(e,i){a=a.concat(i.removeEventRegistration(t,r)),i.isEmpty()&&(delete l.views_[e],i.getQuery().getQueryParams().loadsAllData()||o.push(i.getQuery()))})}else{var c=n.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(t,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new s.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},s.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},s.prototype.getCompleteServerCache=function(e){var t=null;return n.forEach(this.views_,function(r,i){t=t||i.getCompleteServerCache(e)}),t},s.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return n.safeGet(this.views_,t)},s.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},s.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},s.prototype.getCompleteView=function(){return n.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},s}();exports.SyncPoint=s;
},{"@firebase/util":78,"./view/CacheNode":162,"./snap/ChildrenNode":163,"./view/ViewCache":164,"./view/View":165}],199:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("../util/Path"),r=require("./Operation"),i=function(){function i(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=r.OperationType.ACK_USER_WRITE,this.source=r.OperationSource.User}return i.prototype.operationForChild=function(r){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return e.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var s=this.affectedTree.subtree(new t.Path(r));return new i(t.Path.Empty,s,this.revert)}return e.assert(this.path.getFront()===r,"operationForChild called for unrelated child."),new i(this.path.popFront(),this.affectedTree,this.revert)},i}();exports.AckUserWrite=i;
},{"@firebase/util":78,"../util/Path":104,"./Operation":204}],205:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Operation"),e=require("../util/Path"),i=function(){function i(e,i,r){this.source=e,this.path=i,this.snap=r,this.type=t.OperationType.OVERWRITE}return i.prototype.operationForChild=function(t){return this.path.isEmpty()?new i(this.source,e.Path.Empty,this.snap.getImmediateChild(t)):new i(this.source,this.path.popFront(),this.snap)},i}();exports.Overwrite=i;
},{"./Operation":204,"../util/Path":104}],201:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Operation"),e=require("./Overwrite"),r=require("../util/Path"),i=require("@firebase/util"),n=function(){function n(e,r,i){this.source=e,this.path=r,this.children=i,this.type=t.OperationType.MERGE}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){var o=this.children.subtree(new r.Path(t));return o.isEmpty()?null:o.value?new e.Overwrite(this.source,r.Path.Empty,o.value):new n(this.source,r.Path.Empty,o)}return i.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,this.path.popFront(),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}();exports.Merge=n;
},{"./Operation":204,"../util/Path":104,"./Overwrite":205,"@firebase/util":78}],202:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/Path"),e=require("./Operation"),r=function(){function r(t,r){this.source=t,this.path=r,this.type=e.OperationType.LISTEN_COMPLETE}return r.prototype.operationForChild=function(e){return this.path.isEmpty()?new r(this.source,t.Path.Empty):new r(this.source,this.path.popFront())},r}();exports.ListenComplete=r;
},{"../util/Path":104,"./Operation":204}],233:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/ImmutableTree"),t=require("./util/Path"),r=require("@firebase/util"),i=require("./snap/Node"),n=require("./snap/indexes/PriorityIndex"),u=require("@firebase/util"),l=function(){function l(e){this.writeTree_=e}return l.prototype.addWrite=function(r,i){if(r.isEmpty())return new l(new e.ImmutableTree(i));var n=this.writeTree_.findRootMostValueAndPath(r);if(null!=n){var u=n.path,o=n.value,a=t.Path.relativePath(u,r);return o=o.updateChild(a,i),new l(this.writeTree_.set(u,o))}var p=new e.ImmutableTree(i);return new l(this.writeTree_.setTree(r,p))},l.prototype.addWrites=function(e,t){var i=this;return r.forEach(t,function(t,r){i=i.addWrite(e.child(t),r)}),i},l.prototype.removeWrite=function(t){if(t.isEmpty())return l.Empty;return new l(this.writeTree_.setTree(t,e.ImmutableTree.Empty))},l.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},l.prototype.getCompleteNode=function(e){var r=this.writeTree_.findRootMostValueAndPath(e);return null!=r?this.writeTree_.get(r.path).getChild(t.Path.relativePath(r.path,e)):null},l.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(n.PRIORITY_INDEX,function(t,r){e.push(new i.NamedNode(t,r))}):this.writeTree_.children.inorderTraversal(function(t,r){null!=r.value&&e.push(new i.NamedNode(t,r.value))}),e},l.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var r=this.getCompleteNode(t);return new l(null!=r?new e.ImmutableTree(r):this.writeTree_.subtree(t))},l.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},l.prototype.apply=function(e){return l.applySubtreeWrite_(t.Path.Empty,this.writeTree_,e)},l.Empty=new l(new e.ImmutableTree(null)),l.applySubtreeWrite_=function(e,t,r){if(null!=t.value)return r.updateChild(e,t.value);var i=null;return t.children.inorderTraversal(function(t,n){".priority"===t?(u.assert(null!==n.value,"Priority writes must always be leaf nodes"),i=n.value):r=l.applySubtreeWrite_(e.child(t),n,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},l}();exports.CompoundWrite=l;
},{"./util/ImmutableTree":200,"./util/Path":104,"@firebase/util":78,"./snap/indexes/PriorityIndex":125,"./snap/Node":190}],203:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("@firebase/util"),i=require("./util/Path"),r=require("./CompoundWrite"),n=require("./snap/indexes/PriorityIndex"),l=require("./snap/ChildrenNode"),s=function(){function s(){this.visibleWrites_=r.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return s.prototype.childWrites=function(e){return new o(e,this)},s.prototype.addOverwrite=function(e,i,r,n){t.assert(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),this.allWrites_.push({path:e,snap:i,writeId:r,visible:n}),n&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,i)),this.lastWriteId_=r},s.prototype.addMerge=function(e,i,r){t.assert(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:i,writeId:r,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,i),this.lastWriteId_=r},s.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var i=this.allWrites_[t];if(i.writeId===e)return i}return null},s.prototype.removeWrite=function(i){var r=this,n=this.allWrites_.findIndex(function(e){return e.writeId===i});t.assert(n>=0,"removeWrite called with nonexistent writeId.");var l=this.allWrites_[n];this.allWrites_.splice(n,1);for(var s=l.visible,o=!1,a=this.allWrites_.length-1;s&&a>=0;){var h=this.allWrites_[a];h.visible&&(a>=n&&this.recordContainsPath_(h,l.path)?s=!1:l.path.contains(h.path)&&(o=!0)),a--}if(s){if(o)return this.resetTree_(),!0;if(l.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(l.path);else{var d=l.children;e.forEach(d,function(e){r.visibleWrites_=r.visibleWrites_.removeWrite(l.path.child(e))})}return!0}return!1},s.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},s.prototype.calcCompleteEventCache=function(e,t,r,n){if(r||n){var o=this.visibleWrites_.childCompoundWrite(e);if(!n&&o.isEmpty())return t;if(n||null!=t||o.hasCompleteWrite(i.Path.Empty)){var a=function(t){return(t.visible||n)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},h=s.layerTree_(this.allWrites_,a,e);c=t||l.ChildrenNode.EMPTY_NODE;return h.apply(c)}return null}var d=this.visibleWrites_.getCompleteNode(e);if(null!=d)return d;var p=this.visibleWrites_.childCompoundWrite(e);if(p.isEmpty())return t;if(null!=t||p.hasCompleteWrite(i.Path.Empty)){var c=t||l.ChildrenNode.EMPTY_NODE;return p.apply(c)}return null},s.prototype.calcCompleteEventChildren=function(e,t){var r=l.ChildrenNode.EMPTY_NODE,s=this.visibleWrites_.getCompleteNode(e);if(s)return s.isLeafNode()||s.forEachChild(n.PRIORITY_INDEX,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(n.PRIORITY_INDEX,function(e,t){var n=o.childCompoundWrite(new i.Path(e)).apply(t);r=r.updateImmediateChild(e,n)}),o.getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r},s.prototype.calcEventCacheAfterServerOverwrite=function(e,i,r,n){t.assert(r||n,"Either existingEventSnap or existingServerSnap must exist");var l=e.child(i);if(this.visibleWrites_.hasCompleteWrite(l))return null;var s=this.visibleWrites_.childCompoundWrite(l);return s.isEmpty()?n.getChild(i):s.apply(n.getChild(i))},s.prototype.calcCompleteChild=function(e,t,i){var r=e.child(t),n=this.visibleWrites_.getCompleteNode(r);if(null!=n)return n;if(i.isCompleteForChild(t)){return this.visibleWrites_.childCompoundWrite(r).apply(i.getNode().getImmediateChild(t))}return null},s.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},s.prototype.calcIndexedSlice=function(e,t,r,n,l,s){var o,a=this.visibleWrites_.childCompoundWrite(e),h=a.getCompleteNode(i.Path.Empty);if(null!=h)o=h;else{if(null==t)return[];o=a.apply(t)}if((o=o.withIndex(s)).isEmpty()||o.isLeafNode())return[];for(var d=[],p=s.getCompare(),c=l?o.getReverseIteratorFrom(r,s):o.getIteratorFrom(r,s),u=c.getNext();u&&d.length<n;)0!==p(u,r)&&d.push(u),u=c.getNext();return d},s.prototype.recordContainsPath_=function(t,i){return t.snap?t.path.contains(i):!!e.findKey(t.children,function(e,r){return t.path.child(r).contains(i)})},s.prototype.resetTree_=function(){this.visibleWrites_=s.layerTree_(this.allWrites_,s.DefaultFilter_,i.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},s.DefaultFilter_=function(e){return e.visible},s.layerTree_=function(n,l,s){for(var o=r.CompoundWrite.Empty,a=0;a<n.length;++a){var h=n[a];if(l(h)){var d=h.path,p=void 0;if(h.snap)s.contains(d)?(p=i.Path.relativePath(s,d),o=o.addWrite(p,h.snap)):d.contains(s)&&(p=i.Path.relativePath(d,s),o=o.addWrite(i.Path.Empty,h.snap.getChild(p)));else{if(!h.children)throw t.assertionError("WriteRecord should have .snap or .children");if(s.contains(d))p=i.Path.relativePath(s,d),o=o.addWrites(p,h.children);else if(d.contains(s))if((p=i.Path.relativePath(d,s)).isEmpty())o=o.addWrites(i.Path.Empty,h.children);else{var c=e.safeGet(h.children,p.getFront());if(c){var u=c.getChild(p.popFront());o=o.addWrite(i.Path.Empty,u)}}}}}return o},s}();exports.WriteTree=s;var o=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,i){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,i)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,i){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,i)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,i,r,n){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,i,r,n)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();exports.WriteTreeRef=o;
},{"@firebase/util":78,"./util/Path":104,"./snap/indexes/PriorityIndex":125,"./snap/ChildrenNode":163,"./CompoundWrite":233}],130:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("./util/util"),r=require("./operation/AckUserWrite"),i=require("./snap/ChildrenNode"),n=require("@firebase/util"),a=require("./util/ImmutableTree"),o=require("./operation/ListenComplete"),p=require("./operation/Merge"),s=require("./operation/Operation"),u=require("./operation/Overwrite"),y=require("./util/Path"),l=require("./SyncPoint"),h=require("./WriteTree"),c=function(){function c(e){this.listenProvider_=e,this.syncPointTree_=a.ImmutableTree.Empty,this.pendingWriteTree_=new h.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return c.prototype.applyUserOverwrite=function(e,t,r,i){return this.pendingWriteTree_.addOverwrite(e,t,r,i),i?this.applyOperationToSyncPoints_(new u.Overwrite(s.OperationSource.User,e,t)):[]},c.prototype.applyUserMerge=function(e,t,r){this.pendingWriteTree_.addMerge(e,t,r);var i=a.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new p.Merge(s.OperationSource.User,e,i))},c.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var i=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var o=a.ImmutableTree.Empty;return null!=i.snap?o=o.set(y.Path.Empty,!0):n.forEach(i.children,function(e,t){o=o.set(new y.Path(e),t)}),this.applyOperationToSyncPoints_(new r.AckUserWrite(i.path,o,t))}return[]},c.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new u.Overwrite(s.OperationSource.Server,e,t))},c.prototype.applyServerMerge=function(e,t){var r=a.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new p.Merge(s.OperationSource.Server,e,r))},c.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new o.ListenComplete(s.OperationSource.Server,e))},c.prototype.applyTaggedQueryOverwrite=function(e,t,r){var i=this.queryKeyForTag_(r);if(null!=i){var n=c.parseQueryKey_(i),a=n.path,o=n.queryId,p=y.Path.relativePath(a,e),l=new u.Overwrite(s.OperationSource.forServerTaggedQuery(o),p,t);return this.applyTaggedOperation_(a,l)}return[]},c.prototype.applyTaggedQueryMerge=function(e,t,r){var i=this.queryKeyForTag_(r);if(i){var n=c.parseQueryKey_(i),o=n.path,u=n.queryId,l=y.Path.relativePath(o,e),h=a.ImmutableTree.fromObject(t),g=new p.Merge(s.OperationSource.forServerTaggedQuery(u),l,h);return this.applyTaggedOperation_(o,g)}return[]},c.prototype.applyTaggedListenComplete=function(e,t){var r=this.queryKeyForTag_(t);if(r){var i=c.parseQueryKey_(r),n=i.path,a=i.queryId,p=y.Path.relativePath(n,e),u=new o.ListenComplete(s.OperationSource.forServerTaggedQuery(a),p);return this.applyTaggedOperation_(n,u)}return[]},c.prototype.addEventRegistration=function(t,r){var n=t.path,a=null,o=!1;this.syncPointTree_.foreachOnPath(n,function(e,t){var r=y.Path.relativePath(e,n);a=a||t.getCompleteServerCache(r),o=o||t.hasCompleteView()});var p=this.syncPointTree_.get(n);p?(o=o||p.hasCompleteView(),a=a||p.getCompleteServerCache(y.Path.Empty)):(p=new l.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(n,p));var s;if(null!=a)s=!0;else{s=!1,a=i.ChildrenNode.EMPTY_NODE;this.syncPointTree_.subtree(n).foreachChild(function(e,t){var r=t.getCompleteServerCache(y.Path.Empty);r&&(a=a.updateImmediateChild(e,r))})}var u=p.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var h=c.makeQueryKey_(t);e.assert(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var g=c.getNextQueryTag_();this.queryToTagMap_[h]=g,this.tagToQueryMap_["_"+g]=h}var v=this.pendingWriteTree_.childWrites(n),_=p.addEventRegistration(t,r,v,a,s);if(!u&&!o){var f=p.viewForQuery(t);_=_.concat(this.setupListener_(t,f))}return _},c.prototype.removeEventRegistration=function(e,t,r){var i=this,n=e.path,a=this.syncPointTree_.get(n),o=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var p=a.removeEventRegistration(e,t,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(n));var s=p.removed;o=p.events;var u=-1!==s.findIndex(function(e){return e.getQueryParams().loadsAllData()}),y=this.syncPointTree_.findOnPath(n,function(e,t){return t.hasCompleteView()});if(u&&!y){var l=this.syncPointTree_.subtree(n);if(!l.isEmpty())for(var h=this.collectDistinctViewsForSubTree_(l),g=0;g<h.length;++g){var v=h[g],_=v.getQuery(),f=this.createListenerForView_(v);this.listenProvider_.startListening(c.queryForListening_(_),this.tagForQuery_(_),f.hashFn,f.onComplete)}}if(!y&&s.length>0&&!r)if(u){this.listenProvider_.stopListening(c.queryForListening_(e),null)}else s.forEach(function(e){var t=i.queryToTagMap_[c.makeQueryKey_(e)];i.listenProvider_.stopListening(c.queryForListening_(e),t)});this.removeTags_(s)}return o},c.prototype.calcCompleteEventCache=function(e,t){var r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(e,function(t,r){var i=y.Path.relativePath(t,e),n=r.getCompleteServerCache(i);if(n)return n});return r.calcCompleteEventCache(e,i,t,!0)},c.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,r){if(t&&t.hasCompleteView()){return[t.getCompleteView()]}var i=[];return t&&(i=t.getQueryViews()),n.forEach(r,function(e,t){i=i.concat(t)}),i})},c.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var r=e[t];if(!r.getQueryParams().loadsAllData()){var i=c.makeQueryKey_(r),n=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+n]}}},c.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},c.prototype.setupListener_=function(t,r){var i=t.path,a=this.tagForQuery_(t),o=this.createListenerForView_(r),p=this.listenProvider_.startListening(c.queryForListening_(t),a,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(a)e.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,r){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var i=[];return t&&(i=i.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),n.forEach(r,function(e,t){i=i.concat(t)}),i}),y=0;y<u.length;++y){var l=u[y];this.listenProvider_.stopListening(c.queryForListening_(l),this.tagForQuery_(l))}return p},c.prototype.createListenerForView_=function(e){var r=this,n=e.getQuery(),a=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||i.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return a?r.applyTaggedListenComplete(n.path,a):r.applyListenComplete(n.path);var i=t.errorForServerCode(e,n);return r.removeEventRegistration(n,null,i)}}},c.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},c.parseQueryKey_=function(t){var r=t.indexOf("$");return e.assert(-1!==r&&r<t.length-1,"Bad queryKey."),{queryId:t.substr(r+1),path:new y.Path(t.substr(0,r))}},c.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},c.prototype.tagForQuery_=function(e){var t=c.makeQueryKey_(e);return n.safeGet(this.queryToTagMap_,t)},c.getNextQueryTag_=function(){return c.nextQueryTag_++},c.prototype.applyTaggedOperation_=function(t,r){var i=this.syncPointTree_.get(t);e.assert(i,"Missing sync point for query tag that we're tracking");var n=this.pendingWriteTree_.childWrites(t);return i.applyOperation(r,n,null)},c.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(y.Path.Empty))},c.prototype.applyOperationHelper_=function(e,t,r,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,r,i);var n=t.get(y.Path.Empty);null==r&&null!=n&&(r=n.getCompleteServerCache(y.Path.Empty));var a=[],o=e.path.getFront(),p=e.operationForChild(o),s=t.children.get(o);if(s&&p){var u=r?r.getImmediateChild(o):null,l=i.child(o);a=a.concat(this.applyOperationHelper_(p,s,u,l))}return n&&(a=a.concat(n.applyOperation(e,i,r))),a},c.prototype.applyOperationDescendantsHelper_=function(e,t,r,i){var n=this,a=t.get(y.Path.Empty);null==r&&null!=a&&(r=a.getCompleteServerCache(y.Path.Empty));var o=[];return t.children.inorderTraversal(function(t,a){var p=r?r.getImmediateChild(t):null,s=i.child(t),u=e.operationForChild(t);u&&(o=o.concat(n.applyOperationDescendantsHelper_(u,a,p,s)))}),a&&(o=o.concat(a.applyOperation(e,i,r))),o},c.nextQueryTag_=1,c}();exports.SyncTree=c;
},{"@firebase/util":78,"./util/util":66,"./snap/ChildrenNode":163,"./util/Path":104,"./SyncPoint":102,"./operation/AckUserWrite":199,"./util/ImmutableTree":200,"./operation/Merge":201,"./operation/ListenComplete":202,"./WriteTree":203,"./operation/Operation":204,"./operation/Overwrite":205}],131:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./snap/ChildrenNode"),o=function(){function o(){this.rootNode_=e.ChildrenNode.EMPTY_NODE}return o.prototype.getNode=function(e){return this.rootNode_.getChild(e)},o.prototype.updateSnapshot=function(e,o){this.rootNode_=this.rootNode_.updateChild(e,o)},o}();exports.SnapshotHolder=o;
},{"./snap/ChildrenNode":163}],132:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/util"),t=function(){function t(e){this.app_=e}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(e.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},t.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',e.warn(t)},t}();exports.AuthTokenProvider=t;
},{"./util/util":66}],181:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=function(){function e(e){this.allowedEvents_=e,this.listeners_={},t.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var n=this.listeners_[t].slice(),i=0;i<n.length;i++)n[i].callback.apply(n[i].context,e)},e.prototype.on=function(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});var n=this.getInitialEvent(t);n&&e.apply(r,n)},e.prototype.off=function(t,e,r){this.validateEventType_(t);for(var n=this.listeners_[t]||[],i=0;i<n.length;i++)if(n[i].callback===e&&(!r||r===n[i].context))return void n.splice(i,1)},e.prototype.validateEventType_=function(e){t.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}();exports.EventEmitter=e;
},{"@firebase/util":78}],114:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./EventEmitter"),i=require("@firebase/util"),n=function(t){function n(){var e,i,n=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(i="visibilitychange",e="hidden"):void 0!==document.mozHidden?(i="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(i="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}return e(n,t),n.getInstance=function(){return new n},n.prototype.getInitialEvent=function(e){return i.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},n}(t.EventEmitter);exports.VisibilityMonitor=n;
},{"@firebase/util":78,"./EventEmitter":181}],115:[function(require,module,exports) {
"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("./EventEmitter"),i=require("@firebase/util"),o=function(t){function o(){var n=t.call(this,["online"])||this;return n.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||i.isMobileCordova()||(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return n(o,t),o.getInstance=function(){return new o},o.prototype.getInitialEvent=function(n){return e.assert("online"===n,"Unknown event type: "+n),[this.online_]},o.prototype.currentlyOnline=function(){return this.online_},o}(t.EventEmitter);exports.OnlineMonitor=o;
},{"@firebase/util":78,"./EventEmitter":181}],116:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){}return t.prototype.put=function(t,o,e,n){},t.prototype.merge=function(t,o,e,n){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,o,e){},t.prototype.onDisconnectMerge=function(t,o,e){},t.prototype.onDisconnectCancel=function(t,o){},t.prototype.reportStats=function(t){},t}();exports.ServerActions=t;
},{}],107:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROTOCOL_VERSION="5",exports.VERSION_PARAM="v",exports.TRANSPORT_SESSION_PARAM="s",exports.REFERER_PARAM="r",exports.FORGE_REF="f",exports.FORGE_DOMAIN="firebaseio.com",exports.LAST_SESSION_PARAM="ls",exports.WEBSOCKET="websocket",exports.LONG_POLLING="long_polling";
},{}],182:[function(require,module,exports) {

function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(e){if(s===setTimeout)return setTimeout(e,0);if((s===t||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function o(){m&&f&&(m=!1,f.length?h=f.concat(h):p=-1,h.length&&i())}function i(){if(!m){var t=n(o);m=!0;for(var e=h.length;e;){for(f=h,h=[];++p<e;)f&&f[p].run();p=-1,e=h.length}f=null,m=!1,r(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var s,l,a=module.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:t}catch(e){s=t}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var f,h=[],m=!1,p=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new u(t,e)),1!==h.length||m||n(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=c,a.addListener=c,a.once=c,a.off=c,a.removeListener=c,a.removeAllListeners=c,a.emit=c,a.prependListener=c,a.prependOnceListener=c,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0};
},{}],184:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("@firebase/util"),r=function(){function r(){this.counters_={}}return r.prototype.incrementCounter=function(t,r){void 0===r&&(r=1),e.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r},r.prototype.get=function(){return t.deepCopy(this.counters_)},r}();exports.StatsCollection=r;
},{"@firebase/util":78}],135:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./StatsCollection"),e=function(){function e(){}return e.getCollection=function(e){var r=e.toString();return this.collections_[r]||(this.collections_[r]=new t.StatsCollection),this.collections_[r]},e.getOrCreateReporter=function(t,e){var r=t.toString();return this.reporters_[r]||(this.reporters_[r]=e()),this.reporters_[r]},e.collections_={},e.reporters_={},e}();exports.StatsManager=e;
},{"./StatsCollection":184}],122:[function(require,module,exports) {
var process = require("process");
function e(e){p=e}var t=require("process");Object.defineProperty(exports,"__esModule",{value:!0});var n=require("@firebase/app"),o=require("@firebase/util"),i=require("../core/util/util"),s=require("../core/stats/StatsManager"),r=require("./Constants"),a=require("@firebase/util"),l=require("../core/storage/storage"),c=require("@firebase/util"),h=require("@firebase/util"),u=16384,f=45e3,p=null;"undefined"!=typeof MozWebSocket?p=MozWebSocket:"undefined"!=typeof WebSocket&&(p=WebSocket),exports.setWebSocketImpl=e;var d=function(){function e(t,n,o,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=i.logWrapper(this.connId),this.stats_=s.StatsManager.getCollection(n),this.connURL=e.connectionURL_(n,o,r)}return e.connectionURL_=function(e,t,n){var o={};return o[r.VERSION_PARAM]=r.PROTOCOL_VERSION,!h.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(r.FORGE_DOMAIN)&&(o[r.REFERER_PARAM]=r.FORGE_REF),t&&(o[r.TRANSPORT_SESSION_PARAM]=t),n&&(o[r.LAST_SESSION_PARAM]=n),e.connectionURL(r.WEBSOCKET,o)},e.prototype.open=function(e,o){var i=this;this.onDisconnect=o,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l.PersistentStorage.set("previous_websocket_failure",!0);try{if(h.isNodeSdk()){var s=a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",c={headers:{"User-Agent":"Firebase/"+r.PROTOCOL_VERSION+"/"+n.default.SDK_VERSION+"/"+t.platform+"/"+s}},u=t.env,f=0==this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(c.proxy={origin:f}),this.mySock=new p(this.connURL,[],c)}else this.mySock=new p(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var d=e.message||e.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(e){i.handleIncomingFrame(e)},this.mySock.onerror=function(e){i.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&i.log_(t),i.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==p&&!e.forceDisallow_},e.previouslyFailed=function(){return l.PersistentStorage.isInMemoryStorage||!0===l.PersistentStorage.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){l.PersistentStorage.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=c.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(o.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=c.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=i.splitStringBySize(t,u);n.length>1&&this.sendString_(String(n.length));for(var o=0;o<n.length;o++)this.sendString_(n[o])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(f))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();exports.WebSocketConnection=d;
},{"process":182,"../core/util/util":66,"./Constants":107,"../core/stats/StatsManager":135,"../core/storage/storage":108,"@firebase/util":78,"@firebase/app":30}],195:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/util/util"),s=function(){function s(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return s.prototype.closeAfter=function(e,s){this.closeAfterResponse=e,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},s.prototype.handleResponse=function(s,n){var o=this;this.pendingResponses[s]=n;for(var t=function(){var s=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var n=function(n){s[n]&&e.exceptionGuard(function(){o.onMessage_(s[n])})},t=0;t<s.length;++t)n(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if("break"===t())break}},s}();exports.PacketReceiver=s;
},{"../../core/util/util":66}],123:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/util/util"),t=require("../core/util/CountedSet"),o=require("../core/stats/StatsManager"),n=require("./polling/PacketReceiver"),i=require("./Constants"),s=require("@firebase/util"),r=require("@firebase/util");exports.FIREBASE_LONGPOLL_START_PARAM="start",exports.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",exports.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",exports.FIREBASE_LONGPOLL_ID_PARAM="id",exports.FIREBASE_LONGPOLL_PW_PARAM="pw",exports.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",exports.FIREBASE_LONGPOLL_DATA_PARAM="d",exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe";var c=1870,a=30,l=c-a,d=25e3,_=3e4,u=function(){function t(t,n,s,r){this.connId=t,this.repoInfo=n,this.transportSessionId=s,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=e.logWrapper(t),this.stats_=o.StatsManager.getCollection(n),this.urlFn=function(e){return n.connectionURL(i.LONG_POLLING,e)}}return t.prototype.open=function(t,o){var s=this;this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new n.PacketReceiver(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(_)),e.executeWhenDOMReady(function(){if(!s.isClosed_){s.scriptTagHolder=new h(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0],n=e[1],i=e[2];e[3],e[4];if(s.incrementIncomingBytes_(e),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,o==exports.FIREBASE_LONGPOLL_START_PARAM)s.id=n,s.password=i;else{if(o!==exports.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw new Error("Unrecognized command received: "+o);n?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(n,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0],n=e[1];s.incrementIncomingBytes_(e),s.myPacketOrderer.handleResponse(o,n)},function(){s.onClosed_()},s.urlFn);var e={};e[exports.FIREBASE_LONGPOLL_START_PARAM]="t",e[exports.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(e[exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=s.scriptTagHolder.uniqueCallbackIdentifier),e[i.VERSION_PARAM]=i.PROTOCOL_VERSION,s.transportSessionId&&(e[i.TRANSPORT_SESSION_PARAM]=s.transportSessionId),s.lastSessionId&&(e[i.LAST_SESSION_PARAM]=s.lastSessionId),!r.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(i.FORGE_DOMAIN)&&(e[i.REFERER_PARAM]=i.FORGE_REF);var t=s.urlFn(e);s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!e.isChromeExtensionContentScript()&&!e.isWindowsStoreApp()&&!r.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var o=s.stringify(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);for(var n=s.base64Encode(o),i=e.splitStringBySize(n,l),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(e,t){if(!r.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var o={};o[exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",o[exports.FIREBASE_LONGPOLL_ID_PARAM]=e,o[exports.FIREBASE_LONGPOLL_PW_PARAM]=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(e){var t=s.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},t}();exports.BrowserPollConnection=u;var h=function(){function o(n,i,s,c){if(this.onDisconnect=s,this.urlFn=c,this.outstandingRequests=new t.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,r.isNodeSdk())this.commandCB=n,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=e.LUIDGenerator(),window[exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[exports.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=i,this.myIFrame=o.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){a='<script>document.domain="'+document.domain+'";<\/script>'}var l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(t){e.log("frame writing exception"),t.stack&&e.log(t.stack),e.log(t)}}}return o.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||e.log("No IE domain setting required")}catch(e){var o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},o.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),r.isNodeSdk()&&this.myID){var t={};t[exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",t[exports.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,t[exports.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var n=this.urlFn(t);o.nodeRestRequest(n)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},o.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},o.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[exports.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[exports.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[exports.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var t=this.urlFn(e),o="",n=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+a+o.length<=c))break;var i=this.pendingSegs.shift();o=o+"&"+exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+n+"="+i.seg+"&"+exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+n+"="+i.ts+"&"+exports.FIREBASE_LONGPOLL_DATA_PARAM+n+"="+i.d,n++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1},o.prototype.enqueueSegment=function(e,t,o){this.pendingSegs.push({seg:e,ts:t,d:o}),this.alive&&this.newRequest_()},o.prototype.addLongPollTag_=function(e,t){var o=this;this.outstandingRequests.add(t,1);var n=function(){o.outstandingRequests.remove(t),o.newRequest_()},i=setTimeout(n,Math.floor(d));this.addTag(e,function(){clearTimeout(i),n()})},o.prototype.addTag=function(t,o){var n=this;r.isNodeSdk()?this.doNodeLongPoll(t,o):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),o())},i.onerror=function(){e.log("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))},o}();exports.FirebaseIFrameScriptHolder=h;
},{"../core/util/util":66,"../core/stats/StatsManager":135,"./Constants":107,"@firebase/util":78,"../core/util/CountedSet":186,"./polling/PacketReceiver":195}],212:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./BrowserPollConnection"),e=require("./WebSocketConnection"),n=require("../core/util/util"),r=function(){function r(t){this.initTransports_(t)}return Object.defineProperty(r,"ALL_TRANSPORTS",{get:function(){return[t.BrowserPollConnection,e.WebSocketConnection]},enumerable:!0,configurable:!0}),r.prototype.initTransports_=function(t){var o=e.WebSocketConnection&&e.WebSocketConnection.isAvailable(),i=o&&!e.WebSocketConnection.previouslyFailed();if(t.webSocketOnly&&(o||n.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[e.WebSocketConnection];else{var s=this.transports_=[];n.each(r.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&s.push(e)})}},r.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},r.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},r}();exports.TransportManager=r;
},{"../core/util/util":66,"./WebSocketConnection":122,"./BrowserPollConnection":123}],77:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../core/util/util"),t=require("../core/storage/storage"),o=require("./Constants"),e=require("./TransportManager"),s=6e4,i=5e3,r=10240,a=102400,h="t",c="d",_="s",d="r",l="e",y="o",p="a",u="n",g="p",C="h",f=function(){function f(t,o,s,i,r,a,h){this.id=t,this.repoInfo_=o,this.onMessage_=s,this.onReady_=i,this.onDisconnect_=r,this.onKill_=a,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=n.logWrapper("c:"+this.id+":"),this.transportManager_=new e.TransportManager(o),this.log_("Connection created"),this.start_()}return f.prototype.start_=function(){var t=this,o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(e,s)},Math.floor(0));var i=o.healthyTimeout||0;i>0&&(this.healthyTimeout_=n.setTimeoutNonBlocking(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>a?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>r?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},f.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},f.prototype.disconnReceiver_=function(n){var t=this;return function(o){n===t.conn_?t.onConnectionLost_(o):n===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},f.prototype.connReceiver_=function(n){var t=this;return function(o){2!=t.state_&&(n===t.rx_?t.onPrimaryMessageReceived_(o):n===t.secondaryConn_?t.onSecondaryMessageReceived_(o):t.log_("message on old connection"))}},f.prototype.sendRequest=function(n){var t={t:"d",d:n};this.sendData_(t)},f.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},f.prototype.onSecondaryControl_=function(n){if(h in n){var t=n[h];t===p?this.upgradeIfSecondaryHealthy_():t===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===y&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},f.prototype.onSecondaryMessageReceived_=function(t){var o=n.requireKey("t",t),e=n.requireKey("d",t);if("c"==o)this.onSecondaryControl_(e);else{if("d"!=o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(e)}},f.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:g,d:{}}}))},f.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:p,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:u,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},f.prototype.onPrimaryMessageReceived_=function(t){var o=n.requireKey("t",t),e=n.requireKey("d",t);"c"==o?this.onControl_(e):"d"==o&&this.onDataMessage_(e)},f.prototype.onDataMessage_=function(n){this.onPrimaryResponse_(),this.onMessage_(n)},f.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},f.prototype.onControl_=function(t){var o=n.requireKey(h,t);if(c in t){var e=t[c];if(o===C)this.onHandshake_(e);else if(o===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else o===_?this.onConnectionShutdown_(e):o===d?this.onReset_(e):o===l?n.error("Server Error: "+e):o===y?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):n.error("Unknown control packet command: "+o)}},f.prototype.onHandshake_=function(t){var e=t.ts,s=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),o.PROTOCOL_VERSION!==s&&n.warn("Protocol version mismatch detected"),this.tryStartUpgrade_())},f.prototype.tryStartUpgrade_=function(){var n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)},f.prototype.startUpgrade_=function(t){var o=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),n.setTimeoutNonBlocking(function(){o.secondaryConn_&&(o.log_("Timed out trying to upgrade."),o.secondaryConn_.close())},Math.floor(s))},f.prototype.onReset_=function(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.updateHost(n),1===this.state_?this.close():(this.closeConnections_(),this.start_())},f.prototype.onConnectionEstablished_=function(t,o){var e=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):n.setTimeoutNonBlocking(function(){e.sendPingOnPrimaryIfNecessary_()},Math.floor(i))},f.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:g,d:{}}}))},f.prototype.onSecondaryConnectionLost_=function(){var n=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==n&&this.rx_!==n||this.close()},f.prototype.onConnectionLost_=function(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(t.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},f.prototype.onConnectionShutdown_=function(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()},f.prototype.sendData_=function(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)},f.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},f.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},f}();exports.Connection=f;
},{"../core/util/util":66,"../core/storage/storage":108,"./Constants":107,"./TransportManager":212}],76:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/app"),n=require("@firebase/util"),i=require("@firebase/util"),o=require("@firebase/util"),s=require("./util/util"),r=require("./util/Path"),a=require("./util/VisibilityMonitor"),c=require("./util/OnlineMonitor"),u=require("@firebase/util"),h=require("../realtime/Connection"),l=require("@firebase/util"),_=require("@firebase/util"),d=require("./ServerActions"),p=1e3,f=3e5,g=3e4,m=1.3,y=3e4,v="server_kill",C=3,b=function(d){function b(t,e,n,i,o,r){var u=d.call(this)||this;if(u.repoInfo_=t,u.onDataUpdate_=e,u.onConnectStatus_=n,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.authOverride_=r,u.id=b.nextPersistentConnectionId_++,u.log_=s.logWrapper("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=p,u.maxReconnectDelay_=f,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,r&&!_.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),a.VisibilityMonitor.getInstance().on("visible",u.onVisible_,u),-1===t.host.indexOf("fblocal")&&c.OnlineMonitor.getInstance().on("online",u.onOnline_,u),u}return t(b,d),b.prototype.sendRequest=function(t,e,n){var s=++this.requestNumber_,r={r:s,a:t,b:e};this.log_(i.stringify(r)),o.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[s]=n)},b.prototype.listen=function(t,e,n,i){var s=t.queryIdentifier(),r=t.path.toString();this.log_("Listen called for "+r+" "+s),this.listens_[r]=this.listens_[r]||{},o.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),o.assert(!this.listens_[r][s],"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens_[r][s]=a,this.connected_&&this.sendListen_(a)},b.prototype.sendListen_=function(t){var e=this,n=t.query,i=n.path.toString(),o=n.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=n.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var r=s.d,a=s.s;b.warnOnListenWarnings_(r,n);(e.listens_[i]&&e.listens_[i][o])===t&&(e.log_("listen response",s),"ok"!==a&&e.removeListen_(i,o),t.onComplete&&t.onComplete(a,r))})},b.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&n.contains(t,"w")){var i=n.safeGet(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var o='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();s.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+o+" at "+r+" to your security rules for better performance.")}}},b.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},b.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||u.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=g)},b.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=u.isValidFormat(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,function(n){var i=n.s,o=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,o))})}},b.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),o.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},b.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var o={p:t};i&&(o.q=n,o.t=i),this.sendRequest("n",o)},b.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},b.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},b.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},b.prototype.sendOnDisconnect_=function(t,e,n,i){var o={p:e,d:n};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})},b.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},b.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},b.prototype.putInternal=function(t,e,n,i,o){var s={p:e,d:n};void 0!==o&&(s.h=o),this.outstandingPuts_.push({action:t,request:s,onComplete:i}),this.outstandingPutCount_++;var r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},b.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),o&&o(i.s,i.d)})},b.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},b.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+i.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},b.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):s.error("Unrecognized action received from server: "+i.stringify(t)+"\nAre you using the latest client?")},b.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},b.prototype.scheduleConnect_=function(t){var e=this;o.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},b.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=p,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},b.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=p,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},b.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>y&&(this.reconnectDelay_=p),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*m)}this.onConnectStatus_(!1)},b.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+b.nextConnectionId_++,r=this,a=this.lastSessionId,c=!1,u=null,_=function(){u?u.close():(c=!0,n())},d=function(t){o.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)};this.realtime_={close:_,sendRequest:d};var p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(p).then(function(o){c?s.log("getToken() completed but was canceled"):(s.log("getToken() completed. Creating connection."),r.authToken_=o&&o.accessToken,u=new h.Connection(i,r.repoInfo_,t,e,n,function(t){s.warn(t+" ("+r.repoInfo_.toString()+")"),r.interrupt(v)},a))}).then(null,function(t){r.log_("Failed to get token: "+t),c||(l.CONSTANTS.NODE_ADMIN&&s.warn(t),_())})}},b.prototype.interrupt=function(t){s.log("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},b.prototype.resume=function(t){s.log("Resuming connection for reason: "+t),delete this.interruptReasons_[t],n.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=p,this.realtime_||this.scheduleConnect_(0))},b.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},b.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},b.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return s.ObjectToUniqueKey(t)}).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},b.prototype.removeListen_=function(t,e){var i,o=new r.Path(t).toString();return void 0!==this.listens_[o]?(i=this.listens_[o][e],delete this.listens_[o][e],0===n.getCount(this.listens_[o])&&delete this.listens_[o]):i=void 0,i},b.prototype.onAuthRevoked_=function(t,e){s.log("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=C&&(this.reconnectDelay_=g,this.authTokenProvider_.notifyForInvalidToken()))},b.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_&&this.securityDebugCallback_(t)},b.prototype.restoreState_=function(){var t=this;this.tryAuth(),n.forEach(this.listens_,function(e,i){n.forEach(i,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}},b.prototype.sendConnectStats_=function(){var t={},n="js";l.CONSTANTS.NODE_ADMIN?n="admin_node":l.CONSTANTS.NODE_CLIENT&&(n="node"),t["sdk."+n+"."+e.default.SDK_VERSION.replace(/\./g,"-")]=1,_.isMobileCordova()?t["framework.cordova"]=1:_.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},b.prototype.shouldReconnect_=function(){var t=c.OnlineMonitor.getInstance().currentlyOnline();return n.isEmpty(this.interruptReasons_)&&t},b.nextPersistentConnectionId_=0,b.nextConnectionId_=0,b}(d.ServerActions);exports.PersistentConnection=b;
},{"@firebase/util":78,"./util/util":66,"./util/VisibilityMonitor":114,"./util/OnlineMonitor":115,"./util/Path":104,"./ServerActions":116,"../realtime/Connection":77,"@firebase/app":30}],134:[function(require,module,exports) {
"use strict";function e(p,s){if(void 0===s&&(s=null),null===p)return r.ChildrenNode.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(s=p[".priority"]),o.assert(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p){var N=p;return new i.LeafNode(N,e(s))}if(p instanceof Array||!l){var y=r.ChildrenNode.EMPTY_NODE,c=p;return n.forEach(c,function(r,i){if(n.contains(c,r)&&"."!==r.substring(0,1)){var t=e(i);!t.isLeafNode()&&t.isEmpty()||(y=y.updateImmediateChild(r,t))}}),y.updatePriority(e(s))}var v=[],E=!1,h=p;if(n.forEach(h,function(r,i){if("string"!=typeof r||"."!==r.substring(0,1)){var n=e(h[r]);n.isEmpty()||(E=E||!n.getPriority().isEmpty(),v.push(new t.NamedNode(r,n)))}}),0==v.length)return r.ChildrenNode.EMPTY_NODE;var O=u.buildChildSet(v,d.NAME_ONLY_COMPARATOR,function(e){return e.name},d.NAME_COMPARATOR);if(E){var b=u.buildChildSet(v,f.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(O,e(s),new a.IndexMap({".priority":b},{".priority":f.PRIORITY_INDEX}))}return new r.ChildrenNode(O,e(s),a.IndexMap.Default)}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./ChildrenNode"),i=require("./LeafNode"),t=require("./Node"),n=require("@firebase/util"),o=require("@firebase/util"),u=require("./childSet"),d=require("./comparators"),a=require("./IndexMap"),f=require("./indexes/PriorityIndex"),l=!0;exports.nodeFromJSON=e,f.setNodeFromJSON(e);
},{"./ChildrenNode":163,"./Node":190,"./LeafNode":183,"./childSet":191,"./comparators":192,"./IndexMap":193,"./indexes/PriorityIndex":125,"@firebase/util":78}],133:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),r=require("./Path"),t=require("../SparseSnapshotTree"),o=require("../snap/LeafNode"),a=require("../snap/nodeFromJSON"),n=require("../snap/indexes/PriorityIndex");exports.generateWithValues=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},exports.resolveDeferredValue=function(r,t){return r&&"object"==typeof r?(e.assert(".sv"in r,"Unexpected leaf node or priority contents"),t[r[".sv"]]):r},exports.resolveDeferredValueTree=function(e,o){var a=new t.SparseSnapshotTree;return e.forEachTree(new r.Path(""),function(e,r){a.remember(e,exports.resolveDeferredValueSnapshot(r,o))}),a},exports.resolveDeferredValueSnapshot=function(e,r){var t,s=e.getPriority().val(),i=exports.resolveDeferredValue(s,r);if(e.isLeafNode()){var u=e,p=exports.resolveDeferredValue(u.getValue(),r);return p!==u.getValue()||i!==u.getPriority().val()?new o.LeafNode(p,a.nodeFromJSON(i)):e}var l=e;return t=l,i!==l.getPriority().val()&&(t=t.updatePriority(new o.LeafNode(i))),l.forEachChild(n.PRIORITY_INDEX,function(e,o){var a=exports.resolveDeferredValueSnapshot(o,r);a!==o&&(t=t.updateImmediateChild(e,a))}),t};
},{"@firebase/util":78,"./Path":104,"../SparseSnapshotTree":129,"../snap/LeafNode":183,"../snap/nodeFromJSON":134,"../snap/indexes/PriorityIndex":125}],137:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),i=t.clone(e);return this.last_&&t.forEach(this.last_,function(t,e){i[t]=i[t]-e}),this.last_=e,i},e}();exports.StatsListener=e;
},{"@firebase/util":78}],136:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("../util/util"),r=require("./StatsListener"),s=1e4,o=3e4,i=3e5,n=function(){function n(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new r.StatsListener(t);var n=s+(o-s)*Math.random();e.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(n))}return n.prototype.includeStat=function(t){this.statsToReport_[t]=!0},n.prototype.reportStats_=function(){var r=this,s=this.statsListener_.get(),o={},n=!1;t.forEach(s,function(e,s){s>0&&t.contains(r.statsToReport_,e)&&(o[e]=s,n=!0)}),n&&this.server_.reportStats(o),e.setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*i))},n}();exports.StatsReporter=n;
},{"../util/util":66,"./StatsListener":137,"@firebase/util":78}],138:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),r=require("./util/util"),s=require("@firebase/util"),n=require("@firebase/util"),o=require("@firebase/util"),i=require("./ServerActions"),a=function(i){function a(t,e,s){var n=i.call(this)||this;return n.repoInfo_=t,n.onDataUpdate_=e,n.authTokenProvider_=s,n.log_=r.logWrapper("p:rest:"),n.listens_={},n}return t(a,i),a.prototype.reportStats=function(t){throw new Error("Method not implemented.")},a.getListenId_=function(t,r){return void 0!==r?"tag$"+r:(e.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},a.prototype.listen=function(t,e,r,s){var o=this,i=t.path.toString();this.log_("Listen called for "+i+" "+t.queryIdentifier());var u=a.getListenId_(t,r),l={};this.listens_[u]=l;var p=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(i+".json",p,function(t,e){var a=e;if(404===t&&(a=null,t=null),null===t&&o.onDataUpdate_(i,a,!1,r),n.safeGet(o.listens_,u)===l){s(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)}})},a.prototype.unlisten=function(t,e){var r=a.getListenId_(t,e);delete this.listens_[r]},a.prototype.refreshAuthToken=function(t){},a.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var u=a&&a.accessToken;u&&(e.auth=u);var l=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?"+o.querystring(e);i.log_("Sending REST request for "+l);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(n&&4===p.readyState){i.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);var t=null;if(p.status>=200&&p.status<300){try{t=s.jsonEval(p.responseText)}catch(t){r.warn("Failed to parse JSON response for "+l+": "+p.responseText)}n(null,t)}else 401!==p.status&&404!==p.status&&r.warn("Got unsuccessful REST response for "+l+" Status: "+p.status),n(p.status);n=null}},p.open("GET",l,!0),p.send()})},a}(i.ServerActions);exports.ReadonlyRestClient=a;
},{"@firebase/util":78,"./util/util":66,"./ServerActions":116}],139:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/util"),e=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,s=0;s<t.length;s++){var i=t[s],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new n(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var s=this.eventLists_[n];if(s){t(s.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}();exports.EventQueue=e;var n=function(){function e(t){this.path_=t,this.events_=[]}return e.prototype.add=function(t){this.events_.push(t)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var n=this.events_[e];if(null!==n){this.events_[e]=null;var s=n.getEventRunner();t.logger&&t.log("event: "+n.toString()),t.exceptionGuard(s)}}},e.prototype.getPath=function(){return this.path_},e}();exports.EventList=n;
},{"../util/util":66}],97:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util/ServerValues"),t=require("./snap/nodeFromJSON"),n=require("./util/Path"),r=require("./SparseSnapshotTree"),i=require("./SyncTree"),o=require("./SnapshotHolder"),a=require("@firebase/util"),s=require("./util/util"),c=require("@firebase/util"),u=require("./AuthTokenProvider"),h=require("./stats/StatsManager"),p=require("./stats/StatsReporter"),v=require("./stats/StatsListener"),l=require("./view/EventQueue"),_=require("./PersistentConnection"),f=require("./ReadonlyRestClient"),d=require("../api/Database"),y="repo_interrupt",S=function(){function S(e,t,n){var c=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new l.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new r.SparseSnapshotTree,this.persistentConnection_=null;var v=new u.AuthTokenProvider(n);if(this.stats_=h.StatsManager.getCollection(e),t||s.beingCrawled())this.server_=new f.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),v),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var d=n.options.databaseAuthVariableOverride;if(void 0!==d&&null!==d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(d)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new _.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),v,d),this.server_=this.persistentConnection_}v.addTokenChangeListener(function(e){c.server_.refreshAuthToken(e)}),this.statsReporter_=h.StatsManager.getOrCreateReporter(e,function(){return new p.StatsReporter(c.stats_,c.server_)}),this.transactions_init_(),this.infoData_=new o.SnapshotHolder,this.infoSyncTree_=new i.SyncTree({startListening:function(e,t,n,r){var i=[],o=c.infoData_.getNode(e.path);return o.isEmpty()||(i=c.infoSyncTree_.applyServerOverwrite(e.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new i.SyncTree({startListening:function(e,t,n,r){return c.server_.listen(e,n,t,function(t,n){var i=r(t,n);c.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){c.server_.unlisten(e,t)}})}return S.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},S.prototype.name=function(){return this.repoInfo_.namespace},S.prototype.serverTime=function(){var e=this.infoData_.getNode(new n.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},S.prototype.generateServerValues=function(){return e.generateWithValues({timestamp:this.serverTime()})},S.prototype.onDataUpdate_=function(e,r,i,o){this.dataUpdateCount++;var a=new n.Path(e);r=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,r):r;var s=[];if(o)if(i){var u=c.map(r,function(e){return t.nodeFromJSON(e)});s=this.serverSyncTree_.applyTaggedQueryMerge(a,u,o)}else{var h=t.nodeFromJSON(r);s=this.serverSyncTree_.applyTaggedQueryOverwrite(a,h,o)}else if(i){var p=c.map(r,function(e){return t.nodeFromJSON(e)});s=this.serverSyncTree_.applyServerMerge(a,p)}else{var v=t.nodeFromJSON(r);s=this.serverSyncTree_.applyServerOverwrite(a,v)}var l=a;s.length>0&&(l=this.rerunTransactions_(a)),this.eventQueue_.raiseEventsForChangedPath(l,s)},S.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},S.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},S.prototype.onServerInfoUpdate_=function(e){var t=this;s.each(e,function(e,n){t.updateInfo_(n,e)})},S.prototype.updateInfo_=function(e,r){var i=new n.Path("/.info/"+e),o=t.nodeFromJSON(r);this.infoData_.updateSnapshot(i,o);var a=this.infoSyncTree_.applyServerOverwrite(i,o);this.eventQueue_.raiseEventsForChangedPath(i,a)},S.prototype.getNextWriteId_=function(){return this.nextWriteId_++},S.prototype.setWithPriority=function(n,r,i,o){var a=this;this.log_("set",{path:n.toString(),value:r,priority:i});var c=this.generateServerValues(),u=t.nodeFromJSON(r,i),h=e.resolveDeferredValueSnapshot(u,c),p=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(n,h,p,!0);this.eventQueue_.queueEvents(v),this.server_.put(n.toString(),u.val(!0),function(e,t){var r="ok"===e;r||s.warn("set at "+n+" failed: "+e);var i=a.serverSyncTree_.ackUserWrite(p,!r);a.eventQueue_.raiseEventsForChangedPath(n,i),a.callOnCompleteCallback(o,e,t)});var l=this.abortTransactions_(n);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},S.prototype.update=function(n,r,i){var o=this;this.log_("update",{path:n.toString(),value:r});var a=!0,u=this.generateServerValues(),h={};if(c.forEach(r,function(n,r){a=!1;var i=t.nodeFromJSON(r);h[n]=e.resolveDeferredValueSnapshot(i,u)}),a)s.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(i,"ok");else{var p=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserMerge(n,h,p);this.eventQueue_.queueEvents(v),this.server_.merge(n.toString(),r,function(e,t){var r="ok"===e;r||s.warn("update at "+n+" failed: "+e);var a=o.serverSyncTree_.ackUserWrite(p,!r),c=a.length>0?o.rerunTransactions_(n):n;o.eventQueue_.raiseEventsForChangedPath(c,a),o.callOnCompleteCallback(i,e,t)}),c.forEach(r,function(e){var t=o.abortTransactions_(n.child(e));o.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(n,[])}},S.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=[];e.resolveDeferredValueTree(this.onDisconnect_,i).forEachTree(n.Path.Empty,function(e,n){o=o.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)}),this.onDisconnect_=new r.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(n.Path.Empty,o)},S.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},S.prototype.onDisconnectSet=function(e,n,r){var i=this,o=t.nodeFromJSON(n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)})},S.prototype.onDisconnectSetWithPriority=function(e,n,r,i){var o=this,a=t.nodeFromJSON(n,r);this.server_.onDisconnectPut(e.toString(),a.val(!0),function(t,n){"ok"===t&&o.onDisconnect_.remember(e,a),o.callOnCompleteCallback(i,t,n)})},S.prototype.onDisconnectUpdate=function(e,n,r){var i=this;if(c.isEmpty(n))return s.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(r,"ok");this.server_.onDisconnectMerge(e.toString(),n,function(o,a){"ok"===o&&c.forEach(n,function(n,r){var o=t.nodeFromJSON(r);i.onDisconnect_.remember(e.child(n),o)}),i.callOnCompleteCallback(r,o,a)})},S.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},S.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},S.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(y)},S.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(y)},S.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new v.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);c.forEach(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" "})}},S.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},S.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),s.log.apply(void 0,[n].concat(e))},S.prototype.callOnCompleteCallback=function(e,t,n){e&&s.exceptionGuard(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(S.prototype,"database",{get:function(){return this.__database||(this.__database=new d.Database(this))},enumerable:!0,configurable:!0}),S}();exports.Repo=S;
},{"./util/Path":104,"@firebase/util":78,"./util/util":66,"./SparseSnapshotTree":129,"./SyncTree":130,"./SnapshotHolder":131,"./AuthTokenProvider":132,"./PersistentConnection":76,"./util/ServerValues":133,"./snap/nodeFromJSON":134,"./stats/StatsManager":135,"./stats/StatsReporter":136,"./stats/StatsListener":137,"./ReadonlyRestClient":138,"./view/EventQueue":139,"../api/Database":58}],95:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./Path"),t=require("@firebase/util"),e=require("./util"),i=require("@firebase/util"),o=require("@firebase/util");exports.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,exports.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,exports.MAX_LEAF_SIZE_=10485760,exports.isValidKey=function(r){return"string"==typeof r&&0!==r.length&&!exports.INVALID_KEY_REGEX_.test(r)},exports.isValidPathString=function(r){return"string"==typeof r&&0!==r.length&&!exports.INVALID_PATH_REGEX_.test(r)},exports.isValidRootPathString=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),exports.isValidPathString(r)},exports.isValidPriority=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!e.isInvalidJSONNumber(r)||r&&"object"==typeof r&&t.contains(r,".sv")},exports.validateFirebaseDataArg=function(r,t,e,o,n){n&&void 0===e||exports.validateFirebaseData(i.errorPrefix(r,t,n),e,o)},exports.validateFirebaseData=function(i,n,a){var s=a instanceof r.Path?new r.ValidationPath(a,i):a;if(void 0===n)throw new Error(i+"contains undefined "+s.toErrorString());if("function"==typeof n)throw new Error(i+"contains a function "+s.toErrorString()+" with contents = "+n.toString());if(e.isInvalidJSONNumber(n))throw new Error(i+"contains "+n.toString()+" "+s.toErrorString());if("string"==typeof n&&n.length>exports.MAX_LEAF_SIZE_/3&&o.stringLength(n)>exports.MAX_LEAF_SIZE_)throw new Error(i+"contains a string greater than "+exports.MAX_LEAF_SIZE_+" utf8 bytes "+s.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var f=!1,l=!1;if(t.forEach(n,function(r,t){if(".value"===r)f=!0;else if(".priority"!==r&&".sv"!==r&&(l=!0,!exports.isValidKey(r)))throw new Error(i+" contains an invalid key ("+r+") "+s.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');s.push(r),exports.validateFirebaseData(i,t,s),s.pop()}),f&&l)throw new Error(i+' contains ".value" child '+s.toErrorString()+" in addition to actual children.")}},exports.validateFirebaseMergePaths=function(t,e){var i,o;for(i=0;i<e.length;i++)for(var n=(o=e[i]).slice(),a=0;a<n.length;a++)if(".priority"===n[a]&&a===n.length-1);else if(!exports.isValidKey(n[a]))throw new Error(t+"contains an invalid key ("+n[a]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(r.Path.comparePaths);var s=null;for(i=0;i<e.length;i++){if(o=e[i],null!==s&&s.contains(o))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+o.toString());s=o}},exports.validateFirebaseMergeDataArg=function(e,o,n,a,s){if(!s||void 0!==n){var f=i.errorPrefix(e,o,s);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(f+" must be an object containing the children to replace.");var l=[];t.forEach(n,function(t,e){var i=new r.Path(t);if(exports.validateFirebaseData(f,e,a.child(i)),".priority"===i.getBack()&&!exports.isValidPriority(e))throw new Error(f+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(i)}),exports.validateFirebaseMergePaths(f,l)}},exports.validatePriority=function(r,t,o,n){if(!n||void 0!==o){if(e.isInvalidJSONNumber(o))throw new Error(i.errorPrefix(r,t,n)+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!exports.isValidPriority(o))throw new Error(i.errorPrefix(r,t,n)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},exports.validateEventType=function(r,t,e,o){if(!o||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(i.errorPrefix(r,t,o)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},exports.validateKey=function(r,t,e,o){if(!(o&&void 0===e||exports.isValidKey(e)))throw new Error(i.errorPrefix(r,t,o)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},exports.validatePathString=function(r,t,e,o){if(!(o&&void 0===e||exports.isValidPathString(e)))throw new Error(i.errorPrefix(r,t,o)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},exports.validateRootPathString=function(r,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),exports.validatePathString(r,t,e,i)},exports.validateWritablePath=function(r,t){if(".info"===t.getFront())throw new Error(r+" failed = Can't modify data under /.info/")},exports.validateUrl=function(r,t,e){var o=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!exports.isValidKey(e.repoInfo.namespace)||0!==o.length&&!exports.isValidRootPathString(o))throw new Error(i.errorPrefix(r,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},exports.validateCredential=function(r,t,e,o){if((!o||void 0!==e)&&"string"!=typeof e)throw new Error(i.errorPrefix(r,t,o)+"must be a valid credential (a string).")},exports.validateBoolean=function(r,t,e,o){if((!o||void 0!==e)&&"boolean"!=typeof e)throw new Error(i.errorPrefix(r,t,o)+"must be a boolean.")},exports.validateString=function(r,t,e,o){if((!o||void 0!==e)&&"string"!=typeof e)throw new Error(i.errorPrefix(r,t,o)+"must be a valid string.")},exports.validateObject=function(r,t,e,o){if(!(o&&void 0===e||e&&"object"==typeof e&&null!==e))throw new Error(i.errorPrefix(r,t,o)+"must be a valid object.")},exports.validateObjectContainsKey=function(r,e,o,n,a,s){if(!(o&&"object"==typeof o&&t.contains(o,n))){if(a)return;throw new Error(i.errorPrefix(r,e,a)+'must contain the key "'+n+'"')}if(s){var f=t.safeGet(o,n);if("number"===s&&"number"!=typeof f||"string"===s&&"string"!=typeof f||"boolean"===s&&"boolean"!=typeof f||"function"===s&&"function"!=typeof f||"object"===s&&"object"!=typeof f&&f)throw a?new Error(i.errorPrefix(r,e,a)+'contains invalid value for key "'+n+'" (must be of type "'+s+'")'):new Error(i.errorPrefix(r,e,a)+'must contain the key "'+n+'" with type "'+s+'"')}};
},{"./util":66,"./Path":104,"@firebase/util":78}],65:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("../core/util/validation"),a=require("../core/util/util"),i=require("@firebase/util"),n=function(){function n(t,e){this.repo_=t,this.path_=e}return n.prototype.cancel=function(e){t.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),t.validateCallback("OnDisconnect.cancel",1,e,!0);var a=new i.Deferred;return this.repo_.onDisconnectCancel(this.path_,a.wrapCallback(e)),a.promise},n.prototype.remove=function(a){t.validateArgCount("OnDisconnect.remove",0,1,arguments.length),e.validateWritablePath("OnDisconnect.remove",this.path_),t.validateCallback("OnDisconnect.remove",1,a,!0);var n=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(a)),n.promise},n.prototype.set=function(a,n){t.validateArgCount("OnDisconnect.set",1,2,arguments.length),e.validateWritablePath("OnDisconnect.set",this.path_),e.validateFirebaseDataArg("OnDisconnect.set",1,a,this.path_,!1),t.validateCallback("OnDisconnect.set",2,n,!0);var r=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,a,r.wrapCallback(n)),r.promise},n.prototype.setWithPriority=function(a,n,r){t.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),e.validateWritablePath("OnDisconnect.setWithPriority",this.path_),e.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,a,this.path_,!1),e.validatePriority("OnDisconnect.setWithPriority",2,n,!1),t.validateCallback("OnDisconnect.setWithPriority",3,r,!0);var o=new i.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,a,n,o.wrapCallback(r)),o.promise},n.prototype.update=function(n,r){if(t.validateArgCount("OnDisconnect.update",1,2,arguments.length),e.validateWritablePath("OnDisconnect.update",this.path_),Array.isArray(n)){for(var o={},c=0;c<n.length;++c)o[""+c]=n[c];n=o,a.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}e.validateFirebaseMergeDataArg("OnDisconnect.update",1,n,this.path_,!1),t.validateCallback("OnDisconnect.update",2,r,!0);var s=new i.Deferred;return this.repo_.onDisconnectUpdate(this.path_,n,s.wrapCallback(r)),s.promise},n}();exports.OnDisconnect=n;
},{"../core/util/validation":95,"../core/util/util":66,"@firebase/util":78}],101:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=function(){function e(t,e){this.committed=t,this.snapshot=e}return e.prototype.toJSON=function(){return t.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();exports.TransactionResult=e;
},{"@firebase/util":78}],126:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Index"),o=require("../Node"),r=require("../../util/util"),n=require("../nodeFromJSON"),u=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return e(u,t),u.prototype.compare=function(e,t){var o=e.node.compareTo(t.node);return 0===o?r.nameCompare(e.name,t.name):o},u.prototype.isDefinedOn=function(e){return!0},u.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},u.prototype.minPost=function(){return o.NamedNode.MIN},u.prototype.maxPost=function(){return o.NamedNode.MAX},u.prototype.makePost=function(e,t){var r=n.nodeFromJSON(e);return new o.NamedNode(t,r)},u.prototype.toString=function(){return".value"},u}(t.Index);exports.ValueIndex=u,exports.VALUE_INDEX=new u;
},{"./Index":197,"../Node":190,"../../util/util":66,"../nodeFromJSON":134}],63:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("../core/util/validation"),n=require("../core/util/Path"),r=require("../core/snap/indexes/PriorityIndex"),a=function(){function a(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return a.prototype.val=function(){return t.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},a.prototype.exportVal=function(){return t.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},a.prototype.toJSON=function(){return t.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},a.prototype.exists=function(){return t.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},a.prototype.child=function(o){t.validateArgCount("DataSnapshot.child",0,1,arguments.length),o=String(o),e.validatePathString("DataSnapshot.child",1,o,!1);var i=new n.Path(o),h=this.ref_.child(i);return new a(this.node_.getChild(i),h,r.PRIORITY_INDEX)},a.prototype.hasChild=function(r){t.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),e.validatePathString("DataSnapshot.hasChild",1,r,!1);var a=new n.Path(r);return!this.node_.getChild(a).isEmpty()},a.prototype.getPriority=function(){return t.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},a.prototype.forEach=function(e){var n=this;if(t.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),t.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;return!!this.node_.forEachChild(this.index_,function(t,o){return e(new a(o,n.ref_.child(t),r.PRIORITY_INDEX))})},a.prototype.hasChildren=function(){return t.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(a.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),a.prototype.numChildren=function(){return t.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},a.prototype.getRef=function(){return t.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(a.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),a}();exports.DataSnapshot=a;
},{"@firebase/util":78,"../core/util/validation":95,"../core/util/Path":104,"../core/snap/indexes/PriorityIndex":125}],196:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=function(){function e(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+t.stringify(this.snapshot.exportVal())},e}();exports.DataEvent=e;var n=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();exports.CancelEvent=n;
},{"@firebase/util":78}],127:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../api/DataSnapshot"),e=require("./Event"),a=require("@firebase/util"),n=require("@firebase/util"),c=function(){function a(t,e,a){this.callback_=t,this.cancelCallback_=e,this.context_=a}return a.prototype.respondsTo=function(t){return"value"===t},a.prototype.createEvent=function(a,n){var c=n.getQueryParams().getIndex();return new e.DataEvent("value",this,new t.DataSnapshot(a.snapshotNode,n.getRef(),c))},a.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){n.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var a=this.cancelCallback_;return function(){a.call(e,t.error)}}var c=this.callback_;return function(){c.call(e,t.snapshot)}},a.prototype.createCancelEvent=function(t,a){return this.cancelCallback_?new e.CancelEvent(this,t,a):null},a.prototype.matches=function(t){return t instanceof a&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},a.prototype.hasAnyCallback=function(){return null!==this.callback_},a}();exports.ValueEventRegistration=c;var l=function(){function c(t,e,a){this.callbacks_=t,this.cancelCallback_=e,this.context_=a}return c.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,a.contains(this.callbacks_,e)},c.prototype.createCancelEvent=function(t,a){return this.cancelCallback_?new e.CancelEvent(this,t,a):null},c.prototype.createEvent=function(a,c){n.assert(null!=a.childName,"Child events should have a childName.");var l=c.getRef().child(a.childName),r=c.getQueryParams().getIndex();return new e.DataEvent(a.type,this,new t.DataSnapshot(a.snapshotNode,l,r),a.prevName)},c.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){n.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var a=this.cancelCallback_;return function(){a.call(e,t.error)}}var c=this.callbacks_[t.eventType];return function(){c.call(e,t.snapshot,t.prevName)}},c.prototype.matches=function(t){if(t instanceof c){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var e=a.getCount(t.callbacks_);if(e===a.getCount(this.callbacks_)){if(1===e){var n=a.getAnyKey(t.callbacks_),l=a.getAnyKey(this.callbacks_);return!(l!==n||t.callbacks_[n]&&this.callbacks_[l]&&t.callbacks_[n]!==this.callbacks_[l])}return a.every(this.callbacks_,function(e,a){return t.callbacks_[e]===a})}}}return!1},c.prototype.hasAnyCallback=function(){return null!==this.callbacks_},c}();exports.ChildEventRegistration=l;
},{"@firebase/util":78,"../../api/DataSnapshot":63,"./Event":196}],128:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),r=require("../../util/util"),n=require("./Index"),o=require("../ChildrenNode"),i=require("../Node"),a=require("../nodeFromJSON"),d=function(n){function d(t){var r=n.call(this)||this;return r.indexPath_=t,e.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),r}return t(d,n),d.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},d.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},d.prototype.compare=function(t,e){var n=this.extractChild(t.node),o=this.extractChild(e.node),i=n.compareTo(o);return 0===i?r.nameCompare(t.name,e.name):i},d.prototype.makePost=function(t,e){var r=a.nodeFromJSON(t),n=o.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,r);return new i.NamedNode(e,n)},d.prototype.maxPost=function(){var t=o.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,o.MAX_NODE);return new i.NamedNode(r.MAX_NAME,t)},d.prototype.toString=function(){return this.indexPath_.slice().join("/")},d}(n.Index);exports.PathIndex=d;
},{"@firebase/util":78,"../../util/util":66,"./Index":197,"../Node":190,"../nodeFromJSON":134,"../ChildrenNode":163}],59:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@firebase/util"),r=require("../core/snap/indexes/KeyIndex"),i=require("../core/snap/indexes/PriorityIndex"),a=require("../core/snap/indexes/ValueIndex"),n=require("../core/snap/indexes/PathIndex"),o=require("../core/util/util"),l=require("../core/util/Path"),u=require("../core/util/validation"),s=require("@firebase/util"),y=require("../core/view/EventRegistration"),d=require("@firebase/util"),h=function(){function h(e,t,r,i){this.repo=e,this.path=t,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(h,"__referenceConstructor",{get:function(){return t.assert(e,"Reference.ts has not been loaded"),e},set:function(t){e=t},enumerable:!0,configurable:!0}),h.validateQueryEndpoints_=function(e){var l=null,s=null;if(e.hasStart()&&(l=e.getIndexStartValue()),e.hasEnd()&&(s=e.getIndexEndValue()),e.getIndex()===r.KEY_INDEX){var y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",d="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=o.MIN_NAME)throw new Error(y);if("string"!=typeof l)throw new Error(d)}if(e.hasEnd()){if(e.getIndexEndName()!=o.MAX_NAME)throw new Error(y);if("string"!=typeof s)throw new Error(d)}}else if(e.getIndex()===i.PRIORITY_INDEX){if(null!=l&&!u.isValidPriority(l)||null!=s&&!u.isValidPriority(s))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(t.assert(e.getIndex()instanceof n.PathIndex||e.getIndex()===a.VALUE_INDEX,"unknown index type."),null!=l&&"object"==typeof l||null!=s&&"object"==typeof s)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},h.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},h.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},h.prototype.getQueryParams=function(){return this.queryParams_},h.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new h.__referenceConstructor(this.repo,this.path)},h.prototype.on=function(e,t,r,i){s.validateArgCount("Query.on",2,4,arguments.length),u.validateEventType("Query.on",1,e,!1),s.validateCallback("Query.on",2,t,!1);var a=h.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(t,a.cancel,a.context);else{var n={};n[e]=t,this.onChildEvent(n,a.cancel,a.context)}return t},h.prototype.onValueEvent=function(e,t,r){var i=new y.ValueEventRegistration(e,t||null,r||null);this.repo.addEventCallbackForQuery(this,i)},h.prototype.onChildEvent=function(e,t,r){var i=new y.ChildEventRegistration(e,t,r);this.repo.addEventCallbackForQuery(this,i)},h.prototype.off=function(e,t,r){s.validateArgCount("Query.off",0,3,arguments.length),u.validateEventType("Query.off",1,e,!0),s.validateCallback("Query.off",2,t,!0),s.validateContextObject("Query.off",3,r,!0);var i=null,a=null;if("value"===e){var n=t||null;i=new y.ValueEventRegistration(n,null,r||null)}else e&&(t&&((a={})[e]=t),i=new y.ChildEventRegistration(a,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},h.prototype.once=function(e,t,r,i){var a=this;s.validateArgCount("Query.once",1,4,arguments.length),u.validateEventType("Query.once",1,e,!1),s.validateCallback("Query.once",2,t,!0);var n=h.getCancelAndContextArgs_("Query.once",r,i),o=!0,l=new d.Deferred;l.promise.catch(function(){});var y=function(r){o&&(o=!1,a.off(e,y),t&&t.bind(n.context)(r),l.resolve(r))};return this.on(e,y,function(t){a.off(e,y),n.cancel&&n.cancel.bind(n.context)(t),l.reject(t)}),l.promise},h.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new h(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},h.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new h(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},h.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');u.validatePathString("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new l.Path(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new n.PathIndex(t),i=this.queryParams_.orderBy(r);return h.validateQueryEndpoints_(i),new h(this.repo,this.path,i,!0)},h.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(r.KEY_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(i.PRIORITY_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(a.VALUE_INDEX);return h.validateQueryEndpoints_(e),new h(this.repo,this.path,e,!0)},h.prototype.startAt=function(e,t){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),u.validateFirebaseDataArg("Query.startAt",1,e,this.path,!0),u.validateKey("Query.startAt",2,t,!0);var r=this.queryParams_.startAt(e,t);if(h.validateLimit_(r),h.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,t=null),new h(this.repo,this.path,r,this.orderByCalled_)},h.prototype.endAt=function(e,t){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),u.validateFirebaseDataArg("Query.endAt",1,e,this.path,!0),u.validateKey("Query.endAt",2,t,!0);var r=this.queryParams_.endAt(e,t);if(h.validateLimit_(r),h.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new h(this.repo,this.path,r,this.orderByCalled_)},h.prototype.equalTo=function(e,t){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),u.validateFirebaseDataArg("Query.equalTo",1,e,this.path,!1),u.validateKey("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},h.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},h.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},h.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},h.prototype.queryIdentifier=function(){var e=this.queryObject(),t=o.ObjectToUniqueKey(e);return"{}"===t?"default":t},h.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof h)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var t=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return t&&r&&i},h.getCancelAndContextArgs_=function(e,t,r){var i={cancel:null,context:null};if(t&&r)i.cancel=t,s.validateCallback(e,3,i.cancel,!0),i.context=r,s.validateContextObject(e,4,i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error(s.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");i.cancel=t}return i},Object.defineProperty(h.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),h}();exports.Query=h;
},{"@firebase/util":78,"../core/util/util":66,"../core/util/Path":104,"../core/util/validation":95,"../core/snap/indexes/KeyIndex":124,"../core/snap/indexes/PriorityIndex":125,"../core/snap/indexes/ValueIndex":126,"../core/view/EventRegistration":127,"../core/snap/indexes/PathIndex":128}],103:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@firebase/util");exports.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,a=[];return function(o){var n=o===t;t=o;var s,u=new Array(8);for(s=7;s>=0;s--)u[s]=e.charAt(o%64),o=Math.floor(o/64);r.assert(0===o,"Cannot push at time == 0");var f=u.join("");if(n){for(s=11;s>=0&&63===a[s];s--)a[s]=0;a[s]++}else for(s=0;s<12;s++)a[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)f+=e.charAt(a[s]);return r.assert(20===f.length,"nextPushId: Length should be 20."),f}}();
},{"@firebase/util":78}],189:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./IndexedFilter"),t=require("../../snap/indexes/PriorityIndex"),n=require("../../../core/snap/Node"),r=require("../../snap/ChildrenNode"),i=function(){function i(t){this.indexedFilter_=new e.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=i.getStartPost_(t),this.endPost_=i.getEndPost_(t)}return i.prototype.getStartPost=function(){return this.startPost_},i.prototype.getEndPost=function(){return this.endPost_},i.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},i.prototype.updateChild=function(e,t,i,d,o,s){return this.matches(new n.NamedNode(t,i))||(i=r.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,d,o,s)},i.prototype.updateFullNode=function(e,i,d){i.isLeafNode()&&(i=r.ChildrenNode.EMPTY_NODE);var o=i.withIndex(this.index_);o=o.updatePriority(r.ChildrenNode.EMPTY_NODE);var s=this;return i.forEachChild(t.PRIORITY_INDEX,function(e,t){s.matches(new n.NamedNode(e,t))||(o=o.updateImmediateChild(e,r.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,d)},i.prototype.updatePriority=function(e,t){return e},i.prototype.filtersNodes=function(){return!0},i.prototype.getIndexedFilter=function(){return this.indexedFilter_},i.prototype.getIndex=function(){return this.index_},i.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},i.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},i}();exports.RangedFilter=i;
},{"./IndexedFilter":187,"../../snap/ChildrenNode":163,"../../snap/indexes/PriorityIndex":125,"../../../core/snap/Node":190}],188:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./RangedFilter"),t=require("../../snap/ChildrenNode"),i=require("../../snap/Node"),r=require("@firebase/util"),d=require("../Change"),n=function(){function n(t){this.rangedFilter_=new e.RangedFilter(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return n.prototype.updateChild=function(e,r,d,n,h,a){return this.rangedFilter_.matches(new i.NamedNode(r,d))||(d=t.ChildrenNode.EMPTY_NODE),e.getImmediateChild(r).equals(d)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,d,n,h,a):this.fullLimitUpdateChild_(e,r,d,h,a)},n.prototype.updateFullNode=function(e,i,r){var d;if(i.isLeafNode()||i.isEmpty())d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<i.numChildren()&&i.isIndexed(this.index_)){d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var n=void 0;n=this.reverse_?i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var h=0;n.hasNext()&&h<this.limit_;){var a=n.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;d=d.updateImmediateChild(a.name,a.node),h++}}else{d=(d=i.withIndex(this.index_)).updatePriority(t.ChildrenNode.EMPTY_NODE);var l=void 0,s=void 0,o=void 0;n=void 0;if(this.reverse_){n=d.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var g=this.index_.getCompare();o=function(e,t){return g(t,e)}}else n=d.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();h=0;for(var u=!1;n.hasNext();){a=n.getNext();!u&&o(l,a)<=0&&(u=!0);u&&h<this.limit_&&o(a,s)<=0?h++:d=d.updateImmediateChild(a.name,t.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,d,r)},n.prototype.updatePriority=function(e,t){return e},n.prototype.filtersNodes=function(){return!0},n.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},n.prototype.getIndex=function(){return this.index_},n.prototype.fullLimitUpdateChild_=function(e,n,h,a,l){var s;if(this.reverse_){var o=this.index_.getCompare();s=function(e,t){return o(t,e)}}else s=this.index_.getCompare();var g=e;r.assert(g.numChildren()==this.limit_,"");var u=new i.NamedNode(n,h),_=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),m=this.rangedFilter_.matches(u);if(g.hasChild(n)){for(var C=g.getImmediateChild(n),p=a.getChildAfterChild(this.index_,_,this.reverse_);null!=p&&(p.name==n||g.hasChild(p.name));)p=a.getChildAfterChild(this.index_,p,this.reverse_);var x=null==p?1:s(p,u);if(m&&!h.isEmpty()&&x>=0)return null!=l&&l.trackChildChange(d.Change.childChangedChange(n,h,C)),g.updateImmediateChild(n,h);null!=l&&l.trackChildChange(d.Change.childRemovedChange(n,C));var v=g.updateImmediateChild(n,t.ChildrenNode.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=l&&l.trackChildChange(d.Change.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return h.isEmpty()?e:m&&s(_,u)>=0?(null!=l&&(l.trackChildChange(d.Change.childRemovedChange(_.name,_.node)),l.trackChildChange(d.Change.childAddedChange(n,h))),g.updateImmediateChild(n,h).updateImmediateChild(_.name,t.ChildrenNode.EMPTY_NODE)):e},n}();exports.LimitedFilter=n;
},{"../../snap/ChildrenNode":163,"../../snap/Node":190,"./RangedFilter":189,"../Change":217,"@firebase/util":78}],105:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("../util/util"),i=require("../snap/indexes/KeyIndex"),n=require("../snap/indexes/PriorityIndex"),r=require("../snap/indexes/ValueIndex"),_=require("../snap/indexes/PathIndex"),s=require("./filter/IndexedFilter"),a=require("./filter/LimitedFilter"),d=require("./filter/RangedFilter"),o=require("@firebase/util"),h=function(){function h(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=n.PRIORITY_INDEX}return h.prototype.hasStart=function(){return this.startSet_},h.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},h.prototype.getIndexStartValue=function(){return t.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},h.prototype.getIndexStartName=function(){return t.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:e.MIN_NAME},h.prototype.hasEnd=function(){return this.endSet_},h.prototype.getIndexEndValue=function(){return t.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},h.prototype.getIndexEndName=function(){return t.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:e.MAX_NAME},h.prototype.hasLimit=function(){return this.limitSet_},h.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},h.prototype.getLimit=function(){return t.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},h.prototype.getIndex=function(){return this.index_},h.prototype.copy_=function(){var t=new h;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},h.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},h.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},h.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},h.prototype.startAt=function(t,e){var i=this.copy_();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i},h.prototype.endAt=function(t,e){var i=this.copy_();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i},h.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},h.prototype.getQueryObject=function(){var t=h.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=i}return this.index_!==n.PRIORITY_INDEX&&(e[t.INDEX]=this.index_.toString()),e},h.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},h.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==n.PRIORITY_INDEX},h.prototype.getNodeFilter=function(){return this.loadsAllData()?new s.IndexedFilter(this.getIndex()):this.hasLimit()?new a.LimitedFilter(this):new d.RangedFilter(this)},h.prototype.toRestQueryStringParameters=function(){var e=h.REST_QUERY_CONSTANTS_,s={};if(this.isDefault())return s;var a;return this.index_===n.PRIORITY_INDEX?a=e.PRIORITY_INDEX:this.index_===r.VALUE_INDEX?a=e.VALUE_INDEX:this.index_===i.KEY_INDEX?a=e.KEY_INDEX:(t.assert(this.index_ instanceof _.PathIndex,"Unrecognized index type!"),a=this.index_.toString()),s[e.ORDER_BY]=o.stringify(a),this.startSet_&&(s[e.START_AT]=o.stringify(this.indexStartValue_),this.startNameSet_&&(s[e.START_AT]+=","+o.stringify(this.indexStartName_))),this.endSet_&&(s[e.END_AT]=o.stringify(this.indexEndValue_),this.endNameSet_&&(s[e.END_AT]+=","+o.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?s[e.LIMIT_TO_FIRST]=this.limit_:s[e.LIMIT_TO_LAST]=this.limit_),s},h.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},h.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},h.DEFAULT=new h,h}();exports.QueryParams=h;
},{"../util/util":66,"../snap/indexes/KeyIndex":124,"../snap/indexes/PriorityIndex":125,"../snap/indexes/PathIndex":128,"../snap/indexes/ValueIndex":126,"./filter/IndexedFilter":187,"./filter/LimitedFilter":188,"./filter/RangedFilter":189,"@firebase/util":78}],60:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./onDisconnect"),r=require("./TransactionResult"),i=require("../core/util/util"),a=require("../core/util/NextPushId"),n=require("./Query"),o=require("../core/Repo"),c=require("../core/util/Path"),s=require("../core/view/QueryParams"),l=require("../core/util/validation"),h=require("@firebase/util"),u=require("@firebase/util"),p=require("../core/SyncPoint"),f=function(n){function p(e,t){if(!(e instanceof o.Repo))throw new Error("new Reference() no longer supported - use app.database().");return n.call(this,e,t,s.QueryParams.DEFAULT,!1)||this}return e(p,n),p.prototype.getKey=function(){return h.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},p.prototype.child=function(e){return h.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof c.Path||(null===this.path.getFront()?l.validateRootPathString("Reference.child",1,e,!1):l.validatePathString("Reference.child",1,e,!1)),new p(this.repo,this.path.child(e))},p.prototype.getParent=function(){h.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new p(this.repo,e)},p.prototype.getRoot=function(){h.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},p.prototype.databaseProp=function(){return this.repo.database},p.prototype.set=function(e,t){h.validateArgCount("Reference.set",1,2,arguments.length),l.validateWritablePath("Reference.set",this.path),l.validateFirebaseDataArg("Reference.set",1,e,this.path,!1),h.validateCallback("Reference.set",2,t,!0);var r=new u.Deferred;return this.repo.setWithPriority(this.path,e,null,r.wrapCallback(t)),r.promise},p.prototype.update=function(e,t){if(h.validateArgCount("Reference.update",1,2,arguments.length),l.validateWritablePath("Reference.update",this.path),Array.isArray(e)){for(var r={},a=0;a<e.length;++a)r[""+a]=e[a];e=r,i.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}l.validateFirebaseMergeDataArg("Reference.update",1,e,this.path,!1),h.validateCallback("Reference.update",2,t,!0);var n=new u.Deferred;return this.repo.update(this.path,e,n.wrapCallback(t)),n.promise},p.prototype.setWithPriority=function(e,t,r){if(h.validateArgCount("Reference.setWithPriority",2,3,arguments.length),l.validateWritablePath("Reference.setWithPriority",this.path),l.validateFirebaseDataArg("Reference.setWithPriority",1,e,this.path,!1),l.validatePriority("Reference.setWithPriority",2,t,!1),h.validateCallback("Reference.setWithPriority",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new u.Deferred;return this.repo.setWithPriority(this.path,e,t,i.wrapCallback(r)),i.promise},p.prototype.remove=function(e){return h.validateArgCount("Reference.remove",0,1,arguments.length),l.validateWritablePath("Reference.remove",this.path),h.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},p.prototype.transaction=function(e,t,i){if(h.validateArgCount("Reference.transaction",1,3,arguments.length),l.validateWritablePath("Reference.transaction",this.path),h.validateCallback("Reference.transaction",1,e,!1),h.validateCallback("Reference.transaction",2,t,!0),l.validateBoolean("Reference.transaction",3,i,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===i&&(i=!0);var a=new u.Deferred;"function"==typeof t&&a.promise.catch(function(){});return this.repo.startTransaction(this.path,e,function(e,i,n){e?a.reject(e):a.resolve(new r.TransactionResult(i,n)),"function"==typeof t&&t(e,i,n)},i),a.promise},p.prototype.setPriority=function(e,t){h.validateArgCount("Reference.setPriority",1,2,arguments.length),l.validateWritablePath("Reference.setPriority",this.path),l.validatePriority("Reference.setPriority",1,e,!1),h.validateCallback("Reference.setPriority",2,t,!0);var r=new u.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,r.wrapCallback(t)),r.promise},p.prototype.push=function(e,t){h.validateArgCount("Reference.push",0,2,arguments.length),l.validateWritablePath("Reference.push",this.path),l.validateFirebaseDataArg("Reference.push",1,e,this.path,!0),h.validateCallback("Reference.push",2,t,!0);var r,i=this.repo.serverTime(),n=a.nextPushId(i),o=this.child(n),c=this.child(n);return r=null!=e?o.set(e,t).then(function(){return c}):Promise.resolve(c),o.then=r.then.bind(r),o.catch=r.then.bind(r,void 0),"function"==typeof t&&r.catch(function(){}),o},p.prototype.onDisconnect=function(){return l.validateWritablePath("Reference.onDisconnect",this.path),new t.OnDisconnect(this.repo,this.path)},Object.defineProperty(p.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),p}(n.Query);exports.Reference=f,n.Query.__referenceConstructor=f,p.SyncPoint.__referenceConstructor=f;
},{"../core/util/util":66,"../core/util/validation":95,"@firebase/util":78,"./onDisconnect":65,"./TransactionResult":101,"./Query":59,"../core/Repo":97,"../core/SyncPoint":102,"../core/util/NextPushId":103,"../core/util/Path":104,"../core/view/QueryParams":105}],213:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("./Path"),n=require("@firebase/util"),i=function(){return function(){this.children={},this.childCount=0,this.value=null}}();exports.TreeNode=i;var o=function(){function o(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new i),this.name_=t,this.parent_=e,this.node_=n}return o.prototype.subTree=function(t){for(var r,h=t instanceof e.Path?t:new e.Path(t),a=this;null!==(r=h.getFront());){a=new o(r,a,n.safeGet(a.node_.children,r)||new i),h=h.popFront()}return a},o.prototype.getValue=function(){return this.node_.value},o.prototype.setValue=function(e){t.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},o.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},o.prototype.hasChildren=function(){return this.node_.childCount>0},o.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},o.prototype.forEachChild=function(t){var e=this;n.forEach(this.node_.children,function(n,i){t(new o(n,e,i))})},o.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},o.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},o.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},o.prototype.path=function(){return new e.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},o.prototype.name=function(){return this.name_},o.prototype.parent=function(){return this.parent_},o.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},o.prototype.updateChild_=function(t,e){var i=e.isEmpty(),o=n.contains(this.node_.children,t);i&&o?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):i||o||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},o}();exports.Tree=o;
},{"@firebase/util":78,"./Path":104}],94:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@firebase/util"),r=require("../api/Reference"),n=require("../api/DataSnapshot"),a=require("./util/Path"),o=require("./util/Tree"),s=require("./snap/indexes/PriorityIndex"),u=require("./util/util"),i=require("./util/ServerValues"),l=require("./util/validation"),c=require("@firebase/util"),p=require("./snap/nodeFromJSON"),h=require("./snap/ChildrenNode"),d=require("./Repo");!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(e=exports.TransactionStatus||(exports.TransactionStatus={})),d.Repo.MAX_TRANSACTION_RETRIES_=25,d.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new o.Tree},d.Repo.prototype.startTransaction=function(a,o,d,T){this.log_("transaction on "+a);var _=function(){},v=new r.Reference(this,a);v.on("value",_);var f={path:a,update:o,onComplete:d,status:null,order:u.LUIDGenerator(),applyLocally:T,retryCount:0,unwatcher:function(){v.off("value",_)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},S=this.getLatestState_(a);f.currentInputSnapshot=S;var R=f.update(S.val());if(void 0===R){if(f.unwatcher(),f.currentOutputSnapshotRaw=null,f.currentOutputSnapshotResolved=null,f.onComplete){var E=new n.DataSnapshot(f.currentInputSnapshot,new r.Reference(this,f.path),s.PRIORITY_INDEX);f.onComplete(null,!1,E)}}else{l.validateFirebaseData("transaction failed: Data returned ",R,f.path),f.status=e.RUN;var N=this.transactionQueueTree_.subTree(a),g=N.getValue()||[];g.push(f),N.setValue(g);var y=void 0;if("object"==typeof R&&null!==R&&c.contains(R,".priority"))y=c.safeGet(R,".priority"),t.assert(l.isValidPriority(y),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{y=(this.serverSyncTree_.calcCompleteEventCache(a)||h.ChildrenNode.EMPTY_NODE).getPriority().val()}y=y;var O=this.generateServerValues(),C=p.nodeFromJSON(R,y),I=i.resolveDeferredValueSnapshot(C,O);f.currentOutputSnapshotRaw=C,f.currentOutputSnapshotResolved=I,f.currentWriteId=this.getNextWriteId_();var b=this.serverSyncTree_.applyUserOverwrite(a,I,f.currentWriteId,f.applyLocally);this.eventQueue_.raiseEventsForChangedPath(a,b),this.sendReadyTransactions_()}},d.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||h.ChildrenNode.EMPTY_NODE},d.Repo.prototype.sendReadyTransactions_=function(r){var n=this;if(void 0===r&&(r=this.transactionQueueTree_),r||this.pruneCompletedTransactionsBelowNode_(r),null!==r.getValue()){var a=this.buildTransactionQueue_(r);t.assert(a.length>0,"Sending zero length transaction queue");a.every(function(t){return t.status===e.RUN})&&this.sendTransactionQueue_(r.path(),a)}else r.hasChildren()&&r.forEachChild(function(e){n.sendReadyTransactions_(e)})},d.Repo.prototype.sendTransactionQueue_=function(o,i){for(var l=this,c=i.map(function(e){return e.currentWriteId}),p=this.getLatestState_(o,c),h=p,d=p.hash(),T=0;T<i.length;T++){var _=i[T];t.assert(_.status===e.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=e.SENT,_.retryCount++;var v=a.Path.relativePath(o,_.path);h=h.updateChild(v,_.currentOutputSnapshotRaw)}var f=h.val(!0),S=o;this.server_.put(S.toString(),f,function(t){l.log_("transaction put response",{path:S.toString(),status:t});var a=[];if("ok"===t){for(var c=[],p=0;p<i.length;p++){if(i[p].status=e.COMPLETED,a=a.concat(l.serverSyncTree_.ackUserWrite(i[p].currentWriteId)),i[p].onComplete){var h=i[p].currentOutputSnapshotResolved,d=new r.Reference(l,i[p].path),T=new n.DataSnapshot(h,d,s.PRIORITY_INDEX);c.push(i[p].onComplete.bind(null,null,!0,T))}i[p].unwatcher()}l.pruneCompletedTransactionsBelowNode_(l.transactionQueueTree_.subTree(o)),l.sendReadyTransactions_(),l.eventQueue_.raiseEventsForChangedPath(o,a);for(p=0;p<c.length;p++)u.exceptionGuard(c[p])}else{if("datastale"===t)for(p=0;p<i.length;p++)i[p].status===e.SENT_NEEDS_ABORT?i[p].status=e.NEEDS_ABORT:i[p].status=e.RUN;else{u.warn("transaction at "+S.toString()+" failed: "+t);for(p=0;p<i.length;p++)i[p].status=e.NEEDS_ABORT,i[p].abortReason=t}l.rerunTransactions_(o)}},d)},d.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),r=t.path(),n=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(n,r),r},d.Repo.prototype.rerunTransactionQueue_=function(o,h){if(0!==o.length){for(var T=[],_=[],v=o.filter(function(t){return t.status===e.RUN}).map(function(e){return e.currentWriteId}),f=0;f<o.length;f++){var S=o[f],R=a.Path.relativePath(h,S.path),E=!1,N=void 0;if(t.assert(null!==R,"rerunTransactionsUnderNode_: relativePath should not be null."),S.status===e.NEEDS_ABORT)E=!0,N=S.abortReason,_=_.concat(this.serverSyncTree_.ackUserWrite(S.currentWriteId,!0));else if(S.status===e.RUN)if(S.retryCount>=d.Repo.MAX_TRANSACTION_RETRIES_)E=!0,N="maxretry",_=_.concat(this.serverSyncTree_.ackUserWrite(S.currentWriteId,!0));else{var g=this.getLatestState_(S.path,v);S.currentInputSnapshot=g;var y=o[f].update(g.val());if(void 0!==y){l.validateFirebaseData("transaction failed: Data returned ",y,S.path);var O=p.nodeFromJSON(y);"object"==typeof y&&null!=y&&c.contains(y,".priority")||(O=O.updatePriority(g.getPriority()));var C=S.currentWriteId,I=this.generateServerValues(),b=i.resolveDeferredValueSnapshot(O,I);S.currentOutputSnapshotRaw=O,S.currentOutputSnapshotResolved=b,S.currentWriteId=this.getNextWriteId_(),v.splice(v.indexOf(C),1),_=(_=_.concat(this.serverSyncTree_.applyUserOverwrite(S.path,b,S.currentWriteId,S.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(C,!0))}else E=!0,N="nodata",_=_.concat(this.serverSyncTree_.ackUserWrite(S.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(h,_),_=[],E&&(o[f].status=e.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(o[f].unwatcher),o[f].onComplete))if("nodata"===N){var D=new r.Reference(this,o[f].path),m=o[f].currentInputSnapshot,w=new n.DataSnapshot(m,D,s.PRIORITY_INDEX);T.push(o[f].onComplete.bind(null,null,!1,w))}else T.push(o[f].onComplete.bind(null,new Error(N),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(f=0;f<T.length;f++)u.exceptionGuard(T[f]);this.sendReadyTransactions_()}},d.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,r=this.transactionQueueTree_;null!==(t=e.getFront())&&null===r.getValue();)r=r.subTree(t),e=e.popFront();return r},d.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},d.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var r=this,n=e.getValue();if(null!==n)for(var a=0;a<n.length;a++)t.push(n[a]);e.forEachChild(function(e){r.aggregateTransactionQueuesForNode_(e,t)})},d.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(t){var r=this,n=t.getValue();if(n){for(var a=0,o=0;o<n.length;o++)n[o].status!==e.COMPLETED&&(n[a]=n[o],a++);n.length=a,t.setValue(n.length>0?n:null)}t.forEachChild(function(e){r.pruneCompletedTransactionsBelowNode_(e)})},d.Repo.prototype.abortTransactions_=function(e){var t=this,r=this.getAncestorTransactionNode_(e).path(),n=this.transactionQueueTree_.subTree(e);return n.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(n),n.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),r},d.Repo.prototype.abortTransactionsOnNode_=function(r){var n=r.getValue();if(null!==n){for(var a=[],o=[],s=-1,i=0;i<n.length;i++)if(n[i].status===e.SENT_NEEDS_ABORT);else if(n[i].status===e.SENT)t.assert(s===i-1,"All SENT items should be at beginning of queue."),s=i,n[i].status=e.SENT_NEEDS_ABORT,n[i].abortReason="set";else if(t.assert(n[i].status===e.RUN,"Unexpected transaction status in abort"),n[i].unwatcher(),o=o.concat(this.serverSyncTree_.ackUserWrite(n[i].currentWriteId,!0)),n[i].onComplete){a.push(n[i].onComplete.bind(null,new Error("set"),!1,null))}-1===s?r.setValue(null):n.length=s+1,this.eventQueue_.raiseEventsForChangedPath(r.path(),o);for(i=0;i<a.length;i++)u.exceptionGuard(a[i])}};
},{"@firebase/util":78,"./util/Path":104,"./snap/indexes/PriorityIndex":125,"./util/util":66,"./util/ServerValues":133,"./util/validation":95,"./snap/nodeFromJSON":134,"./snap/ChildrenNode":163,"./Repo":97,"../api/Reference":60,"../api/DataSnapshot":63,"./util/Tree":213}],75:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/util"),e=require("@firebase/util"),s=require("./storage/storage"),o=require("../realtime/Constants"),i=function(){function i(t,e,o,i,r){void 0===r&&(r=""),this.secure=e,this.namespace=o,this.webSocketOnly=i,this.persistenceKey=r,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=s.PersistentStorage.get("host:"+t)||this.host}return i.prototype.needsQueryParam=function(){return this.host!==this.internalHost},i.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},i.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},i.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},i.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&s.PersistentStorage.set("host:"+this.host,this.internalHost))},i.prototype.connectionURL=function(s,i){t.assert("string"==typeof s,"typeof type must == string"),t.assert("object"==typeof i,"typeof params must == object");var r;if(s===o.WEBSOCKET)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(s!==o.LONG_POLLING)throw new Error("Unknown connection type: "+s);r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(i.ns=this.namespace);var n=[];return e.forEach(i,function(t,e){n.push(t+"="+e)}),r+n.join("&")},i.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},i.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},i}();exports.RepoInfo=i;
},{"@firebase/util":78,"../realtime/Constants":107,"./storage/storage":108}],96:[function(require,module,exports) {
"use strict";function e(e){for(var r="",s=e.split("/"),t=0;t<s.length;t++)if(s[t].length>0){var n=s[t];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(e){}r+="/"+n}return r}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../Path"),s=require("../../RepoInfo"),t=require("../util");exports.parseRepoInfo=function(e){var n=exports.parseURL(e),a=n.subdomain;"firebase"===n.domain&&t.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),a&&"undefined"!=a||t.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||t.warnIfPageIsSecure();var o="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new s.RepoInfo(n.host,n.secure,a,o),path:new r.Path(n.pathString)}},exports.parseURL=function(r){var s="",t="",n="",a="",o=!0,i="https",u=443;if("string"==typeof r){var p=r.indexOf("//");p>=0&&(i=r.substring(0,p-1),r=r.substring(p+2));var f=r.indexOf("/");-1===f&&(f=r.length),s=r.substring(0,f),a=e(r.substring(f));var h=s.split(".");3===h.length?(t=h[1],n=h[0].toLowerCase()):2===h.length&&(t=h[0]),(p=s.indexOf(":"))>=0&&(o="https"===i||"wss"===i,u=parseInt(s.substring(p+1),10))}return{host:s,port:u,domain:t,subdomain:n,secure:o,scheme:i,pathString:a}};
},{"../../RepoInfo":75,"../Path":104,"../util":66}],61:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("./Repo"),a=require("./util/util"),r=require("./util/libs/parser"),i=require("./util/validation");require("./Repo_transaction");var o,s="databaseURL",n=function(){function n(){this.repos_={},this.useRestClient_=!1}return n.getInstance=function(){return o||(o=new n),o},n.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},n.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},n.prototype.databaseFromApp=function(e,t){var o=t||e.options[s];void 0===o&&a.fatal("Can't determine Firebase Database URL.  Be sure to include "+s+" option when calling firebase.intializeApp().");var n=r.parseRepoInfo(o),p=n.repoInfo;i.validateUrl("Invalid Firebase Database URL",1,n),n.path.isEmpty()||a.fatal("Database URL must point to the root of a Firebase Database (not including a child path).");return this.createRepo(p,e).database},n.prototype.deleteRepo=function(t){var r=e.safeGet(this.repos_,t.app.name);r&&e.safeGet(r,t.repoInfo_.toURLString())===t||a.fatal("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete r[t.repoInfo_.toURLString()]},n.prototype.createRepo=function(r,i){var o=e.safeGet(this.repos_,i.name);o||(o={},this.repos_[i.name]=o);var s=e.safeGet(o,r.toURLString());return s&&a.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new t.Repo(r,this.useRestClient_,i),o[r.toURLString()]=s,s},n.prototype.forceRestClient=function(e){this.useRestClient_=e},n}();exports.RepoManager=n;
},{"./Repo_transaction":94,"./util/util":66,"./util/validation":95,"./util/libs/parser":96,"./Repo":97,"@firebase/util":78}],58:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/util/util"),t=require("../core/util/libs/parser"),r=require("../core/util/Path"),a=require("./Reference"),o=require("../core/Repo"),n=require("../core/RepoManager"),i=require("@firebase/util"),s=require("../core/util/validation"),l=function(){function n(t){this.repo_=t,t instanceof o.Repo||e.fatal("Don't call new Database() directly - please use firebase.database()."),this.root_=new a.Reference(t,r.Path.Empty),this.INTERNAL=new u(this)}return Object.defineProperty(n.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),n.prototype.ref=function(e){return this.checkDeleted_("ref"),i.validateArgCount("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},n.prototype.refFromURL=function(r){var a="database.refFromURL";this.checkDeleted_(a),i.validateArgCount(a,1,1,arguments.length);var o=t.parseRepoInfo(r);s.validateUrl(a,1,o);var n=o.repoInfo;return n.host!==this.repo_.repoInfo_.host&&e.fatal(a+": Host name does not match the current database: (found "+n.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(o.path.toString())},n.prototype.checkDeleted_=function(t){null===this.repo_&&e.fatal("Cannot call "+t+" on a deleted database.")},n.prototype.goOffline=function(){i.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},n.prototype.goOnline=function(){i.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},n.ServerValue={TIMESTAMP:{".sv":"timestamp"}},n}();exports.Database=l;var u=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),n.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},e}();exports.DatabaseInternals=u;
},{"../core/util/util":66,"../core/util/Path":104,"../core/Repo":97,"../core/RepoManager":61,"@firebase/util":78,"../core/util/validation":95,"./Reference":60,"../core/util/libs/parser":96}],62:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../realtime/WebSocketConnection"),t=require("../realtime/BrowserPollConnection");exports.forceLongPolling=function(){e.WebSocketConnection.forceDisallow(),t.BrowserPollConnection.forceAllow()},exports.forceWebSockets=function(){t.BrowserPollConnection.forceDisallow()},exports.isWebSocketsAvailable=function(){return e.WebSocketConnection.isAvailable()},exports.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},exports.stats=function(e,t){e.repo.stats(t)},exports.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},exports.dataUpdateCount=function(e){return e.repo.dataUpdateCount},exports.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)};
},{"../realtime/WebSocketConnection":122,"../realtime/BrowserPollConnection":123}],64:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/RepoInfo"),t=require("../core/PersistentConnection"),n=require("../core/RepoManager"),o=require("../realtime/Connection");exports.DataConnection=t.PersistentConnection,t.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},t.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},exports.RealTimeConnection=o.Connection,exports.hijackHash=function(e){var n=t.PersistentConnection.prototype.put;return t.PersistentConnection.prototype.put=function(t,o,r,i){void 0!==i&&(i=e()),n.call(this,t,o,r,i)},function(){t.PersistentConnection.prototype.put=n}},exports.ConnectionTarget=e.RepoInfo,exports.queryIdentifier=function(e){return e.queryIdentifier()},exports.listens=function(e){return e.repo.persistentConnection_.listens_},exports.forceRestClient=function(e){n.RepoManager.getInstance().forceRestClient(e)};
},{"../core/RepoInfo":75,"../core/PersistentConnection":76,"../core/RepoManager":61,"../realtime/Connection":77}],39:[function(require,module,exports) {
"use strict";function e(e){var r=e.INTERNAL.registerService("database",function(e,r,a){return n.RepoManager.getInstance().databaseFromApp(e,a)},{Reference:t.Reference,Query:s.Query,Database:a.Database,enableLogging:i.enableLogging,INTERNAL:o,ServerValue:p,TEST_ACCESS:u},null,!0);c.isNodeSdk()&&(module.exports=r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@firebase/app"),a=require("./src/api/Database");exports.Database=a.Database;var s=require("./src/api/Query");exports.Query=s.Query;var t=require("./src/api/Reference");exports.Reference=t.Reference;var i=require("./src/core/util/util");exports.enableLogging=i.enableLogging;var n=require("./src/core/RepoManager"),o=require("./src/api/internal"),u=require("./src/api/test_access"),c=require("@firebase/util"),p=a.Database.ServerValue;exports.ServerValue=p,exports.registerDatabase=e,e(r.default);var g=require("./src/api/DataSnapshot");exports.DataSnapshot=g.DataSnapshot;var l=require("./src/api/onDisconnect");exports.OnDisconnect=l.OnDisconnect;
},{"./src/api/Database":58,"./src/api/Query":59,"./src/api/Reference":60,"./src/core/RepoManager":61,"./src/api/internal":62,"./src/api/DataSnapshot":63,"./src/api/test_access":64,"./src/api/onDisconnect":65,"./src/core/util/util":66,"@firebase/app":30,"@firebase/util":78}],25:[function(require,module,exports) {
module.exports=require("@firebase/database");
},{"@firebase/database":39}],185:[function(require,module,exports) {
var global = (1,eval)("this");
var t=(0,eval)("this");(function(){function t(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}function e(){}function i(t){var n=typeof t;if("object"==n){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return n;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==n&&void 0===t.call)return"object";return n}function r(t){return null===t}function o(t){return"array"==i(t)}function a(t){var n=i(t);return"array"==n||"object"==n&&"number"==typeof t.length}function s(t){return"function"==i(t)}function u(t){var n=typeof t;return"object"==n&&null!=t||"function"==n}function c(t,n,e){return t.call.apply(t.bind,arguments)}function h(t,n,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,i),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function f(t,n,e){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:h).apply(null,arguments)}function l(t,n){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function d(t,n){function e(){}e.prototype=n.prototype,t.ib=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.Rc=function(t,e,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return n.prototype[e].apply(t,r)}}function p(t){if(Error.captureStackTrace)Error.captureStackTrace(this,p);else{var n=Error().stack;n&&(this.stack=n)}t&&(this.message=String(t))}function v(t,n){for(var e=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)i+=e.shift()+r.shift();return i+e.join("%s")}function m(t){return Da.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(Na,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Oa,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Pa,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Ra,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Ca,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(_a,"&#0;")),t):t}function g(t,n){return-1!=t.indexOf(n)}function b(t,n){return t<n?-1:t>n?1:0}function w(t,n){n.unshift(t),p.call(this,v.apply(null,n)),n.shift()}function y(t,n){throw new w("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function I(t,n){return 0<=xa(t,n)}function T(t,n){var e;return(e=0<=(n=xa(t,n)))&&Array.prototype.splice.call(t,n,1),e}function A(n,e){!function(n,e){var i=n.length,r=t(n)?n.split(""):n;for(--i;0<=i;--i)i in r&&e.call(void 0,r[i],i,n)}(n,function(t,i){e.call(void 0,t,i,n)&&1==Array.prototype.splice.call(n,i,1).length&&0})}function k(t){return Array.prototype.concat.apply([],arguments)}function E(t){var n=t.length;if(0<n){for(var e=Array(n),i=0;i<n;i++)e[i]=t[i];return e}return[]}function S(t){return g(La,t)}function N(t,n){for(var e in t)n.call(void 0,t[e],e,t)}function O(t){var n,e=[],i=0;for(n in t)e[i++]=t[n];return e}function P(t){var n,e=[],i=0;for(n in t)e[i++]=n;return e}function R(t){for(var n in t)return!1;return!0}function C(t,n){for(var e in t)if(!(e in n)||t[e]!==n[e])return!1;for(e in n)if(!(e in t))return!1;return!0}function _(t){var n,e={};for(n in t)e[n]=t[n];return e}function D(t,n){for(var e,i,r=1;r<arguments.length;r++){i=arguments[r];for(e in i)t[e]=i[e];for(var o=0;o<Ka.length;o++)e=Ka[o],Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}}function L(t){return L[" "](t),t}function x(){var t=Ta.document;return t?t.documentMode:void 0}function U(t){return function(t,n){var e=Qa;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}(t,function(){for(var n=0,e=Sa(String(qa)).split("."),i=Sa(String(t)).split("."),r=Math.max(e.length,i.length),o=0;0==n&&o<r;o++){var a=e[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;n=b(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||b(0==a[2].length,0==s[2].length)||b(a[2],s[2]),a=a[3],s=s[3]}while(0==n)}return 0<=n})}function j(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function M(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function V(t,n,e){this.f=e,this.c=t,this.g=n,this.b=0,this.a=null}function F(t,n){t.g(n),t.b<t.f&&(t.b++,n.next=t.a,t.a=n)}function K(){var t=os,n=null;return t.a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),n}function q(){this.next=this.b=this.a=null}function X(t){Ta.setTimeout(function(){throw t},0)}function B(t,n){is||function(){if(-1!=String(Ta.Promise).indexOf("[native code]")){var t=Ta.Promise.resolve(void 0);is=function(){t.then(H)}}else is=function(){var t=H;!s(Ta.setImmediate)||Ta.Window&&Ta.Window.prototype&&!S("Edge")&&Ta.Window.prototype.setImmediate==Ta.setImmediate?(es||(es=function(){var t=Ta.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!S("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var n=t.contentWindow;(t=n.document).open(),t.write(""),t.close();var e="callImmediate"+Math.random(),i="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host;t=f(function(t){"*"!=i&&t.origin!=i||t.data!=e||this.port1.onmessage()},this),n.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(e,i)}}}),void 0!==t&&!S("Trident")&&!S("MSIE")){var n=new t,e={},i=e;return n.port1.onmessage=function(){if(void 0!==e.next){var t=(e=e.next).pb;e.pb=null,t()}},function(t){i.next={pb:t},i=i.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var n=document.createElement("SCRIPT");n.onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,t(),t=null},document.documentElement.appendChild(n)}:function(t){Ta.setTimeout(t,0)}}()),es(t)):Ta.setImmediate(t)}}(),rs||(is(),rs=!0);var e=os,i=ns.get();i.set(t,n),e.b?e.b.next=i:e.a=i,e.b=i}function H(){for(var t;t=K();){try{t.a.call(t.b)}catch(t){X(t)}F(ns,t)}rs=!1}function W(t,n){if(this.a=as,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=e)try{var i=this;t.call(n,function(t){et(i,ss,t)},function(t){if(!(t instanceof ut))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}et(i,us,t)})}catch(t){et(this,us,t)}}function G(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function z(t,n,e){var i=cs.get();return i.g=t,i.b=n,i.f=e,i}function J(t){if(t instanceof W)return t;var n=new W(e);return et(n,ss,t),n}function Y(t){return new W(function(n,e){e(t)})}function $(t,n,e){it(t,n,e,null)||B(l(n,t))}function Z(t,n){return n=z(n,n,void 0),n.c=!0,tt(t,n),t}function Q(t,n){if(t.a==as)if(t.c){var e=t.c;if(e.b){for(var i=0,r=null,o=null,a=e.b;a&&(a.c||(i++,a.a==t&&(r=a),!(r&&1<i)));a=a.next)r||(o=a);r&&(e.a==as&&1==i?Q(e,n):(o?((i=o).next==e.f&&(e.f=i),i.next=i.next.next):ot(e),at(e,r,us,n)))}t.c=null}else et(t,us,n)}function tt(t,n){t.b||t.a!=ss&&t.a!=us||rt(t),t.f?t.f.next=n:t.b=n,t.f=n}function nt(t,n,e,i){var r=z(null,null,null);return r.a=new W(function(t,o){r.g=n?function(e){try{var r=n.call(i,e);t(r)}catch(t){o(t)}}:t,r.b=e?function(n){try{var r=e.call(i,n);void 0===r&&n instanceof ut?o(n):t(r)}catch(t){o(t)}}:o}),r.a.c=t,tt(t,r),r.a}function et(t,n,e){t.a==as&&(t===e&&(n=us,e=new TypeError("Promise cannot resolve to itself")),t.a=1,it(e,t.Ac,t.Bc,t)||(t.i=e,t.a=n,t.c=null,rt(t),n!=us||e instanceof ut||function(t,n){t.g=!0,B(function(){t.g&&hs.call(null,n)})}(t,e)))}function it(t,n,i,r){if(t instanceof W)return tt(t,z(n||e,i||null,r)),!0;if(M(t))return t.then(n,i,r),!0;if(u(t))try{var o=t.then;if(s(o))return function(t,n,e,i,r){function o(t){s||(s=!0,i.call(r,t))}function a(t){s||(s=!0,e.call(r,t))}var s=!1;try{n.call(t,a,o)}catch(t){o(t)}}(t,o,n,i,r),!0}catch(t){return i.call(r,t),!0}return!1}function rt(t){t.h||(t.h=!0,B(t.Qb,t))}function ot(t){var n=null;return t.b&&(n=t.b,t.b=n.next,n.next=null),t.b||(t.f=null),n}function at(t,n,e,i){if(e==us&&n.b&&!n.c)for(;t&&t.g;t=t.c)t.g=!1;if(n.a)n.a.c=null,st(n,e,i);else try{n.c?n.g.call(n.f):st(n,e,i)}catch(t){hs.call(null,t)}F(cs,n)}function st(t,n,e){n==ss?t.g.call(t.f,e):t.b&&t.b.call(t.f,e)}function ut(t){p.call(this,t)}function ct(){this.a="",this.b=ls}function ht(t){return t instanceof ct&&t.constructor===ct&&t.b===ls?t.a:(y("expected object of type Const, got '"+t+"'"),"type_error:Const")}function ft(t){var n=new ct;return n.a=t,n}function lt(){this.a="",this.b=vs}function dt(t){return t instanceof lt&&t.constructor===lt&&t.b===vs?t.a:(y("expected object of type TrustedResourceUrl, got '"+t+"' of type "+i(t)),"type_error:TrustedResourceUrl")}function pt(t,n){return t=function(t,n){var e=ht(t);if(!ps.test(e))throw Error("Invalid TrustedResourceUrl format: "+e);return e.replace(ds,function(t,i){if(!Object.prototype.hasOwnProperty.call(n,i))throw Error('Found marker, "'+i+'", in format string, "'+e+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[i])instanceof ct?ht(t):encodeURIComponent(String(t))})}(t,n),n=new lt,n.a=t,n}function vt(){this.a="",this.b=gs}function mt(t){return t instanceof vt&&t.constructor===vt&&t.b===gs?t.a:(y("expected object of type SafeUrl, got '"+t+"' of type "+i(t)),"type_error:SafeUrl")}function gt(t){return t instanceof vt?t:(t=t.la?t.ja():String(t),ms.test(t)||(t="about:invalid#zClosurez"),bt(t))}function bt(t){var n=new vt;return n.a=t,n}function wt(){this.a="",this.b=bs}function yt(t){var n=new wt;return n.a=t,n}function It(n){var e=document;return t(n)?e.getElementById(n):n}function Tt(t,n){N(n,function(n,e){n&&n.la&&(n=n.ja()),"style"==e?t.style.cssText=n:"class"==e?t.className=n:"for"==e?t.htmlFor=n:ws.hasOwnProperty(e)?t.setAttribute(ws[e],n):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?t.setAttribute(e,n):t[e]=n})}function At(n,e,i){var r=arguments,c=document,h=String(r[0]),f=r[1];if(!fs&&f&&(f.name||f.type)){if(h=["<",h],f.name&&h.push(' name="',m(f.name),'"'),f.type){h.push(' type="',m(f.type),'"');var l={};D(l,f),delete l.type,f=l}h.push(">"),h=h.join("")}return h=c.createElement(h),f&&(t(f)?h.className=f:o(f)?h.className=f.join(" "):Tt(h,f)),2<r.length&&function(n,e,i){function r(i){i&&e.appendChild(t(i)?n.createTextNode(i):i)}for(var o=2;o<i.length;o++){var c=i[o];!a(c)||u(c)&&0<c.nodeType?r(c):Ua(function(t){if(t&&"number"==typeof t.length){if(u(t))return"function"==typeof t.item||"string"==typeof t.item;if(s(t))return"function"==typeof t.item}return!1}(c)?E(c):c,r)}}(c,h,r),h}function kt(t){var n=[];return Et(new function(){},t,n),n.join("")}function Et(t,n,e){if(null==n)e.push("null");else{if("object"==typeof n){if(o(n)){var i=n;n=i.length,e.push("[");for(var r="",a=0;a<n;a++)e.push(r),Et(t,i[a],e),r=",";return void e.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){e.push("{"),r="";for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(e.push(r),St(i,e),e.push(":"),Et(t,a,e),r=",");return void e.push("}")}n=n.valueOf()}switch(typeof n){case"string":St(n,e);break;case"number":e.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":e.push(String(n));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}function St(t,n){n.push('"',t.replace(Is,function(t){var n=ys[t];return n||(n="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ys[t]=n),n}),'"')}function Nt(){0!=Ts&&(As[this[Aa]||(this[Aa]=++ka)]=this),this.oa=this.oa,this.Fa=this.Fa}function Ot(t){t.oa||(t.oa=!0,t.ta(),0!=Ts&&(t=t[Aa]||(t[Aa]=++ka),delete As[t]))}function Pt(t,n){this.type=t,this.b=this.target=n,this.Bb=!0}function Rt(n,e){if(Pt.call(this,n?n.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,n){var i=this.type=n.type,r=n.changedTouches?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.b=e,e=n.relatedTarget){if(Ga){t:{try{L(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==i?e=n.fromElement:"mouseout"==i&&(e=n.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=t(n.pointerType)?n.pointerType:Os[n.pointerType]||"",this.a=n,n.defaultPrevented&&this.c()}}function Ct(t){t.ma=!0,t.listener=null,t.a=null,t.src=null,t.La=null}function _t(t){this.src=t,this.a={},this.b=0}function Dt(t,n,e,i,r,o){var a=n.toString();(n=t.a[a])||(n=t.a[a]=[],t.b++);var s=xt(n,e,r,o);return-1<s?(t=n[s],i||(t.Ha=!1)):(t=new function(t,n,e,i,r){this.listener=t,this.a=null,this.src=n,this.type=e,this.capture=!!i,this.La=r,this.key=++Rs,this.ma=this.Ha=!1}(e,t.src,a,!!r,o),t.Ha=i,n.push(t)),t}function Lt(t,n){var e=n.type;e in t.a&&T(t.a[e],n)&&(Ct(n),0==t.a[e].length&&(delete t.a[e],t.b--))}function xt(t,n,e,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ma&&o.listener==n&&o.capture==!!e&&o.La==i)return r}return-1}function Ut(t,n,e,i,r){if(i&&i.once)Mt(t,n,e,i,r);else if(o(n))for(var a=0;a<n.length;a++)Ut(t,n[a],e,i,r);else e=Wt(e),t&&t[Ps]?Jt(t,n,e,u(i)?!!i.capture:!!i,r):jt(t,n,e,!1,i,r)}function jt(t,n,e,i,r,o){if(!n)throw Error("Invalid event type");var a=u(r)?!!r.capture:!!r,s=Ht(t);if(s||(t[Cs]=s=new _t(t)),!(e=Dt(s,n,e,i,a,o)).a){if(i=function(){var t=Bt,n=Es?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n}(),e.a=i,i.src=t,i.listener=e,t.addEventListener)Ns||(r=a),void 0===r&&(r=!1),t.addEventListener(n.toString(),i,r);else{if(!t.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");t.attachEvent(Kt(n.toString()),i)}0}}function Mt(t,n,e,i,r){if(o(n))for(var a=0;a<n.length;a++)Mt(t,n[a],e,i,r);else e=Wt(e),t&&t[Ps]?Yt(t,n,e,u(i)?!!i.capture:!!i,r):jt(t,n,e,!0,i,r)}function Vt(t,n,e,i,r){if(o(n))for(var a=0;a<n.length;a++)Vt(t,n[a],e,i,r);else i=u(i)?!!i.capture:!!i,e=Wt(e),t&&t[Ps]?(t=t.u,(n=String(n).toString())in t.a&&(a=t.a[n],-1<(e=xt(a,e,i,r))&&(Ct(a[e]),Array.prototype.splice.call(a,e,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=Ht(t))&&(n=t.a[n.toString()],t=-1,n&&(t=xt(n,e,i,r)),(e=-1<t?n[t]:null)&&Ft(e))}function Ft(t){if("number"!=typeof t&&t&&!t.ma){var n=t.src;if(n&&n[Ps])Lt(n.u,t);else{var e=t.type,i=t.a;n.removeEventListener?n.removeEventListener(e,i,t.capture):n.detachEvent&&n.detachEvent(Kt(e),i),0,(e=Ht(n))?(Lt(e,t),0==e.b&&(e.src=null,n[Cs]=null)):Ct(t)}}}function Kt(t){return t in _s?_s[t]:_s[t]="on"+t}function qt(t,n,e,i){var r=!0;if((t=Ht(t))&&(n=t.a[n.toString()]))for(n=n.concat(),t=0;t<n.length;t++){var o=n[t];o&&o.capture==e&&!o.ma&&(o=Xt(o,i),r=r&&!1!==o)}return r}function Xt(t,n){var e=t.listener,i=t.La||t.src;return t.Ha&&Ft(t),e.call(i,n)}function Bt(t,n){if(t.ma)return!0;if(!Es){if(!n)t:{n=["window","event"];for(var e=Ta,i=0;i<n.length;i++)if(null==(e=e[n[i]])){n=null;break t}n=e}if(i=n,n=new Rt(i,this),e=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=n.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){n.b=i[r];var o=qt(i[r],t,!0,n);e=e&&o}for(r=0;r<i.length;r++)n.b=i[r],o=qt(i[r],t,!1,n),e=e&&o}return e}return Xt(t,new Rt(n,this))}function Ht(t){return(t=t[Cs])instanceof _t?t:null}function Wt(t){return s(t)?t:(t[Ds]||(t[Ds]=function(n){return t.handleEvent(n)}),t[Ds])}function Gt(){Nt.call(this),this.u=new _t(this),this.Ib=this,this.Ra=null}function zt(n,e){var i,r=n.Ra;if(r)for(i=[];r;r=r.Ra)i.push(r);if(n=n.Ib,r=e.type||e,t(e))e=new Pt(e,n);else if(e instanceof Pt)e.target=e.target||n;else{var o=e;D(e=new Pt(r,n),o)}if(o=!0,i)for(var a=i.length-1;0<=a;a--){var s=e.b=i[a];o=$t(s,r,!0,e)&&o}if(s=e.b=n,o=$t(s,r,!0,e)&&o,o=$t(s,r,!1,e)&&o,i)for(a=0;a<i.length;a++)s=e.b=i[a],o=$t(s,r,!1,e)&&o}function Jt(t,n,e,i,r){Dt(t.u,String(n),e,!1,i,r)}function Yt(t,n,e,i,r){Dt(t.u,String(n),e,!0,i,r)}function $t(t,n,e,i){if(!(n=t.u.a[String(n)]))return!0;n=n.concat();for(var r=!0,o=0;o<n.length;++o){var a=n[o];if(a&&!a.ma&&a.capture==e){var s=a.listener,u=a.La||a.src;a.Ha&&Lt(t.u,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Bb}function Zt(t,n,e){if(s(t))e&&(t=f(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=f(t.handleEvent,t)}return 2147483647<Number(n)?-1:Ta.setTimeout(t,n||0)}function Qt(t){var n=null;return new W(function(e,i){-1==(n=Zt(function(){e(void 0)},t))&&i(Error("Failed to schedule timer."))}).s(function(t){throw Ta.clearTimeout(n),t})}function tn(t,n,e,i,r){this.reset(t,n,e,i,r)}function nn(t){this.f=t,this.b=this.c=this.a=null}function en(t,n){this.name=t,this.value=n}function rn(t){return t.c?t.c:t.a?rn(t.a):(y("Root logger has no level set."),null)}function on(t){Ms||(Ms=new nn(""),js[""]=Ms,Ms.c=xs);var n;if(!(n=js[t])){n=new nn(t);var e=t.lastIndexOf("."),i=t.substr(e+1);(e=on(t.substr(0,e))).b||(e.b={}),e.b[i]=n,n.a=e,js[t]=n}return n}function an(t,n){this.b={},this.a=[],this.c=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(t){t instanceof an?(e=t.S(),i=t.P()):(e=P(t),i=O(t));for(var r=0;r<e.length;r++)this.set(e[r],i[r])}}function sn(t){if(t.c!=t.a.length){for(var n=0,e=0;n<t.a.length;){var i=t.a[n];un(t.b,i)&&(t.a[e++]=i),n++}t.a.length=e}if(t.c!=t.a.length){var r={};for(e=n=0;n<t.a.length;)i=t.a[n],un(r,i)||(t.a[e++]=i,r[i]=1),n++;t.a.length=e}}function un(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function cn(t,n){t&&t.log(Us,n,void 0)}function hn(t){var n="";return function(t,n){function e(n){for(;i<t.length;){var e=t.charAt(i++),r=Fs[e];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return n}!function(){if(!Vs){Vs={},Fs={};for(var t=0;65>t;t++)Vs[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Fs[Vs[t]]=t,62<=t&&(Fs["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var r=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===r)break;n(r<<2|o>>4),64!=a&&(n(o<<4&240|a>>2),64!=s&&n(a<<6&192|s))}}(t,function(t){n+=String.fromCharCode(t)}),n}function fn(t,n){this.g=[],this.v=t,this.o=n||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ln(t,n,e){t.a=!0,t.c=e,t.f=!n,mn(t)}function dn(t){if(t.a){if(!t.u)throw new gn;t.u=!1}}function pn(t,n,e,i){t.g.push([n,e,i]),t.a&&mn(t)}function vn(t){return Ma(t.g,function(t){return s(t[1])})}function mn(t){if(t.h&&t.a&&vn(t)){var n=t.h,e=qs[n];e&&(Ta.clearTimeout(e.a),delete qs[n]),t.h=0}t.b&&(t.b.l--,delete t.b),n=t.c;for(var i=e=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],a=r[1];if(r=r[2],o=t.f?a:o)try{var s=o.call(r||t.o,n);void 0!==s&&(t.f=t.f&&(s==n||s instanceof Error),t.c=n=s),(M(n)||"function"==typeof Ta.Promise&&n instanceof Ta.Promise)&&(i=!0,t.i=!0)}catch(i){n=i,t.f=!0,vn(t)||(e=!0)}}t.c=n,i&&(s=f(t.m,t,!0),i=f(t.m,t,!1),n instanceof fn?(pn(n,s,i),n.w=!0):n.then(s,i)),e&&(n=new wn(n),qs[n.a]=n,t.h=n.a)}function gn(){p.call(this)}function bn(){p.call(this)}function wn(t){this.a=Ta.setTimeout(f(this.c,this),0),this.b=t}function yn(t,n){this.b=-1,this.b=Xs,this.f=Ta.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=n,this.l=Ta.Int32Array?new Int32Array(64):Array(64),Ks||(Ks=Ta.Int32Array?new Int32Array(zs):zs),this.reset()}function In(t){for(var n=t.f,e=t.l,i=0,r=0;r<n.length;)e[i++]=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3],r=4*i;for(n=16;64>n;n++){r=0|e[n-15],i=0|e[n-2];var o=(0|e[n-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|e[n-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;e[n]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],n=0;64>n;n++){var l=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&f)+(0|Ks[n])|0)+(0|e[n])|0)|0,o=f,f=h,h=c,c=u+a|0,u=s,s=r,r=i,i=a+l|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function Tn(n,e,i){void 0===i&&(i=e.length);var r=0,o=n.c;if(t(e))for(;r<i;)n.f[o++]=e.charCodeAt(r++),o==n.b&&(In(n),o=0);else{if(!a(e))throw Error("message must be string or array");for(;r<i;){var s=e[r++];if(!("number"==typeof s&&0<=s&&255>=s&&s==(0|s)))throw Error("message must be a byte array");n.f[o++]=s,o==n.b&&(In(n),o=0)}}n.c=o,n.g+=i}function An(){yn.call(this,8,Js)}function kn(n){if(n.P&&"function"==typeof n.P)return n.P();if(t(n))return n.split("");if(a(n)){for(var e=[],i=n.length,r=0;r<i;r++)e.push(n[r]);return e}return O(n)}function En(n){if(n.S&&"function"==typeof n.S)return n.S();if(!n.P||"function"!=typeof n.P){if(a(n)||t(n)){var e=[];n=n.length;for(var i=0;i<n;i++)e.push(i);return e}return P(n)}}function Sn(t,n){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Sn){this.f=void 0!==n?n:t.f,Nn(this,t.c),this.l=t.l,this.b=t.b,On(this,t.i),this.g=t.g,n=t.a;var e=new jn;e.c=n.c,n.a&&(e.a=new an(n.a),e.b=n.b),Pn(this,e),this.h=t.h}else t&&(e=String(t).match(Ys))?(this.f=!!n,Nn(this,e[1]||"",!0),this.l=Ln(e[2]||""),this.b=Ln(e[3]||"",!0),On(this,e[4]),this.g=Ln(e[5]||"",!0),Pn(this,e[6]||"",!0),this.h=Ln(e[7]||"")):(this.f=!!n,this.a=new jn(null,0,this.f))}function Nn(t,n,e){t.c=e?Ln(n,!0):n,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);t.i=n}else t.i=null}function Pn(t,n,e){n instanceof jn?(t.a=n,function(t,n){n&&!t.f&&(Mn(t),t.c=null,t.a.forEach(function(t,n){var e=n.toLowerCase();n!=e&&(Kn(this,n),Xn(this,e,t))},t)),t.f=n}(t.a,t.f)):(e||(n=xn(n,tu)),t.a=new jn(n,0,t.f))}function Rn(t,n,e){t.a.set(n,e)}function Cn(t,n){return t.a.get(n)}function _n(t){return t instanceof Sn?new Sn(t):new Sn(t,void 0)}function Dn(t,n){var e=new Sn(null,void 0);return Nn(e,"https"),t&&(e.b=t),n&&(e.g=n),e}function Ln(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(n,e,i){return t(n)?(n=encodeURI(n).replace(e,Un),i&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Un(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function jn(t,n,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mn(t){t.a||(t.a=new an,t.b=0,t.c&&function(t,n){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var i=t[e].indexOf("="),r=null;if(0<=i){var o=t[e].substring(0,i);r=t[e].substring(i+1)}else o=t[e];n(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,function(n,e){Fn(t,decodeURIComponent(n.replace(/\+/g," ")),e)}))}function Vn(t){var n=En(t);if(void 0===n)throw Error("Keys are undefined");var e=new jn(null,0,void 0);t=kn(t);for(var i=0;i<n.length;i++){var r=n[i],a=t[i];o(a)?Xn(e,r,a):Fn(e,r,a)}return e}function Fn(t,n,e){Mn(t),t.c=null,n=Bn(t,n);var i=t.a.get(n);i||t.a.set(n,i=[]),i.push(e),t.b+=1}function Kn(t,n){Mn(t),n=Bn(t,n),un(t.a.b,n)&&(t.c=null,t.b-=t.a.get(n).length,t=t.a,un(t.b,n)&&(delete t.b[n],t.c--,t.a.length>2*t.c&&sn(t)))}function qn(t,n){return Mn(t),n=Bn(t,n),un(t.a.b,n)}function Xn(t,n,e){Kn(t,n),0<e.length&&(t.c=null,t.a.set(Bn(t,n),E(e)),t.b+=e.length)}function Bn(t,n){return n=String(n),t.f&&(n=n.toLowerCase()),n}function Hn(){}function Wn(t){return t.c||(t.c=t.b())}function Gn(){}function zn(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var n=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<n.length;e++){var i=n[e];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jn(t){Gt.call(this),this.headers=new an,this.w=t||null,this.b=!1,this.v=this.a=null,this.g=this.I=this.i="",this.c=this.G=this.h=this.A=!1,this.f=0,this.m=null,this.l=iu,this.o=this.N=!1}function Yn(n,e,i,r,o){if(n.a)throw Error("[goog.net.XhrIo] Object is active with another request="+n.i+"; newUri="+e);i=i?i.toUpperCase():"GET",n.i=e,n.g="",n.I=i,n.A=!1,n.b=!0,n.a=n.w?n.w.a():eu.a(),n.v=n.w?Wn(n.w):Wn(eu),n.a.onreadystatechange=f(n.Ab,n);try{cn(n.J,oe(n,"Opening Xhr")),n.G=!0,n.a.open(i,String(e),!0),n.G=!1}catch(t){return cn(n.J,oe(n,"Error opening Xhr: "+t.message)),void Zn(n,t)}e=r||"";var s=new an(n.headers);o&&function(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(a(n)||t(n))Ua(n,e,void 0);else for(var i=En(n),r=kn(n),o=r.length,s=0;s<o;s++)e.call(void 0,r[s],i&&i[s],n)}(o,function(t,n){s.set(n,t)}),o=function(n){t:{for(var e=$n,i=n.length,r=t(n)?n.split(""):n,o=0;o<i;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break t}e=-1}return 0>e?null:t(n)?n.charAt(e):n[e]}(s.S()),r=Ta.FormData&&e instanceof Ta.FormData,!I(su,i)||o||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,n){this.a.setRequestHeader(n,t)},n),n.l&&(n.a.responseType=n.l),"withCredentials"in n.a&&n.a.withCredentials!==n.N&&(n.a.withCredentials=n.N);try{ee(n),0<n.f&&(n.o=function(t){return Ba&&U(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(n.a),cn(n.J,oe(n,"Will abort after "+n.f+"ms if incomplete, xhr2 "+n.o)),n.o?(n.a.timeout=n.f,n.a.ontimeout=f(n.Ea,n)):n.m=Zt(n.Ea,n.f,n)),cn(n.J,oe(n,"Sending request")),n.h=!0,n.a.send(e),n.h=!1}catch(t){cn(n.J,oe(n,"Send error: "+t.message)),Zn(n,t)}}function $n(t){return"content-type"==t.toLowerCase()}function Zn(t,n){t.b=!1,t.a&&(t.c=!0,t.a.abort(),t.c=!1),t.g=n,Qn(t),ne(t)}function Qn(t){t.A||(t.A=!0,zt(t,"complete"),zt(t,"error"))}function te(t){if(t.b&&void 0!==Ia)if(t.v[1]&&4==ie(t)&&2==re(t))cn(t.J,oe(t,"Local request error detected and ignored"));else if(t.h&&4==ie(t))Zt(t.Ab,0,t);else if(zt(t,"readystatechange"),4==ie(t)){cn(t.J,oe(t,"Request complete")),t.b=!1;try{var n=re(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var i;if(!(i=e)){var r;if(r=0===n){var o=String(t.i).match(Ys)[1]||null;if(!o&&Ta.self&&Ta.self.location){var a=Ta.self.location.protocol;o=a.substr(0,a.length-1)}r=!au.test(o?o.toLowerCase():"")}i=r}if(i)zt(t,"complete"),zt(t,"success");else{try{var s=2<ie(t)?t.a.statusText:""}catch(n){cn(t.J,"Can not get status: "+n.message),s=""}t.g=s+" ["+re(t)+"]",Qn(t)}}finally{ne(t)}}}function ne(t,n){if(t.a){ee(t);var i=t.a,r=t.v[0]?e:null;t.a=null,t.v=null,n||zt(t,"ready");try{i.onreadystatechange=r}catch(n){(t=t.J)&&t.log(Ls,"Problem encountered resetting onreadystatechange: "+n.message,void 0)}}}function ee(t){t.a&&t.o&&(t.a.ontimeout=null),"number"==typeof t.m&&(Ta.clearTimeout(t.m),t.m=null)}function ie(t){return t.a?t.a.readyState:0}function re(t){try{return 2<ie(t)?t.a.status:-1}catch(t){return-1}}function oe(t,n){return n+" ["+t.I+" "+t.i+" "+re(t)+"]"}function ae(t){var n={},e=n.document||document,i=dt(t),r=document.createElement("SCRIPT"),o={Cb:r,Ea:void 0},a=new fn(se,o),s=null,u=null!=n.timeout?n.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){ue(r,!0);var t=new ce(hu,"Timeout reached for loading script "+i);dn(a),ln(a,!1,t)},u),o.Ea=s),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(ue(r,n.Sc||!1,s),a.A(null))},r.onerror=function(){ue(r,!0,s);var t=new ce(cu,"Error while loading script "+i);dn(a),ln(a,!1,t)},o=n.attributes||{},D(o,{type:"text/javascript",charset:"UTF-8"}),Tt(r,o),r.src=dt(t),function(t){var n;return(n=(t||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:t.documentElement}(e).appendChild(r),a}function se(){if(this&&this.Cb){var t=this.Cb;t&&"SCRIPT"==t.tagName&&ue(t,!0,this.Ea)}}function ue(t,n,i){null!=i&&Ta.clearTimeout(i),t.onload=e,t.onerror=e,t.onreadystatechange=e,n&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function ce(t,n){var e="Jsloader error (code #"+t+")";n&&(e+=": "+n),p.call(this,e),this.code=t}function he(){}function fe(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.a.onload=f(this.Wb,this),this.a.onerror=f(this.xb,this),this.a.onprogress=f(this.Xb,this),this.a.ontimeout=f(this.Yb,this)}function le(t,n){t.readyState=n,t.onreadystatechange&&t.onreadystatechange()}function de(){var t=Ne();return Ba&&!!Za&&11==Za||/Edge\/\d+/.test(t)}function pe(){return Ta.window&&Ta.window.location.href||""}function ve(t,n){n=n||Ta.window;var e="about:blank";t&&(e=mt(gt(t))),n.location.href=e}function me(t,n){var e,i=[];for(e in t)e in n?typeof t[e]!=typeof n[e]?i.push(e):o(t[e])?C(t[e],n[e])||i.push(e):"object"==typeof t[e]&&null!=t[e]&&null!=n[e]?0<me(t[e],n[e]).length&&i.push(e):t[e]!==n[e]&&i.push(e):i.push(e);for(e in n)e in t||i.push(e);return i}function ge(t){return!!((t=(t||Ne()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function be(t){t=t||Ta.window;try{t.close()}catch(t){}}function we(t,n,e){var r=Math.floor(1e9*Math.random()).toString();n=n||500,e=e||600;var o=(window.screen.availHeight-e)/2,a=(window.screen.availWidth-n)/2;n={width:n,height:e,top:0<o?o:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},e=Ne().toLowerCase(),r&&(n.target=r,g(e,"crios/")&&(n.target="_blank")),Ee(Ne())==lu&&(t=t||"http://localhost",n.scrollbars=!0),e=t||"",(r=n)||(r={}),t=window,n=e instanceof vt?e:gt(void 0!==e.href?e.href:String(e)),e=r.target||e.target,o=[];for(s in r)switch(s){case"width":case"height":case"top":case"left":o.push(s+"="+r[s]);break;case"target":case"noreferrer":break;default:o.push(s+"="+(r[s]?1:0))}var s=o.join(",");if((S("iPhone")&&!S("iPod")&&!S("iPad")||S("iPad")||S("iPod"))&&t.navigator&&t.navigator.standalone&&e&&"_self"!=e?(s=t.document.createElement("A"),n instanceof vt||n instanceof vt||(n=n.la?n.ja():String(n),ms.test(n)||(n="about:invalid#zClosurez"),n=bt(n)),s.href=mt(n),s.setAttribute("target",e),r.noreferrer&&s.setAttribute("rel","noreferrer"),(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,t,1),s.dispatchEvent(r),s={}):r.noreferrer?(s=t.open("",e,s),t=mt(n),s&&(Wa&&g(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,ft("b/12014412, meta tag with sanitized URL"),t='<META HTTP-EQUIV="refresh" content="0; url='+m(t)+'">',t=yt(t),s.document.write(function(t){return t instanceof wt&&t.constructor===wt&&t.b===bs?t.a:(y("expected object of type SafeHtml, got '"+t+"' of type "+i(t)),"type_error:SafeHtml")}(t)),s.document.close())):s=t.open(mt(n),e,s),s)try{s.focus()}catch(t){}return s}function ye(){var t=null;return new W(function(n){"complete"==Ta.document.readyState?n():(t=function(){n()},Mt(window,"load",t))}).s(function(n){throw Vt(window,"load",t),n})}function Ie(t){return t=t||Ne(),!("file:"!==_e()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Te(){var t=Ta.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ae(){return ya.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ya.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function ke(){var t=Ae();return"ReactNative"===t||"Node"===t}function Ee(t){var n=t.toLowerCase();return g(n,"opera/")||g(n,"opr/")||g(n,"opios/")?"Opera":g(n,"iemobile")?"IEMobile":g(n,"msie")||g(n,"trident/")?"IE":g(n,"edge/")?"Edge":g(n,"firefox/")?lu:g(n,"silk/")?"Silk":g(n,"blackberry")?"Blackberry":g(n,"webos")?"Webos":!g(n,"safari/")||g(n,"chrome/")||g(n,"crios/")||g(n,"android")?!g(n,"chrome/")&&!g(n,"crios/")||g(n,"edge/")?g(n,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":du:"Safari"}function Se(t,n){n=n||[];var e,i=[],r={};for(e in pu)r[pu[e]]=!0;for(e=0;e<n.length;e++)void 0!==r[n[e]]&&(delete r[n[e]],i.push(n[e]));return i.sort(),(n=i).length||(n=["FirebaseCore-web"]),i=Ae(),r="",(r="Browser"===i?Ee(Ne()):i)+"/JsCore/"+t+"/"+n.join(",")}function Ne(){return Ta.navigator&&Ta.navigator.userAgent||""}function Oe(t,n){t=t.split("."),n=n||Ta;for(var e=0;e<t.length&&"object"==typeof n&&null!=n;e++)n=n[t[e]];return e!=t.length&&(n=void 0),n}function Pe(){try{var t=Ta.localStorage,n=je();if(t)return t.setItem(n,"1"),t.removeItem(n),!de()||!!Ta.indexedDB}catch(t){}return!1}function Re(){return(Ce()||"chrome-extension:"===_e()||Ie())&&!ke()&&Pe()}function Ce(){return"http:"===_e()||"https:"===_e()}function _e(){return Ta.location&&Ta.location.protocol||null}function De(t){return t=t||Ne(),!ge(t)&&Ee(t)!=lu}function Le(t){return void 0===t?null:kt(t)}function xe(t){var n,e={};for(n in t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(e[n]=t[n]);return e}function Ue(t){if(null!==t)return JSON.parse(t)}function je(t){return t||""+Math.floor(1e9*Math.random()).toString()}function Me(t){return t=t||Ne(),"Safari"!=Ee(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ve(){var t=Ta.___jsl;if(t&&t.H)for(var n in t.H)if(t.H[n].r=t.H[n].r||[],t.H[n].L=t.H[n].L||[],t.H[n].r=t.H[n].L.concat(),t.CP)for(var e=0;e<t.CP.length;e++)t.CP[e]=null}function Fe(){var t=Ta.navigator;return!t||"boolean"!=typeof t.onLine||!Ce()&&"chrome-extension:"!==_e()&&void 0===t.connection||t.onLine}function Ke(t,n,e,i){if(t>n)throw Error("Short delay should be less than long delay!");this.c=t,this.b=n,t=e||Ne(),i=i||Ae(),this.a=ge(t)||"ReactNative"===i}function qe(){var t=Ta.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Xe(t){try{var n=new Date(parseInt(t,10));if(!isNaN(n.getTime())&&!/[^0-9]/.test(t))return n.toUTCString()}catch(t){}return null}function Be(t,n,e){vu?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,value:e}):t[n]=e}function He(t,n){if(n)for(var e in n)n.hasOwnProperty(e)&&Be(t,e,n[e])}function We(t){var n={};return He(n,t),n}function Ge(t){var n=t;if("object"==typeof t&&null!=t){n="length"in t?[]:{};for(var e in t)Be(n,e,Ge(t[e]))}return n}function ze(t,n){this.code=Eu+t,this.message=n||Su[t]||""}function Je(t){var n=t&&t.code;return n?new ze(n.substring(Eu.length),t.message):null}function Ye(t){var n=t[Ru];if(void 0===n)throw new ze("missing-continue-uri");if("string"!=typeof n||"string"==typeof n&&!n.length)throw new ze("invalid-continue-uri");this.h=n,this.c=this.a=null,this.g=!1;var e=t[Nu];if(e&&"object"==typeof e){n=e[Du];var i=e[Cu];if(e=e[_u],"string"==typeof n&&n.length){if(this.a=n,void 0!==i&&"boolean"!=typeof i)throw new ze("argument-error",Cu+" property must be a boolean when specified.");if(this.g=!!i,void 0!==e&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new ze("argument-error",_u+" property must be a non empty string when specified.");this.c=e||null}else{if(void 0!==n)throw new ze("argument-error",Du+" property must be a non empty string when specified.");if(void 0!==i||void 0!==e)throw new ze("missing-android-pkg-name")}}else if(void 0!==e)throw new ze("argument-error",Nu+" property must be a non null object when specified.");if(this.b=null,(n=t[Pu])&&"object"==typeof n){if("string"==typeof(n=n[Lu])&&n.length)this.b=n;else if(void 0!==n)throw new ze("argument-error",Lu+" property must be a non empty string when specified.")}else if(void 0!==n)throw new ze("argument-error",Pu+" property must be a non null object when specified.");if(void 0!==(t=t[Ou])&&"boolean"!=typeof t)throw new ze("argument-error",Ou+" property must be a boolean when specified.");if((this.f=!!t)&&!this.b&&!this.a)throw new ze("argument-error",Ou+" property can't be true when no mobile application is provided.")}function $e(t){var n={};n.continueUrl=t.h,n.canHandleCodeInApp=t.f,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.c,n.androidInstallApp=t.g),n.iOSBundleId=t.b;for(var e in n)null===n[e]&&delete n[e];return n}function Ze(t){if(3!=(t=t.split(".")).length)return null;for(var n=(4-(t=t[1]).length%4)%4,e=0;e<n;e++)t+=".";try{var i=JSON.parse(hn(t));if(i.sub&&i.iss&&i.aud&&i.exp)return new function(t){this.b=t.sub,Ea(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null}(i)}catch(t){}return null}function Qe(t){for(var n in ju)if(ju[n].Na==t)return ju[n];return null}function ti(t){var n={};n["facebook.com"]=ii,n["google.com"]=oi,n["github.com"]=ri,n["twitter.com"]=ai;var e=t&&t[Vu];try{if(e)return n[e]?new n[e](t):new ei(t);if(void 0!==t[Mu])return new ni(t)}catch(t){}return null}function ni(t){var n=t[Vu];if(!n&&t[Mu]){var e=Ze(t[Mu]);e&&e.a&&(n=e.a)}if(!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Be(this,"providerId",n),Be(this,"isNewUser",e)}function ei(t){ni.call(this,t),Be(this,"profile",Ge((t=Ue(t.rawUserInfo||"{}"))||{}))}function ii(t){if(ei.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ri(t){if(ei.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Be(this,"username",this.profile&&this.profile.login||null)}function oi(t){if(ei.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ai(t){if(ei.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Be(this,"username",t.screenName||null)}function si(t,n){return t.then(function(t){if(t[Ku]){var e=Ze(t[Ku]);if(!e||n!=e.b)throw new ze("user-mismatch");return t}throw new ze("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Eu+"user-not-found"?new ze("user-mismatch"):t})}function ui(t,n){if(n.idToken||n.accessToken)n.idToken&&Be(this,"idToken",n.idToken),n.accessToken&&Be(this,"accessToken",n.accessToken);else{if(!n.oauthToken||!n.oauthTokenSecret)throw new ze("internal-error","failed to construct a credential");Be(this,"accessToken",n.oauthToken),Be(this,"secret",n.oauthTokenSecret)}Be(this,"providerId",t)}function ci(t){var n={};return t.idToken&&(n.id_token=t.idToken),t.accessToken&&(n.access_token=t.accessToken),t.secret&&(n.oauth_token_secret=t.secret),n.providerId=t.providerId,{postBody:Vn(n).toString(),requestUri:"http://localhost"}}function hi(t,n){this.rc=n||[],He(this,{providerId:t,isOAuthProvider:!0}),this.rb={},this.Wa=(Qe(t)||{}).Ma||null,this.Ua=null}function fi(t){hi.call(this,t,Uu),this.a=[]}function li(){fi.call(this,"facebook.com")}function di(t){if(!t)throw new ze("argument-error","credential failed: expected 1 argument (the OAuth access token).");var n=t;return u(t)&&(n=t.accessToken),(new li).credential(null,n)}function pi(){fi.call(this,"github.com")}function vi(t){if(!t)throw new ze("argument-error","credential failed: expected 1 argument (the OAuth access token).");var n=t;return u(t)&&(n=t.accessToken),(new pi).credential(null,n)}function mi(){fi.call(this,"google.com"),this.sa("profile")}function gi(t,n){var e=t;return u(t)&&(e=t.idToken,n=t.accessToken),(new mi).credential(e,n)}function bi(){hi.call(this,"twitter.com",xu)}function wi(t,n){var e=t;if(u(e)||(e={oauthToken:t,oauthTokenSecret:n}),!e.oauthToken||!e.oauthTokenSecret)throw new ze("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ui("twitter.com",e)}function yi(t,n){this.a=t,this.f=n,Be(this,"providerId","password")}function Ii(){He(this,{providerId:"password",isOAuthProvider:!1})}function Ti(t){if(!(t.Pa&&t.Oa||t.Da&&t.Y))throw new ze("internal-error");this.a=t,Be(this,"providerId","phone")}function Ai(t){return t.a.Da&&t.a.Y?{temporaryProof:t.a.Da,phoneNumber:t.a.Y}:{sessionInfo:t.a.Pa,code:t.a.Oa}}function ki(t){try{this.a=t||ya.auth()}catch(t){throw new ze("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}He(this,{providerId:"phone",isOAuthProvider:!1})}function Ei(t,n){if(!t)throw new ze("missing-verification-id");if(!n)throw new ze("missing-verification-code");return new Ti({Pa:t,Oa:n})}function Si(t){if(t.temporaryProof&&t.phoneNumber)return new Ti({Da:t.temporaryProof,Y:t.phoneNumber});var n=t&&t.providerId;if(!n||"password"===n)return null;var e=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(n){case"google.com":return gi(t,e);case"facebook.com":return di(e);case"github.com":return vi(e);case"twitter.com":return wi(e,i);default:return new fi(n).credential(t,e)}}catch(t){return null}}function Ni(t){if(!t.isOAuthProvider)throw new ze("invalid-oauth-provider")}function Oi(t,n,e,i,r){if(this.b=t,this.c=n||null,this.f=e||null,this.g=i||null,this.a=r||null,!this.f&&!this.a)throw new ze("invalid-auth-event");if(this.f&&this.a)throw new ze("invalid-auth-event");if(this.f&&!this.g)throw new ze("invalid-auth-event")}function Pi(t){return(t=t||{}).type?new Oi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Je(t.error)):null}function Ri(t){var n="unauthorized-domain",e=void 0,i=_n(t);t=i.b,"chrome-extension"==(i=i.c)?e=v("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?e=v("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):n="operation-not-supported-in-this-environment",ze.call(this,n,e)}function Ci(t,n,e){ze.call(this,t,e),(t=n||{}).sb&&Be(this,"email",t.sb),t.Y&&Be(this,"phoneNumber",t.Y),t.credential&&Be(this,"credential",t.credential)}function _i(t){if(t.code){var n=t.code||"";0==n.indexOf(Eu)&&(n=n.substring(Eu.length));var e={credential:Si(t)};if(t.email)e.sb=t.email;else{if(!t.phoneNumber)return new ze(n,t.message||void 0);e.Y=t.phoneNumber}return new Ci(n,e,t.message)}return null}function Di(t){this.f=t}function Li(t,n,e){var i="Node"==Ae();if(!(i=Ta.XMLHttpRequest||i&&ya.INTERNAL.node&&ya.INTERNAL.node.XMLHttpRequest))throw new ze("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=t,t=n||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||qu,this.c=_(t.secureTokenHeaders||Xu),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Bu,this.a=_(t.firebaseHeaders||Hu),e&&(this.a["X-Client-Version"]=e,this.c["X-Client-Version"]=e),this.f=new he,this.o=new Di(i)}function xi(t,n){n?t.a["X-Firebase-Locale"]=n:delete t.a["X-Firebase-Locale"]}function Ui(t,n){n?(t.a["X-Client-Version"]=n,t.c["X-Client-Version"]=n):(delete t.a["X-Client-Version"],delete t.c["X-Client-Version"])}function ji(t,n,e,i,r,o,a){Fe()?(function(){var t=Ne();return!((t=Ee(t)!=du?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Ba&&Za&&!(9<Za))}()?t=f(t.m,t):(Fu||(Fu=new W(function(t,n){!function(t,n){if(((window.gapi||{}).client||{}).request)t();else{Ta[Gu]=function(){((window.gapi||{}).client||{}).request?t():n(Error("CORS_UNSUPPORTED"))};var e=pt(Wu,{onload:Gu});!function(t,n){pn(t,null,n,void 0)}(ae(e),function(){n(Error("CORS_UNSUPPORTED"))})}}(t,n)})),t=f(t.u,t)),t(n,e,i,r,o,a)):e&&e(null)}function Mi(t){if(!uu.test(t.email))throw new ze("invalid-email")}function Vi(t){"email"in t&&Mi(t)}function Fi(t){if(!t[Ku])throw new ze("internal-error")}function Ki(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new ze("internal-error")}else{if(!t.sessionInfo)throw new ze("missing-verification-id");if(!t.code)throw new ze("missing-verification-code")}}function qi(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new ze("internal-error")}function Xi(t){var n=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",n=_i(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",n=_i(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",n=_i(t)):t.errorMessage&&(n=Ji(t.errorMessage)),n)throw n;if(!t[Ku])throw new ze("internal-error")}function Bi(t,n){return n.returnIdpCredential=!0,zi(t,lc,n)}function Hi(t,n){return n.returnIdpCredential=!0,zi(t,pc,n)}function Wi(t,n){return n.returnIdpCredential=!0,n.autoCreate=!1,zi(t,dc,n)}function Gi(t){if(!t.oobCode)throw new ze("invalid-action-code")}function zi(t,n,e){if(!function(t,n){if(!n||!n.length)return!0;if(!t)return!1;for(var e=0;e<n.length;e++){var i=t[n[e]];if(void 0===i||null===i||""===i)return!1}return!0}(e,n.ea))return Y(new ze("internal-error"));var i,r=n.zb||"POST";return J(e).then(n.D).then(function(){return n.T&&(e.returnSecureToken=!0),function(t,n,e,i,r,o){var a=_n(t.g+n);Rn(a,"key",t.b),o&&Rn(a,"cb",Ea().toString());var s="GET"==e;if(s)for(var u in i)i.hasOwnProperty(u)&&Rn(a,u,i[u]);return new W(function(n,o){ji(t,a.toString(),function(t){t?t.error?o(Yi(t,r||{})):n(t):o(new ze("network-request-failed"))},e,s?void 0:kt(xe(i)),t.a,t.h.get())})}(t,n.endpoint,r,e,n.Pb,n.nb||!1)}).then(function(t){return i=t}).then(n.O).then(function(){if(!n.ga)return i;if(!(n.ga in i))throw new ze("internal-error");return i[n.ga]})}function Ji(t){return Yi({error:{errors:[{message:t}],code:400,message:t}})}function Yi(t,n){var e=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(e=i[e]?new ze(i[e]):null)return e;e=t.error&&t.error.message||"",D(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},n||{}),n=(n=e.match(/^[^\s]+\s*:\s*(.*)$/))&&1<n.length?n[1]:void 0;for(var r in i)if(0===e.indexOf(r))return new ze(i[r],n);return!n&&t&&(n=Le(t)),new ze("internal-error",n)}function $i(t){for(var n in yc)if(yc[n].id===t)return t=yc[n],{firebaseEndpoint:t.Va,secureTokenEndpoint:t.ab};return null}function Zi(t){this.b=t,this.a=null,this.Ya=function(t){return(kc||(kc=new W(function(t,n){if(Fe()){var e=function(){Ve(),Oe("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ve(),n(Error("Network Error"))},timeout:Tc.get()})};if(Oe("gapi.iframes.Iframe"))t();else if(Oe("gapi.load"))e();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();Ta[i]=function(){Oe("gapi.load")?e():n(Error("Network Error"))},J(ae(i=pt(Ic,{onload:i}))).s(function(){n(Error("Network Error"))})}}else n(Error("Network Error"))}).s(function(t){throw kc=null,t}))).then(function(){return new W(function(n,e){Oe("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Oe("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function r(){clearTimeout(o),n()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){e(Error("Network Error"))},Ac.get());i.ping(r).then(r,function(){e(Error("Network Error"))})})})})}(this)}function Qi(t,n,e){this.i=t,this.g=n,this.h=e,this.f=null,this.a=Dn(this.i,"/__/auth/iframe"),Rn(this.a,"apiKey",this.g),Rn(this.a,"appName",this.h),this.b=null,this.c=[]}function tr(t,n,e,i,r){this.m=t,this.u=n,this.c=e,this.l=i,this.i=this.g=this.h=null,this.a=r,this.f=null}function nr(t){try{return ya.app(t).auth().Ka()}catch(t){return[]}}function er(t,n,e,i,r){this.u=t,this.f=n,this.b=e,this.c=i||null,this.h=r||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function ir(t){var n=pe();return function(t){return zi(t,oc,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var e=_n(n),i=e.c;e=e.b;for(var r=0;r<t.length;r++){var o=t[r],a=e,s=i;if(0==o.indexOf("chrome-extension://")?a=_n(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:fu.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ri(pe())})}function rr(t){return t.l?t.l:(t.l=ye().then(function(){if(!t.o){var n=t.c,e=t.h,i=nr(t.b),r=new Qi(t.u,t.f,t.b);r.f=n,r.b=e,r.c=E(i||[]),t.o=r.toString()}t.i=new Zi(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,n){t.Ya.then(function(){t.a.register("authEvent",n,Oe("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(n){var e={};if(n&&n.authEvent){var i=!1;for(n=Pi(n.authEvent),e=0;e<t.g.length;e++)i=t.g[e](n)||i;return e={},e.status=i?"ACK":"ERROR",J(e)}return e.status="ERROR",J(e)})}(t)}),t.l)}function or(t){return t.m||(t.v=t.c?Se(t.c,nr(t.b)):null,t.m=new Li(t.f,$i(t.h),t.v)),t.m}function ar(t,n,e,i,r,o,a,s,u,c){return t=new tr(t,n,e,i,r),t.h=o,t.g=a,t.i=s,t.b=_(u||null),t.f=c,t.toString()}function sr(t){var n={type:"webStorageSupport"};return rr(t).then(function(){return function(t,n){return t.Ya.then(function(){return new W(function(e){t.a.send(n.type,n,e,Oe("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,n)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})}function ur(t){if(this.a=t||ya.INTERNAL.reactNative&&ya.INTERNAL.reactNative.AsyncStorage,!this.a)throw new ze("internal-error","The React Native compatibility library was not found.")}function cr(){this.a={}}function hr(t,n,e,i,r,o){try{var a=!!Ta.indexedDB}catch(t){a=!1}if(!a)throw new ze("web-storage-unsupported");this.u=t,this.h=n,this.g=e,this.l=i,this.m=r,this.f={},this.c=[],this.a=0,this.o=o||Ta.indexedDB}function fr(t){return t.i||(t.i=function(t){return new W(function(n,e){var i=t.o.open(t.u,t.m);i.onerror=function(t){e(Error(t.target.errorCode))},i.onupgradeneeded=function(n){n=n.target.result;try{n.createObjectStore(t.h,{keyPath:t.g})}catch(t){e(t)}},i.onsuccess=function(t){n(t.target.result)}})}(t)),t.i}function lr(t,n){return n.objectStore(t.h)}function dr(t,n,e){return n.transaction([t.h],e?"readwrite":"readonly")}function pr(t){return new W(function(n,e){t.onsuccess=function(t){t&&t.target?n(t.target.result):n()},t.onerror=function(t){e(Error(t.target.errorCode))}})}function vr(){if(!function(){var t="Node"==Ae();if(!(t=mr()||t&&ya.INTERNAL.node&&ya.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ae())throw new ze("internal-error","The LocalStorage compatibility library was not found.");throw new ze("web-storage-unsupported")}this.a=mr()||ya.INTERNAL.node.localStorage}function mr(){try{var t=Ta.localStorage,n=je();return t&&(t.setItem(n,"1"),t.removeItem(n)),t}catch(t){return null}}function gr(){}function br(){if(!function(){var t="Node"==Ae();if(!(t=wr()||t&&ya.INTERNAL.node&&ya.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ae())throw new ze("internal-error","The SessionStorage compatibility library was not found.");throw new ze("web-storage-unsupported")}this.a=wr()||ya.INTERNAL.node.sessionStorage}function wr(){try{var t=Ta.sessionStorage,n=je();return t&&(t.setItem(n,"1"),t.removeItem(n)),t}catch(t){return null}}function yr(t,n,e,i,r){this.i=t,this.g=n,this.A=e,this.u=i,this.v=r,this.a={},Sc||(Sc=new function(){var t={};t.Browser=Oc,t.Node=Pc,t.ReactNative=Rc,this.a=t[Ae()]}),t=Sc;try{if(de()){Ec||(Ec=new hr("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var o=Ec}else o=new t.a.C;this.l=o}catch(t){this.l=new cr,this.u=!0}try{this.o=new t.a.jb}catch(t){this.o=new cr}this.w=new cr,this.h=f(this.m,this),this.b={}}function Ir(){return Nc||(Nc=new yr("firebase",":",!(Me(Ne())||!Te()),De(),Pe())),Nc}function Tr(t,n){switch(n){case"session":return t.o;case"none":return t.w;default:return t.l}}function Ar(t,n,e){return t.i+t.g+n.name+(e?t.g+e:"")}function kr(t,n,e){return e=Ar(t,n,e),"local"==n.C&&(t.b[e]=null),Tr(t,n.C).X(e)}function Er(t,n,e,i){n=Ar(t,n,e),t.v&&(t.b[n]=Ta.localStorage.getItem(n)),R(t.a)&&(Tr(t,"local").ia(t.h),t.u||de()||!t.v||function(t){Nr(t),t.f=setInterval(function(){for(var n in t.a){var e=Ta.localStorage.getItem(n),i=t.b[n];e!=i&&(t.b[n]=e,e=new Rt({type:"storage",key:n,target:window,oldValue:i,newValue:e,a:!0}),t.m(e))}},1e3)}(t)),t.a[n]||(t.a[n]=[]),t.a[n].push(i)}function Sr(t,n,e){n=Ar(t,Mo("local"),n),t.a[n]&&(A(t.a[n],function(t){return t==e}),0==t.a[n].length&&delete t.a[n]),R(t.a)&&function(t){Tr(t,"local").da(t.h),Nr(t)}(t)}function Nr(t){t.f&&(clearInterval(t.f),t.f=null)}function Or(t,n,e,i,r,o,a){this.u=t,this.i=n,this.l=e,this.m=i||null,this.o=a||null,this.h=n+":"+e,this.A=new function(){this.a=Ir()},this.g=new function(t){this.a=t,this.b=Ir()}(this.h),this.f=null,this.b=[],this.v=r||500,this.w=o||2e3,this.a=this.c=null}function Pr(t){return new ze("invalid-cordova-configuration",t)}function Rr(t){var n=new An;Tn(n,t),t=[];var e=8*n.g;56>n.c?Tn(n,Gs,56-n.c):Tn(n,Gs,n.b-(n.c-56));for(var i=63;56<=i;i--)n.f[i]=255&e,e/=256;for(In(n),i=e=0;i<n.i;i++)for(var r=24;0<=r;r-=8)t[e++]=n.a[i]>>r&255;return function(t){return ja(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function Cr(t,n,e,i){var r=function(){for(var t=20,n=[];0<t;)n.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return n.join("")}(),o=new Oi(n,i,null,r,new ze("no-auth-event")),a=Oe("BuildInfo.packageName",Ta);if("string"!=typeof a)throw new ze("invalid-cordova-configuration");var s=Oe("BuildInfo.displayName",Ta),u={};if(Ne().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!Ne().toLowerCase().match(/android/))return Y(new ze("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),r=Rr(r),u.sessionId=r;var c=ar(t.u,t.i,t.l,n,e,null,i,t.m,u,t.o);return t.ba().then(function(){var n=t.h;return t.A.a.set(_c,o.B(),n)}).then(function(){var n=Oe("cordova.plugins.browsertab.isAvailable",Ta);if("function"!=typeof n)throw new ze("invalid-cordova-configuration");var e=null;n(function(n){if(n){if("function"!=typeof(e=Oe("cordova.plugins.browsertab.openUrl",Ta)))throw new ze("invalid-cordova-configuration");e(c)}else{if("function"!=typeof(e=Oe("cordova.InAppBrowser.open",Ta)))throw new ze("invalid-cordova-configuration");n=!(!(n=Ne()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!n.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=e(c,n?"_blank":"_system","location=yes")}})})}function _r(t,n){for(var e=0;e<t.b.length;e++)try{t.b[e](n)}catch(t){}}function Dr(t){return t.f||(t.f=t.ba().then(function(){return new W(function(n){function e(i){return n(i),t.Ja(e),!1}t.ua(e),function(t){function n(n){r=!0,o&&o.cancel(),Lr(t).then(function(e){var r=i;if(e&&n&&n.url){r=null;var o=n.url,a=_n(o),s=Cn(a,"link"),u=Cn(_n(s),"link");a=Cn(a,"deep_link_id"),-1!=(o=Cn(_n(a),"link")||a||u||s||o).indexOf("/__/auth/callback")&&(r=_n(o),r=Ue(Cn(r,"firebaseError")||null),r=(r="object"==typeof r?Je(r):null)?new Oi(e.b,e.c,null,null,r):new Oi(e.b,e.c,o,e.g)),r=r||i}_r(t,r)})}var e=Oe("universalLinks.subscribe",Ta);if("function"!=typeof e)throw new ze("invalid-cordova-configuration");var i=new Oi("unknown",null,null,null,new ze("no-auth-event")),r=!1,o=Qt(t.v).then(function(){return Lr(t).then(function(){r||_r(t,i)})}),a=Ta.handleOpenURL;Ta.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Oe("BuildInfo.packageName",Ta).toLowerCase()+"://")&&n({url:t}),"function"==typeof a)try{a(t)}catch(t){}},e(null,n)}(t)})})),t.f}function Lr(t){var n=null;return function(t){return t.b.get(_c,t.a).then(function(t){return Pi(t)})}(t.g).then(function(e){return n=e,e=t.g,kr(e.b,_c,e.a)}).then(function(){return n})}function xr(t){return kr(t.b,Dc,t.a)}function Ur(t,n,e){this.v=t,this.l=n,this.u=e,this.h=[],this.f=!1,this.i=f(this.m,this),this.c=new Xr,this.o=new Gr,this.g=new function(t){this.a=t,this.b=Ir()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.o,this.b.linkViaPopup=this.o,this.b.reauthViaPopup=this.o,this.a=jr(this.v,this.l,this.u,Ju)}function jr(t,n,e,i){var r=ya.SDK_VERSION||null;return Ie()?new Or(t,n,e,r,void 0,void 0,i):new er(t,n,e,r,i)}function Mr(t){t.f||(t.f=!0,t.a.ua(t.i));var n=t.a;return t.a.ba().s(function(e){throw t.a==n&&t.reset(),e})}function Vr(t){t.a.Db()&&Mr(t).s(function(n){var e=new Oi("unknown",null,null,null,new ze("operation-not-supported-in-this-environment"));Kr(n)&&t.m(e)}),t.a.yb()||Br(t.c)}function Fr(t,n,e,i,r,o){return t.a.vb(n,e,i,function(){t.f||(t.f=!0,t.a.ua(t.i))},function(){t.reset()},r,o)}function Kr(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qr(t,n,e){var i=n+":"+e;return Uc[i]||(Uc[i]=new Ur(t,n,e)),Uc[i]}function Xr(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function Br(t){t.g||(t.g=!0,Wr(t,!1,null,null))}function Hr(t,n){if(t.b=function(){return J(n)},t.f.length)for(var e=0;e<t.f.length;e++)t.f[e](n)}function Wr(t,n,e,i){n?i?function(t,n){if(t.b=function(){return Y(n)},t.c.length)for(var e=0;e<t.c.length;e++)t.c[e](n)}(t,i):Hr(t,e):Hr(t,{user:null}),t.f=[],t.c=[]}function Gr(){}function zr(t,n){this.a=n,Be(this,"verificationId",t)}function Jr(t,n,e,i){return new ki(t).Qa(n,e).then(function(t){return new zr(t,i)})}function Yr(t,n,e,i,r,o){if(this.h=t,this.i=n,this.g=e,this.c=i,this.f=r,this.l=!!o,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function $r(t,n){Zr(t),t.b=Qt(function(t,n){return n?(t.a=t.c,t.g()):(n=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),n)}(t,n)).then(function(){return t.l?J():function(){var t=Ta.document,n=null;return qe()||!t?J():new W(function(e){n=function(){qe()&&(t.removeEventListener("visibilitychange",n,!1),e())},t.addEventListener("visibilitychange",n,!1)}).s(function(e){throw t.removeEventListener("visibilitychange",n,!1),e})}()}).then(function(){return t.h()}).then(function(){$r(t,!0)}).s(function(n){t.i(n)&&$r(t,!1)})}function Zr(t){t.b&&(t.b.cancel(),t.b=null)}function Qr(t){this.f=t,this.b=this.a=null,this.c=0}function to(t,n){var e=n[Ku],i=n.refreshToken;n=no(n.expiresIn),t.b=e,t.c=n,t.a=i}function no(t){return Ea()+1e3*parseInt(t,10)}function eo(t,n){return function(t,n){return new W(function(e,i){"refresh_token"==n.grant_type&&n.refresh_token||"authorization_code"==n.grant_type&&n.code?ji(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?i(Yi(t)):t.access_token&&t.refresh_token?e(t):i(new ze("internal-error")):i(new ze("network-request-failed"))},"POST",Vn(n).toString(),t.c,t.l.get()):i(new ze("internal-error"))})}(t.f,n).then(function(n){return t.b=n.access_token,t.c=no(n.expires_in),t.a=n.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(n){throw"auth/user-token-expired"==n.code&&(t.a=null),n})}function io(t,n){this.a=t||null,this.b=n||null,He(this,{lastSignInTime:Xe(n||null),creationTime:Xe(t||null)})}function ro(t,n){Pt.call(this,t);for(var e in n)this[e]=n[e]}function oo(t,n,e){this.A=[],this.G=t.apiKey,this.o=t.appName,this.w=t.authDomain||null,t=ya.SDK_VERSION?Se(ya.SDK_VERSION):null,this.c=new Li(this.G,$i(Ju),t),this.h=new Qr(this.c),lo(this,n[Ku]),to(this.h,n),Be(this,"refreshToken",this.h.a),mo(this,e||{}),Gt.call(this),this.I=!1,this.w&&Re()&&(this.a=qr(this.w,this.G,this.o)),this.N=[],this.i=null,this.l=function(t){return new Yr(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var n=t.h.c-Ea()-3e5;return 0<n?n:0},3e4,96e4,!1)}(this),this.U=f(this.Ga,this);var i=this;this.ha=null,this.ra=function(t){i.na(t.h)},this.W=null,this.R=[],this.qa=function(t){so(i,t.f)},this.V=null}function ao(t,n){t.W&&Vt(t.W,"languageCodeChanged",t.ra),(t.W=n)&&Ut(n,"languageCodeChanged",t.ra)}function so(t,n){t.R=n,Ui(t.c,ya.SDK_VERSION?Se(ya.SDK_VERSION,t.R):null)}function uo(t,n){t.V&&Vt(t.V,"frameworkChanged",t.qa),(t.V=n)&&Ut(n,"frameworkChanged",t.qa)}function co(t){try{return ya.app(t.o).auth()}catch(n){throw new ze("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function ho(t){t.m||t.l.b||(t.l.start(),Vt(t,"tokenChanged",t.U),Ut(t,"tokenChanged",t.U))}function fo(t){Vt(t,"tokenChanged",t.U),Zr(t.l)}function lo(t,n){t.pa=n,Be(t,"_lat",n)}function po(t){for(var n=[],e=0;e<t.N.length;e++)n.push(t.N[e](t));return function(t){return new W(function(n){var e=t.length,i=[];if(e)for(var r,o=function(t,r,o){e--,i[t]=r?{Ub:!0,value:o}:{Ub:!1,reason:o},0==e&&n(i)},a=0;a<t.length;a++)r=t[a],$(r,l(o,a,!0),l(o,a,!1));else n(i)})}(n).then(function(){return t})}function vo(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function mo(t,n){He(t,{uid:n.uid,displayName:n.displayName||null,photoURL:n.photoURL||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,isAnonymous:n.isAnonymous||!1,metadata:new io(n.createdAt,n.lastLoginAt),providerData:[]})}function go(){}function bo(t){return J().then(function(){if(t.m)throw new ze("app-deleted")})}function wo(t){return ja(t.providerData,function(t){return t.providerId})}function yo(t,n){n&&(Io(t,n.providerId),t.providerData.push(n))}function Io(t,n){A(t.providerData,function(t){return t.providerId==n})}function To(t,n,e){("uid"!=n||e)&&t.hasOwnProperty(n)&&Be(t,n,e)}function Ao(t,n){t!=n&&(He(t,{uid:n.uid,displayName:n.displayName,photoURL:n.photoURL,email:n.email,emailVerified:n.emailVerified,phoneNumber:n.phoneNumber,isAnonymous:n.isAnonymous,providerData:[]}),n.metadata?Be(t,"metadata",function(t){return new io(t.a,t.b)}(n.metadata)):Be(t,"metadata",new io),Ua(n.providerData,function(n){yo(t,n)}),t.h=n.h,Be(t,"refreshToken",t.h.a))}function ko(t){return t.F().then(function(n){var e=t.isAnonymous;return function(t,n){return zi(t.c,ec,{idToken:n}).then(f(t.kc,t))}(t,n).then(function(){return e||To(t,"isAnonymous",!1),n})})}function Eo(t,n){n[Ku]&&t.pa!=n[Ku]&&(to(t.h,n),zt(t,new ro("tokenChanged")),lo(t,n[Ku]),To(t,"refreshToken",t.h.a))}function So(t){return(t=t.providerUserInfo)&&t.length?ja(t,function(t){return new function(t,n,e,i,r,o){He(this,{uid:t,displayName:i||null,photoURL:r||null,email:e||null,phoneNumber:o||null,providerId:n})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}function No(t,n){return ko(t).then(function(){if(I(wo(t),n))return po(t).then(function(){throw new ze("provider-already-linked")})})}function Oo(t,n,e){var i=Si(n);return n=ti(n),We({user:t,credential:i,additionalUserInfo:n,operationType:e})}function Po(t,n){return Eo(t,n),t.reload().then(function(){return t})}function Ro(t,n,e,i,r){if(!Re())return Y(new ze("operation-not-supported-in-this-environment"));if(t.i&&!r)return Y(t.i);var o=Qe(e.providerId),a=je(t.uid+":::"),s=null;(!De()||Te())&&t.w&&e.isOAuthProvider&&(s=ar(t.w,t.G,t.o,n,e,null,a,ya.SDK_VERSION||null));var u=we(s,o&&o.za,o&&o.ya);return i=i().then(function(){if(_o(t),!r)return t.F().then(function(){})}).then(function(){return Fr(t.a,u,n,e,a,!!s)}).then(function(){return new W(function(e,i){t.fa(n,null,new ze("cancelled-popup-request"),t.g||null),t.f=e,t.v=i,t.g=a,t.b=t.a.Ca(t,n,u,a)})}).then(function(t){return u&&be(u),t?We(t):null}).s(function(t){throw u&&be(u),t}),Do(t,i,r)}function Co(t,n,e,i,r){if(!Re())return Y(new ze("operation-not-supported-in-this-environment"));if(t.i&&!r)return Y(t.i);var o=null,a=je(t.uid+":::");return i=i().then(function(){if(_o(t),!r)return t.F().then(function(){})}).then(function(){return t.Z=a,po(t)}).then(function(n){return t.ca&&(n=t.ca,n=n.b.set(jc,t.B(),n.a)),n}).then(function(){return t.a.Aa(n,e,a)}).s(function(n){if(o=n,t.ca)return xo(t.ca);throw o}).then(function(){if(o)throw o}),Do(t,i,r)}function _o(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new ze("internal-error");throw new ze("auth-domain-config-required")}}function Do(t,n,e){var i=function(t,n,e){return t.i&&!e?(n.cancel(),Y(t.i)):n.s(function(n){throw!n||"auth/user-disabled"!=n.code&&"auth/user-token-expired"!=n.code||(t.i||zt(t,new ro("userInvalidated")),t.i=n),n})}(t,n,e);return t.A.push(i),Z(i,function(){T(t.A,i)}),i}function Lo(t){if(!t.apiKey)return null;var n={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},e={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;e[Ku]=t.stsTokenManager.accessToken,e.refreshToken=t.stsTokenManager.refreshToken||null,e.expiresIn=(t.stsTokenManager.expirationTime-Ea())/1e3;var i=new oo(n,e,t);return t.providerData&&Ua(t.providerData,function(t){t&&yo(i,We(t))}),t.redirectEventId&&(i.Z=t.redirectEventId),i}function xo(t){return kr(t.b,jc,t.a)}function Uo(t,n){this.a=t,this.b=n||Ir(),this.c=null,this.f=function(t){var n=Mo("local"),e=Mo("session"),i=Mo("none");return t.b.get(e,t.a).then(function(r){return r?e:t.b.get(i,t.a).then(function(e){return e?i:t.b.get(n,t.a).then(function(e){return e?n:t.b.get(Mc,t.a).then(function(t){return t?Mo(t):n})})})}).then(function(n){return t.c=n,jo(t,n.C)}).s(function(){t.c||(t.c=n)})}(this),Er(this.b,Mo("local"),this.a,f(this.g,this))}function jo(t,n){var e,i=[];for(e in Cc)Cc[e]!==n&&i.push(kr(t.b,Mo(Cc[e]),t.a));return i.push(kr(t.b,Mc,t.a)),function(t){return new W(function(n,e){var i=t.length,r=[];if(i)for(var o,a=function(t,e){i--,r[t]=e,0==i&&n(r)},s=function(t){e(t)},u=0;u<t.length;u++)o=t[u],$(o,l(a,u),s);else n(r)})}(i)}function Mo(t){return{name:"authUser",C:t}}function Vo(t,n){return qo(t,function(){return t.b.set(t.c,n.B(),t.a)})}function Fo(t){return qo(t,function(){return kr(t.b,t.c,t.a)})}function Ko(t,n){return qo(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&n&&(t.authDomain=n),Lo(t||{})})})}function qo(t,n){return t.f=t.f.then(n,n),t.f}function Xo(t){if(this.l=!1,Be(this,"app",t),!Yo(this).options||!Yo(this).options.apiKey)throw new ze("invalid-api-key");t=ya.SDK_VERSION?Se(ya.SDK_VERSION):null,this.c=new Li(Yo(this).options&&Yo(this).options.apiKey,$i(Ju),t),this.N=[],this.m=[],this.I=[],this.Kb=ya.INTERNAL.createSubscribe(f(this.ac,this)),this.R=void 0,this.Lb=ya.INTERNAL.createSubscribe(f(this.bc,this)),zo(this,null),this.h=new Uo(Yo(this).options.apiKey+":"+Yo(this).name),this.G=new function(t){this.a=t,this.b=Ir()}(Yo(this).options.apiKey+":"+Yo(this).name),this.U=ta(this,function(t){var n=Yo(t).options.authDomain,e=function(t){var n=function(t,n){return t.b.get(jc,t.a).then(function(t){return t&&n&&(t.authDomain=n),Lo(t||{})})}(t.G,Yo(t).options.authDomain).then(function(n){return(t.w=n)&&(n.ca=t.G),xo(t.G)});return ta(t,n)}(t).then(function(){return Ko(t.h,n)}).then(function(n){return n?(n.ca=t.G,t.w&&(t.w.Z||null)==(n.Z||null)?n:n.reload().then(function(){return Vo(t.h,n).then(function(){return n})}).s(function(e){return"auth/network-request-failed"==e.code?n:Fo(t.h)})):null}).then(function(n){zo(t,n||null)});return ta(t,e)}(this)),this.i=ta(this,function(t){return t.U.then(function(){return t.aa()}).s(function(){}).then(function(){if(!t.l)return t.ha()}).s(function(){}).then(function(){if(!t.l){t.W=!0;var n=t.h;Er(n.b,Mo("local"),n.a,t.ha)}})}(this)),this.W=!1,this.ha=f(this.yc,this),this.Ga=f(this.ka,this),this.pa=f(this.Tb,this),this.qa=f(this.Zb,this),this.ra=f(this.$b,this),function(t){var n=Yo(t).options.authDomain,e=Yo(t).options.apiKey;n&&Re()&&(t.Jb=t.U.then(function(){if(!t.l){if(t.a=qr(n,e,Yo(t).name),t.a.subscribe(t),$o(t)&&vo($o(t)),t.w){vo(t.w);var i=t.w;i.na(t.$()),ao(i,t),so(i=t.w,t.A),uo(i,t),t.w=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=f(this.delete,this),this.INTERNAL.logFramework=f(this.gc,this),this.o=0,Gt.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.$()},set:function(t){this.na(t)},enumerable:!1}),t.V=null}(this),this.A=[]}function Bo(t){Pt.call(this,"languageCodeChanged"),this.h=t}function Ho(t){Pt.call(this,"frameworkChanged"),this.f=t}function Wo(t){return t.Jb||Y(new ze("auth-domain-config-required"))}function Go(t,n){var e={};return e.apiKey=Yo(t).options.apiKey,e.authDomain=Yo(t).options.authDomain,e.appName=Yo(t).name,t.U.then(function(){return function(t,n,e,i){var r=new oo(t,n);return e&&(r.ca=e),i&&so(r,i),r.reload().then(function(){return r})}(e,n,t.G,t.Ka())}).then(function(n){return $o(t)&&n.uid==$o(t).uid?(Ao($o(t),n),t.ka(n)):(zo(t,n),vo(n),t.ka(n))}).then(function(){Qo(t)})}function zo(t,n){$o(t)&&(function(t,n){A(t.N,function(t){return t==n})}($o(t),t.Ga),Vt($o(t),"tokenChanged",t.pa),Vt($o(t),"userDeleted",t.qa),Vt($o(t),"userInvalidated",t.ra),fo($o(t))),n&&(n.N.push(t.Ga),Ut(n,"tokenChanged",t.pa),Ut(n,"userDeleted",t.qa),Ut(n,"userInvalidated",t.ra),0<t.o&&ho(n)),Be(t,"currentUser",n),n&&(n.na(t.$()),ao(n,t),so(n,t.A),uo(n,t))}function Jo(t,n){var e=null,i=null;return ta(t,n.then(function(n){return e=Si(n),i=ti(n),Go(t,n)}).then(function(){return We({user:$o(t),credential:e,additionalUserInfo:i,operationType:"signIn"})}))}function Yo(t){return t.app}function $o(t){return t.currentUser}function Zo(t){return $o(t)&&$o(t)._lat||null}function Qo(t){if(t.W){for(var n=0;n<t.m.length;n++)t.m[n]&&t.m[n](Zo(t));if(t.R!==t.getUid()&&t.I.length)for(t.R=t.getUid(),n=0;n<t.I.length;n++)t.I[n]&&t.I[n](Zo(t))}}function ta(t,n){return t.N.push(n),Z(n,function(){T(t.N,n)}),n}function na(t,n,e,i){t:{e=Array.prototype.slice.call(e);for(var r=0,o=!1,a=0;a<n.length;a++)if(n[a].optional)o=!0;else{if(o)throw new ze("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=n.length,e.length<r||o<e.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+e.length+".";else{for(r=0;r<e.length;r++)if(o=n[r].optional&&void 0===e[r],!n[r].M(e[r])&&!o){if(n=n[r],0>r||r>=Vc.length)throw new ze("internal-error","Argument validator received an unsupported number of arguments.");e=Vc[r],i=(i?"":e+" argument ")+(n.name?'"'+n.name+'" ':"")+"must be "+n.K+".";break t}i=null}}if(i)throw new ze("argument-error",t+" failed: "+i)}function ea(n,e){return{name:n||"",K:"a valid string",optional:!!e,M:t}}function ia(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:n}}function ra(t,n){return{name:t||"",K:"a valid object",optional:!!n,M:u}}function oa(t,n){return{name:t||"",K:"a function",optional:!!n,M:s}}function aa(t,n){return{name:t||"",K:"null",optional:!!n,M:r}}function sa(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(n){if(!n)return!1;var e=!t||n.providerId===t;return!(!n.wa||!e)}}}function ua(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(n){return!!(n&&t(n.type)&&s(n.verify))}}}function ca(t,n,e,i){return{name:e||"",K:t.K+" or "+n.K,optional:!!i,M:function(e){return t.M(e)||n.M(e)}}}function ha(t,n,e,i,r,o){if(Be(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=n,this.a=e||{theme:"light",type:"image"},this.g=[],this.a[qc])throw new ze("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Xc],!It(n)||!this.h&&It(n).hasChildNodes())throw new ze("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Li(t,o||null,r||null),this.o=i||function(){return null};var a=this;this.i=[];var s=this.a[Fc];this.a[Fc]=function(t){if(fa(a,t),"function"==typeof s)s(t);else if("string"==typeof s){var n=Oe(s,Ta);"function"==typeof n&&n(t)}};var u=this.a[Kc];this.a[Kc]=function(){if(fa(a,null),"function"==typeof u)u();else if("string"==typeof u){var t=Oe(u,Ta);"function"==typeof t&&t()}}}function fa(t,n){for(var e=0;e<t.i.length;e++)try{t.i[e](n)}catch(t){}}function la(t,n){return t.g.push(n),Z(n,function(){T(t.g,n)}),n}function da(t){if(t.m)throw new ze("internal-error","RecaptchaVerifier instance has been destroyed.")}function pa(){return Hc||(Hc=new function(){this.b=Ta.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),Hc}function va(t,n,e){try{this.f=e||ya.app()}catch(t){throw new ze("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new ze("invalid-api-key");e=this.f.options.apiKey;var i=this,r=null;try{r=this.f.auth().Ka()}catch(t){}r=ya.SDK_VERSION?Se(ya.SDK_VERSION,r):null,ha.call(this,e,t,n,function(){try{var t=i.f.auth().$()}catch(n){t=null}return t},r,$i(Ju))}function ma(t,n){for(var e in n){var i=n[e].name;t[i]=ba(i,t[e],n[e].j)}}function ga(t,n,e,i){t[n]=ba(n,e,i)}function ba(t,n,e){function i(){var t=Array.prototype.slice.call(arguments);return na(o,e,t),n.apply(this,t)}if(!e)return n;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in n)i[r]=n[r];for(r in n.prototype)i.prototype[r]=n.prototype[r];return i}var wa,ya=require("@firebase/app").default,Ia=Ia||{},Ta=this,Aa="closure_uid_"+(1e9*Math.random()>>>0),ka=0,Ea=Date.now||function(){return+new Date};d(p,Error),p.prototype.name="CustomError";var Sa=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Na=/&/g,Oa=/</g,Pa=/>/g,Ra=/"/g,Ca=/'/g,_a=/\x00/g,Da=/[\x00&<>"']/;d(w,p),w.prototype.name="AssertionError";var La,xa=Array.prototype.indexOf?function(t,n,e){return Array.prototype.indexOf.call(t,n,e)}:function(n,e,i){if(i=null==i?0:0>i?Math.max(0,n.length+i):i,t(n))return t(e)&&1==e.length?n.indexOf(e,i):-1;for(;i<n.length;i++)if(i in n&&n[i]===e)return i;return-1},Ua=Array.prototype.forEach?function(t,n,e){Array.prototype.forEach.call(t,n,e)}:function(n,e,i){for(var r=n.length,o=t(n)?n.split(""):n,a=0;a<r;a++)a in o&&e.call(i,o[a],a,n)},ja=Array.prototype.map?function(t,n,e){return Array.prototype.map.call(t,n,e)}:function(n,e,i){for(var r=n.length,o=Array(r),a=t(n)?n.split(""):n,s=0;s<r;s++)s in a&&(o[s]=e.call(i,a[s],s,n));return o},Ma=Array.prototype.some?function(t,n,e){return Array.prototype.some.call(t,n,e)}:function(n,e,i){for(var r=n.length,o=t(n)?n.split(""):n,a=0;a<r;a++)if(a in o&&e.call(i,o[a],a,n))return!0;return!1};t:{var Va=Ta.navigator;if(Va){var Fa=Va.userAgent;if(Fa){La=Fa;break t}}La=""}var Ka="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");L[" "]=e;var qa,Xa=S("Opera"),Ba=S("Trident")||S("MSIE"),Ha=S("Edge"),Wa=Ha||Ba,Ga=S("Gecko")&&!(g(La.toLowerCase(),"webkit")&&!S("Edge"))&&!(S("Trident")||S("MSIE"))&&!S("Edge"),za=g(La.toLowerCase(),"webkit")&&!S("Edge");t:{var Ja="",Ya=function(){var t=La;return Ga?/rv\:([^\);]+)(\)|;)/.exec(t):Ha?/Edge\/([\d\.]+)/.exec(t):Ba?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):za?/WebKit\/(\S+)/.exec(t):Xa?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ya&&(Ja=Ya?Ya[1]:""),Ba){var $a=x();if(null!=$a&&$a>parseFloat(Ja)){qa=String($a);break t}}qa=Ja}var Za,Qa={},ts=Ta.document;Za=ts&&Ba?x()||("CSS1Compat"==ts.compatMode?parseInt(qa,10):5):void 0,V.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var ns=new V(function(){return new q},function(t){t.reset()},100);q.prototype.set=function(t,n){this.a=t,this.b=n,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var es,is,rs=!1,os=new function(){this.b=this.a=null},as=0,ss=2,us=3;G.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var cs=new V(function(){return new G},function(t){t.reset()},100);W.prototype.then=function(t,n,e){return nt(this,s(t)?t:null,s(n)?n:null,e)},j(W),(wa=W.prototype).s=function(t,n){return nt(this,null,t,n)},wa.cancel=function(t){this.a==as&&B(function(){Q(this,new ut(t))},this)},wa.Ac=function(t){this.a=as,et(this,ss,t)},wa.Bc=function(t){this.a=as,et(this,us,t)},wa.Qb=function(){for(var t;t=ot(this);)at(this,t,this.a,this.i);this.h=!1};var hs=X;d(ut,p),ut.prototype.name="cancel";var fs=!Ba||9<=Number(Za);ct.prototype.la=!0,ct.prototype.ja=function(){return this.a},ct.prototype.toString=function(){return"Const{"+this.a+"}"};var ls={};ft(""),lt.prototype.la=!0,lt.prototype.ja=function(){return this.a},lt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ds=/%{(\w+)}/g,ps=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,vs={};vt.prototype.la=!0,vt.prototype.ja=function(){return this.a},vt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ms=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,gs={};bt("about:blank"),wt.prototype.la=!0,wt.prototype.ja=function(){return this.a},wt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var bs={};yt("<!DOCTYPE html>"),yt(""),yt("<br>");var ws={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},ys={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Is=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ts=0,As={};Nt.prototype.oa=!1,Nt.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var ks=Object.freeze||function(t){return t},Es=!Ba||9<=Number(Za),Ss=Ba&&!U("9"),Ns=function(){if(!Ta.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});return Ta.addEventListener("test",e,n),Ta.removeEventListener("test",e,n),t}();Pt.prototype.c=function(){this.Bb=!1},d(Rt,Pt);var Os=ks({2:"touch",3:"pen",4:"mouse"});Rt.prototype.c=function(){Rt.ib.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ss)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Rt.prototype.g=function(){return this.a};var Ps="closure_listenable_"+(1e6*Math.random()|0),Rs=0,Cs="closure_lm_"+(1e6*Math.random()|0),_s={},Ds="__closure_events_fn_"+(1e9*Math.random()>>>0);d(Gt,Nt),Gt.prototype[Ps]=!0,Gt.prototype.removeEventListener=function(t,n,e,i){Vt(this,t,n,e,i)},Gt.prototype.ta=function(){if(Gt.ib.ta.call(this),this.u){var t,n=this.u;for(t in n.a){for(var e=n.a[t],i=0;i<e.length;i++)0,Ct(e[i]);delete n.a[t],n.b--}}this.Ra=null},tn.prototype.a=null;tn.prototype.reset=function(t,n,e,i,r){"number"==typeof r||0,i||Ea(),this.b=n,delete this.a},en.prototype.toString=function(){return this.name};var Ls=new en("SEVERE",1e3),xs=new en("CONFIG",700),Us=new en("FINE",500);nn.prototype.log=function(t,n,e){if(t.value>=rn(this).value)for(s(n)&&(n=n()),t=new tn(t,String(n),this.f),e&&(t.a=e),e="log:"+t.b,(t=Ta.console)&&t.timeStamp&&t.timeStamp(e),(t=Ta.msWriteProfilerMark)&&t(e),e=this;e;)e=e.a};var js={},Ms=null;(wa=an.prototype).P=function(){sn(this);for(var t=[],n=0;n<this.a.length;n++)t.push(this.b[this.a[n]]);return t},wa.S=function(){return sn(this),this.a.concat()},wa.clear=function(){this.b={},this.c=this.a.length=0},wa.get=function(t,n){return un(this.b,t)?this.b[t]:n},wa.set=function(t,n){un(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=n},wa.forEach=function(t,n){for(var e=this.S(),i=0;i<e.length;i++){var r=e[i],o=this.get(r);t.call(n,o,r,this)}};var Vs=null,Fs=null;fn.prototype.cancel=function(t){if(this.a)this.c instanceof fn&&this.c.cancel();else{if(this.b){var n=this.b;delete this.b,t?n.cancel(t):(n.l--,0>=n.l&&n.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new bn,dn(this),ln(this,!1,t))}},fn.prototype.m=function(t,n){this.i=!1,ln(this,t,n)},fn.prototype.A=function(t){dn(this),ln(this,!0,t)},fn.prototype.then=function(t,n,e){var i,r,o=new W(function(t,n){i=t,r=n});return pn(this,i,function(t){t instanceof bn?o.cancel():r(t)}),o.then(t,n,e)},j(fn),d(gn,p),gn.prototype.message="Deferred has already fired",gn.prototype.name="AlreadyCalledError",d(bn,p),bn.prototype.message="Deferred was canceled",bn.prototype.name="CanceledError",wn.prototype.c=function(){throw delete qs[this.a],this.b};var Ks,qs={};d(yn,function(){this.b=-1});for(var Xs=64,Bs=Xs-1,Hs=[],Ws=0;Ws<Bs;Ws++)Hs[Ws]=0;var Gs=k(128,Hs);yn.prototype.reset=function(){this.g=this.c=0,this.a=Ta.Int32Array?new Int32Array(this.h):E(this.h)};var zs=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];d(An,yn);var Js=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ys=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Sn.prototype.toString=function(){var t=[],n=this.c;n&&t.push(xn(n,$s,!0),":");var e=this.b;return(e||"file"==n)&&(t.push("//"),(n=this.l)&&t.push(xn(n,$s,!0),"@"),t.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.i)&&t.push(":",String(e))),(e=this.g)&&(this.b&&"/"!=e.charAt(0)&&t.push("/"),t.push(xn(e,"/"==e.charAt(0)?Qs:Zs,!0))),(e=this.a.toString())&&t.push("?",e),(e=this.h)&&t.push("#",xn(e,nu)),t.join("")};var $s=/[#\/\?@]/g,Zs=/[\#\?:]/g,Qs=/[\#\?]/g,tu=/[\#\?@]/g,nu=/#/g;(wa=jn.prototype).clear=function(){this.a=this.c=null,this.b=0},wa.forEach=function(t,n){Mn(this),this.a.forEach(function(e,i){Ua(e,function(e){t.call(n,e,i,this)},this)},this)},wa.S=function(){Mn(this);for(var t=this.a.P(),n=this.a.S(),e=[],i=0;i<n.length;i++)for(var r=t[i],o=0;o<r.length;o++)e.push(n[i]);return e},wa.P=function(n){Mn(this);var e=[];if(t(n))qn(this,n)&&(e=k(e,this.a.get(Bn(this,n))));else{n=this.a.P();for(var i=0;i<n.length;i++)e=k(e,n[i])}return e},wa.set=function(t,n){return Mn(this),this.c=null,t=Bn(this,t),qn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[n]),this.b+=1,this},wa.get=function(t,n){return 0<(t=t?this.P(t):[]).length?String(t[0]):n},wa.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],n=this.a.S(),e=0;e<n.length;e++){var i=n[e],r=encodeURIComponent(String(i));i=this.P(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")},Hn.prototype.c=null;var eu;d(Gn,Hn),Gn.prototype.a=function(){var t=zn(this);return t?new ActiveXObject(t):new XMLHttpRequest},Gn.prototype.b=function(){var t={};return zn(this)&&(t[0]=!0,t[1]=!0),t},eu=new Gn,d(Jn,Gt);var iu="",ru=Jn.prototype,ou=on("goog.net.XhrIo");ru.J=ou;var au=/^https?$/i,su=["POST","PUT"];(wa=Jn.prototype).Ea=function(){void 0!==Ia&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",cn(this.J,oe(this,this.g)),zt(this,"timeout"),this.abort(8))},wa.abort=function(){this.a&&this.b&&(cn(this.J,oe(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,zt(this,"complete"),zt(this,"abort"),ne(this))},wa.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),ne(this,!0)),Jn.ib.ta.call(this)},wa.Ab=function(){this.oa||(this.G||this.h||this.c?te(this):this.jc())},wa.jc=function(){te(this)},wa.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case iu:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.J;return t&&t.log(Ls,"Response type "+this.l+" is not supported on this browser",void 0),null}catch(t){return cn(this.J,"Can not get response: "+t.message),null}};var uu=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,cu=0,hu=1;d(ce,p),d(he,Hn),he.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new fe;throw Error("Unsupported browser")},he.prototype.b=function(){return{}},(wa=fe.prototype).open=function(t,n,e){if(null!=e&&!e)throw Error("Only async requests are supported.");this.a.open(t,n)},wa.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},wa.abort=function(){this.a.abort()},wa.setRequestHeader=function(){},wa.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},wa.Wb=function(){this.status=200,this.responseText=this.a.responseText,le(this,4)},wa.xb=function(){this.status=500,this.responseText="",le(this,4)},wa.Yb=function(){this.xb()},wa.Xb=function(){this.status=200,le(this,1)},wa.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};var fu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lu="Firefox",du="Chrome",pu={Gc:"FirebaseCore-web",Ic:"FirebaseUI-web"};Ke.prototype.get=function(){return this.a?this.b:this.c};var vu,mu={};try{var gu={};Object.defineProperty(gu,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(gu,"abcd",{configurable:!0,enumerable:!0,value:2}),vu=2==gu.abcd}catch(t){vu=!1}var bu="email",wu="newEmail",yu="requestType",Iu="email",Tu="fromEmail",Au="data",ku="operation";d(ze,Error),ze.prototype.B=function(){return{code:this.code,message:this.message}},ze.prototype.toJSON=function(){return this.B()};var Eu="auth/",Su={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Nu="android",Ou="handleCodeInApp",Pu="iOS",Ru="url",Cu="installApp",_u="minimumVersion",Du="packageName",Lu="bundleId",xu="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Uu=["client_id","response_type","scope","redirect_uri","state"],ju={Hc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:Uu},Jc:{Ma:null,za:500,ya:620,Na:"github.com",$a:Uu},Kc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:Uu},Qc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:xu}},Mu="idToken",Vu="providerId";d(ei,ni),d(ii,ei),d(ri,ei),d(oi,ei),d(ai,ei),ui.prototype.wa=function(t){return Bi(t,ci(this))},ui.prototype.b=function(t,n){var e=ci(this);return e.idToken=n,Hi(t,e)},ui.prototype.c=function(t,n){return si(Wi(t,ci(this)),n)},ui.prototype.B=function(){var t={providerId:this.providerId};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},hi.prototype.Ba=function(t){return this.rb=_(t),this},d(fi,hi),fi.prototype.sa=function(t){return I(this.a,t)||this.a.push(t),this},fi.prototype.wb=function(){return E(this.a)},fi.prototype.credential=function(t,n){if(!t&&!n)throw new ze("argument-error","credential failed: must provide the ID token and/or the access token.");return new ui(this.providerId,{idToken:t||null,accessToken:n||null})},d(li,fi),Be(li,"PROVIDER_ID","facebook.com"),d(pi,fi),Be(pi,"PROVIDER_ID","github.com"),d(mi,fi),Be(mi,"PROVIDER_ID","google.com"),d(bi,hi),Be(bi,"PROVIDER_ID","twitter.com"),yi.prototype.wa=function(t){return zi(t,mc,{email:this.a,password:this.f})},yi.prototype.b=function(t,n){return zi(t,hc,{idToken:n,email:this.a,password:this.f})},yi.prototype.c=function(t,n){return si(this.wa(t),n)},yi.prototype.B=function(){return{email:this.a,password:this.f}},He(Ii,{PROVIDER_ID:"password"}),Ti.prototype.wa=function(t){return t.Qa(Ai(this))},Ti.prototype.b=function(t,n){var e=Ai(this);return e.idToken=n,zi(t,bc,e)},Ti.prototype.c=function(t,n){var e=Ai(this);return e.operation="REAUTH",t=zi(t,wc,e),si(t,n)},Ti.prototype.B=function(){var t={providerId:"phone"};return this.a.Pa&&(t.verificationId=this.a.Pa),this.a.Oa&&(t.verificationCode=this.a.Oa),this.a.Da&&(t.temporaryProof=this.a.Da),this.a.Y&&(t.phoneNumber=this.a.Y),t},ki.prototype.Qa=function(n,e){var i=this.a.c;return J(e.verify()).then(function(r){if(!t(r))throw new ze("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,n){return zi(t,uc,n)}(i,{phoneNumber:n,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new ze("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},He(ki,{PROVIDER_ID:"phone"}),Oi.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}},d(Ri,ze),d(Ci,ze),Ci.prototype.B=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var n=this.credential&&this.credential.B();return n&&D(t,n),t},Ci.prototype.toJSON=function(){return this.B()},d(Di,Hn),Di.prototype.a=function(){return new this.f},Di.prototype.b=function(){return{}};var Fu,Ku="idToken",qu=new Ke(3e4,6e4),Xu={"Content-Type":"application/x-www-form-urlencoded"},Bu=new Ke(3e4,6e4),Hu={"Content-Type":"application/json"};Li.prototype.m=function(t,n,e,i,r,o){var a="Node"==Ae(),s=ke()?a?new Jn(this.o):new Jn:new Jn(this.f);if(o){s.f=Math.max(0,o);var u=setTimeout(function(){zt(s,"timeout")},o)}Jt(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(n){return cn(t.J,"Can not get responseText: "+n.message),""}}(this))||null}catch(n){t=null}n&&n(t)}),Yt(s,"ready",function(){u&&clearTimeout(u),Ot(this)}),Yt(s,"timeout",function(){u&&clearTimeout(u),Ot(this),n&&n(null)}),Yn(s,t,e,i,r)};var Wu=ft("https://apis.google.com/js/client.js?onload=%{onload}"),Gu="__fcb"+Math.floor(1e6*Math.random()).toString();Li.prototype.u=function(t,n,e,i,r){var o=this;Fu.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:e,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(a),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Li.prototype.gb=function(){return zi(this,fc,{})},Li.prototype.kb=function(t,n){return zi(this,cc,{idToken:t,email:n})},Li.prototype.lb=function(t,n){return zi(this,hc,{idToken:t,password:n})};var zu={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(wa=Li.prototype).mb=function(t,n){var e={idToken:t},i=[];return N(zu,function(t,r){var o=n[r];null===o?i.push(t):r in n&&(e[r]=o)}),i.length&&(e.deleteAttribute=i),zi(this,cc,e)},wa.cb=function(t,n){return t={requestType:"PASSWORD_RESET",email:t},D(t,n),zi(this,rc,t)},wa.bb=function(t,n){return t={requestType:"VERIFY_EMAIL",idToken:t},D(t,n),zi(this,ic,t)},wa.Qa=function(t){return zi(this,gc,t)},wa.Ta=function(t,n){return zi(this,sc,{oobCode:t,newPassword:n})},wa.Ia=function(t){return zi(this,$u,{oobCode:t})},wa.Sa=function(t){return zi(this,Yu,{oobCode:t})};var Ju,Yu={endpoint:"setAccountInfo",D:Gi,ga:"email"},$u={endpoint:"resetPassword",D:Gi,O:function(t){if(!t.email||!t.requestType)throw new ze("internal-error")}},Zu={endpoint:"signupNewUser",D:function(t){if(Mi(t),!t.password)throw new ze("weak-password")},O:Fi,T:!0},Qu={endpoint:"createAuthUri"},tc={endpoint:"deleteAccount",ea:["idToken"]},nc={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(t){if(!o(t.deleteProvider))throw new ze("internal-error")}},ec={endpoint:"getAccountInfo"},ic={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new ze("internal-error")},ga:"email"},rc={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new ze("internal-error");Mi(t)},ga:"email"},oc={nb:!0,endpoint:"getProjectConfig",zb:"GET"},ac={nb:!0,endpoint:"getRecaptchaParam",zb:"GET",O:function(t){if(!t.recaptchaSiteKey)throw new ze("internal-error")}},sc={endpoint:"resetPassword",D:Gi,ga:"email"},uc={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},cc={endpoint:"setAccountInfo",ea:["idToken"],D:Vi,T:!0},hc={endpoint:"setAccountInfo",ea:["idToken"],D:function(t){if(Vi(t),!t.password)throw new ze("weak-password")},O:Fi,T:!0},fc={endpoint:"signupNewUser",O:Fi,T:!0},lc={endpoint:"verifyAssertion",D:qi,O:Xi,T:!0},dc={endpoint:"verifyAssertion",D:qi,O:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new ze("user-not-found");if(t.errorMessage)throw Ji(t.errorMessage);if(!t[Ku])throw new ze("internal-error")},T:!0},pc={endpoint:"verifyAssertion",D:function(t){if(qi(t),!t.idToken)throw new ze("internal-error")},O:Xi,T:!0},vc={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new ze("invalid-custom-token")},O:Fi,T:!0},mc={endpoint:"verifyPassword",D:function(t){if(Mi(t),!t.password)throw new ze("wrong-password")},O:Fi,T:!0},gc={endpoint:"verifyPhoneNumber",D:Ki,O:Fi},bc={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new ze("internal-error");Ki(t)},O:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",_i(t);Fi(t)}},wc={Pb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ki,O:Fi},yc={Mc:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Oc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Pc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Ju=$i("__EID__")?"__EID__":void 0;var Ic=ft("https://apis.google.com/js/api.js?onload=%{onload}"),Tc=new Ke(3e4,6e4),Ac=new Ke(5e3,15e3),kc=null;Qi.prototype.toString=function(){return this.f?Rn(this.a,"v",this.f):Kn(this.a.a,"v"),this.b?Rn(this.a,"eid",this.b):Kn(this.a.a,"eid"),this.c.length?Rn(this.a,"fw",this.c.join(",")):Kn(this.a.a,"fw"),this.a.toString()},tr.prototype.toString=function(){var t=Dn(this.m,"/__/auth/handler");if(Rn(t,"apiKey",this.u),Rn(t,"appName",this.c),Rn(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var e=ya.app(this.c).auth().$()}catch(t){e=null}n.Ua=e,Rn(t,"providerId",this.a.providerId),e=xe((n=this.a).rb);for(var i in e)e[i]=e[i].toString();i=n.rc,e=_(e);for(var r=0;r<i.length;r++){var o=i[r];o in e&&delete e[o]}n.Wa&&n.Ua&&!e[n.Wa]&&(e[n.Wa]=n.Ua),R(e)||Rn(t,"customParameters",Le(e))}if("function"==typeof this.a.wb&&(n=this.a.wb()).length&&Rn(t,"scopes",n.join(",")),this.h?Rn(t,"redirectUrl",this.h):Kn(t.a,"redirectUrl"),this.g?Rn(t,"eventId",this.g):Kn(t.a,"eventId"),this.i?Rn(t,"v",this.i):Kn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Cn(t,a)&&Rn(t,a,this.b[a]);return this.f?Rn(t,"eid",this.f):Kn(t.a,"eid"),(a=nr(this.c)).length&&Rn(t,"fw",a.join(",")),t.toString()},(wa=er.prototype).Ca=function(t,n,e){var i=new ze("popup-closed-by-user"),r=new ze("web-storage-unsupported"),o=this,a=!1;return this.ba().then(function(){sr(o).then(function(e){e||(t&&be(t),n(r),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new W(function(n){function e(){Qt(2e3).then(function(){if(t&&!t.closed)return e();n()})}return e()})}(t)}).then(function(){if(!a)return Qt(e).then(function(){n(i)})})},wa.Db=function(){var t=Ne();return!De(t)&&!Me(t)},wa.yb=function(){return!1},wa.vb=function(t,n,e,i,r,o,a){if(!t)return Y(new ze("popup-blocked"));if(a&&!De())return this.ba().s(function(n){be(t),r(n)}),i(),J();this.a||(this.a=ir(or(this)));var s=this;return this.a.then(function(){var n=s.ba().s(function(n){throw be(t),r(n),n});return i(),n}).then(function(){if(Ni(e),!a){ve(ar(s.u,s.f,s.b,n,e,null,o,s.c,void 0,s.h),t)}}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},wa.Aa=function(t,n,e){this.a||(this.a=ir(or(this)));var i=this;return this.a.then(function(){Ni(n);ve(ar(i.u,i.f,i.b,t,n,pe(),e,i.c,void 0,i.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},wa.ba=function(){var t=this;return rr(this).then(function(){return t.i.Ya}).s(function(){throw t.a=null,new ze("network-request-failed")})},wa.Hb=function(){return!0},wa.ua=function(t){this.g.push(t)},wa.Ja=function(t){A(this.g,function(n){return n==t})},(wa=ur.prototype).get=function(t){return J(this.a.getItem(t)).then(function(t){return t&&Ue(t)})},wa.set=function(t,n){return J(this.a.setItem(t,Le(n)))},wa.X=function(t){return J(this.a.removeItem(t))},wa.ia=function(){},wa.da=function(){},(wa=cr.prototype).get=function(t){return J(this.a[t])},wa.set=function(t,n){return this.a[t]=n,J()},wa.X=function(t){return delete this.a[t],J()},wa.ia=function(){},wa.da=function(){};var Ec;(wa=hr.prototype).set=function(t,n){var e,i=!1,r=this;return Z(fr(this).then(function(n){return e=n,n=lr(r,dr(r,e,!0)),pr(n.get(t))}).then(function(o){var a=lr(r,dr(r,e,!0));return o?(o.value=n,pr(a.put(o))):(r.a++,i=!0,o={},o[r.g]=t,o[r.l]=n,pr(a.add(o)))}).then(function(){r.f[t]=n}),function(){i&&r.a--})},wa.get=function(t){var n=this;return fr(this).then(function(e){return pr(lr(n,dr(n,e,!1)).get(t))}).then(function(t){return t&&t.value})},wa.X=function(t){var n=!1,e=this;return Z(fr(this).then(function(i){return n=!0,e.a++,pr(lr(e,dr(e,i,!0)).delete(t))}).then(function(){delete e.f[t]}),function(){n&&e.a--})},wa.zc=function(){var t=this;return fr(this).then(function(n){var e=lr(t,dr(t,n,!1));return e.getAll?pr(e.getAll()):new W(function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(n){(n=n.target.result)?(i.push(n.value),n.continue()):t(i)},r.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(n){var e={},i=[];if(0==t.a){for(i=0;i<n.length;i++)e[n[i][t.g]]=n[i][t.l];i=me(t.f,e),t.f=e}return i})},wa.ia=function(t){0==this.c.length&&function(t){function n(){return t.b=Qt(800).then(f(t.zc,t)).then(function(n){0<n.length&&Ua(t.c,function(t){t(n)})}).then(n).s(function(t){"STOP_EVENT"!=t.message&&n()}),t.b}t.b&&t.b.cancel("STOP_EVENT"),n()}(this),this.c.push(t)},wa.da=function(t){A(this.c,function(n){return n==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(wa=vr.prototype).get=function(t){var n=this;return J().then(function(){return Ue(n.a.getItem(t))})},wa.set=function(t,n){var e=this;return J().then(function(){var i=Le(n);null===i?e.X(t):e.a.setItem(t,i)})},wa.X=function(t){var n=this;return J().then(function(){n.a.removeItem(t)})},wa.ia=function(t){Ta.window&&Ut(Ta.window,"storage",t)},wa.da=function(t){Ta.window&&Vt(Ta.window,"storage",t)},(wa=gr.prototype).get=function(){return J(null)},wa.set=function(){return J()},wa.X=function(){return J()},wa.ia=function(){},wa.da=function(){},(wa=br.prototype).get=function(t){var n=this;return J().then(function(){return Ue(n.a.getItem(t))})},wa.set=function(t,n){var e=this;return J().then(function(){var i=Le(n);null===i?e.X(t):e.a.setItem(t,i)})},wa.X=function(t){var n=this;return J().then(function(){n.a.removeItem(t)})},wa.ia=function(){},wa.da=function(){};var Sc,Nc,Oc={C:vr,jb:br},Pc={C:vr,jb:br},Rc={C:ur,jb:gr},Cc={Lc:"local",NONE:"none",Nc:"session"};yr.prototype.get=function(t,n){return Tr(this,t.C).get(Ar(this,t,n))},yr.prototype.set=function(t,n,e){var i=Ar(this,t,e),r=this,o=Tr(this,t.C);return o.set(i,n).then(function(){return o.get(i)}).then(function(n){"local"==t.C&&(r.b[i]=n)})},yr.prototype.m=function(t){if(t&&t.g){var n=t.a.key;if(null==n)for(var e in this.a){var i=this.b[e];void 0===i&&(i=null);var r=Ta.localStorage.getItem(e);r!==i&&(this.b[e]=r,this.c(e))}else if(0==n.indexOf(this.i+this.g)&&this.a[n]){if(void 0!==t.a.a?Tr(this,"local").da(this.h):Nr(this),this.A)if(e=Ta.localStorage.getItem(n),(i=t.a.newValue)!==e)null!==i?Ta.localStorage.setItem(n,i):Ta.localStorage.removeItem(n);else if(this.b[n]===i&&void 0===t.a.a)return;var o=this;e=function(){void 0===t.a.a&&o.b[n]===Ta.localStorage.getItem(n)||(o.b[n]=Ta.localStorage.getItem(n),o.c(n))},Ba&&Za&&10==Za&&Ta.localStorage.getItem(n)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(e,10):e()}}else Ua(t,f(this.c,this))},yr.prototype.c=function(t){this.a[t]&&Ua(this.a[t],function(t){t()})};var _c={name:"authEvent",C:"local"};(wa=Or.prototype).ba=function(){return this.xa?this.xa:this.xa=(Ie(void 0)?ye().then(function(){return new W(function(t,n){var e=Ta.document,i=setTimeout(function(){n(Error("Cordova framework is not ready."))},1e3);e.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):Y(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Oe("universalLinks.subscribe",Ta))throw Pr("cordova-universal-links-plugin is not installed");if(void 0===Oe("BuildInfo.packageName",Ta))throw Pr("cordova-plugin-buildinfo is not installed");if("function"!=typeof Oe("cordova.plugins.browsertab.openUrl",Ta))throw Pr("cordova-plugin-browsertab is not installed");if("function"!=typeof Oe("cordova.InAppBrowser.open",Ta))throw Pr("cordova-plugin-inappbrowser is not installed")},function(){throw new ze("cordova-not-ready")})},wa.Ca=function(t,n){return n(new ze("operation-not-supported-in-this-environment")),J()},wa.vb=function(){return Y(new ze("operation-not-supported-in-this-environment"))},wa.Hb=function(){return!1},wa.Db=function(){return!0},wa.yb=function(){return!0},wa.Aa=function(t,n,e){if(this.c)return Y(new ze("redirect-operation-pending"));var i=this,r=Ta.document,o=null,a=null,s=null,u=null;return this.c=Z(J().then(function(){return Ni(n),Dr(i)}).then(function(){return Cr(i,t,n,e)}).then(function(){return new W(function(t,n){a=function(){var n=Oe("cordova.plugins.browsertab.close",Ta);return t(),"function"==typeof n&&n(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ua(a),s=function(){o||(o=Qt(i.w).then(function(){n(new ze("redirect-cancelled-by-user"))}))},u=function(){qe()&&s()},r.addEventListener("resume",s,!1),Ne().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",u,!1)}).s(function(t){return Lr(i).then(function(){throw t})})}),function(){s&&r.removeEventListener("resume",s,!1),u&&r.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&i.Ja(a),i.c=null})},wa.ua=function(t){this.b.push(t),Dr(this).s(function(n){"auth/invalid-cordova-configuration"===n.code&&(n=new Oi("unknown",null,null,null,new ze("no-auth-event")),t(n))})},wa.Ja=function(t){A(this.b,function(n){return n==t})};var Dc={name:"pendingRedirect",C:"session"};Ur.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=jr(this.v,this.l,this.u)},Ur.prototype.subscribe=function(t){if(I(this.h,t)||this.h.push(t),!this.f){var n=this;(function(t){return t.b.get(Dc,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?xr(n.g).then(function(){Mr(n).s(function(t){var e=new Oi("unknown",null,null,null,new ze("operation-not-supported-in-this-environment"));Kr(t)&&n.m(e)})}):Vr(n)}).s(function(){Vr(n)})}},Ur.prototype.unsubscribe=function(t){A(this.h,function(n){return n==t})},Ur.prototype.m=function(t){if(!t)throw new ze("invalid-auth-event");for(var n=!1,e=0;e<this.h.length;e++){var i=this.h[e];if(i.ob(t.b,t.c)){(n=this.b[t.b])&&n.h(t,i),n=!0;break}}return Br(this.c),n};var Lc=new Ke(2e3,1e4),xc=new Ke(3e4,6e4);Ur.prototype.aa=function(){return this.c.aa()},Ur.prototype.Aa=function(t,n,e){var i,r=this;return function(t){return t.b.set(Dc,"pending",t.a)}(this.g).then(function(){return r.a.Aa(t,n,e).s(function(t){if(Kr(t))throw new ze("operation-not-supported-in-this-environment");return i=t,xr(r.g).then(function(){throw i})}).then(function(){return r.a.Hb()?new W(function(){}):xr(r.g).then(function(){return r.aa()}).then(function(){}).s(function(){})})})},Ur.prototype.Ca=function(t,n,e,i){return this.a.Ca(e,function(e){t.fa(n,null,e,i)},Lc.get())};var Uc={};Xr.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Xr.prototype.h=function(t,n){if(!t)return Y(new ze("invalid-auth-event"));this.reset(),this.g=!0;var e=t.b,i=t.c,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;return"unknown"!=e||r||o?t.a?(Wr(this,!0,null,t.a),t=J()):t=n.va(e,i)?function(t,n,e){e=e.va(n.b,n.c);var i=n.f,r=n.g,o=!!n.b.match(/Redirect$/);return e(i,r).then(function(n){Wr(t,o,n,null)}).s(function(n){Wr(t,o,null,n)})}(this,t,n):Y(new ze("invalid-auth-event")):(Wr(this,!1,null,null),t=J()),t},Xr.prototype.aa=function(){var t=this;return new W(function(n,e){t.b?t.b().then(n,e):(t.f.push(n),t.c.push(e),function(t){var n=new ze("timeout");t.a&&t.a.cancel(),t.a=Qt(xc.get()).then(function(){t.b||Wr(t,!0,null,n)})}(t))})},Gr.prototype.h=function(t,n){if(!t)return Y(new ze("invalid-auth-event"));var e=t.b,i=t.c;return t.a?(n.fa(t.b,null,t.a,t.c),t=J()):t=n.va(e,i)?function(t,n){var e=t.c,i=t.b;return n.va(i,e)(t.f,t.g).then(function(t){n.fa(i,t,null,e)}).s(function(t){n.fa(i,null,t,e)})}(t,n):Y(new ze("invalid-auth-event")),t},zr.prototype.confirm=function(t){return t=Ei(this.verificationId,t),this.a(t)},Yr.prototype.start=function(){this.a=this.c,$r(this,!0)},Qr.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Qr.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Y(new ze("user-token-expired")):t||!this.b||Ea()>this.c-3e4?this.a?eo(this,{grant_type:"refresh_token",refresh_token:this.a}):J(null):J({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},io.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}},d(ro,Pt),d(oo,Gt),oo.prototype.na=function(t){this.ha=t,xi(this.c,t)},oo.prototype.$=function(){return this.ha},oo.prototype.Ka=function(){return E(this.R)},oo.prototype.Ga=function(){this.l.b&&(Zr(this.l),this.l.start())},Be(oo.prototype,"providerId","firebase"),(wa=oo.prototype).reload=function(){var t=this;return Do(this,bo(this).then(function(){return ko(t).then(function(){return po(t)}).then(go)}))},wa.F=function(t){var n=this;return Do(this,bo(this).then(function(){return n.h.getToken(t)}).then(function(t){if(!t)throw new ze("internal-error");return t.accessToken!=n.pa&&(lo(n,t.accessToken),zt(n,new ro("tokenChanged"))),To(n,"refreshToken",t.refreshToken),t.accessToken}))},wa.getToken=function(t){return mu["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(mu["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&console.warn),this.F(t)},wa.kc=function(t){if(!(t=t.users)||!t.length)throw new ze("internal-error");mo(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var n=So(t),e=0;e<n.length;e++)yo(this,n[e]);To(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},wa.Za=function(t){var n=this,e=null;return Do(this,t.c(this.c,this.uid).then(function(t){return Eo(n,t),e=Oo(n,t,"reauthenticate"),n.i=null,n.reload()}).then(function(){return e}),!0)},wa.mc=function(t){return this.Za(t).then(function(){})},wa.Xa=function(t){var n=this,e=null;return Do(this,No(this,t.providerId).then(function(){return n.F()}).then(function(e){return t.b(n.c,e)}).then(function(t){return e=Oo(n,t,"link"),Po(n,t)}).then(function(){return e}))},wa.cc=function(t){return this.Xa(t).then(function(t){return t.user})},wa.dc=function(t,n){var e=this;return Do(this,No(this,"phone").then(function(){return Jr(co(e),t,n,f(e.Xa,e))}))},wa.nc=function(t,n){var e=this;return Do(this,J().then(function(){return Jr(co(e),t,n,f(e.Za,e))}),!0)},wa.kb=function(t){var n=this;return Do(this,this.F().then(function(e){return n.c.kb(e,t)}).then(function(t){return Eo(n,t),n.reload()}))},wa.Dc=function(t){var n=this;return Do(this,this.F().then(function(e){return t.b(n.c,e)}).then(function(t){return Eo(n,t),n.reload()}))},wa.lb=function(t){var n=this;return Do(this,this.F().then(function(e){return n.c.lb(e,t)}).then(function(t){return Eo(n,t),n.reload()}))},wa.mb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return bo(this);var n=this;return Do(this,this.F().then(function(e){return n.c.mb(e,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Eo(n,t),To(n,"displayName",t.displayName||null),To(n,"photoURL",t.photoUrl||null),Ua(n.providerData,function(t){"password"===t.providerId&&(Be(t,"displayName",n.displayName),Be(t,"photoURL",n.photoURL))}),po(n)}).then(go))},wa.Cc=function(t){var n=this;return Do(this,ko(this).then(function(e){return I(wo(n),t)?function(t,n,e){return zi(t,nc,{idToken:n,deleteProvider:e})}(n.c,e,[t]).then(function(t){var e={};return Ua(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),Ua(wo(n),function(t){e[t]||Io(n,t)}),e[ki.PROVIDER_ID]||Be(n,"phoneNumber",null),po(n)}):po(n).then(function(){throw new ze("no-such-provider")})}))},wa.delete=function(){var t=this;return Do(this,this.F().then(function(n){return zi(t.c,tc,{idToken:n})}).then(function(){zt(t,new ro("userDeleted"))})).then(function(){for(var n=0;n<t.A.length;n++)t.A[n].cancel("app-deleted");ao(t,null),uo(t,null),t.A=[],t.m=!0,fo(t),Be(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},wa.ob=function(t,n){return!!("linkViaPopup"==t&&(this.g||null)==n&&this.f||"reauthViaPopup"==t&&(this.g||null)==n&&this.f||"linkViaRedirect"==t&&(this.Z||null)==n||"reauthViaRedirect"==t&&(this.Z||null)==n)},wa.fa=function(t,n,e,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(e&&this.v?this.v(e):n&&!e&&this.f&&this.f(n),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},wa.va=function(t,n){return"linkViaPopup"==t&&n==(this.g||null)?f(this.tb,this):"reauthViaPopup"==t&&n==(this.g||null)?f(this.ub,this):"linkViaRedirect"==t&&(this.Z||null)==n?f(this.tb,this):"reauthViaRedirect"==t&&(this.Z||null)==n?f(this.ub,this):null},wa.ec=function(t){var n=this;return Ro(this,"linkViaPopup",t,function(){return No(n,t.providerId).then(function(){return po(n)})},!1)},wa.oc=function(t){return Ro(this,"reauthViaPopup",t,function(){return J()},!0)},wa.fc=function(t){var n=this;return Co(this,"linkViaRedirect",t,function(){return No(n,t.providerId)},!1)},wa.pc=function(t){return Co(this,"reauthViaRedirect",t,function(){return J()},!0)},wa.tb=function(t,n){var e=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Do(this,this.F().then(function(i){return Hi(e.c,{requestUri:t,sessionId:n,idToken:i})}).then(function(t){return i=Oo(e,t,"link"),Po(e,t)}).then(function(){return i}))},wa.ub=function(t,n){var e=this;this.b&&(this.b.cancel(),this.b=null);var i=null;return Do(this,J().then(function(){return si(Wi(e.c,{requestUri:t,sessionId:n}),e.uid)}).then(function(t){return i=Oo(e,t,"reauthenticate"),Eo(e,t),e.i=null,e.reload()}).then(function(){return i}),!0)},wa.bb=function(t){var n=this,e=null;return Do(this,this.F().then(function(n){return e=n,void 0===t||R(t)?{}:$e(new Ye(t))}).then(function(t){return n.c.bb(e,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},wa.toJSON=function(){return this.B()},wa.B=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};return this.metadata&&D(t,this.metadata.B()),Ua(this.providerData,function(n){t.providerData.push(function(t){var n,e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(n))}),t};var jc={name:"redirectUser",C:"session"};Uo.prototype.g=function(){var t=this,n=Mo("local");qo(this,function(){return J().then(function(){return t.c&&"local"!=t.c.C?t.b.get(n,t.a):null}).then(function(e){if(e)return jo(t,"local").then(function(){t.c=n})})})};var Mc={name:"persistence",C:"session"};Uo.prototype.eb=function(t){var n=null,e=this;return function(t){var n=new ze("invalid-persistence-type"),e=new ze("unsupported-persistence-type");t:{for(i in Cc)if(Cc[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw n;switch(Ae()){case"ReactNative":if("session"===t)throw e;break;case"Node":if("none"!==t)throw e;break;default:if(!Pe()&&"none"!==t)throw e}}(t),qo(this,function(){return t!=e.c.C?e.b.get(e.c,e.a).then(function(i){return n=i,jo(e,t)}).then(function(){if(e.c=Mo(t),n)return e.b.set(e.c,n,e.a)}):J()})},d(Xo,Gt),d(Bo,Pt),d(Ho,Pt),(wa=Xo.prototype).eb=function(t){return t=this.h.eb(t),ta(this,t)},wa.na=function(t){this.V===t||this.l||(this.V=t,xi(this.c,this.V),zt(this,new Bo(this.$())))},wa.$=function(){return this.V},wa.Ec=function(){var t=Ta.navigator;this.na(t?t.languages&&t.languages[0]||t.language||t.userLanguage||null:null)},wa.gc=function(t){this.A.push(t),Ui(this.c,ya.SDK_VERSION?Se(ya.SDK_VERSION,this.A):null),zt(this,new Ho(this.A))},wa.Ka=function(){return E(this.A)},wa.toJSON=function(){return{apiKey:Yo(this).options.apiKey,authDomain:Yo(this).options.authDomain,appName:Yo(this).name,currentUser:$o(this)&&$o(this).B()}},wa.ob=function(t,n){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==n&&!!this.f;default:return!1}},wa.fa=function(t,n,e,i){"signInViaPopup"==t&&this.g==i&&(e&&this.v?this.v(e):n&&!e&&this.f&&this.f(n),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},wa.va=function(t,n){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==n&&this.f?f(this.Sb,this):null},wa.Sb=function(t,n){var e=this;t={requestUri:t,sessionId:n},this.b&&(this.b.cancel(),this.b=null);var i=null,r=null,o=Bi(e.c,t).then(function(t){return i=Si(t),r=ti(t),t});return t=e.U.then(function(){return o}).then(function(t){return Go(e,t)}).then(function(){return We({user:$o(e),credential:i,additionalUserInfo:r,operationType:"signIn"})}),ta(this,t)},wa.wc=function(t){if(!Re())return Y(new ze("operation-not-supported-in-this-environment"));var n=this,e=Qe(t.providerId),i=je(),r=null;(!De()||Te())&&Yo(this).options.authDomain&&t.isOAuthProvider&&(r=ar(Yo(this).options.authDomain,Yo(this).options.apiKey,Yo(this).name,"signInViaPopup",t,null,i,ya.SDK_VERSION||null));var o=we(r,e&&e.za,e&&e.ya);return e=Wo(this).then(function(n){return Fr(n,o,"signInViaPopup",t,i,!!r)}).then(function(){return new W(function(t,e){n.fa("signInViaPopup",null,new ze("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.b=n.a.Ca(n,"signInViaPopup",o,i)})}).then(function(t){return o&&be(o),t?We(t):null}).s(function(t){throw o&&be(o),t}),ta(this,e)},wa.xc=function(t){if(!Re())return Y(new ze("operation-not-supported-in-this-environment"));var n=this;return ta(this,Wo(this).then(function(){return function(t){return qo(t,function(){return t.b.set(Mc,t.c.C,t.a)})}(n.h)}).then(function(){return n.a.Aa("signInViaRedirect",t)}))},wa.aa=function(){if(!Re())return Y(new ze("operation-not-supported-in-this-environment"));var t=this;return ta(this,Wo(this).then(function(){return t.a.aa()}).then(function(t){return t?We(t):null}))},wa.hb=function(){var t=this;return ta(this,this.i.then(function(){return $o(t)?(zo(t,null),Fo(t.h).then(function(){Qo(t)})):J()}))},wa.yc=function(){var t=this;return Ko(this.h,Yo(this).options.authDomain).then(function(n){if(!t.l){var e;if(e=$o(t)&&n){e=$o(t).uid;var i=n.uid;e=void 0!==e&&null!==e&&""!==e&&void 0!==i&&null!==i&&""!==i&&e==i}if(e)return Ao($o(t),n),$o(t).F();($o(t)||n)&&(zo(t,n),n&&(vo(n),n.ca=t.G),t.a&&t.a.subscribe(t),Qo(t))}})},wa.ka=function(t){return Vo(this.h,t)},wa.Tb=function(){Qo(this),this.ka($o(this))},wa.Zb=function(){this.hb()},wa.$b=function(){this.hb()},wa.ac=function(t){var n=this;this.addAuthTokenListener(function(){t.next($o(n))})},wa.bc=function(t){var n=this;!function(t,n){t.I.push(n),ta(t,t.i.then(function(){!t.l&&I(t.I,n)&&t.R!==t.getUid()&&(t.R=t.getUid(),n(Zo(t)))}))}(this,function(){t.next($o(n))})},wa.ic=function(t,n,e){var i=this;return this.W&&ya.Promise.resolve().then(function(){s(t)?t($o(i)):s(t.next)&&t.next($o(i))}),this.Kb(t,n,e)},wa.hc=function(t,n,e){var i=this;return this.W&&ya.Promise.resolve().then(function(){i.R=i.getUid(),s(t)?t($o(i)):s(t.next)&&t.next($o(i))}),this.Lb(t,n,e)},wa.Vb=function(t){var n=this;return ta(this,this.i.then(function(){return $o(n)?$o(n).F(t).then(function(t){return{accessToken:t}}):null}))},wa.tc=function(t){return this.Eb(t).then(function(t){return t.user})},wa.Eb=function(t){var n=this;return this.i.then(function(){return Jo(n,zi(n.c,vc,{token:t}))}).then(function(t){var e=t.user;return To(e,"isAnonymous",!1),n.ka(e),t})},wa.Fb=function(t,n){var e=this;return this.i.then(function(){return Jo(e,zi(e.c,mc,{email:t,password:n}))})},wa.uc=function(t,n){return this.Fb(t,n).then(function(t){return t.user})},wa.Ob=function(t,n){return this.qb(t,n).then(function(t){return t.user})},wa.qb=function(t,n){var e=this;return this.i.then(function(){return Jo(e,zi(e.c,Zu,{email:t,password:n}))})},wa.sc=function(t){return this.fb(t).then(function(t){return t.user})},wa.fb=function(t){var n=this;return this.i.then(function(){return Jo(n,t.wa(n.c))})},wa.gb=function(){return this.Gb().then(function(t){return t.user})},wa.Gb=function(){var t=this;return this.i.then(function(){var n=$o(t);if(n&&n.isAnonymous){return We({user:n,credential:null,additionalUserInfo:We({providerId:null,isNewUser:!1}),operationType:"signIn"})}return Jo(t,t.c.gb()).then(function(n){var e=n.user;return To(e,"isAnonymous",!0),t.ka(e),n})})},wa.getUid=function(){return $o(this)&&$o(this).uid||null},wa.Mb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&$o(this)&&ho($o(this))},wa.qc=function(t){var n=this;Ua(this.m,function(e){e==t&&n.o--}),0>this.o&&(this.o=0),0==this.o&&$o(this)&&fo($o(this)),this.removeAuthTokenListener(t)},wa.addAuthTokenListener=function(t){var n=this;this.m.push(t),ta(this,this.i.then(function(){n.l||I(n.m,t)&&t(Zo(n))}))},wa.removeAuthTokenListener=function(t){A(this.m,function(n){return n==t})},wa.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h,Sr(t.b,t.a,this.ha)),this.a&&this.a.unsubscribe(this),ya.Promise.resolve()},wa.Rb=function(t){return ta(this,function(t,n){return zi(t,Qu,{identifier:n,continueUri:Ce()?pe():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.c,t))},wa.Fc=function(t){return this.Ia(t).then(function(t){return t.data.email})},wa.Ta=function(t,n){return ta(this,this.c.Ta(t,n).then(function(){}))},wa.Ia=function(t){return ta(this,this.c.Ia(t).then(function(t){return new function(t){var n={},e=t[bu],i=t[wu];if(t=t[yu],!e||!t)throw Error("Invalid provider user info!");n[Tu]=i||null,n[Iu]=e,Be(this,ku,t),Be(this,Au,Ge(n))}(t)}))},wa.Sa=function(t){return ta(this,this.c.Sa(t).then(function(){}))},wa.cb=function(t,n){var e=this;return ta(this,J().then(function(){return void 0===n||R(n)?{}:$e(new Ye(n))}).then(function(n){return e.c.cb(t,n)}).then(function(){}))},wa.vc=function(t,n){return ta(this,Jr(this,t,n,f(this.fb,this)))};var Vc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),Fc="callback",Kc="expired-callback",qc="sitekey",Xc="size";(wa=ha.prototype).xa=function(){var t=this;return this.c?this.c:this.c=la(this,J().then(function(){if(Ce())return ye();throw new ze("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,n){return new W(function(e,i){Fe()?!Ta.grecaptcha||n!==t.c&&!t.b?(Ta[t.a]=function(){if(Ta.grecaptcha){t.c=n;var r=Ta.grecaptcha.render;Ta.grecaptcha.render=function(n,e){return n=r(n,e),t.b++,n},e()}else i(new ze("internal-error"));delete Ta[t.a]},J(ae(pt(Bc,{onload:t.a,hl:n||""}))).s(function(){i(new ze("internal-error","Unable to load external reCAPTCHA dependencies!"))})):e():i(new ze("network-request-failed"))})}(pa(),t.o())}).then(function(){return zi(t.u,ac,{})}).then(function(n){t.a[qc]=n.recaptchaSiteKey}).s(function(n){throw t.c=null,n}))},wa.render=function(){da(this);var t=this;return la(this,this.xa().then(function(){if(null===t.b){var n=t.l;if(!t.h){var e=It(n);n=At("DIV"),e.appendChild(n)}t.b=grecaptcha.render(n,t.a)}return t.b}))},wa.verify=function(){da(this);var t=this;return la(this,this.render().then(function(n){return new W(function(e){var i=grecaptcha.getResponse(n);if(i)e(i);else{var r=function(n){n&&(function(t,n){A(t.i,function(t){return t==n})}(t,r),e(n))};t.i.push(r),t.h&&grecaptcha.execute(t.b)}})}))},wa.reset=function(){da(this),null!==this.b&&grecaptcha.reset(this.b)},wa.clear=function(){da(this),this.m=!0,pa().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=It(this.l);for(var n;n=t.firstChild;)t.removeChild(n)}};var Bc=ft("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Hc=null;d(va,ha),ma(Xo.prototype,{Sa:{name:"applyActionCode",j:[ea("code")]},Ia:{name:"checkActionCode",j:[ea("code")]},Ta:{name:"confirmPasswordReset",j:[ea("code"),ea("newPassword")]},Ob:{name:"createUserWithEmailAndPassword",j:[ea("email"),ea("password")]},qb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[ea("email"),ea("password")]},Rb:{name:"fetchProvidersForEmail",j:[ea("email")]},aa:{name:"getRedirectResult",j:[]},hc:{name:"onAuthStateChanged",j:[ca(ra(),oa(),"nextOrObserver"),oa("opt_error",!0),oa("opt_completed",!0)]},ic:{name:"onIdTokenChanged",j:[ca(ra(),oa(),"nextOrObserver"),oa("opt_error",!0),oa("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[ea("email"),ca(ra("opt_actionCodeSettings",!0),aa(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[ea("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[sa()]},gb:{name:"signInAnonymously",j:[]},Gb:{name:"signInAnonymouslyAndRetrieveData",j:[]},sc:{name:"signInWithCredential",j:[sa()]},tc:{name:"signInWithCustomToken",j:[ea("token")]},Eb:{name:"signInAndRetrieveDataWithCustomToken",j:[ea("token")]},uc:{name:"signInWithEmailAndPassword",j:[ea("email"),ea("password")]},Fb:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[ea("email"),ea("password")]},vc:{name:"signInWithPhoneNumber",j:[ea("phoneNumber"),ua()]},wc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ea(null,!0)]},Ec:{name:"useDeviceLanguage",j:[]},Fc:{name:"verifyPasswordResetCode",j:[ea("code")]}}),function(t,n){for(var e in n){var i=n[e].name;if(i!==e){var r=n[e].Nb;Object.defineProperty(t,i,{get:function(){return this[e]},set:function(t){na(i,[r],[t],!0),this[e]=t},enumerable:!0})}}}(Xo.prototype,{lc:{name:"languageCode",Nb:ca(ea(),aa(),"languageCode")}}),(Xo.Persistence=Cc).LOCAL="local",Xo.Persistence.SESSION="session",Xo.Persistence.NONE="none",ma(oo.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[ia()]},getToken:{name:"getToken",j:[ia()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[sa()]},cc:{name:"linkWithCredential",j:[sa()]},dc:{name:"linkWithPhoneNumber",j:[ea("phoneNumber"),ua()]},ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sa()]},mc:{name:"reauthenticateWithCredential",j:[sa()]},nc:{name:"reauthenticateWithPhoneNumber",j:[ea("phoneNumber"),ua()]},oc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[ca(ra("opt_actionCodeSettings",!0),aa(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ea(null,!0)]},Cc:{name:"unlink",j:[ea("provider")]},kb:{name:"updateEmail",j:[ea("email")]},lb:{name:"updatePassword",j:[ea("password")]},Dc:{name:"updatePhoneNumber",j:[sa("phone")]},mb:{name:"updateProfile",j:[ra("profile")]}}),ma(W.prototype,{s:{name:"catch"},then:{name:"then"}}),ma(zr.prototype,{confirm:{name:"confirm",j:[ea("verificationCode")]}}),ga(Ii,"credential",function(t,n){return new yi(t,n)},[ea("email"),ea("password")]),ma(li.prototype,{sa:{name:"addScope",j:[ea("scope")]},Ba:{name:"setCustomParameters",j:[ra("customOAuthParameters")]}}),ga(li,"credential",di,[ca(ea(),ra(),"token")]),ma(pi.prototype,{sa:{name:"addScope",j:[ea("scope")]},Ba:{name:"setCustomParameters",j:[ra("customOAuthParameters")]}}),ga(pi,"credential",vi,[ca(ea(),ra(),"token")]),ma(mi.prototype,{sa:{name:"addScope",j:[ea("scope")]},Ba:{name:"setCustomParameters",j:[ra("customOAuthParameters")]}}),ga(mi,"credential",gi,[ca(ea(),ca(ra(),aa()),"idToken"),ca(ea(),aa(),"accessToken",!0)]),ma(bi.prototype,{Ba:{name:"setCustomParameters",j:[ra("customOAuthParameters")]}}),ga(bi,"credential",wi,[ca(ea(),ra(),"token"),ea("secret",!0)]),ma(fi.prototype,{sa:{name:"addScope",j:[ea("scope")]},credential:{name:"credential",j:[ca(ea(),aa(),"idToken",!0),ca(ea(),aa(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[ra("customOAuthParameters")]}}),ga(ki,"credential",Ei,[ea("verificationId"),ea("verificationCode")]),ma(ki.prototype,{Qa:{name:"verifyPhoneNumber",j:[ea("phoneNumber"),ua()]}}),ma(ze.prototype,{toJSON:{name:"toJSON",j:[ea(null,!0)]}}),ma(Ci.prototype,{toJSON:{name:"toJSON",j:[ea(null,!0)]}}),ma(Ri.prototype,{toJSON:{name:"toJSON",j:[ea(null,!0)]}}),ma(va.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===ya||!ya.INTERNAL||!ya.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Xo,Error:ze};ga(t,"EmailAuthProvider",Ii,[]),ga(t,"FacebookAuthProvider",li,[]),ga(t,"GithubAuthProvider",pi,[]),ga(t,"GoogleAuthProvider",mi,[]),ga(t,"TwitterAuthProvider",bi,[]),ga(t,"OAuthProvider",fi,[ea("providerId")]),ga(t,"PhoneAuthProvider",ki,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xo)}}]),ga(t,"RecaptchaVerifier",va,[ca(ea(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),ra("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof ya.app.App)}}]),ya.INTERNAL.registerService("auth",function(t,n){return t=new Xo(t),n({INTERNAL:{getUid:f(t.getUid,t),getToken:f(t.Vb,t),addAuthTokenListener:f(t.Mb,t),removeAuthTokenListener:f(t.qc,t)}}),t},t,function(t,n){if("create"===t)try{n.auth()}catch(t){}}),ya.INTERNAL.extendNamespace({User:oo})}()}).call(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"@firebase/app":30}],26:[function(require,module,exports) {
require("@firebase/auth");
},{"@firebase/auth":185}],98:[function(require,module,exports) {
"use strict";function e(e){e=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.domainBase="https://firebasestorage.googleapis.com",exports.downloadBase="https://firebasestorage.googleapis.com",exports.apiBaseUrl="/v0",exports.apiUploadBaseUrl="/v0",exports.setDomainBase=e,exports.configOption="storageBucket",exports.shortMaxOperationRetryTime=6e4,exports.defaultMaxOperationRetryTime=12e4,exports.defaultMaxUploadRetryTime=6e4,exports.minSafeInteger=-9007199254740991;
},{}],87:[function(require,module,exports) {
"use strict";function e(e){return"storage/"+e}function t(){return new R(exports.Code.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function n(e){return new R(exports.Code.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function o(e){return new R(exports.Code.BUCKET_NOT_FOUND,"Bucket '"+e+"' does not exist.")}function r(e){return new R(exports.Code.PROJECT_NOT_FOUND,"Project '"+e+"' does not exist.")}function i(e){return new R(exports.Code.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s(){return new R(exports.Code.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function u(e){return new R(exports.Code.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function a(){return new R(exports.Code.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d(e,t,n){return new R(exports.Code.INVALID_CHECKSUM,"Uploaded/downloaded object '"+e+"' has checksum '"+t+"' which does not match '"+n+"'. Please retry the upload/download.")}function c(){return new R(exports.Code.CANCELED,"User canceled the upload/download.")}function p(e){return new R(exports.Code.INVALID_EVENT_NAME,"Invalid event name '"+e+"'.")}function l(e){return new R(exports.Code.INVALID_URL,"Invalid URL '"+e+"'.")}function E(e){return new R(exports.Code.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function _(){return new R(exports.Code.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U.configOption+"' property when initializing the app?")}function N(){return new R(exports.Code.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f(){return new R(exports.Code.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x(){return new R(exports.Code.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function C(e,t,n){return new R(exports.Code.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function O(e,t,n,o){var r,i;return e===t?(r=e,i=1===e?"argument":"arguments"):(r="between "+e+" and "+t,i="arguments"),new R(exports.Code.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+r+" "+i+", received "+o+".")}function T(){return new R(exports.Code.APP_DELETED,"The Firebase app was deleted.")}function I(e){return new R(exports.Code.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function D(e,t){return new R(exports.Code.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function A(e){throw new R(exports.Code.INTERNAL_ERROR,"Internal error: "+e)}Object.defineProperty(exports,"__esModule",{value:!0});var U=require("./constants"),R=function(){function t(t,n){this.code_=e(t),this.message_="Firebase Storage: "+n,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return e(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}();exports.FirebaseStorageError=R,exports.errors={},exports.Code={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},exports.prependCode=e,exports.unknown=t,exports.objectNotFound=n,exports.bucketNotFound=o,exports.projectNotFound=r,exports.quotaExceeded=i,exports.unauthenticated=s,exports.unauthorized=u,exports.retryLimitExceeded=a,exports.invalidChecksum=d,exports.canceled=c,exports.invalidEventName=p,exports.invalidUrl=l,exports.invalidDefaultBucket=E,exports.noDefaultBucket=_,exports.cannotSliceBlob=N,exports.serverFileWrongSize=f,exports.noDownloadURL=x,exports.invalidArgument=C,exports.invalidArgumentCount=O,exports.appDeleted=T,exports.invalidRootOperation=I,exports.invalidFormat=D,exports.internalError=A;
},{"./constants":98}],92:[function(require,module,exports) {
"use strict";function t(t){return null!=t}function e(t){return void 0!==t}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t}function o(t){return r(t)&&null!==t}function i(t){return r(t)&&!Array.isArray(t)}function u(t){return"string"==typeof t||t instanceof String}function s(t){return"number"==typeof t||t instanceof Number}function f(t){return c()&&t instanceof Blob}function c(){return"undefined"!=typeof Blob}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDef=t,exports.isJustDef=e,exports.isFunction=n,exports.isObject=r,exports.isNonNullObject=o,exports.isNonArrayObject=i,exports.isString=u,exports.isNumber=s,exports.isNativeBlob=f,exports.isNativeBlobDefined=c;
},{}],71:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./error"),t=function(){function t(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(r){var n;try{n=t.makeFromUrl(r)}catch(e){return new t(r,"")}if(""===n.path)return n;throw e.invalidDefaultBucket(r)},t.makeFromUrl=function(r){for(var n=null,o="([A-Za-z0-9.\\-]+)",i=[{regex:new RegExp("^gs://"+o+"(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/"+o+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<i.length;a++){var c=i[a],p=c.regex.exec(r);if(p){var u=p[c.indices.bucket],h=p[c.indices.path];h||(h=""),n=new t(u,h),c.postModify(n);break}}if(null==n)throw e.invalidUrl(r);return n},t}();exports.Location=t;
},{"./error":87}],109:[function(require,module,exports) {
"use strict";function e(e){var t;try{t=JSON.parse(e)}catch(e){return null}return r.isNonArrayObject(t)?t:null}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./type");exports.jsonObjectOrNull=e;
},{"./type":92}],90:[function(require,module,exports) {
"use strict";function e(e){if(0==e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";return e.slice(0,t)}function t(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function n(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parent=e,exports.child=t,exports.lastComponent=n;
},{}],89:[function(require,module,exports) {
"use strict";function r(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function t(t,e){for(var n in t)r(t,n)&&e(n,t[n])}function e(r){if(null==r)return{};var e={};return t(r,function(r,t){e[r]=t}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.contains=r,exports.forEach=t,exports.clone=e;
},{}],110:[function(require,module,exports) {
"use strict";function e(e){return n.domainBase+n.apiBaseUrl+e}function r(e){return n.downloadBase+n.apiBaseUrl+e}function o(e){return n.domainBase+n.apiUploadBaseUrl+e}function a(e){var r=encodeURIComponent,o="?";return t.forEach(e,function(e,a){var n=r(e)+"="+r(a);o=o+n+"&"}),o=o.slice(0,-1)}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./constants"),t=require("./object");exports.makeNormalUrl=e,exports.makeDownloadUrl=r,exports.makeUploadUrl=o,exports.makeQueryString=a;
},{"./constants":98,"./object":89}],88:[function(require,module,exports) {
"use strict";function e(e,t){return t}function t(e){return!p.isString(e)||e.length<2?e:(e=e,c.lastComponent(e))}function n(){if(d)return d;var e=[];e.push(new h("bucket")),e.push(new h("generation")),e.push(new h("metageneration")),e.push(new h("name","fullPath",!0));var n=new h("name");n.xform=function(e,n){return t(n)},e.push(n);var r=new h("size");return r.xform=function(e,t){return p.isDef(t)?+t:t},e.push(r),e.push(new h("timeCreated")),e.push(new h("updated")),e.push(new h("md5Hash",null,!0)),e.push(new h("cacheControl",null,!0)),e.push(new h("contentDisposition",null,!0)),e.push(new h("contentEncoding",null,!0)),e.push(new h("contentLanguage",null,!0)),e.push(new h("contentType",null,!0)),e.push(new h("metadata","customMetadata",!0)),e.push(new h("downloadTokens","downloadURLs",!1,function(e,t){if(!(p.isString(t)&&t.length>0))return[];var n=encodeURIComponent;return t.split(",").map(function(t){var r=e.bucket,o=e.fullPath,u="/b/"+n(r)+"/o/"+n(o);return f.makeDownloadUrl(u)+f.makeQueryString({alt:"media",token:t})})})),d=e}function r(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,o=new l.Location(n,r);return t.makeStorageReference(o)}})}function o(e,t,n){var o={};o.type="file";for(var u=n.length,a=0;a<u;a++){var i=n[a];o[i.local]=i.xform(o,t[i.server])}return r(o,e),o}function u(e,t,n){var r=s.jsonObjectOrNull(t);if(null===r)return null;return o(e,r,n)}function a(e,t){for(var n={},r=t.length,o=0;o<r;o++){var u=t[o];u.writable&&(n[u.server]=e[u.local])}return JSON.stringify(n)}function i(e){if(!(e&&p.isObject(e)))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!p.isObject(n))throw"Expected object for 'customMetadata' mapping."}else if(p.isNonNullObject(n))throw"Mapping for '"+t+"' cannot be an object."}}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./json"),l=require("./location"),c=require("./path"),p=require("./type"),f=require("./url");exports.noXform_=e;var h=function(){return function(t,n,r,o){this.server=t,this.local=n||t,this.writable=!!r,this.xform=o||e}}();exports.Mapping=h;var d=null;exports.xformPath=t,exports.getMappings=n,exports.addRef=r,exports.fromResource=o,exports.fromResourceString=u,exports.toResourceString=a,exports.metadataValidator=i;
},{"./location":71,"./type":92,"./json":109,"./path":90,"./url":110}],70:[function(require,module,exports) {
"use strict";function t(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw c.invalidArgumentCount(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?c.invalidArgument(o,t,e.message):c.invalidArgument(o,t,e)}}function e(t,e){return function(n){t(n),e(n)}}function n(t,n){function r(t){if(!l.isString(t))throw"Expected string."}var i;return i=t?e(r,t):r,new s(i,n)}function r(){return new s(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||l.isNativeBlobDefined()&&t instanceof Blob))throw"Expected Blob or File."})}function i(t){return new s(f.metadataValidator,t)}function o(){return new s(function(t){if(!(l.isNumber(t)&&t>=0))throw"Expected a number 0 or greater."})}function a(t,e){return new s(function(e){if(!(null===e||l.isDef(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function u(t){return new s(function(t){if(null!==t&&!l.isFunction(t))throw"Expected a Function."},t)}Object.defineProperty(exports,"__esModule",{value:!0});var c=require("./error"),f=require("./metadata"),l=require("./type");exports.validate=t;var s=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!l.isJustDef(e)||t(e)},this.optional=!!e}}();exports.ArgSpec=s,exports.and_=e,exports.stringSpec=n,exports.uploadDataSpec=r,exports.metadataSpec=i,exports.nonNegativeNumberSpec=o,exports.looseObjectSpec=a,exports.nullFunctionSpec=u;
},{"./error":87,"./type":92,"./metadata":88}],72:[function(require,module,exports) {
"use strict";function e(e){return new Promise(e)}function r(e){return Promise.resolve(e)}function t(e){return Promise.reject(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.make=e,exports.resolve=r,exports.reject=t;
},{}],111:[function(require,module,exports) {
"use strict";function e(e,r){return-1!==e.indexOf(r)}function r(e){return Array.prototype.slice.call(e)}function t(e,r){var t=e.indexOf(r);-1!==t&&e.splice(t,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.contains=e,exports.clone=r,exports.remove=t;
},{}],106:[function(require,module,exports) {
"use strict";function e(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var t=e();if(void 0!==t){for(var l=new t,n=0;n<r.length;n++)l.append(r[n]);return l.getBlob()}if(o.isNativeBlobDefined())return new Blob(r);throw Error("This browser doesn't seem to support creating Blobs")}function i(e,r,i){return e.webkitSlice?e.webkitSlice(r,i):e.mozSlice?e.mozSlice(r,i):e.slice?e.slice(r,i):null}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./type");exports.getBlob=r,exports.sliceBlob=i;
},{"./type":92}],56:[function(require,module,exports) {
"use strict";function t(t){switch(t){case exports.StringFormat.RAW:case exports.StringFormat.BASE64:case exports.StringFormat.BASE64URL:case exports.StringFormat.DATA_URL:return;default:throw"Expected one of the event types: ["+exports.StringFormat.RAW+", "+exports.StringFormat.BASE64+", "+exports.StringFormat.BASE64URL+", "+exports.StringFormat.DATA_URL+"]."}}function r(t,r){switch(t){case exports.StringFormat.RAW:return new u(e(r));case exports.StringFormat.BASE64:case exports.StringFormat.BASE64URL:return new u(a(t,r));case exports.StringFormat.DATA_URL:return new u(o(r),s(r))}throw c.unknown()}function e(t){for(var r=[],e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<=127)r.push(n);else if(n<=2047)r.push(192|n>>6,128|63&n);else if(55296==(64512&n)){if(e<t.length-1&&56320==(64512&t.charCodeAt(e+1))){n=65536|(1023&n)<<10|1023&t.charCodeAt(++e),r.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)}else r.push(239,191,189)}else 56320==(64512&n)?r.push(239,191,189):r.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(r)}function n(t){var r;try{r=decodeURIComponent(t)}catch(t){throw c.invalidFormat(exports.StringFormat.DATA_URL,"Malformed data URL.")}return e(r)}function a(t,r){switch(t){case exports.StringFormat.BASE64:var e=-1!==r.indexOf("-"),n=-1!==r.indexOf("_");if(e||n){var a=e?"-":"_";throw c.invalidFormat(t,"Invalid character '"+a+"' found: is it base64url encoded?")}break;case exports.StringFormat.BASE64URL:var o=-1!==r.indexOf("+"),s=-1!==r.indexOf("/");if(o||s){a=o?"+":"/";throw c.invalidFormat(t,"Invalid character '"+a+"' found: is it base64 encoded?")}r=r.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(r)}catch(r){throw c.invalidFormat(t,"Invalid character found")}for(var u=new Uint8Array(i.length),p=0;p<i.length;p++)u[p]=i.charCodeAt(p);return u}function o(t){var r=new p(t);return r.base64?a(exports.StringFormat.BASE64,r.rest):n(r.rest)}function s(t){return new p(t).contentType}function i(t,r){return!!(t.length>=r.length)&&t.substring(t.length-r.length)===r}Object.defineProperty(exports,"__esModule",{value:!0});var c=require("./error");exports.StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},exports.formatValidator=t;var u=function(){return function(t,r){this.data=t,this.contentType=r||null}}();exports.StringData=u,exports.dataFromString=r,exports.utf8Bytes_=e,exports.percentEncodedBytes_=n,exports.base64Bytes_=a;var p=function(){return function(t){this.base64=!1,this.contentType=null;var r=t.match(/^data:([^,]+)?,/);if(null===r)throw c.invalidFormat(exports.StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var e=r[1]||null;null!=e&&(this.base64=i(e,";base64"),this.contentType=this.base64?e.substring(0,e.length-";base64".length):e),this.rest=t.substring(t.indexOf(",")+1)}}();exports.dataURLBytes_=o,exports.dataURLContentType_=s;
},{"./error":87}],86:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./fs"),e=require("./string"),r=require("./string"),n=require("./type"),a=function(){function a(t,e){var r=0,a="";n.isNativeBlob(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}return a.prototype.size=function(){return this.size_},a.prototype.type=function(){return this.type_},a.prototype.slice=function(e,r){if(n.isNativeBlob(this.data_)){var i=this.data_,o=t.sliceBlob(i,e,r);return null===o?null:new a(o)}return new a(new Uint8Array(this.data_.buffer,e,r-e),!0)},a.getBlob=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n.isNativeBlobDefined()){var s=i.map(function(t){return t instanceof a?t.data_:t});return new a(t.getBlob.apply(null,s))}var u=i.map(function(t){return n.isString(t)?e.dataFromString(r.StringFormat.RAW,t).data:t.data_}),f=0;u.forEach(function(t){f+=t.byteLength});var h=new Uint8Array(f),l=0;return u.forEach(function(t){for(var e=0;e<t.length;e++)h[l++]=t[e]}),new a(h,!0)},a.prototype.uploadData=function(){return this.data_},a}();exports.FbsBlob=a;
},{"./type":92,"./fs":106,"./string":56}],117:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){return function(s,t,e,r){this.url=s,this.method=t,this.handler=e,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();exports.RequestInfo=s;
},{}],91:[function(require,module,exports) {
"use strict";function e(e){if(!e)throw h.unknown()}function r(r,t){return function(n,o){var a=U.fromResourceString(r,o,t);return e(null!==a),a}}function t(e){return function(r,t){var n;return(n=401===r.getStatus()?h.unauthenticated():402===r.getStatus()?h.quotaExceeded(e.bucket):403===r.getStatus()?h.unauthorized(e.path):t).setServerResponseProp(t.serverResponseProp()),n}}function n(e){var r=t(e);return function(t,n){var o=r(t,n);return 404===t.getStatus()&&(o=h.objectNotFound(e.path)),o.setServerResponseProp(n.serverResponseProp()),o}}function o(e,t,o){var a=t.fullServerUrl(),u=S.makeNormalUrl(a),l=e.maxOperationRetryTime(),i=new R.RequestInfo(u,"GET",r(e,o),l);return i.errorHandler=n(t),i}function a(e,t,o,a){var u=t.fullServerUrl(),l=S.makeNormalUrl(u),i=U.toResourceString(o,a),s=e.maxOperationRetryTime(),p=new R.RequestInfo(l,"PATCH",r(e,a),s);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=i,p.errorHandler=n(t),p}function u(e,r){var t=r.fullServerUrl(),o=S.makeNormalUrl(t),a=e.maxOperationRetryTime(),u=new R.RequestInfo(o,"DELETE",function(e,r){},a);return u.successCodes=[200,204],u.errorHandler=n(r),u}function l(e,r){return e&&e.contentType||r&&r.type()||"application/octet-stream"}function i(e,r,t){var n=y.clone(t);return n.fullPath=e.path,n.size=r.size(),n.contentType||(n.contentType=l(null,r)),n}function s(e,n,o,a,u){var l=n.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},p=function(){for(var e="",r=0;r<2;r++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+p;var c=i(n,a,u),d="--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+U.toResourceString(c,o)+"\r\n--"+p+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",f="\r\n--"+p+"--",m=v.FbsBlob.getBlob(d,a,f);if(null===m)throw h.cannotSliceBlob();var y={name:c.fullPath},g=S.makeUploadUrl(l),b=e.maxUploadRetryTime(),T=new R.RequestInfo(g,"POST",r(e,o),b);return T.urlParams=y,T.headers=s,T.body=m.uploadData(),T.errorHandler=t(n),T}function p(r,t){var n;try{n=r.getResponseHeader("X-Goog-Upload-Status")}catch(r){e(!1)}var o=t||["active"];return e(m.contains(o,n)),n}function c(r,n,o,a,u){var l=n.bucketOnlyServerUrl(),s=i(n,a,u),c={name:s.fullPath},d=S.makeUploadUrl(l),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":a.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=U.toResourceString(s,o),v=r.maxUploadRetryTime(),h=new R.RequestInfo(d,"POST",function(r,t){p(r);var n;try{n=r.getResponseHeader("X-Goog-Upload-URL")}catch(r){e(!1)}return e(g.isString(n)),n},v);return h.urlParams=c,h.headers=f,h.body=m,h.errorHandler=t(n),h}function d(r,n,o,a){var u=r.maxUploadRetryTime(),l=new R.RequestInfo(o,"POST",function(r,t){var n,o=p(r,["active","final"]);try{n=r.getResponseHeader("X-Goog-Upload-Size-Received")}catch(r){e(!1)}var u=parseInt(n,10);return e(!isNaN(u)),new b(u,a.size(),"final"===o)},u);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=t(n),l}function f(e,n,o,a,u,l,i,s){var c=new b(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw h.serverFileWrongSize();var d=c.total-c.current,f=d;u>0&&(f=Math.min(f,u));var m=c.current,v=m+f,U={"X-Goog-Upload-Command":f===d?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},y=a.slice(m,v);if(null===y)throw h.cannotSliceBlob();var g=n.maxUploadRetryTime(),S=new R.RequestInfo(o,"POST",function(e,t){var o,u=p(e,["active","final"]),i=c.current+f,s=a.size();return o="final"===u?r(n,l)(e,t):null,new b(i,s,"final"===u,o)},g);return S.headers=U,S.body=y.uploadData(),S.progressCallback=s||null,S.errorHandler=t(e),S}Object.defineProperty(exports,"__esModule",{value:!0});var m=require("./array"),v=require("./blob"),h=require("./error"),U=require("./metadata"),y=require("./object"),R=require("./requestinfo"),g=require("./type"),S=require("./url");exports.handlerCheck=e,exports.metadataHandler=r,exports.sharedErrorHandler=t,exports.objectErrorHandler=n,exports.getMetadata=o,exports.updateMetadata=a,exports.deleteObject=u,exports.determineContentType_=l,exports.metadataForUpload_=i,exports.multipartUpload=s;var b=function(){return function(e,r,t,n){this.current=e,this.total=r,this.finalized=!!t,this.metadata=n||null}}();exports.ResumableUploadStatus=b,exports.checkResumeHeader_=p,exports.createResumableUpload=c,exports.getResumableUploadStatus=d,exports.resumableUploadChunkSize=262144,exports.continueResumableUpload=f;
},{"./array":111,"./error":87,"./metadata":88,"./object":89,"./type":92,"./url":110,"./blob":86,"./requestinfo":117}],206:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,a,n,r,s){this.bytesTransferred=t,this.totalBytes=e,this.state=a,this.metadata=n,this.task=r,this.ref=s}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();exports.UploadTaskSnapshot=t;
},{}],55:[function(require,module,exports) {
"use strict";function e(e){switch(e){case exports.InternalTaskState.RUNNING:case exports.InternalTaskState.PAUSING:case exports.InternalTaskState.CANCELING:return exports.TaskState.RUNNING;case exports.InternalTaskState.PAUSED:return exports.TaskState.PAUSED;case exports.InternalTaskState.SUCCESS:return exports.TaskState.SUCCESS;case exports.InternalTaskState.CANCELED:return exports.TaskState.CANCELED;case exports.InternalTaskState.ERROR:default:return exports.TaskState.ERROR}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TaskEvent={STATE_CHANGED:"state_changed"},exports.InternalTaskState={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},exports.TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"},exports.taskStateFromInternalTaskState=e;
},{}],207:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./type"),t=function(){return function(t,r,i){if(e.isFunction(t)||e.isDef(r)||e.isDef(i))this.next=t,this.error=r||null,this.complete=i||null;else{var l=t;this.next=l.next||null,this.error=l.error||null,this.complete=l.complete||null}}}();exports.Observer=t;
},{"./type":92}],208:[function(require,module,exports) {
"use strict";function e(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];r.resolve(!0).then(function(){e.apply(null,n)})}}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./promise_external");exports.async=e;
},{"./promise_external":72}],85:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./implementation/taskenums"),e=require("./implementation/observer"),a=require("./implementation/taskenums"),r=require("./tasksnapshot"),n=require("./implementation/args"),s=require("./implementation/array"),i=require("./implementation/async"),o=require("./implementation/error"),l=require("./implementation/promise_external"),u=require("./implementation/requests"),_=require("./implementation/taskenums"),h=require("./implementation/type"),c=function(){function c(e,a,r,n,s,i){void 0===i&&(i=null);var u=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=a,this.location_=r,this.blob_=s,this.metadata_=i,this.mappings_=n,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=t.InternalTaskState.RUNNING,this.errorHandler_=function(e){u.request_=null,u.chunkMultiplier_=1,e.codeEquals(o.Code.CANCELED)?(u.needToFetchStatus_=!0,u.completeTransitions_()):(u.error_=e,u.transition_(t.InternalTaskState.ERROR))},this.metadataErrorHandler_=function(e){u.request_=null,e.codeEquals(o.Code.CANCELED)?u.completeTransitions_():(u.error_=e,u.transition_(t.InternalTaskState.ERROR))},this.promise_=l.make(function(t,e){u.resolve_=t,u.reject_=e,u.start_()}),this.promise_.then(null,function(){})}return c.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(a,r){t.updateProgress_(e+a)}},c.prototype.shouldDoResumable_=function(t){return t.size()>262144},c.prototype.start_=function(){this.state_===t.InternalTaskState.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},c.prototype.resolveToken_=function(e){var a=this;this.authWrapper_.getAuthToken().then(function(r){switch(a.state_){case t.InternalTaskState.RUNNING:e(r);break;case t.InternalTaskState.CANCELING:a.transition_(t.InternalTaskState.CANCELED);break;case t.InternalTaskState.PAUSING:a.transition_(t.InternalTaskState.PAUSED)}})},c.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var a=u.createResumableUpload(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(a,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},c.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(a){var r=u.getResumableUploadStatus(t.authWrapper_,t.location_,e,t.blob_),n=t.authWrapper_.makeRequest(r,a);t.request_=n,n.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},c.prototype.continueUpload_=function(){var e=this,a=u.resumableUploadChunkSize*this.chunkMultiplier_,r=new u.ResumableUploadStatus(this.transferred_,this.blob_.size()),n=this.uploadUrl_;this.resolveToken_(function(s){var i;try{i=u.continueResumableUpload(e.location_,e.authWrapper_,n,e.blob_,a,e.mappings_,r,e.makeProgressCallback_())}catch(a){return e.error_=a,void e.transition_(t.InternalTaskState.ERROR)}var o=e.authWrapper_.makeRequest(i,s);e.request_=o,o.getPromise().then(function(a){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(a.current),a.finalized?(e.metadata_=a.metadata,e.transition_(t.InternalTaskState.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},c.prototype.increaseMultiplier_=function(){u.resumableUploadChunkSize*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},c.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(a){var r=u.getMetadata(e.authWrapper_,e.location_,e.mappings_),n=e.authWrapper_.makeRequest(r,a);e.request_=n,n.getPromise().then(function(a){e.request_=null,e.metadata_=a,e.transition_(t.InternalTaskState.SUCCESS)},e.metadataErrorHandler_)})},c.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(a){var r=u.multipartUpload(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.authWrapper_.makeRequest(r,a);e.request_=n,n.getPromise().then(function(a){e.request_=null,e.metadata_=a,e.updateProgress_(e.blob_.size()),e.transition_(t.InternalTaskState.SUCCESS)},e.errorHandler_)})},c.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},c.prototype.transition_=function(e){if(this.state_!==e)switch(e){case t.InternalTaskState.CANCELING:case t.InternalTaskState.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case t.InternalTaskState.RUNNING:var a=this.state_===t.InternalTaskState.PAUSED;this.state_=e,a&&(this.notifyObservers_(),this.start_());break;case t.InternalTaskState.PAUSED:this.state_=e,this.notifyObservers_();break;case t.InternalTaskState.CANCELED:this.error_=o.canceled(),this.state_=e,this.notifyObservers_();break;case t.InternalTaskState.ERROR:case t.InternalTaskState.SUCCESS:this.state_=e,this.notifyObservers_()}},c.prototype.completeTransitions_=function(){switch(this.state_){case t.InternalTaskState.PAUSING:this.transition_(t.InternalTaskState.PAUSED);break;case t.InternalTaskState.CANCELING:this.transition_(t.InternalTaskState.CANCELED);break;case t.InternalTaskState.RUNNING:this.start_()}},Object.defineProperty(c.prototype,"snapshot",{get:function(){var t=_.taskStateFromInternalTaskState(this.state_);return new r.UploadTaskSnapshot(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),c.prototype.on=function(t,r,s,i){function o(t){try{return void _(t)}catch(t){}try{c(t);if(!(h.isJustDef(t.next)||h.isJustDef(t.error)||h.isJustDef(t.complete)))throw"";return}catch(t){throw u}}function l(t){return function(a,r,s){null!==t&&n.validate("on",t,arguments);var o=new e.Observer(a,r,i);return d.addObserver_(o),function(){d.removeObserver_(o)}}}void 0===r&&(r=void 0),void 0===s&&(s=void 0),void 0===i&&(i=void 0);var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",_=n.nullFunctionSpec(!0).validator,c=n.looseObjectSpec(null,!0).validator,p=[n.stringSpec(function(e){if(t!==a.TaskEvent.STATE_CHANGED)throw"Expected one of the event types: ["+a.TaskEvent.STATE_CHANGED+"]."}),n.looseObjectSpec(o,!0),n.nullFunctionSpec(!0),n.nullFunctionSpec(!0)];n.validate("on",p,arguments);var d=this,S=[n.looseObjectSpec(function(t){if(null===t)throw u;o(t)}),n.nullFunctionSpec(!0),n.nullFunctionSpec(!0)];return!(h.isJustDef(r)||h.isJustDef(s)||h.isJustDef(i))?l(S):l(null)(r,s,i)},c.prototype.then=function(t,e){return this.promise_.then(t,e)},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},c.prototype.removeObserver_=function(t){s.remove(this.observers_,t)},c.prototype.notifyObservers_=function(){var t=this;this.finishPromise_();s.clone(this.observers_).forEach(function(e){t.notifyObserver_(e)})},c.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(_.taskStateFromInternalTaskState(this.state_)){case a.TaskState.SUCCESS:i.async(this.resolve_.bind(null,this.snapshot))();break;case a.TaskState.CANCELED:case a.TaskState.ERROR:var e=this.reject_;i.async(e.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},c.prototype.notifyObserver_=function(t){switch(_.taskStateFromInternalTaskState(this.state_)){case a.TaskState.RUNNING:case a.TaskState.PAUSED:null!==t.next&&i.async(t.next.bind(t,this.snapshot))();break;case a.TaskState.SUCCESS:null!==t.complete&&i.async(t.complete.bind(t))();break;case a.TaskState.CANCELED:case a.TaskState.ERROR:null!==t.error&&i.async(t.error.bind(t,this.error_))();break;default:null!==t.error&&i.async(t.error.bind(t,this.error_))()}},c.prototype.resume=function(){n.validate("resume",[],arguments);var e=this.state_===t.InternalTaskState.PAUSED||this.state_===t.InternalTaskState.PAUSING;return e&&this.transition_(t.InternalTaskState.RUNNING),e},c.prototype.pause=function(){n.validate("pause",[],arguments);var e=this.state_===t.InternalTaskState.RUNNING;return e&&this.transition_(t.InternalTaskState.PAUSING),e},c.prototype.cancel=function(){n.validate("cancel",[],arguments);var e=this.state_===t.InternalTaskState.RUNNING||this.state_===t.InternalTaskState.PAUSING;return e&&this.transition_(t.InternalTaskState.CANCELING),e},c}();exports.UploadTask=c;
},{"./implementation/args":70,"./implementation/error":87,"./implementation/promise_external":72,"./implementation/requests":91,"./implementation/type":92,"./tasksnapshot":206,"./implementation/taskenums":55,"./implementation/observer":207,"./implementation/array":111,"./implementation/async":208}],51:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./implementation/args"),e=require("./implementation/blob"),o=require("./implementation/error"),r=require("./implementation/location"),a=require("./implementation/metadata"),n=require("./implementation/object"),i=require("./implementation/path"),p=require("./implementation/requests"),u=require("./implementation/string"),c=require("./implementation/string"),h=require("./implementation/type"),l=require("./task"),s=function(){function s(t,e){this.authWrapper=t,e instanceof r.Location?this.location=e:this.location=r.Location.makeFromUrl(e)}return s.prototype.toString=function(){return t.validate("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},s.prototype.newRef=function(t,e){return new s(t,e)},s.prototype.mappings=function(){return a.getMappings()},s.prototype.child=function(e){t.validate("child",[t.stringSpec()],arguments);var o=i.child(this.location.path,e),a=new r.Location(this.location.bucket,o);return this.newRef(this.authWrapper,a)},Object.defineProperty(s.prototype,"parent",{get:function(){var t=i.parent(this.location.path);if(null===t)return null;var e=new r.Location(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){var t=new r.Location(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return i.lastComponent(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),s.prototype.put=function(o,r){return void 0===r&&(r=null),t.validate("put",[t.uploadDataSpec(),t.metadataSpec(!0)],arguments),this.throwIfRoot_("put"),new l.UploadTask(this,this.authWrapper,this.location,this.mappings(),new e.FbsBlob(o),r)},s.prototype.putString=function(o,r,a){void 0===r&&(r=c.StringFormat.RAW),t.validate("putString",[t.stringSpec(),t.stringSpec(u.formatValidator,!0),t.metadataSpec(!0)],arguments),this.throwIfRoot_("putString");var i=u.dataFromString(r,o),p=n.clone(a);return!h.isDef(p.contentType)&&h.isDef(i.contentType)&&(p.contentType=i.contentType),new l.UploadTask(this,this.authWrapper,this.location,this.mappings(),new e.FbsBlob(i.data,!0),p)},s.prototype.delete=function(){t.validate("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then(function(t){var o=p.deleteObject(e.authWrapper,e.location);return e.authWrapper.makeRequest(o,t).getPromise()})},s.prototype.getMetadata=function(){t.validate("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(t){var o=p.getMetadata(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(o,t).getPromise()})},s.prototype.updateMetadata=function(e){t.validate("updateMetadata",[t.metadataSpec()],arguments),this.throwIfRoot_("updateMetadata");var o=this;return this.authWrapper.getAuthToken().then(function(t){var r=p.updateMetadata(o.authWrapper,o.location,e,o.mappings());return o.authWrapper.makeRequest(r,t).getPromise()})},s.prototype.getDownloadURL=function(){return t.validate("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(h.isDef(e))return e;throw o.noDownloadURL()})},s.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw o.invalidRootOperation(t)},s}();exports.Reference=s;
},{"./implementation/args":70,"./implementation/location":71,"./task":85,"./implementation/blob":86,"./implementation/error":87,"./implementation/metadata":88,"./implementation/object":89,"./implementation/path":90,"./implementation/requests":91,"./implementation/string":56,"./implementation/type":92}],99:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./promise_external"),t=function(){function t(t){this.promise_=e.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){void 0===e&&(e=!1)},t}();exports.FailRequest=t;
},{"./promise_external":72}],100:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./object"),e=require("./constants"),i=function(){function i(){this.map_={},this.id_=e.minSafeInteger}return i.prototype.addRequest=function(t){function e(){delete n.map_[i]}var i=this.id_;this.id_++,this.map_[i]=t;var n=this;t.getPromise().then(e,e)},i.prototype.clear=function(){t.forEach(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},i}();exports.RequestMap=i;
},{"./object":89,"./constants":98}],73:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants"),t=require("./error"),r=require("./failrequest"),i=require("./location"),n=require("./promise_external"),o=require("./requestmap"),u=require("./type"),p=function(){function p(t,r,i,n,a){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;u.isDef(s)&&(this.bucket_=p.extractBucket_(s))}this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=n,this.maxOperationRetryTime_=e.defaultMaxOperationRetryTime,this.maxUploadRetryTime_=e.defaultMaxUploadRetryTime,this.requestMap_=new o.RequestMap}return p.extractBucket_=function(t){var r=t[e.configOption]||null;if(null==r)return null;return i.Location.makeFromBucketSpec(r).bucket},p.prototype.getAuthToken=function(){return null!==this.app_&&u.isDef(this.app_.INTERNAL)&&u.isDef(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):n.resolve(null)},p.prototype.bucket=function(){if(this.deleted_)throw t.appDeleted();return this.bucket_},p.prototype.service=function(){return this.service_},p.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},p.prototype.makeRequest=function(e,i){if(this.deleted_)return new r.FailRequest(t.appDeleted());var n=this.requestMaker_(e,i,this.pool_);return this.requestMap_.addRequest(n),n},p.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},p.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},p.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},p.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},p.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},p}();exports.AuthWrapper=p;
},{"./error":87,"./constants":98,"./failrequest":99,"./promise_external":72,"./location":71,"./requestmap":100,"./type":92}],112:[function(require,module,exports) {
"use strict";function n(n,t,e){function u(){return 2===a}function l(){p||(p=!0,t.apply(null,arguments))}function o(t){c=setTimeout(function(){c=null,n(i,u())},t)}function i(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!p)if(n)l.apply(null,arguments);else{if(u()||s)l.apply(null,arguments);else{f<64&&(f*=2);var i;1===a?(a=2,i=0):i=1e3*(f+Math.random()),o(i)}}}function r(n){m||(m=!0,p||(null!==c?(n||(a=2),clearTimeout(c),o(0)):n||(a=1)))}var f=1,c=null,s=!1,a=0,p=!1,m=!1;return o(0),setTimeout(function(){s=!0,r(!0)},e),r}function t(n){n(!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.start=n,exports.stop=t;
},{}],113:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var R;!function(R){R[R.NO_ERROR=0]="NO_ERROR",R[R.NETWORK_ERROR=1]="NETWORK_ERROR",R[R.ABORT=2]="ABORT"}(R=exports.ErrorCode||(exports.ErrorCode={}));
},{}],74:[function(require,module,exports) {
"use strict";function e(e,r){null!==r&&r.length>0&&(e.Authorization="Firebase "+r)}function r(e){var r=void 0!==s.default?s.default.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+r}function t(t,s,o){var a=c.makeQueryString(t.urlParams),i=t.url+a,l=n.clone(t.headers);return e(l,s),r(l),new _(i,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o)}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("@firebase/app"),o=require("./array"),a=require("./backoff"),i=require("./error"),n=require("./object"),l=require("./promise_external"),u=require("./type"),c=require("./url"),d=require("./xhrio"),_=function(){function e(e,r,t,s,o,a,i,n,u,c,d){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=r,this.headers_=t,this.body_=s,this.successCodes_=o.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=i,this.errorCallback_=n,this.progressCallback_=c,this.timeout_=u,this.pool_=d;var _=this;this.promise_=l.make(function(e,r){_.resolve_=e,_.reject_=r,_.start_()})}return e.prototype.start_=function(){function e(e,r){function s(e){var r=e.loaded,s=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(r,s)}if(r)e(!1,new h(!1,null,!0));else{var a=t.pool_.createXhrIo();t.pendingXhr_=a,null!==t.progressCallback_&&a.addUploadProgressListener(s),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(r){null!==t.progressCallback_&&r.removeUploadProgressListener(s),t.pendingXhr_=null;var a=(r=r).getErrorCode()===d.ErrorCode.NO_ERROR,i=r.getStatus();if(a&&!t.isRetryStatusCode_(i)){var n=o.contains(t.successCodes_,i);e(!0,new h(n,r))}else{var l=r.getErrorCode()===d.ErrorCode.ABORT;e(!1,new h(!1,null,l))}})}}function r(e,r){var s=t.resolve_,o=t.reject_,a=r.xhr;if(r.wasSuccessCode)try{var n=t.callback_(a,a.getResponseText());u.isJustDef(n)?s(n):s()}catch(e){o(e)}else if(null!==a){(l=i.unknown()).setServerResponseProp(a.getResponseText()),t.errorCallback_?o(t.errorCallback_(a,l)):o(l)}else if(r.canceled){o(l=t.appDelete_?i.appDeleted():i.canceled())}else{var l;o(l=i.retryLimitExceeded())}}var t=this;this.canceled_?r(0,new h(!1,null,!0)):this.backoffId_=a.start(e,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&a.stop(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var r=e>=500&&e<600,t=o.contains([408,429],e),s=o.contains(this.additionalRetryCodes_,e);return r||t||s},e}(),h=function(){return function(e,r,t){this.wasSuccessCode=e,this.xhr=r,this.canceled=!!t}}();exports.RequestEndStatus=h,exports.addAuthHeader_=e,exports.addVersionHeader_=r,exports.makeRequest=t;
},{"./error":87,"./promise_external":72,"./type":92,"./url":110,"./array":111,"./backoff":112,"./xhrio":113,"./object":89,"@firebase/app":30}],52:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./implementation/args"),t=require("./implementation/authwrapper"),r=require("./implementation/location"),i=require("./implementation/promise_external"),n=require("./implementation/request"),a=require("./reference"),o=function(){function i(e,i,o){if(this.bucket_=null,this.authWrapper_=new t.AuthWrapper(e,function(e,t){return new a.Reference(e,t)},n.makeRequest,this,i),this.app_=e,null!=o)this.bucket_=r.Location.makeFromBucketSpec(o);else{var u=this.authWrapper_.bucket();null!=u&&(this.bucket_=new r.Location(u,""))}this.internals_=new p(this)}return i.prototype.ref=function(t){if(e.validate("ref",[e.stringSpec(function(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var r=new a.Reference(this.authWrapper_,this.bucket_);return null!=t?r.child(t):r},i.prototype.refFromURL=function(t){return e.validate("refFromURL",[e.stringSpec(function(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{r.Location.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new a.Reference(this.authWrapper_,t)},Object.defineProperty(i.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),i.prototype.setMaxUploadRetryTime=function(t){e.validate("setMaxUploadRetryTime",[e.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(i.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),i.prototype.setMaxOperationRetryTime=function(t){e.validate("setMaxOperationRetryTime",[e.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(i.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),i}();exports.Service=o;var p=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),i.resolve(void 0)},e}();exports.ServiceInternals=p;
},{"./implementation/args":70,"./implementation/location":71,"./implementation/promise_external":72,"./implementation/authwrapper":73,"./reference":51,"./implementation/request":74}],93:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./error"),r=require("./object"),t=require("./promise_external"),o=require("./type"),n=require("./xhrio"),s=function(){function s(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=n.ErrorCode.NO_ERROR,this.sendPromise_=t.make(function(r,t){e.xhr_.addEventListener("abort",function(t){e.errorCode_=n.ErrorCode.ABORT,r(e)}),e.xhr_.addEventListener("error",function(t){e.errorCode_=n.ErrorCode.NETWORK_ERROR,r(e)}),e.xhr_.addEventListener("load",function(t){r(e)})})}return s.prototype.send=function(t,n,s,i){var h=this;if(this.sent_)throw e.internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),o.isDef(i)){var d=i;r.forEach(d,function(e,r){h.xhr_.setRequestHeader(e,r.toString())})}return o.isDef(s)?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_},s.prototype.getErrorCode=function(){if(!this.sent_)throw e.internalError("cannot .getErrorCode() before sending");return this.errorCode_},s.prototype.getStatus=function(){if(!this.sent_)throw e.internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},s.prototype.getResponseText=function(){if(!this.sent_)throw e.internalError("cannot .getResponseText() before sending");return this.xhr_.responseText},s.prototype.abort=function(){this.xhr_.abort()},s.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},s.prototype.addUploadProgressListener=function(e){o.isDef(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},s.prototype.removeUploadProgressListener=function(e){o.isDef(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},s}();exports.NetworkXhrIo=s;
},{"./error":87,"./object":89,"./promise_external":72,"./type":92,"./xhrio":113}],57:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./xhrio_network"),r=function(){function r(){}return r.prototype.createXhrIo=function(){return new e.NetworkXhrIo},r}();exports.XhrIoPool=r;
},{"./xhrio_network":93}],35:[function(require,module,exports) {
"use strict";function e(e,r,t){return new c.Service(e,new a.XhrIoPool,t)}function r(r){var t={TaskState:s.TaskState,TaskEvent:n.TaskEvent,StringFormat:i.StringFormat,Storage:c.Service,Reference:o.Reference};r.INTERNAL.registerService(u,e,t,void 0,!0)}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@firebase/app"),i=require("./src/implementation/string"),n=require("./src/implementation/taskenums"),s=require("./src/implementation/taskenums"),a=require("./src/implementation/xhriopool"),o=require("./src/reference"),c=require("./src/service"),u="storage";exports.registerStorage=r,r(t.default);
},{"./src/reference":51,"./src/service":52,"./src/implementation/taskenums":55,"./src/implementation/string":56,"./src/implementation/xhriopool":57,"@firebase/app":30}],27:[function(require,module,exports) {
require("@firebase/storage");
},{"@firebase/storage":35}],82:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},s=(t={},t[e.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",t[e.AVAILABLE_IN_SW]="This method is available in a service worker context.",t[e.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",t[e.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",t[e.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",t[e.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",t[e.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",t[e.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",t[e.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",t[e.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",t[e.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",t[e.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",t[e.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",t[e.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",t[e.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",t[e.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",t[e.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",t[e.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",t[e.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",t[e.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",t[e.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",t[e.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",t[e.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",t[e.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",t[e.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",t[e.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",t[e.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",t[e.BAD_SCOPE]="The service worker scope must be a string with at least one character.",t[e.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",t[e.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",t[e.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",t[e.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",t[e.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",t);exports.default={codes:e,map:s};var t;
},{}],84:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={granted:"granted",default:"default",denied:"denied"};
},{}],219:[function(require,module,exports) {
"use strict";function e(e){var r=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){return e(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};
},{}],118:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],r={userVisibleOnly:!0,applicationServerKey:new Uint8Array(e)};exports.default={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:e,SUBSCRIPTION_OPTIONS:r};
},{}],194:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("./errors"),r=require("../helpers/array-buffer-to-base64"),n=require("./fcm-details"),o="fcm_token_object_Store",i=1,a=function(){function a(){this.errorFactory_=new e.ErrorFactory("messaging","Messaging",t.default.map),this.openDbPromise_=null}return a.prototype.openDatabase_=function(){return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(e,t){var r=indexedDB.open(a.DB_NAME,i);r.onerror=function(e){t(e.target.error)},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(o,{keyPath:"swScope"});t.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),t.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.openDbPromise_)},a.prototype.closeDatabase=function(){var e=this;return this.openDbPromise_?this.openDbPromise_.then(function(t){t.close(),e.openDbPromise_=null}):Promise.resolve()},a.prototype.getTokenDetailsFromToken=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var i=t.transaction([o]).objectStore(o).index("fcmToken").get(e);i.onerror=function(e){n(e.target.error)},i.onsuccess=function(e){r(e.target.result)}})})},a.prototype.getTokenDetailsFromSWScope_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var i=t.transaction([o]).objectStore(o).get(e);i.onerror=function(e){n(e.target.error)},i.onsuccess=function(e){r(e.target.result)}})})},a.prototype.getAllTokenDetailsForSenderId_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var i=[],a=t.transaction([o]).objectStore(o).openCursor();a.onerror=function(e){n(e.target.error)},a.onsuccess=function(t){var n=t.target.result;n?(n.value.fcmSenderId===e&&i.push(n.value),n.continue()):r(i)}})})},a.prototype.subscribeToFCM=function(e,o,i){var a=this,c=r.default(o.getKey("p256dh")),s=r.default(o.getKey("auth")),u="authorized_entity="+e+"&endpoint="+o.endpoint+"&encryption_key="+c+"&encryption_auth="+s;i&&(u+="&pushSet="+i);var f=new Headers;f.append("Content-Type","application/x-www-form-urlencoded");var p={method:"POST",headers:f,body:u};return fetch(n.default.ENDPOINT+"/fcm/connect/subscribe",p).then(function(e){return e.json()}).then(function(e){var r=e;if(r.error){var n=r.error.message;throw a.errorFactory_.create(t.default.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!r.token)throw a.errorFactory_.create(t.default.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!r.pushSet)throw a.errorFactory_.create(t.default.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:r.token,pushSet:r.pushSet}})},a.prototype.isSameSubscription_=function(e,t){return e.endpoint===t.endpoint&&r.default(e.getKey("auth"))===t.auth&&r.default(e.getKey("p256dh"))===t.p256dh},a.prototype.saveTokenDetails_=function(e,t,n,i,a){var c={swScope:t.scope,endpoint:n.endpoint,auth:r.default(n.getKey("auth")),p256dh:r.default(n.getKey("p256dh")),fcmToken:i,fcmPushSet:a,fcmSenderId:e};return this.openDatabase_().then(function(e){return new Promise(function(t,r){var n=e.transaction([o],"readwrite").objectStore(o).put(c);n.onerror=function(e){r(e.target.error)},n.onsuccess=function(e){t()}})})},a.prototype.getSavedToken=function(e,r){var n=this;return r instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(t.default.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(e).then(function(t){if(0!==t.length){var n=t.findIndex(function(t){return r.scope===t.swScope&&e===t.fcmSenderId});if(-1!==n)return t[n]}}).then(function(e){if(e)return r.pushManager.getSubscription().catch(function(e){throw n.errorFactory_.create(t.default.codes.GET_SUBSCRIPTION_FAILED)}).then(function(t){if(t&&n.isSameSubscription_(t,e))return e.fcmToken})}):Promise.reject(this.errorFactory_.create(t.default.codes.SW_REGISTRATION_EXPECTED))},a.prototype.createToken=function(e,r){var o=this;if("string"!=typeof e||0===e.length)return Promise.reject(this.errorFactory_.create(t.default.codes.BAD_SENDER_ID));if(!(r instanceof ServiceWorkerRegistration))return Promise.reject(this.errorFactory_.create(t.default.codes.SW_REGISTRATION_EXPECTED));var i,a;return r.pushManager.getSubscription().then(function(e){return e||r.pushManager.subscribe(n.default.SUBSCRIPTION_OPTIONS)}).then(function(t){return i=t,o.subscribeToFCM(e,i)}).then(function(t){return a=t,o.saveTokenDetails_(e,r,i,a.token,a.pushSet)}).then(function(){return a.token})},a.prototype.deleteToken=function(e){var r=this;return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(t.default.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw r.errorFactory_.create(t.default.codes.DELETE_TOKEN_NOT_FOUND);return r.openDatabase_().then(function(n){return new Promise(function(i,a){var c=n.transaction([o],"readwrite").objectStore(o).delete(e.swScope);c.onerror=function(e){a(e.target.error)},c.onsuccess=function(n){0!==n.target.result?i(e):a(r.errorFactory_.create(t.default.codes.FAILED_TO_DELETE_TOKEN))}})})})},a}();exports.default=a;
},{"../helpers/array-buffer-to-base64":219,"./errors":82,"./fcm-details":118,"@firebase/util":78}],80:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/util"),t=require("../models/errors"),r=require("../models/token-manager"),o=require("../models/notification-permission"),n="messagingSenderId",i=function(){function i(o){var i=this;if(this.errorFactory_=new e.ErrorFactory("messaging","Messaging",t.default.map),!o.options[n]||"string"!=typeof o.options[n])throw this.errorFactory_.create(t.default.codes.BAD_SENDER_ID);this.messagingSenderId_=o.options[n],this.tokenManager_=new r.default,this.app=o,this.INTERNAL={},this.INTERNAL.delete=function(){return i.delete}}return i.prototype.getToken=function(){var e=this,r=this.getNotificationPermission_();return r!==o.default.granted?r===o.default.denied?Promise.reject(this.errorFactory_.create(t.default.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then(function(t){return e.tokenManager_.getSavedToken(e.messagingSenderId_,t).then(function(r){return r||e.tokenManager_.createToken(e.messagingSenderId_,t)})})},i.prototype.deleteToken=function(e){var t=this;return this.tokenManager_.deleteToken(e).then(function(){return t.getSWRegistration_().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},i.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(t.default.codes.SHOULD_BE_INHERITED)},i.prototype.requestPermission=function(){throw this.errorFactory_.create(t.default.codes.AVAILABLE_IN_WINDOW)},i.prototype.useServiceWorker=function(e){throw this.errorFactory_.create(t.default.codes.AVAILABLE_IN_WINDOW)},i.prototype.onMessage=function(e,r,o){throw this.errorFactory_.create(t.default.codes.AVAILABLE_IN_WINDOW)},i.prototype.onTokenRefresh=function(e,r,o){throw this.errorFactory_.create(t.default.codes.AVAILABLE_IN_WINDOW)},i.prototype.setBackgroundMessageHandler=function(e){throw this.errorFactory_.create(t.default.codes.AVAILABLE_IN_SW)},i.prototype.delete=function(){return this.tokenManager_.closeDatabase()},i.prototype.getNotificationPermission_=function(){return Notification.permission},i.prototype.getTokenManager=function(){return this.tokenManager_},i}();exports.default=i;
},{"@firebase/util":78,"../models/errors":82,"../models/notification-permission":84,"../models/token-manager":194}],81:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},s={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},t=function(s,t){return r={},r[e.TYPE_OF_MSG]=s,r[e.DATA]=t,r;var r};exports.default={PARAMS:e,TYPES_OF_MSG:s,createNewMsg:t};
},{}],83:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"};
},{}],53:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./controller-interface"),r=require("../models/errors"),o=require("../models/worker-page-message"),i=require("../models/default-sw"),n=require("../models/notification-permission"),s=require("@firebase/util"),a=function(t){function a(e){var r=t.call(this,e)||this;return r.messageObserver_=null,r.onMessage_=s.createSubscribe(function(e){r.messageObserver_=e}),r.tokenRefreshObserver_=null,r.onTokenRefresh_=s.createSubscribe(function(e){r.tokenRefreshObserver_=e}),r.setupSWMessageListener_(),r}return e(a,t),a.prototype.getToken=function(){var e=this;return this.isSupported_()?this.manifestCheck_().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(this.errorFactory_.create(r.default.codes.UNSUPPORTED_BROWSER))},a.prototype.manifestCheck_=function(){var e=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.errorFactory_.create(r.default.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},a.prototype.requestPermission=function(){var e=this;return Notification.permission===n.default.granted?Promise.resolve():new Promise(function(t,o){var i=function(i){return i===n.default.granted?t():i===n.default.denied?o(e.errorFactory_.create(r.default.codes.PERMISSION_BLOCKED)):o(e.errorFactory_.create(r.default.codes.PERMISSION_DEFAULT))},s=Notification.requestPermission(function(e){s||i(e)});s&&s.then(i)})},a.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(r.default.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(r.default.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=e},a.prototype.onMessage=function(e,t,r){return this.onMessage_(e,t,r)},a.prototype.onTokenRefresh=function(e,t,r){return this.onTokenRefresh_(e,t,r)},a.prototype.waitForRegistrationToActivate_=function(e){var t=this,o=e.installing||e.waiting||e.active;return new Promise(function(i,n){if(o)if("activated"!==o.state)if("redundant"!==o.state){var s=function(){if("activated"===o.state)i(e);else{if("redundant"!==o.state)return;n(t.errorFactory_.create(r.default.codes.SW_REG_REDUNDANT))}o.removeEventListener("statechange",s)};o.addEventListener("statechange",s)}else n(t.errorFactory_.create(r.default.codes.SW_REG_REDUNDANT));else i(e);else n(t.errorFactory_.create(r.default.codes.NO_SW_IN_REG))})},a.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register(i.default.path,{scope:i.default.scope}).catch(function(t){throw e.errorFactory_.create(r.default.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse_=t,t.update(),t})}))},a.prototype.setupSWMessageListener_=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[o.default.PARAMS.TYPE_OF_MSG]){var r=t.data;switch(r[o.default.PARAMS.TYPE_OF_MSG]){case o.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case o.default.TYPES_OF_MSG.NOTIFICATION_CLICKED:var i=r[o.default.PARAMS.DATA];e.messageObserver_.next(i)}}},!1)},a.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},a}(t.default);exports.default=a;
},{"./controller-interface":80,"../models/worker-page-message":81,"../models/errors":82,"../models/default-sw":83,"../models/notification-permission":84,"@firebase/util":78}],54:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./controller-interface"),n=require("../models/errors"),o=require("../models/worker-page-message"),i=require("../models/fcm-details"),r="FCM_MSG",a=function(e){function a(t){var n=e.call(this,t)||this;return self.addEventListener("push",function(t){return n.onPush_(t)},!1),self.addEventListener("pushsubscriptionchange",function(t){return n.onSubChange_(t)},!1),self.addEventListener("notificationclick",function(t){return n.onNotificationClick_(t)},!1),n.bgMessageHandler_=null,n}return t(a,e),a.prototype.onPush_=function(t){var e,n=this;try{e=t.data.json()}catch(t){return}var o=this.hasVisibleClients_().then(function(t){if(t){if(e.notification||n.bgMessageHandler_)return n.sendMessageToWindowClients_(e)}else{var o=n.getNotificationData_(e);if(o){var i=o.title||"";return self.registration.showNotification(i,o)}if(n.bgMessageHandler_)return n.bgMessageHandler_(e)}});t.waitUntil(o)},a.prototype.onSubChange_=function(t){var e=this,o=this.getToken().then(function(t){if(!t)throw e.errorFactory_.create(n.default.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var o=null,r=e.getTokenManager();return r.getTokenDetailsFromToken(t).then(function(t){if(!(o=t))throw e.errorFactory_.create(n.default.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(i.default.SUBSCRIPTION_OPTIONS)}).then(function(t){return r.subscribeToFCM(o.fcmSenderId,t,o.fcmPushSet)}).catch(function(t){return r.deleteToken(o.fcmToken).then(function(){throw e.errorFactory_.create(n.default.codes.UNABLE_TO_RESUBSCRIBE,{message:t})})})});t.waitUntil(o)},a.prototype.onNotificationClick_=function(t){var e=this;if(t.notification&&t.notification.data&&t.notification.data[r]){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data[r],i=n.notification.click_action;if(i){var a=this.getWindowClient_(i).then(function(t){return t||self.clients.openWindow(i)}).then(function(t){if(t){n.notification;delete n.notification;var i=o.default.createNewMsg(o.default.TYPES_OF_MSG.NOTIFICATION_CLICKED,n);return e.attemptToMessageClient_(t,i)}});t.waitUntil(a)}}},a.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e=Object.assign({},t.notification);return e.data=(n={},n[r]=t,n),e;var n}},a.prototype.setBackgroundMessageHandler=function(t){if(t&&"function"!=typeof t)throw this.errorFactory_.create(n.default.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=t},a.prototype.getWindowClient_=function(t){var e=new URL(t).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){for(var n=null,o=0;o<t.length;o++){if(new URL(t[o].url).href===e){n=t[o];break}}if(n)return n.focus(),n})},a.prototype.attemptToMessageClient_=function(t,e){var o=this;return new Promise(function(i,r){if(!t)return r(o.errorFactory_.create(n.default.codes.NO_WINDOW_CLIENT_TO_MSG));t.postMessage(e),i()})},a.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){return t.some(function(t){return"visible"===t.visibilityState})})},a.prototype.sendMessageToWindowClients_=function(t){var e=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var i=o.default.createNewMsg(o.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED,t);return Promise.all(n.map(function(t){return e.attemptToMessageClient_(t,i)}))})},a.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},a}(e.default);exports.default=a;
},{"./controller-interface":80,"../models/errors":82,"../models/worker-page-message":81,"../models/fcm-details":118}],31:[function(require,module,exports) {
"use strict";function e(e){var i={Messaging:r.default};e.INTERNAL.registerService("messaging",function(e){return self&&"ServiceWorkerGlobalScope"in self?new s.default(e):new r.default(e)},i)}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./src/controllers/window-controller"),s=require("./src/controllers/sw-controller"),i=require("@firebase/app");exports.registerMessaging=e,e(i.firebase);
},{"./src/controllers/window-controller":53,"./src/controllers/sw-controller":54,"@firebase/app":30}],28:[function(require,module,exports) {
require("@firebase/messaging");
},{"@firebase/messaging":31}],16:[function(require,module,exports) {
var e=require("./app");require("./auth"),require("./database"),require("./messaging"),require("./storage"),module.exports=e;
},{"./app":24,"./database":25,"./auth":26,"./storage":27,"./messaging":28}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/app");exports.SDK_VERSION=e.default.SDK_VERSION;
},{"@firebase/app":30}],41:[function(require,module,exports) {
"use strict";function t(){return e.getPlatform().emptyByteString}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../util/assert"),e=function(){function t(){}return t.setPlatform=function(e){t.platform&&r.fail("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||r.fail("Platform not set"),t.platform},t}();exports.PlatformSupport=e,exports.emptyByteString=t;
},{"../util/assert":47}],49:[function(require,module,exports) {
"use strict";function e(){return a}function r(e){a=e}function t(e,r){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];if(a<=f.DEBUG)(new Date).toISOString(),t.map(n)}function o(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(a<=f.ERROR)(new Date).toISOString(),r.map(n)}function n(e){if("string"==typeof e)return e;var r=u.PlatformSupport.getPlatform();try{return r.formatJSON(e)}catch(r){return e}}Object.defineProperty(exports,"__esModule",{value:!0});var f,i=require("../core/version"),u=require("../platform/platform");!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(f=exports.LogLevel||(exports.LogLevel={}));var a=f.ERROR;exports.getLogLevel=e,exports.setLogLevel=r,exports.debug=t,exports.error=o;
},{"../core/version":48,"../platform/platform":41}],47:[function(require,module,exports) {
"use strict";function r(r){var e="FIRESTORE ("+o.SDK_VERSION+") INTERNAL ASSERTION FAILED: "+r;throw t.error(e),new Error(e)}function e(e,o){e||r(o)}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../core/version"),t=require("./log");exports.fail=r,exports.assert=e;
},{"../core/version":48,"./log":49}],69:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Code={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};var t=function(t){function r(e,r){var n=t.call(this,r)||this;return n.code=e,n.message=r,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return e(r,t),r}(Error);exports.FirestoreError=t;
},{}],209:[function(require,module,exports) {
"use strict";function r(r,t){function o(){var r="This constructor is private.";throw t&&(r+=" ",r+=t),new e.FirestoreError(e.Code.INVALID_ARGUMENT,r)}o.prototype=r.prototype;for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);return o}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./error");exports.makeConstructorPrivate=r;
},{"./error":69}],167:[function(require,module,exports) {
"use strict";function r(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function t(r,t){return Object.prototype.hasOwnProperty.call(r,t)?r[t]:null}function e(r){var t=0;for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function o(r,t){return void 0!==r?r:t}function n(r,t){for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var o=parseInt(e,10);isNaN(o)||t(o,r[e])}}function p(r,t){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function a(t,e,o){return r(t,e)||(t[e]=o()),t[e]}function s(r){l.assert(null!=r&&"object"==typeof r,"isEmpty() expects object parameter.");for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function c(r){l.assert(r&&"object"==typeof r,"shallowCopy() expects object parameter.");var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}Object.defineProperty(exports,"__esModule",{value:!0});var l=require("./assert");exports.contains=r,exports.get=t,exports.size=e,exports.defaulted=o,exports.forEachNumber=n,exports.forEach=p,exports.lookupOrInsert=a,exports.isEmpty=s,exports.shallowCopy=c;
},{"./assert":47}],210:[function(require,module,exports) {
"use strict";function e(e,t,r){if(t.length!==r)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires "+b(r,"argument")+", but was called with "+b(t.length,"argument")+".")}function t(e,t,r){if(t.length<r)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires at least "+b(r,"argument")+", but was called with "+b(t.length,"argument")+".")}function r(e,t,r,n){if(t.length<r||t.length>n)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires between "+r+" and "+n+" arguments, but was called with "+b(t.length,"argument")+".")}function n(e,t,r,n){if(!(t instanceof Array)||t.length<n)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires its "+r+" argument to be an array with at least "+b(n,"element")+".")}function o(e,t,r,n){s(e,t,w(r)+" argument",n)}function i(e,t,r,n){void 0!==n&&o(e,t,r,n)}function u(e,t,r,n){s(e,t,r+" option",n)}function a(e,t,r,n){void 0!==n&&u(e,t,r,n)}function s(e,t,r,n){if(typeof n!==t||"object"===t&&!f(n)){var o=c(n);throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires its "+r+" to be of type "+t+", but it was: "+o)}}function f(e){return"object"==typeof e&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function c(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=l(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":A.fail("Unknown wrong type: "+typeof e)}function l(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}function d(e,t,r){if(void 0===r)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+w(t)+" argument, but it was undefined.")}function p(e,t,r){y.forEach(t,function(t,n){if(r.indexOf(t)<0)throw new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+r.join(", "))})}function g(e,t,r,n){var o=c(n);return new h.FirestoreError(h.Code.INVALID_ARGUMENT,"Function "+e+"() requires its "+w(r)+" argument to be a "+t+", but it was: "+o)}function w(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function b(e,t){return e+" "+t+(1===e?"":"s")}Object.defineProperty(exports,"__esModule",{value:!0});var A=require("./assert"),h=require("./error"),y=require("./obj");exports.validateExactNumberOfArgs=e,exports.validateAtLeastNumberOfArgs=t,exports.validateBetweenNumberOfArgs=r,exports.validateNamedArrayAtLeastNumberOfElements=n,exports.validateArgType=o,exports.validateOptionalArgType=i,exports.validateNamedType=u,exports.validateNamedOptionalType=a,exports.isPlainObject=f,exports.valueDescription=c,exports.tryGetCustomObjectType=l,exports.validateDefined=d,exports.validateOptionNames=p,exports.invalidClassError=g;
},{"./assert":47,"./error":69,"./obj":167}],211:[function(require,module,exports) {
"use strict";function r(r,t){return r<t?-1:r>t?1:0}function t(r,t){return null!==r&&void 0!==r?!(!t||!r.equals(t)):r===t}function e(r,t){if(r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(!r[e].equals(t[e]))return!1;return!0}function n(r){var t=r.length-1;return 0===r.length?"":"\0"===r.charAt(t)?r.substring(0,t):r.substring(0,t)+String.fromCharCode(r.charCodeAt(t)-1)}function o(r){return r+"\0"}Object.defineProperty(exports,"__esModule",{value:!0});var u=require("./assert"),a=function(){function r(){}return r.newId=function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",e=0;e<20;e++)t+=r.charAt(Math.floor(Math.random()*r.length));return u.assert(20===t.length,"Invalid auto ID: "+t),t},r}();exports.AutoId=a,exports.primitiveComparator=r,exports.equals=t,exports.arrayEquals=e,exports.immediatePredecessor=n,exports.immediateSuccessor=o;
},{"./assert":47}],158:[function(require,module,exports) {
"use strict";function r(){if("undefined"==typeof Uint8Array)throw new e.FirestoreError(e.Code.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function t(){if(!i.PlatformSupport.getPlatform().base64Available)throw new e.FirestoreError(e.Code.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../platform/platform"),o=require("../util/api"),e=require("../util/error"),n=require("../util/input_validation"),a=require("../util/misc"),l=function(){function o(r){t(),this._binaryString=r}return o.fromBase64String=function(r){n.validateExactNumberOfArgs("Blob.fromBase64String",arguments,1),n.validateArgType("Blob.fromBase64String","string",1,r),t();try{return new o(i.PlatformSupport.getPlatform().atob(r))}catch(r){throw new e.FirestoreError(e.Code.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},o.fromUint8Array=function(t){if(n.validateExactNumberOfArgs("Blob.fromUint8Array",arguments,1),r(),!(t instanceof Uint8Array))throw n.invalidClassError("Blob.fromUint8Array","Uint8Array",1,t);return new o(Array.prototype.map.call(t,function(r){return String.fromCharCode(r)}).join(""))},o.prototype.toBase64=function(){return n.validateExactNumberOfArgs("Blob.toBase64",arguments,0),t(),i.PlatformSupport.getPlatform().btoa(this._binaryString)},o.prototype.toUint8Array=function(){n.validateExactNumberOfArgs("Blob.toUint8Array",arguments,0),r();for(var t=new Uint8Array(this._binaryString.length),i=0;i<this._binaryString.length;i++)t[i]=this._binaryString.charCodeAt(i);return t},o.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},o.prototype._equals=function(r){return this._binaryString===r._binaryString},o.prototype._compareTo=function(r){return a.primitiveComparator(this._binaryString,r._binaryString)},o}();exports.Blob=l,exports.PublicBlob=o.makeConstructorPrivate(l,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead.");
},{"../platform/platform":41,"../util/api":209,"../util/error":69,"../util/input_validation":210,"../util/misc":211}],168:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/misc"),e=function(){return function(t,e,a,r){this.databaseId=t,this.persistenceKey=e,this.host=a,this.ssl=r}}();exports.DatabaseInfo=e;var a="(default)",r=function(){function e(t,e){this.projectId=t,this.database=e||a}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===a},enumerable:!0,configurable:!0}),e.prototype.equals=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return t.primitiveComparator(this.projectId,e.projectId)||t.primitiveComparator(this.database,e.database)},e}();exports.DatabaseId=r;
},{"../util/misc":211}],166:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/error"),t=require("../util/input_validation"),r=require("../util/misc"),i=function(){function i(r,i){if(t.validateExactNumberOfArgs("GeoPoint",arguments,2),t.validateArgType("GeoPoint","number",1,r),t.validateArgType("GeoPoint","number",2,i),!isFinite(r)||r<-90||r>90)throw new e.FirestoreError(e.Code.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(i)||i<-180||i>180)throw new e.FirestoreError(e.Code.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=r,this._long=i}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),i.prototype._equals=function(e){return this._lat===e._lat&&this._long===e._long},i.prototype._compareTo=function(e){return r.primitiveComparator(this._lat,e._lat)||r.primitiveComparator(this._long,e._long)},i}();exports.GeoPoint=i;
},{"../util/input_validation":210,"../util/misc":211,"../util/error":69}],177:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/assert"),n=require("../util/error");exports.DOCUMENT_KEY_NAME="__name__";var r=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,n,r){void 0===n?n=0:n>t.length&&e.fail("offset "+n+" out of range "+t.length),void 0===r?r=t.length-n:r>t.length-n&&e.fail("length "+r+" out of range "+(t.length-n)),this.segments=t,this.offset=n,this.len=r},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(n){var r=this.segments.slice(this.offset,this.limit());return n instanceof t?n.forEach(function(t){r.push(t)}):"string"==typeof n?r.push(n):e.fail("Unknown parameter type for Path.child(): "+n),this.construct(r)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,e.assert(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return e.assert(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return e.assert(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return e.assert(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return e.assert(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}();exports.Path=r;var i=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.canonicalString=function(){return this.toArray().join("/")},r.prototype.toString=function(){return this.canonicalString()},r.fromString=function(t){if(t.indexOf("//")>=0)throw new n.FirestoreError(n.Code.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new r(t.split("/").filter(function(t){return t.length>0}))},r.EMPTY_PATH=new r([]),r}(r);exports.ResourcePath=i;var o=/^[_a-zA-Z][_a-zA-Z0-9]*$/,s=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.isValidIdentifier=function(t){return o.test(t)},r.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),r.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},r.prototype.toString=function(){return this.canonicalString()},r.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===exports.DOCUMENT_KEY_NAME},r.keyField=function(){return new r([exports.DOCUMENT_KEY_NAME])},r.fromServerFormat=function(t){for(var e=[],i="",o=0,s=function(){if(0===i.length)throw new n.FirestoreError(n.Code.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(i),i=""},h=!1;o<t.length;){var a=t[o];if("\\"===a){if(o+1===t.length)throw new n.FirestoreError(n.Code.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var f=t[o+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new n.FirestoreError(n.Code.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,o+=2}else"`"===a?(h=!h,o++):"."!==a||h?(i+=a,o++):(s(),o++)}if(s(),h)throw new n.FirestoreError(n.Code.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new r(e)},r.EMPTY_PATH=new r([]),r}(r);exports.FieldPath=s;
},{"../util/assert":47,"../util/error":69}],174:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),e=require("./path"),r=function(){function r(e){this.path=e,t.assert(r.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return r.prototype.equals=function(t){return null!==t&&0===e.ResourcePath.comparator(this.path,t.path)},r.prototype.toString=function(){return this.path.toString()},r.comparator=function(t,r){return e.ResourcePath.comparator(t.path,r.path)},r.isDocumentKey=function(t){return t.length%2==0},r.fromSegments=function(t){return new r(new e.ResourcePath(t.slice()))},r.fromPathString=function(t){return new r(e.ResourcePath.fromString(t))},r.EMPTY=new r(new e.ResourcePath([])),r}();exports.DocumentKey=r;
},{"./path":177,"../util/assert":47}],173:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),e=require("./document_key"),o=function(){function o(t,e,o,i){this.key=t,this.version=e,this.data=o,this.hasLocalMutations=i.hasLocalMutations}return o.prototype.field=function(t){return this.data.field(t)},o.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},o.prototype.value=function(){return this.data.value()},o.prototype.equals=function(t){return t instanceof o&&this.key.equals(t.key)&&this.version.equals(t.version)&&this.data.equals(t.data)&&this.hasLocalMutations===t.hasLocalMutations},o.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"})"},o.compareByKey=function(t,o){return e.DocumentKey.comparator(t.key,o.key)},o.compareByField=function(e,o,i){var n=o.field(e),r=i.field(e);return void 0!==n&&void 0!==r?n.compareTo(r):t.fail("Trying to compare documents on fields that don't exist")},o}();exports.Document=o;var i=function(){function t(t,e){this.key=t,this.version=e}return t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},t.prototype.equals=function(t){return t&&t.version.equals(this.version)&&t.key.equals(this.key)},t.compareByKey=function(t,o){return e.DocumentKey.comparator(t.key,o.key)},t}();exports.NoDocument=i;
},{"../util/assert":47,"./document_key":174}],222:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./assert"),e=function(){function e(t,e){this.comparator=t,this.root=e||o.EMPTY}return e.prototype.insert=function(t,r){return new e(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,o.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,o.BLACK,null,null))},e.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null},e.prototype.getPredecessorKey=function(e){for(var r=this.root,o=null;!r.isEmpty();){var i=this.comparator(e,r.key);if(0===i){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}i<0?r=r.left:i>0&&(o=r,r=r.right)}throw t.fail("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.indexOf=function(t){for(var e=0,r=this.root;!r.isEmpty();){var o=this.comparator(t,r.key);if(0===o)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(e,r){return t(e,r),!1})},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(t){return new r(this.root,null,this.comparator,!1,t)},e.prototype.getIteratorFrom=function(t,e){return new r(this.root,t,this.comparator,!1,e)},e.prototype.getReverseIterator=function(t){return new r(this.root,null,this.comparator,!0,t)},e.prototype.getReverseIteratorFrom=function(t,e){return new r(this.root,t,this.comparator,!0,e)},e}();exports.SortedMap=e;var r=function(){function e(t,e,r,o,i){this.resultGenerator=i||null,this.isReverse=o,this.nodeStack=[];for(var n=1;!t.isEmpty();)if(n=e?r(t.key,e):1,o&&(n*=-1),n<0)t=this.isReverse?t.left:t.right;else{if(0===n){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){t.assert(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e,r=this.nodeStack.pop();if(e=this.resultGenerator?this.resultGenerator(r.key,r.value):{key:r.key,value:r.value},this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return e},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return this.resultGenerator?this.resultGenerator(t.key,t.value):{key:t.key,value:t.value}},e}();exports.SortedMapIterator=r;var o=function(){function e(t,r,o,i,n){this.key=t,this.value=r,this.color=null!=o?o:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=n?n:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,r,o,i,n){return new e(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=i?i:this.left,null!=n?n:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,e,r){var o=this,i=r(t,o.key);return(o=i<0?o.copy(null,null,null,o.left.insert(t,e,r),null):0===i?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,r){var o,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===r(t,i.key)){if(i.right.isEmpty())return e.EMPTY;o=i.right.min(),i=i.copy(o.key,o.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw t.fail("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw t.fail("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw t.fail("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}();exports.LLRBNode=o;var i=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,r,o,i){return this},t.prototype.insert=function(t,e,r){return new o(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();exports.LLRBEmptyNode=i,o.EMPTY=new i;
},{"./assert":47}],175:[function(require,module,exports) {
"use strict";function e(e,t){return e<t?-1:e>t?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}function t(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var n,a=require("../util/assert"),o=require("../util/misc"),i=require("../util/sorted_map"),u=require("./document_key");!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(n=exports.TypeOrder||(exports.TypeOrder={}));var l=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){a.assert(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type.");return o.primitiveComparator(this.typeOrder,e.typeOrder)},e}();exports.FieldValue=l;var s=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=n.NullValue,t.internalValue=null,t}return r(t,e),t.prototype.value=function(){return null},t.prototype.equals=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(l);exports.NullValue=s;var p=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.BooleanValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?o.primitiveComparator(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(l);exports.BooleanValue=p;var c=function(t){function a(e){var r=t.call(this)||this;return r.internalValue=e,r.typeOrder=n.NumberValue,r}return r(a,t),a.prototype.value=function(){return this.internalValue},a.prototype.compareTo=function(t){return t instanceof a?e(this.internalValue,t.internalValue):this.defaultCompareTo(t)},a}(l);exports.NumberValue=c;var f=function(e){function n(t){return e.call(this,t)||this}return r(n,e),n.prototype.equals=function(e){return e instanceof n&&t(this.internalValue,e.internalValue)},n}(c);exports.IntegerValue=f;var h=function(e){function n(t){var r=e.call(this,t)||this;return r.internalValue=t,r}return r(n,e),n.prototype.equals=function(e){return e instanceof n&&t(this.internalValue,e.internalValue)},n.NAN=new n(NaN),n.POSITIVE_INFINITY=new n(1/0),n.NEGATIVE_INFINITY=new n(-1/0),n}(c);exports.DoubleValue=h;var V=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.StringValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?o.primitiveComparator(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(l);exports.StringValue=V;var y=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.TimestampValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue.toDate()},t.prototype.equals=function(e){return e instanceof t&&this.internalValue.equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue.compareTo(e.internalValue):e instanceof m?-1:this.defaultCompareTo(e)},t}(l);exports.TimestampValue=y;var m=function(e){function t(t){var r=e.call(this)||this;return r.localWriteTime=t,r.typeOrder=n.TimestampValue,r}return r(t,e),t.prototype.value=function(){return null},t.prototype.equals=function(e){return e instanceof t&&this.localWriteTime.equals(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime.compareTo(e.localWriteTime):e instanceof y?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(l);exports.ServerTimestampValue=m;var v=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.BlobValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue._equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(l);exports.BlobValue=v;var d=function(e){function t(t,r){var a=e.call(this)||this;return a.databaseId=t,a.key=r,a.typeOrder=n.RefValue,a}return r(t,e),t.prototype.value=function(){return this.key},t.prototype.equals=function(e){return e instanceof t&&(this.key.equals(e.key)&&this.databaseId.equals(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var r=this.databaseId.compareTo(e.databaseId);return 0!==r?r:u.DocumentKey.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(l);exports.RefValue=d;var T=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.GeoPointValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue},t.prototype.equals=function(e){return e instanceof t&&this.internalValue._equals(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(l);exports.GeoPointValue=T;var g=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.ObjectValue,r}return r(t,e),t.prototype.value=function(){var e={};return this.internalValue.inorderTraversal(function(t,r){e[t]=r.value()}),e},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.equals=function(e){if(e instanceof t){for(var r=this.internalValue.getIterator(),n=e.internalValue.getIterator();r.hasNext()&&n.hasNext();){var a=r.getNext(),o=n.getNext();if(a.key!==o.key||!a.value.equals(o.value))return!1}return!r.hasNext()&&!n.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var r=this.internalValue.getIterator(),n=e.internalValue.getIterator();r.hasNext()&&n.hasNext();){var a=r.getNext(),i=n.getNext(),u=o.primitiveComparator(a.key,i.key)||a.value.compareTo(i.value);if(u)return u}return o.primitiveComparator(r.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,r){if(a.assert(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),r);var n=this.child(e.firstSegment());n instanceof t||(n=t.EMPTY);var o=n.set(e.popFirst(),r);return this.setChild(e.firstSegment(),o)},t.prototype.delete=function(e){if(a.assert(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var r=this.child(e.firstSegment());if(r instanceof t){var n=r.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),n))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){a.assert(!e.isEmpty(),"Can't get field of empty path");var r=this;return e.forEach(function(e){r=r instanceof t?r.internalValue.get(e)||void 0:void 0}),r},t.prototype.toString=function(){return JSON.stringify(this.value())},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,r){return new t(this.internalValue.insert(e,r))},t.EMPTY=new t(new i.SortedMap(o.primitiveComparator)),t}(l);exports.ObjectValue=g;var N=function(e){function t(t){var r=e.call(this)||this;return r.internalValue=t,r.typeOrder=n.ArrayValue,r}return r(t,e),t.prototype.value=function(){return this.internalValue.map(function(e){return e.value()})},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.equals=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var r=0;r<this.internalValue.length;r++)if(!this.internalValue[r].equals(e.internalValue[r]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var r=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<r;n++){var a=this.internalValue[n].compareTo(e.internalValue[n]);if(a)return a}return o.primitiveComparator(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return JSON.stringify(this.value())},t}(l);exports.ArrayValue=N;
},{"../util/assert":47,"../util/misc":211,"../util/sorted_map":222,"./document_key":174}],178:[function(require,module,exports) {
"use strict";function e(e){return null===e||void 0===e}function t(e){return exports.isInteger(e)&&e<=exports.MAX_SAFE_INTEGER&&e>=exports.MIN_SAFE_INTEGER}function r(e){return s.IsNaN?s.IsNaN(e):"number"==typeof e&&isNaN(e)}Object.defineProperty(exports,"__esModule",{value:!0});var s=Number;exports.MIN_SAFE_INTEGER=s.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),exports.MAX_SAFE_INTEGER=s.MAX_SAFE_INTEGER||Math.pow(2,53)-1,exports.isInteger=s.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},exports.isNullOrUndefined=e,exports.isSafeInteger=t,exports.safeIsNaN=r;
},{}],169:[function(require,module,exports) {
"use strict";function t(t,e,i){if(i.equals(r.NullValue.INSTANCE)){if(e!==u.EQUAL)throw new s.FirestoreError(s.Code.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new d(t)}if(i.equals(r.DoubleValue.NAN)){if(e!==u.EQUAL)throw new s.FirestoreError(s.Code.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new c(t)}return new h(t,e,i)}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/document"),i=require("../model/document_key"),r=require("../model/field_value"),n=require("../model/path"),o=require("../util/assert"),s=require("../util/error"),l=require("../util/types"),a=function(){function t(t,e,i,r,n,o){void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=i,this.limit=r,this.startAt=n,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[m]:this.memoizedOrderBy=[new y(t),m];else{o.assert(null===t||null!==e&&t.equals(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var i=!1,r=0,n=this.explicitOrderBy;r<n.length;r++){var s=n[r];this.memoizedOrderBy.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var l=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:f.ASCENDING;this.memoizedOrderBy.push(l===f.ASCENDING?m:A)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){o.assert(null==this.getInequalityFilterField()||!(e instanceof h)||!e.isInequality()||e.field.equals(this.getInequalityFilterField()),"Query must only have one inequality field."),o.assert(!i.DocumentKey.isDocumentKey(this.path),"No filtering allowed for document query");var r=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),r,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){o.assert(!i.DocumentKey.isDocumentKey(this.path),"No ordering allowed for document query"),o.assert(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var r=this.explicitOrderBy.concat([e]);return new t(this.path,r,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,i=this.filters;e<i.length;e++){t+=i[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,n=this.orderBy;r<n.length;r++){t+=n[r].canonicalId(),t+=","}l.isNullOrUndefined(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),l.isNullOrUndefined(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.equals=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].equals(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].equals(t.filters[e]))return!1;return!!this.path.equals(t.path)&&(!(null!==this.startAt?!this.startAt.equals(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.equals(t.endAt):null===t.endAt))},t.prototype.docComparator=function(t,e){for(var i=!1,r=0,n=this.orderBy;r<n.length;r++){var s=n[r],l=s.compare(t,e);if(0!==l)return l;i=i||s.field.isKeyField()}return o.assert(i,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!l.isNullOrUndefined(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var i=e[t];if(i instanceof h&&i.isInequality())return i.field}return null},t.prototype.isDocumentQuery=function(){return i.DocumentKey.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return i.DocumentKey.isDocumentKey(this.path)?this.path.equals(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,i=this.explicitOrderBy;e<i.length;e++){var r=i[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,i=this.filters;e<i.length;e++){if(!i[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){o.assert(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}();exports.Query=a;var u=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;default:return o.fail("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.equals=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t}();exports.RelationOp=u;var h=function(){function t(t,e,i){this.field=t,this.op=e,this.value=i}return t.prototype.matches=function(t){if(this.field.isKeyField()){o.assert(this.value instanceof r.RefValue,"Comparing on key, but filter value not a RefValue");var e=this.value,n=i.DocumentKey.comparator(t.key,e.key);return this.matchesComparison(n)}var s=t.field(this.field);return void 0!==s&&this.matchesValue(s)},t.prototype.matchesValue=function(t){return this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(t){switch(this.op){case u.LESS_THAN:return t<0;case u.LESS_THAN_OR_EQUAL:return t<=0;case u.EQUAL:return 0===t;case u.GREATER_THAN:return t>0;case u.GREATER_THAN_OR_EQUAL:return t>=0;default:return o.fail("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==u.EQUAL},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.equals=function(e){return e instanceof t&&(this.op.equals(e.op)&&this.field.equals(e.field)&&this.value.equals(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}();exports.RelationFilter=h;var d=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.equals=function(e){return e instanceof t&&this.field.equals(e.field)},t}();exports.NullFilter=d;var c=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field).value();return"number"==typeof e&&isNaN(e)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.equals=function(e){return e instanceof t&&this.field.equals(e.field)},t}();exports.NanFilter=c,exports.fieldFilter=t;var f=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}();exports.Direction=f;var p=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,i=this.position;e<i.length;e++){t+=i[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){o.assert(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,s=0;s<this.position.length;s++){var l=t[s],a=this.position[s];if(l.field.isKeyField())o.assert(a instanceof r.RefValue,"Bound has a non-key value where the key path is being used."),n=i.DocumentKey.comparator(a.key,e.key);else{var u=e.field(l.field);o.assert(void 0!==u,"Field should exist since document matched the orderBy already."),n=a.compareTo(u)}if(l.dir===f.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.equals=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var i=this.position[e],r=t.position[e];return i.equals(r)}return!0},t}();exports.Bound=p;var y=function(){function t(t,e){this.field=t,void 0===e&&(e=f.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,i){var r=this.isKeyOrderBy?e.Document.compareByKey(t,i):e.Document.compareByField(this.field,t,i);switch(this.dir){case f.ASCENDING:return r;case f.DESCENDING:return-1*r;default:return o.fail("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.equals=function(t){return this.dir===t.dir&&this.field.equals(t.field)},t}();exports.OrderBy=y;var m=new y(n.FieldPath.keyField(),f.ASCENDING),A=new y(n.FieldPath.keyField(),f.DESCENDING);
},{"../util/assert":47,"../model/document_key":174,"../model/document":173,"../model/field_value":175,"../util/types":178,"../model/path":177,"../util/error":69}],171:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/assert"),t=require("../util/misc"),o=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),n=function(){function n(t,o){this.seconds=t,this.nanos=o,e.assert(o>=0,"timestamp nanoseconds out of range: "+o),e.assert(o<1e9,"timestamp nanoseconds out of range"+o),e.assert(t>=-62135596800,"timestamp seconds out of range: "+t),e.assert(t<253402300800,"timestamp seconds out of range"+t)}return n.now=function(){return n.fromEpochMilliseconds(Date.now())},n.fromDate=function(e){return n.fromEpochMilliseconds(e.getTime())},n.fromEpochMilliseconds=function(e){var t=Math.floor(e/1e3);return new n(t,1e6*(e-1e3*t))},n.fromISOString=function(t){var s=0,r=o.exec(t);if(e.assert(!!r,"invalid timestamp: "+t),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),s=parseInt(i,10)}var a=new Date(t);return new n(Math.floor(a.getTime()/1e3),s)},n.prototype.toDate=function(){return new Date(this.toEpochMilliseconds())},n.prototype.toEpochMilliseconds=function(){return 1e3*this.seconds+this.nanos/1e6},n.prototype.compareTo=function(e){return this.seconds===e.seconds?t.primitiveComparator(this.nanos,e.nanos):t.primitiveComparator(this.seconds,e.seconds)},n.prototype.equals=function(e){return e.seconds===this.seconds&&e.nanos===this.nanos},n.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanos="+this.nanos+")"},n}();exports.Timestamp=n;
},{"../util/misc":211,"../util/assert":47}],170:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./timestamp"),e=function(){function e(t){this.timestamp=t}return e.fromMicroseconds=function(o){var n=Math.floor(o/1e6),r=o%1e6*1e3;return new e(new t.Timestamp(n,r))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(t){return this.timestamp.compareTo(t.timestamp)},e.prototype.equals=function(t){return this.timestamp.equals(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanos/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new t.Timestamp(0,0)),e}();exports.SnapshotVersion=e;
},{"./timestamp":171}],172:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("../core/snapshot_version"),s=require("../platform/platform");!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(e=exports.QueryPurpose||(exports.QueryPurpose={}));var r=function(){function e(e,r,o,i,n){void 0===i&&(i=t.SnapshotVersion.MIN),void 0===n&&(n=s.emptyByteString()),this.query=e,this.targetId=r,this.purpose=o,this.snapshotVersion=i,this.resumeToken=n}return e.prototype.update=function(t){return new e(this.query,this.targetId,this.purpose,t.snapshotVersion,t.resumeToken)},e.prototype.equals=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.snapshotVersion.equals(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.equals(e.query)},e}();exports.QueryData=r;
},{"../core/snapshot_version":170,"../platform/platform":41}],176:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/snapshot_version"),n=require("../util/assert"),o=require("../util/misc"),r=require("./document"),i=require("./field_value"),s=function(){function t(t){this.fields=t}return t.prototype.equals=function(t){return o.arrayEquals(this.fields,t.fields)},t}();exports.FieldMask=s;var a=function(){function t(){}return t.prototype.equals=function(e){return e instanceof t},t.instance=new t,t}();exports.ServerTimestampTransform=a;var u=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.equals=function(t){return this.field.equals(t.field)&&this.transform.equals(t.transform)},t}();exports.FieldTransform=u;var c=function(){return function(t,e){this.version=t,this.transformResults=e}}();exports.MutationResult=c;var f;!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(f=exports.MutationType||(exports.MutationType={}));var l=function(){function t(t,e){this.updateTime=t,this.exists=e,n.assert(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof r.Document&&t.version.equals(this.updateTime):void 0!==this.exists?this.exists?t instanceof r.Document:null===t||t instanceof r.NoDocument:(n.assert(this.isNone,"Precondition should be empty"),!0)},t.prototype.equals=function(t){return o.equals(this.updateTime,t.updateTime)&&this.exists===t.exists},t.NONE=new t,t}();exports.Precondition=l;var p=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&n.assert(t.key.equals(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof r.Document?t.version:e.SnapshotVersion.MIN},t}();exports.Mutation=p;var h=function(e){function o(t,n,o){var r=e.call(this)||this;return r.key=t,r.value=n,r.precondition=o,r.type=f.Set,r}return t(o,e),o.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),n.assert(null==e.transformResults,"Transform results received by SetMutation.");var o=p.getPostMutationVersion(t);return new r.Document(this.key,o,this.value,{hasLocalMutations:!1})},o.prototype.applyToLocalView=function(t,e){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var n=p.getPostMutationVersion(t);return new r.Document(this.key,n,this.value,{hasLocalMutations:!0})},o.prototype.equals=function(t){return t instanceof o&&this.key.equals(t.key)&&this.value.equals(t.value)&&this.precondition.equals(t.precondition)},o}(p);exports.SetMutation=h;var y=function(e){function o(t,n,o,r){var i=e.call(this)||this;return i.key=t,i.data=n,i.fieldMask=o,i.precondition=r,i.type=f.Patch,i}return t(o,e),o.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),n.assert(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return t;var o=p.getPostMutationVersion(t),i=this.patchDocument(t);return new r.Document(this.key,o,i,{hasLocalMutations:!1})},o.prototype.applyToLocalView=function(t,e){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var n=p.getPostMutationVersion(t),o=this.patchDocument(t);return new r.Document(this.key,n,o,{hasLocalMutations:!0})},o.prototype.equals=function(t){return t instanceof o&&this.key.equals(t.key)&&this.fieldMask.equals(t.fieldMask)&&this.precondition.equals(t.precondition)},o.prototype.patchDocument=function(t){var e;return e=t instanceof r.Document?t.data:i.ObjectValue.EMPTY,this.patchObject(e)},o.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var o=n[e],r=this.data.field(o);t=void 0!==r?t.set(o,r):t.delete(o)}return t},o}(p);exports.PatchMutation=y;var m=function(e){function s(t,n){var o=e.call(this)||this;return o.key=t,o.fieldTransforms=n,o.type=f.Transform,o.precondition=l.exists(!0),o}return t(s,e),s.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),n.assert(null!=e.transformResults,"Transform results missing for TransformMutation.");var o=e.transformResults;if(!this.precondition.isValidFor(t))return t;var i=this.requireDocument(t),s=this.transformObject(i.data,o);return new r.Document(this.key,i.version,s,{hasLocalMutations:!1})},s.prototype.applyToLocalView=function(t,e){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var n=this.requireDocument(t),o=this.localTransformResults(e),i=this.transformObject(n.data,o);return new r.Document(this.key,n.version,i,{hasLocalMutations:!0})},s.prototype.equals=function(t){return t instanceof s&&this.key.equals(t.key)&&o.arrayEquals(this.fieldTransforms,t.fieldTransforms)&&this.precondition.equals(t.precondition)},s.prototype.requireDocument=function(t){n.assert(t instanceof r.Document,"Unknown MaybeDocument type "+t);var e=t;return n.assert(e.key.equals(this.key),"Can only transform a document with the same key"),e},s.prototype.localTransformResults=function(t){for(var e=[],o=0,r=this.fieldTransforms;o<r.length;o++){var s=r[o].transform;if(!(s instanceof a))return n.fail("Encountered unknown transform: "+s);e.push(new i.ServerTimestampValue(t))}return e},s.prototype.transformObject=function(t,e){n.assert(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var o=0;o<this.fieldTransforms.length;o++){var r=this.fieldTransforms[o],i=r.transform,s=r.field;if(!(i instanceof a))return n.fail("Encountered unknown transform: "+i);t=t.set(s,e[o])}return t},s}(p);exports.TransformMutation=m;var d=function(o){function i(t,e){var n=o.call(this)||this;return n.key=t,n.precondition=e,n.type=f.Delete,n}return t(i,o),i.prototype.applyToRemoteDocument=function(t,o){return this.verifyKeyMatches(t),n.assert(null==o.transformResults,"Transform results received by DeleteMutation."),new r.NoDocument(this.key,e.SnapshotVersion.MIN)},i.prototype.applyToLocalView=function(t,o){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&n.assert(t.key.equals(this.key),"Can only apply mutation to document with same key"),new r.NoDocument(this.key,e.SnapshotVersion.forDeletedDoc())):t},i.prototype.equals=function(t){return t instanceof i&&this.key.equals(t.key)&&this.precondition.equals(t.precondition)},i}(p);exports.DeleteMutation=d;
},{"../util/assert":47,"../util/misc":211,"./document":173,"../core/snapshot_version":170,"./field_value":175}],179:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.count=t}return t.prototype.equals=function(t){return t&&t.count===this.count},t}();exports.ExistenceFilter=t;
},{}],67:[function(require,module,exports) {
"use strict";function e(e){switch(e){case I.Code.OK:return C.fail("Treated status OK as error");case I.Code.CANCELLED:case I.Code.UNKNOWN:case I.Code.DEADLINE_EXCEEDED:case I.Code.RESOURCE_EXHAUSTED:case I.Code.INTERNAL:case I.Code.UNAVAILABLE:case I.Code.UNAUTHENTICATED:return!1;case I.Code.INVALID_ARGUMENT:case I.Code.NOT_FOUND:case I.Code.ALREADY_EXISTS:case I.Code.PERMISSION_DENIED:case I.Code.FAILED_PRECONDITION:case I.Code.ABORTED:case I.Code.OUT_OF_RANGE:case I.Code.UNIMPLEMENTED:case I.Code.DATA_LOSS:return!0;default:return C.fail("Unknown status code: "+e)}}function E(e){var E=D[e];if(void 0!==E)return N(E)}function N(e){if(void 0===e)return o.error("GRPC error has no .code"),I.Code.UNKNOWN;switch(e){case D.OK:return I.Code.OK;case D.CANCELLED:return I.Code.CANCELLED;case D.UNKNOWN:return I.Code.UNKNOWN;case D.DEADLINE_EXCEEDED:return I.Code.DEADLINE_EXCEEDED;case D.RESOURCE_EXHAUSTED:return I.Code.RESOURCE_EXHAUSTED;case D.INTERNAL:return I.Code.INTERNAL;case D.UNAVAILABLE:return I.Code.UNAVAILABLE;case D.UNAUTHENTICATED:return I.Code.UNAUTHENTICATED;case D.INVALID_ARGUMENT:return I.Code.INVALID_ARGUMENT;case D.NOT_FOUND:return I.Code.NOT_FOUND;case D.ALREADY_EXISTS:return I.Code.ALREADY_EXISTS;case D.PERMISSION_DENIED:return I.Code.PERMISSION_DENIED;case D.FAILED_PRECONDITION:return I.Code.FAILED_PRECONDITION;case D.ABORTED:return I.Code.ABORTED;case D.OUT_OF_RANGE:return I.Code.OUT_OF_RANGE;case D.UNIMPLEMENTED:return I.Code.UNIMPLEMENTED;case D.DATA_LOSS:return I.Code.DATA_LOSS;default:return C.fail("Unknown status code: "+e)}}function r(e){if(void 0===e)return D.OK;switch(e){case I.Code.OK:return D.OK;case I.Code.CANCELLED:return D.CANCELLED;case I.Code.UNKNOWN:return D.UNKNOWN;case I.Code.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case I.Code.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case I.Code.INTERNAL:return D.INTERNAL;case I.Code.UNAVAILABLE:return D.UNAVAILABLE;case I.Code.UNAUTHENTICATED:return D.UNAUTHENTICATED;case I.Code.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case I.Code.NOT_FOUND:return D.NOT_FOUND;case I.Code.ALREADY_EXISTS:return D.ALREADY_EXISTS;case I.Code.PERMISSION_DENIED:return D.PERMISSION_DENIED;case I.Code.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case I.Code.ABORTED:return D.ABORTED;case I.Code.OUT_OF_RANGE:return D.OUT_OF_RANGE;case I.Code.UNIMPLEMENTED:return D.UNIMPLEMENTED;case I.Code.DATA_LOSS:return D.DATA_LOSS;default:return C.fail("Unknown status code: "+e)}}function A(e){switch(e){case 200:return I.Code.OK;case 400:return I.Code.INVALID_ARGUMENT;case 401:return I.Code.UNAUTHENTICATED;case 403:return I.Code.PERMISSION_DENIED;case 404:return I.Code.NOT_FOUND;case 409:return I.Code.ABORTED;case 416:return I.Code.OUT_OF_RANGE;case 429:return I.Code.RESOURCE_EXHAUSTED;case 499:return I.Code.CANCELLED;case 500:return I.Code.UNKNOWN;case 501:return I.Code.UNIMPLEMENTED;case 503:return I.Code.UNAVAILABLE;case 504:return I.Code.DEADLINE_EXCEEDED;default:return e>=200&&e<300?I.Code.OK:e>=400&&e<500?I.Code.FAILED_PRECONDITION:e>=500&&e<600?I.Code.INTERNAL:I.Code.UNKNOWN}}Object.defineProperty(exports,"__esModule",{value:!0});var D,C=require("../util/assert"),I=require("../util/error"),o=require("../util/log");!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(D||(D={})),exports.isPermanentError=e,exports.mapCodeFromRpcStatus=E,exports.mapCodeFromRpcCode=N,exports.mapRpcCodeFromCode=r,exports.mapCodeFromHttpStatus=A;
},{"../util/assert":47,"../util/error":69,"../util/log":49}],225:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./sorted_map"),r=function(){function r(r){this.comparator=r,this.data=new t.SortedMap(this.comparator)}return r.fromMapKeys=function(t){var e=new r(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},r.prototype.has=function(t){return null!==this.data.get(t)},r.prototype.first=function(){return this.data.minKey()},r.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(r.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),r.prototype.indexOf=function(t){return this.data.indexOf(t)},r.prototype.forEach=function(t){this.data.inorderTraversal(function(r,e){return t(r),!1})},r.prototype.forEachInRange=function(t,r){for(var e=this.data.getIteratorFrom(t[0]);e.hasNext();){var o=e.getNext();if(this.comparator(o.key,t[1])>=0)return;r(o.key)}},r.prototype.forEachWhile=function(t,r){var e;for(e=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();e.hasNext();){if(!t(e.getNext().key))return}},r.prototype.firstAfterOrEqual=function(t){var r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null},r.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},r.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},r.prototype.isEmpty=function(){return this.data.isEmpty()},r.prototype.unionWith=function(t){var r=this;return t.forEach(function(t){r=r.add(t)}),r},r.prototype.equals=function(t){if(!(t instanceof r))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),o=t.data.getIterator();e.hasNext();){var a=e.getNext().key,n=o.getNext().key;if(0!==this.comparator(a,n))return!1}return!0},r.prototype.toString=function(){var t=[];return this.forEach(function(r){return t.push(r)}),"SortedSet("+t.toString()+")"},r.prototype.copy=function(t){var e=new r(this.comparator);return e.data=t,e},r}();exports.SortedSet=r;
},{"./sorted_map":222}],220:[function(require,module,exports) {
"use strict";function e(){return c}function r(){return p}function t(){return m}function o(){return d}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../util/sorted_map"),u=require("../util/sorted_set"),a=require("./document_key"),c=new n.SortedMap(a.DocumentKey.comparator);exports.maybeDocumentMap=e;var p=new n.SortedMap(a.DocumentKey.comparator);exports.documentMap=r;var m=new n.SortedMap(a.DocumentKey.comparator);exports.documentVersionMap=t;var d=new u.SortedSet(a.DocumentKey.comparator);exports.documentKeySet=o;
},{"../util/sorted_map":222,"./document_key":174,"../util/sorted_set":225}],221:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/snapshot_version"),t=require("../model/collections"),o=require("../platform/platform"),n=function(){function t(e,t,o){this.snapshotVersion=e,this.targetChanges=t,this.documentUpdates=o}return t.prototype.addDocumentUpdate=function(e){this.documentUpdates=this.documentUpdates.insert(e.key,e)},t.prototype.handleExistenceFilterMismatch=function(t){this.targetChanges[t]={mapping:new d,snapshotVersion:e.SnapshotVersion.MIN,currentStatusUpdate:r.MarkNotCurrent,resumeToken:o.emptyByteString()}},t}();exports.RemoteEvent=n;var r;!function(e){e[e.None=0]="None",e[e.MarkNotCurrent=1]="MarkNotCurrent",e[e.MarkCurrent=2]="MarkCurrent"}(r=exports.CurrentStatusUpdate||(exports.CurrentStatusUpdate={}));var s=t.documentKeySet(),d=function(){function e(){this.docs=s}return Object.defineProperty(e.prototype,"documents",{get:function(){return this.docs},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.docs=this.docs.add(e)},e.prototype.delete=function(e){this.docs=this.docs.delete(e)},e.prototype.equals=function(e){return null!==e&&this.docs.equals(e.docs)},e}();exports.ResetMapping=d;var u=function(){function e(){this.addedDocuments=s,this.removedDocuments=s}return e.prototype.applyToKeySet=function(e){var t=e;return this.addedDocuments.forEach(function(e){return t=t.add(e)}),this.removedDocuments.forEach(function(e){return t=t.delete(e)}),t},e.prototype.add=function(e){this.addedDocuments=this.addedDocuments.add(e),this.removedDocuments=this.removedDocuments.delete(e)},e.prototype.delete=function(e){this.addedDocuments=this.addedDocuments.delete(e),this.removedDocuments=this.removedDocuments.add(e)},e.prototype.equals=function(e){return null!==e&&this.addedDocuments.equals(e.addedDocuments)&&this.removedDocuments.equals(e.removedDocuments)},e}();exports.UpdateMapping=u;
},{"../core/snapshot_version":170,"../model/collections":220,"../platform/platform":41}],180:[function(require,module,exports) {
"use strict";function e(e,t){t.length>0&&(e.resumeToken=t)}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../model/collections"),n=require("../platform/platform"),r=require("../util/assert"),a=require("../util/obj"),s=require("./remote_event"),i=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}();exports.DocumentWatchChange=i;var o=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}();exports.ExistenceFilterChange=o;var g;!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(g=exports.WatchTargetChangeState||(exports.WatchTargetChangeState={}));var h=function(){return function(e,t,r,a){void 0===r&&(r=n.emptyByteString()),void 0===a&&(a=null),this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}();exports.WatchTargetChange=h;var c=function(){function c(e,n,r){this.snapshotVersion=e,this.listenTargets=n,this.existenceFilters={},this.targetChanges={},this.documentUpdates=t.maybeDocumentMap(),this.frozen=!1,this.pendingTargetResponses=a.shallowCopy(r)}return c.prototype.add=function(e){r.assert(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),e instanceof i?this.addDocumentChange(e):e instanceof h?this.addTargetChange(e):e instanceof o?this.addExistenceFilterChange(e):r.fail("Unknown watch change: "+e)},c.prototype.addChanges=function(e){var t=this;r.assert(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),e.forEach(function(e){return t.add(e)})},c.prototype.createRemoteEvent=function(){var e=this,t=this.targetChanges;return a.forEachNumber(this.targetChanges,function(n){e.isActiveTarget(n)||delete t[n]}),this.frozen=!0,new s.RemoteEvent(this.snapshotVersion,t,this.documentUpdates)},c.prototype.ensureTargetChange=function(e){var t=this.targetChanges[e];return t||(t={currentStatusUpdate:s.CurrentStatusUpdate.None,snapshotVersion:this.snapshotVersion,mapping:new s.UpdateMapping,resumeToken:n.emptyByteString()},this.targetChanges[e]=t),t},c.prototype.isActiveTarget=function(e){return!a.contains(this.pendingTargetResponses,e)&&a.contains(this.listenTargets,e)},c.prototype.addDocumentChange=function(e){for(var t=!1,n=0,r=e.updatedTargetIds;n<r.length;n++){var a=r[n];if(this.isActiveTarget(a)){this.ensureTargetChange(a).mapping.add(e.key),t=!0}}for(var s=0,i=e.removedTargetIds;s<i.length;s++){a=i[s];if(this.isActiveTarget(a)){this.ensureTargetChange(a).mapping.delete(e.key),t=!0}}e.newDoc&&t&&(this.documentUpdates=this.documentUpdates.insert(e.key,e.newDoc))},c.prototype.addTargetChange=function(t){var n=this;t.targetIds.forEach(function(i){var o=n.ensureTargetChange(i);switch(t.state){case g.NoChange:n.isActiveTarget(i)&&e(o,t.resumeToken);break;case g.Added:n.recordTargetResponse(i),a.contains(n.pendingTargetResponses,i)||(o.mapping=new s.UpdateMapping,o.currentStatusUpdate=s.CurrentStatusUpdate.None,delete n.existenceFilters[i]),e(o,t.resumeToken);break;case g.Removed:n.recordTargetResponse(i),r.assert(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case g.Current:n.isActiveTarget(i)&&(o.currentStatusUpdate=s.CurrentStatusUpdate.MarkCurrent,e(o,t.resumeToken));break;case g.Reset:n.isActiveTarget(i)&&(o.mapping=new s.ResetMapping,e(o,t.resumeToken));break;default:r.fail("Unknown target watch change state: "+t.state)}})},c.prototype.recordTargetResponse=function(e){var t=(this.pendingTargetResponses[e]||0)-1;0===t?delete this.pendingTargetResponses[e]:this.pendingTargetResponses[e]=t},c.prototype.addExistenceFilterChange=function(e){this.isActiveTarget(e.targetId)&&(this.existenceFilters[e.targetId]=e.existenceFilter)},c}();exports.WatchChangeAggregator=c;
},{"../util/assert":47,"../util/obj":167,"../model/collections":220,"../platform/platform":41,"./remote_event":221}],42:[function(require,module,exports) {
"use strict";function e(e,t){h.assert(!T.isNullOrUndefined(e),t+" is missing")}function t(e){return"number"==typeof e?e:"string"==typeof e?parseInt(e,10):h.fail("can't parse "+e)}function r(e,t,r){return t===r||!t&&r in e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../api/blob"),o=require("../api/geo_point"),a=require("../core/database_info"),i=require("../core/query"),u=require("../core/snapshot_version"),s=require("../core/timestamp"),l=require("../local/query_data"),f=require("../model/document"),c=require("../model/document_key"),m=require("../model/field_value"),d=require("../model/mutation"),p=require("../model/path"),h=require("../util/assert"),g=require("../util/error"),y=require("../util/obj"),T=require("../util/types"),N=require("./existence_filter"),v=require("./rpc_error"),V=require("./watch_change"),R=function(){var e={};return e[i.Direction.ASCENDING.name]="ASCENDING",e[i.Direction.DESCENDING.name]="DESCENDING",e}(),S=function(){var e={};return e[i.RelationOp.LESS_THAN.name]="LESS_THAN",e[i.RelationOp.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[i.RelationOp.GREATER_THAN.name]="GREATER_THAN",e[i.RelationOp.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[i.RelationOp.EQUAL.name]="EQUAL",e}(),E=function(){function E(e,t){this.databaseId=e,this.options=t}return E.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},E.prototype.unsafeCastProtoByteString=function(e){return e},E.prototype.fromRpcStatus=function(e){var t=void 0===e.code?g.Code.UNKNOWN:v.mapCodeFromRpcCode(e.code);return new g.FirestoreError(t,e.message||"")},E.prototype.toInt32Value=function(e){return T.isNullOrUndefined(e)?void 0:{value:e}},E.prototype.fromInt32Value=function(e){var t;return t="object"==typeof e?e.value:e,T.isNullOrUndefined(t)?null:t},E.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanos}},E.prototype.fromTimestamp=function(e){if("string"==typeof e)return s.Timestamp.fromISOString(e);h.assert(!!e,"Cannot deserialize null or undefined timestamp.");var r=t(e.seconds||"0"),n=e.nanos||0;return new s.Timestamp(r,n)},E.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},E.prototype.fromBlob=function(e){return"string"==typeof e?(h.assert(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),n.Blob.fromBase64String(e)):(h.assert(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),n.Blob.fromUint8Array(e))},E.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},E.prototype.fromVersion=function(e){return h.assert(!!e,"Trying to deserialize version that isn't set"),u.SnapshotVersion.fromTimestamp(this.fromTimestamp(e))},E.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},E.prototype.fromResourceName=function(e){var t=p.ResourcePath.fromString(e);return h.assert(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},E.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},E.prototype.fromName=function(e){var t=this.fromResourceName(e);return h.assert(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),h.assert(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new c.DocumentKey(this.extractLocalPathFromResourceName(t))},E.prototype.toQueryPath=function(e){return 0===e.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,e)},E.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?p.ResourcePath.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(E.prototype,"encodedDatabaseId",{get:function(){return new p.ResourcePath(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),E.prototype.fullyQualifiedPrefixPath=function(e){return new p.ResourcePath(["projects",e.projectId,"databases",e.database])},E.prototype.extractLocalPathFromResourceName=function(e){return h.assert(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},E.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},E.prototype.toValue=function(e){if(e instanceof m.NullValue)return{nullValue:"NULL_VALUE"};if(e instanceof m.BooleanValue)return{booleanValue:e.value()};if(e instanceof m.IntegerValue)return{integerValue:""+e.value()};if(e instanceof m.DoubleValue){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof m.StringValue?{stringValue:e.value()}:e instanceof m.ObjectValue?{mapValue:this.toMapValue(e)}:e instanceof m.ArrayValue?{arrayValue:this.toArrayValue(e)}:e instanceof m.TimestampValue?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof m.GeoPointValue?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof m.BlobValue?{bytesValue:this.toBytes(e.value())}:e instanceof m.RefValue?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:h.fail("Unknown FieldValue "+JSON.stringify(e))},E.prototype.fromValue=function(n){var i=this,u=n.value_type;if(r(n,u,"nullValue"))return m.NullValue.INSTANCE;if(r(n,u,"booleanValue"))return m.BooleanValue.of(n.booleanValue);if(r(n,u,"integerValue"))return new m.IntegerValue(t(n.integerValue));if(r(n,u,"doubleValue")){if(this.options.useProto3Json){if("NaN"===n.doubleValue)return m.DoubleValue.NAN;if("Infinity"===n.doubleValue)return m.DoubleValue.POSITIVE_INFINITY;if("-Infinity"===n.doubleValue)return m.DoubleValue.NEGATIVE_INFINITY}return new m.DoubleValue(n.doubleValue)}if(r(n,u,"stringValue"))return new m.StringValue(n.stringValue);if(r(n,u,"mapValue"))return this.fromFields(n.mapValue.fields||{});if(r(n,u,"arrayValue")){e(n.arrayValue,"arrayValue");var s=n.arrayValue.values||[];return new m.ArrayValue(s.map(function(e){return i.fromValue(e)}))}if(r(n,u,"timestampValue"))return e(n.timestampValue,"timestampValue"),new m.TimestampValue(this.fromTimestamp(n.timestampValue));if(r(n,u,"geoPointValue")){e(n.geoPointValue,"geoPointValue");var l=n.geoPointValue.latitude||0,f=n.geoPointValue.longitude||0;return new m.GeoPointValue(new o.GeoPoint(l,f))}if(r(n,u,"bytesValue")){e(n.bytesValue,"bytesValue");var d=this.fromBlob(n.bytesValue);return new m.BlobValue(d)}if(r(n,u,"referenceValue")){e(n.referenceValue,"referenceValue");var p=this.fromResourceName(n.referenceValue),g=new a.DatabaseId(p.get(1),p.get(3)),y=new c.DocumentKey(this.extractLocalPathFromResourceName(p));return new m.RefValue(g,y)}return h.fail("Unknown Value proto "+JSON.stringify(n))},E.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},E.prototype.toDocument=function(e){return h.assert(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},E.prototype.fromDocument=function(e){return new f.Document(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasLocalMutations:!1})},E.prototype.toFields=function(e){var t=this,r={};return e.forEach(function(e,n){r[e]=t.toValue(n)}),r},E.prototype.fromFields=function(e){var t=this,r=e,n=m.ObjectValue.EMPTY;return y.forEach(r,function(e,r){n=n.set(new p.FieldPath([e]),t.fromValue(r))}),n},E.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},E.prototype.toArrayValue=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.toValue(e))}),{values:r}},E.prototype.fromFound=function(t){h.assert(!!t.found,"Tried to deserialize a found document from a missing document."),e(t.found.name,"doc.found.name"),e(t.found.updateTime,"doc.found.updateTime");var r=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),o=this.fromFields(t.found.fields||{});return new f.Document(r,n,o,{hasLocalMutations:!1})},E.prototype.fromMissing=function(e){h.assert(!!e.missing,"Tried to deserialize a missing document from a found document."),h.assert(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),r=this.fromVersion(e.readTime);return new f.NoDocument(t,r)},E.prototype.fromMaybeDocument=function(e){var t=e.result;return r(e,t,"found")?this.fromFound(e):r(e,t,"missing")?this.fromMissing(e):h.fail("invalid batch get response: "+JSON.stringify(e))},E.prototype.toWatchTargetChangeState=function(e){switch(e){case V.WatchTargetChangeState.Added:return"ADD";case V.WatchTargetChangeState.Current:return"CURRENT";case V.WatchTargetChangeState.NoChange:return"NO_CHANGE";case V.WatchTargetChangeState.Removed:return"REMOVE";case V.WatchTargetChangeState.Reset:return"RESET";default:return h.fail("Unknown WatchTargetChangeState: "+e)}},E.prototype.toTestWatchChange=function(e){if(e instanceof V.ExistenceFilterChange)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof V.DocumentWatchChange){if(e.newDoc instanceof f.Document){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof f.NoDocument){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof V.WatchTargetChange){var r=void 0;return e.cause&&(r={code:v.mapRpcCodeFromCode(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:r}}}return h.fail("Unrecognized watch change: "+JSON.stringify(e))},E.prototype.fromWatchChange=function(t){var n,o=t.response_type;if(r(t,o,"targetChange")){e(t.targetChange,"targetChange");var a=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=t.targetChange.resumeToken||this.emptyByteString(),l=t.targetChange.cause,c=l&&this.fromRpcStatus(l);n=new V.WatchTargetChange(a,i,s,c||null)}else if(r(t,o,"documentChange")){e(t.documentChange,"documentChange"),e(t.documentChange.document,"documentChange.name"),e(t.documentChange.document.name,"documentChange.document.name"),e(t.documentChange.document.updateTime,"documentChange.document.updateTime");var m=t.documentChange,d=this.fromName(m.document.name),p=this.fromVersion(m.document.updateTime),g=this.fromFields(m.document.fields||{}),y=new f.Document(d,p,g,{hasLocalMutations:!1}),T=m.targetIds||[],v=m.removedTargetIds||[];n=new V.DocumentWatchChange(T,v,y.key,y)}else if(r(t,o,"documentDelete")){e(t.documentDelete,"documentDelete"),e(t.documentDelete.document,"documentDelete.document");var R=t.documentDelete;d=this.fromName(R.document),p=R.readTime?this.fromVersion(R.readTime):u.SnapshotVersion.forDeletedDoc(),y=new f.NoDocument(d,p),v=R.removedTargetIds||[];n=new V.DocumentWatchChange([],v,y.key,y)}else if(r(t,o,"documentRemove")){e(t.documentRemove,"documentRemove"),e(t.documentRemove.document,"documentRemove");var S=t.documentRemove;d=this.fromName(S.document),v=S.removedTargetIds||[];n=new V.DocumentWatchChange([],v,d,null)}else{if(!r(t,o,"filter"))return h.fail("Unknown change type "+JSON.stringify(t));e(t.filter,"filter"),e(t.filter.targetId,"filter.targetId");var E=t.filter,P=E.count||0,F=new N.ExistenceFilter(P),C=E.targetId;n=new V.ExistenceFilterChange(C,F)}return n},E.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?V.WatchTargetChangeState.NoChange:"ADD"===e?V.WatchTargetChangeState.Added:"REMOVE"===e?V.WatchTargetChangeState.Removed:"CURRENT"===e?V.WatchTargetChangeState.Current:"RESET"===e?V.WatchTargetChangeState.Reset:h.fail("Got unexpected TargetChange.state: "+e)},E.prototype.versionFromListenResponse=function(e){if(!r(e,e.response_type,"targetChange"))return u.SnapshotVersion.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?u.SnapshotVersion.MIN:t.readTime?this.fromVersion(t.readTime):u.SnapshotVersion.MIN},E.prototype.toMutation=function(e){var t,r=this;if(e instanceof d.SetMutation)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof d.DeleteMutation)t={delete:this.toName(e.key)};else if(e instanceof d.PatchMutation)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof d.TransformMutation))return h.fail("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return r.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},E.prototype.fromMutation=function(t){var r=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):d.Precondition.NONE;if(t.update){e(t.update.name,"name");var o=this.fromName(t.update.name),a=this.fromFields(t.update.fields||{});if(t.updateMask){var i=this.fromDocumentMask(t.updateMask);return new d.PatchMutation(o,a,i,n)}return new d.SetMutation(o,a,n)}if(t.delete){o=this.fromName(t.delete);return new d.DeleteMutation(o,n)}if(t.transform){o=this.fromName(t.transform.document);var u=t.transform.fieldTransforms.map(function(e){return r.fromFieldTransform(e)});return h.assert(!0===n.exists,'Transforms only support precondition "exists == true"'),new d.TransformMutation(o,u)}return h.fail("unknown mutation proto: "+JSON.stringify(t))},E.prototype.toPrecondition=function(e){return h.assert(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:h.fail("Unknown precondition")},E.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?d.Precondition.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?d.Precondition.exists(e.exists):d.Precondition.NONE},E.prototype.fromWriteResult=function(e){var t=this,r=e.updateTime?this.fromVersion(e.updateTime):null,n=null;return e.transformResults&&e.transformResults.length>0&&(n=e.transformResults.map(function(e){return t.fromValue(e)})),new d.MutationResult(r,n)},E.prototype.fromWriteResults=function(e){var t=this;return(e||[]).map(function(e){return t.fromWriteResult(e)})},E.prototype.toFieldTransform=function(e){return h.assert(e.transform instanceof d.ServerTimestampTransform,"Unknown transform: "+e.transform),{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"}},E.prototype.fromFieldTransform=function(e){h.assert("REQUEST_TIME"===e.setToServerValue,"Unknown transform proto: "+JSON.stringify(e));var t=p.FieldPath.fromServerFormat(e.fieldPath);return new d.FieldTransform(t,d.ServerTimestampTransform.instance)},E.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},E.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;h.assert(1===t,"DocumentsTarget contained other than 1 document: "+t);var r=e.documents[0];return i.Query.atPath(this.fromQueryPath(r))},E.prototype.toQueryTarget=function(e){var t={structuredQuery:{}};if(e.path.isEmpty())t.parent=this.toQueryPath(p.ResourcePath.EMPTY_PATH);else{var r=e.path;h.assert(r.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]}var n=this.toFilter(e.filters);n&&(t.structuredQuery.where=n);var o=this.toOrder(e.orderBy);o&&(t.structuredQuery.orderBy=o);var a=this.toInt32Value(e.limit);return void 0!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},E.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0;if(n>0){h.assert(1===n,"StructuredQuery.from with more than one collection is not supported.");var o=r.from[0];t=t.child(o.collectionId)}var a=[];r.where&&(a=this.fromFilter(r.where));var u=[];r.orderBy&&(u=this.fromOrder(r.orderBy));var s=null;r.limit&&(s=this.fromInt32Value(r.limit));var l=null;r.startAt&&(l=this.fromCursor(r.startAt));var f=null;return r.endAt&&(f=this.fromCursor(r.endAt)),new i.Query(t,u,a,s,l,f)},E.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},E.prototype.toLabel=function(e){switch(e){case l.QueryPurpose.Listen:return null;case l.QueryPurpose.ExistenceFilterMismatch:return"existence-filter-mismatch";case l.QueryPurpose.LimboResolution:return"limbo-document";default:return h.fail("Unrecognized query purpose: "+e)}},E.prototype.toTarget=function(e){var t,r=e.query;return t=r.isDocumentQuery()?{documents:this.toDocumentsTarget(r)}:{query:this.toQueryTarget(r)},t.targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},E.prototype.toFilter=function(e){var t=this;if(0!==e.length){var r=e.map(function(e){return e instanceof i.RelationFilter?t.toRelationFilter(e):t.toUnaryFilter(e)});return 1===r.length?r[0]:{compositeFilter:{op:"AND",filters:r}}}},E.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):h.fail("Unknown filter: "+JSON.stringify(e)):[]},E.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},E.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},E.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},E.prototype.fromCursor=function(e){var t=this,r=!!e.before,n=e.values.map(function(e){return t.fromValue(e)});return new i.Bound(n,r)},E.prototype.toDirection=function(e){return R[e.name]},E.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return i.Direction.ASCENDING;case"DESCENDING":return i.Direction.DESCENDING;default:return}},E.prototype.toOperatorName=function(e){return S[e.name]},E.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return i.RelationOp.EQUAL;case"GREATER_THAN":return i.RelationOp.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return i.RelationOp.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return i.RelationOp.LESS_THAN;case"LESS_THAN_OR_EQUAL":return i.RelationOp.LESS_THAN_OR_EQUAL;case"OPERATOR_UNSPECIFIED":return h.fail("Unspecified relation");default:return h.fail("Unknown relation")}},E.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},E.prototype.fromFieldPathReference=function(e){return p.FieldPath.fromServerFormat(e.fieldPath)},E.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},E.prototype.fromPropertyOrder=function(e){return new i.OrderBy(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},E.prototype.toRelationFilter=function(e){return e instanceof i.RelationFilter?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:h.fail("Unrecognized filter: "+JSON.stringify(e))},E.prototype.fromRelationFilter=function(e){return new i.RelationFilter(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},E.prototype.toUnaryFilter=function(e){return e instanceof i.NanFilter?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof i.NullFilter?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:h.fail("Unrecognized filter: "+JSON.stringify(e))},E.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new i.NanFilter(t);case"IS_NULL":var r=this.fromFieldPathReference(e.unaryFilter.field);return new i.NullFilter(r);case"OPERATOR_UNSPECIFIED":return h.fail("Unspecified filter");default:return h.fail("Unknown filter")}},E.prototype.toDocumentMask=function(e){return{fieldPaths:e.fields.map(function(e){return e.canonicalString()})}},E.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return p.FieldPath.fromServerFormat(e)});return new d.FieldMask(t)},E}();exports.JsonProtoSerializer=E;
},{"../util/assert":47,"../util/error":69,"../api/blob":158,"../core/database_info":168,"../api/geo_point":166,"../core/query":169,"../core/snapshot_version":170,"../core/timestamp":171,"../local/query_data":172,"../model/document":173,"../model/document_key":174,"../model/field_value":175,"../model/mutation":176,"../model/path":177,"../util/obj":167,"../util/types":178,"./existence_filter":179,"./rpc_error":67,"./watch_change":180}],68:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/assert"),n=function(){function n(e){this.wrappedOnOpen=null,this.wrappedOnClose=null,this.wrappedOnMessage=null,this.sendFn=e.sendFn,this.closeFn=e.closeFn}return n.prototype.onOpen=function(n){e.assert(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=n},n.prototype.onClose=function(n){e.assert(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=n},n.prototype.onMessage=function(n){e.assert(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=n},n.prototype.close=function(){this.closeFn()},n.prototype.send=function(e){this.sendFn(e)},n.prototype.callOnOpen=function(){e.assert(null!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},n.prototype.callOnClose=function(n){e.assert(null!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(n)},n.prototype.callOnMessage=function(n){e.assert(null!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(n)},n}();exports.StreamBridge=n;
},{"../util/assert":47}],79:[function(require,module,exports) {
var global = (1,eval)("this");
var global=(0,eval)("this");(function(){function l(t){return"string"==typeof t}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function n(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function da(t){return"function"==ba(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function fa(t,e,n){return t.call.apply(t.bind,arguments)}function ha(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,e,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ha).apply(null,arguments)}function ia(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function u(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ab=function(t,n,i){for(var a=Array(arguments.length-2),r=2;r<arguments.length;r++)a[r-2]=arguments[r];return e.prototype[n].apply(t,a)}}function ja(t){if(Error.captureStackTrace)Error.captureStackTrace(this,ja);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function ka(t,e){for(var n=t.split("%s"),i="",a=Array.prototype.slice.call(arguments,1);a.length&&1<n.length;)i+=n.shift()+a.shift();return i+n.join("%s")}function ma(t,e){return t<e?-1:t>e?1:0}function na(t,e){e.unshift(t),ja.call(this,ka.apply(null,e)),e.shift()}function oa(t,e){throw new na("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function w(){0!=qa&&(ra[this[q]||(this[q]=++ea)]=this),this.i=this.i,this.w=this.w}function ua(t){t:{for(var e=va,n=t.length,i=l(t)?t.split(""):t,a=0;a<n;a++)if(a in i&&e.call(void 0,i[a],a,t)){e=a;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function wa(t){if(!n(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function xa(t){return Array.prototype.concat.apply([],arguments)}function ya(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function y(t){return-1!=x.indexOf(t)}function Ba(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function Ca(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n}function Da(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n}function Ea(t){var e,n={};for(e in t)n[e]=t[e];return n}function Ga(t,e){for(var n,i,a=1;a<arguments.length;a++){i=arguments[a];for(n in i)t[n]=i[n];for(var r=0;r<Fa.length;r++)n=Fa[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ha(t){return Ha[" "](t),t}function Ia(t,e){var n=Ja;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function Oa(){var t=k.document;return t?t.documentMode:void 0}function Ta(t){return Ia(t,function(){for(var e=0,n=la(String(Pa)).split("."),i=la(String(t)).split("."),a=Math.max(n.length,i.length),r=0;0==e&&r<a;r++){var s=n[r]||"",o=i[r]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=ma(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||ma(0==s[2].length,0==o[2].length)||ma(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e})}function A(t,e){this.type=t,this.a=this.target=e,this.Pa=!0}function $a(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ma){t:{try{Ha(e.nodeName);var a=!0;break t}catch(t){}a=!1}a||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:ab[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}function cb(t){return!(!t||!t[bb])}function eb(t,e,n,i,a){this.listener=t,this.a=null,this.src=e,this.type=n,this.capture=!!i,this.ga=a,this.key=++db,this.Y=this.ca=!1}function fb(t){t.Y=!0,t.listener=null,t.a=null,t.src=null,t.ga=null}function gb(t){this.src=t,this.a={},this.b=0}function ib(t,e){var n=e.type;if(n in t.a){var i,a=t.a[n],r=sa(a,e);(i=0<=r)&&Array.prototype.splice.call(a,r,1),i&&(fb(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function jb(t,e,n,i,a){return t=t.a[e.toString()],e=-1,t&&(e=hb(t,n,i,a)),-1<e?t[e]:null}function hb(t,e,n,i){for(var a=0;a<t.length;++a){var r=t[a];if(!r.Y&&r.listener==e&&r.capture==!!n&&r.ga==i)return a}return-1}function nb(t,e,i,a,r){if(a&&a.once)return ob(t,e,i,a,r);if(n(e)){for(var s=0;s<e.length;s++)nb(t,e[s],i,a,r);return null}return i=pb(i),cb(t)?t.aa(e,i,p(a)?!!a.capture:!!a,r):qb(t,e,i,!1,a,r)}function qb(t,e,n,i,a,r){if(!e)throw Error("Invalid event type");var s=p(a)?!!a.capture:!!a,o=rb(t);if(o||(t[kb]=o=new gb(t)),(n=o.add(e,n,i,s,r)).a)return n;if(i=sb(),n.a=i,i.src=t,i.listener=n,t.addEventListener)Za||(a=s),void 0===a&&(a=!1),t.addEventListener(e.toString(),i,a);else if(t.attachEvent)t.attachEvent(tb(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return mb++,n}function sb(){var t=ub,e=Xa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function ob(t,e,i,a,r){if(n(e)){for(var s=0;s<e.length;s++)ob(t,e[s],i,a,r);return null}return i=pb(i),cb(t)?t.Ha(e,i,p(a)?!!a.capture:!!a,r):qb(t,e,i,!0,a,r)}function vb(t,e,i,a,r){if(n(e))for(var s=0;s<e.length;s++)vb(t,e[s],i,a,r);else a=p(a)?!!a.capture:!!a,i=pb(i),cb(t)?t.va(e,i,a,r):t&&(t=rb(t))&&(e=jb(t,e,i,a,r))&&wb(e)}function wb(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(cb(e))ib(e.c,t);else{var n=t.type,i=t.a;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(tb(n),i):e.addListener&&e.removeListener&&e.removeListener(i),mb--,(n=rb(e))?(ib(n,t),0==n.b&&(n.src=null,e[kb]=null)):fb(t)}}}function tb(t){return t in lb?lb[t]:lb[t]="on"+t}function xb(t,e,n,i){var a=!0;if((t=rb(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var r=e[t];r&&r.capture==n&&!r.Y&&(r=yb(r,i),a=a&&!1!==r)}return a}function yb(t,e){var n=t.listener,i=t.ga||t.src;return t.ca&&wb(t),n.call(i,e)}function ub(t,e){if(t.Y)return!0;if(!Xa){if(!e)t:{e=["window","event"];for(var n=k,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(i=e,e=new $a(i,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var a=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){a=!0}(a||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],a=e.a;a;a=a.parentNode)i.push(a);for(t=t.type,a=i.length-1;0<=a;a--){e.a=i[a];var r=xb(i[a],t,!0,e);n=n&&r}for(a=0;a<i.length;a++)e.a=i[a],r=xb(i[a],t,!1,e),n=n&&r}return n}return yb(t,new $a(e,this))}function rb(t){return(t=t[kb])instanceof gb?t:null}function pb(t){return da(t)?t:(t[zb]||(t[zb]=function(e){return t.handleEvent(e)}),t[zb])}function B(){w.call(this),this.c=new gb(this),this.P=this,this.J=null}function Ab(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var a=!0,r=0;r<e.length;++r){var s=e[r];if(s&&!s.Y&&s.capture==n){var o=s.listener,h=s.ga||s.src;s.ca&&ib(t.c,s),a=!1!==o.call(h,i)&&a}}return a&&0!=i.Pa}function Bb(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Db(t){var e=[];return Eb(new Fb,t,e),e.join("")}function Fb(){}function Eb(t,e,i){if(null==e)i.push("null");else{if("object"==typeof e){if(n(e)){var a=e;e=a.length,i.push("[");for(var r="",s=0;s<e;s++)i.push(r),Eb(t,a[s],i),r=",";return void i.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){i.push("{"),r="";for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&"function"!=typeof(s=e[a])&&(i.push(r),Gb(a,i),i.push(":"),Eb(t,s,i),r=",");return void i.push("}")}e=e.valueOf()}switch(typeof e){case"string":Gb(e,i);break;case"number":i.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":i.push(String(e));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}function Gb(t,e){e.push('"',t.replace(Ib,function(t){var e=Hb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hb[t]=e),e}),'"')}function Jb(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Kb(){this.b=this.a=null}function Ob(){var t=Pb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lb(){this.next=this.b=this.a=null}function Qb(t){k.setTimeout(function(){throw t},0)}function Sb(){var t=k.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=r(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!y("Trident")&&!y("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).za;n.za=null,t()}},function(t){i.next={za:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){k.setTimeout(t,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var t=k.Promise.resolve(void 0);Tb=function(){t.then(Vb)}}else Tb=function(){var t=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(t)):k.setImmediate(t)}}function Vb(){for(var t;t=Ob();){try{t.a.call(t.b)}catch(t){Qb(t)}var e=Nb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.f=r(this.ib,this),this.g=t()}function Yb(t){t.$=!1,t.K&&(t.a.clearTimeout(t.K),t.K=null)}function Zb(t,e,n){if(da(t))n&&(t=r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=r(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function $b(t,e,n){w.call(this),this.f=null!=n?r(t,n):t,this.c=e,this.b=r(this.bb,this),this.a=[]}function ac(t){t.X=Zb(t.b,t.c),t.f.apply(null,t.a)}function C(t){w.call(this),this.b=t,this.a={}}function cc(t){Ba(t.a,function(t,e){this.a.hasOwnProperty(e)&&wb(t)},t),t.a={}}function dc(t,e,n){this.reset(t,e,n,void 0,void 0)}function fc(t){this.f=t,this.b=this.c=this.a=null}function D(t,e){this.name=t,this.value=e}function lc(t){return t.c?t.c:t.a?lc(t.a):(oa("Root logger has no level set."),null)}function oc(t){nc||(nc=new fc(""),mc[""]=nc,nc.c=jc);var e;if(!(e=mc[t])){e=new fc(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=oc(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,mc[t]=e}return e}function E(t,e){t&&t.log(hc,e,void 0)}function pc(t,e){t&&t.log(ic,e,void 0)}function F(t,e){t&&t.log(kc,e,void 0)}function qc(){this.a=oc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function rc(t,e,n,i,a,r){H(t,function(){if(t.b)if(r)for(var s="",o=r.split("&"),h=0;h<o.length;h++){var c=o[h].split("=");if(1<c.length){var u=c[0];c=c[1];var l=u.split("_");s=2<=l.length&&"type"==l[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=r;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+n+"\n"+s})}function sc(t,e,n,i,a,r,s){H(t,function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+n+"\n"+r+" "+s})}function tc(t,e,n,i){H(t,function(){return"XMLHTTP TEXT ("+e+"): "+uc(t,n)+(i?" "+i:"")})}function vc(t,e){H(t,function(){return"TIMEOUT: "+e})}function I(t,e){F(t.a,e)}function wc(t,e,n){(t=t.a)&&t.log(gc,n||"Exception",e)}function H(t,e){pc(t.a,e)}function xc(t,e){(t=t.a)&&t.log(gc,e,void 0)}function uc(t,e){if(!t.b)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(var a=0;a<i.length;a++)if(n(i[a])){var r=i[a];if(!(2>r.length)){var s=r[1];if(n(s)&&!(1>s.length)){var o=s[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var h=1;h<s.length;h++)s[h]=""}}}return Db(i)}catch(n){return I(t,"Exception parsing expected JS array - probably was not JS"),e}}function zc(t){A.call(this,"serverreachability",t)}function Ac(t){yc.dispatchEvent(new zc(yc,t))}function Bc(t){A.call(this,"statevent",t)}function J(t){yc.dispatchEvent(new Bc(yc,t))}function Cc(t){A.call(this,"timingevent",t)}function Dc(t,e,n){yc.dispatchEvent(new Cc(yc,t,e,n))}function Ec(t,e){if(!da(t))throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}function Hc(){}function Ic(t){var e;return(e=t.a)||(e={},Jc(t)&&(e[0]=!0,e[1]=!0),e=t.a=e),e}function Lc(){}function Mc(t){return(t=Jc(t))?new ActiveXObject(t):new XMLHttpRequest}function Jc(t){if(!t.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.b=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.b}function K(t,e,n,i){this.i=t,this.b=e,this.f=n,this.T=i||1,this.N=new C(this),this.S=Nc,(t=this.H=new Xb).b=Oc,t.K&&t.$?(Yb(t),t.start()):t.K&&Yb(t),this.j=null,this.c=!1,this.m=this.g=this.h=this.J=this.D=this.U=this.w=null,this.s=[],this.a=null,this.F=0,this.l=this.o=null,this.C=-1,this.B=!1,this.P=0,this.I=null,this.M=!1}function Pc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}function Sc(t,e,n){t.J=1,t.h=Tc(L(e)),t.m=n,t.M=!0,Uc(t,null)}function Vc(t,e,n,i){t.J=1,t.h=Tc(L(e)),t.m=null,t.M=n,Uc(t,i)}function Uc(e,n){e.D=t(),Wc(e),e.g=L(e.h),Xc(e.g,"t",e.T),e.F=0,e.a=e.i.da(e.i.ia()?n:null),0<e.P&&(e.I=new $b(r(e.Qa,e,e.a),e.P)),e.N.aa(e.a,"readystatechange",e.fb),n=e.j?Ea(e.j):{},e.m?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.m,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),rc(e.b,e.o,e.g,e.f,e.T,e.m)}function Yc(t){var e=M(t.a),n=t.a.Fa(),i=t.a.W();if(!(3>e||3==e&&!Ka&&!t.a.V())){t.B||4!=e||7==n||Ac(8==n||0>=i?3:2),Zc(t);var a=t.a.W();t.C=a,(n=t.a.V())||I(t.b,function(){return"No response text for uri "+t.g+" status "+a}),t.c=200==a,sc(t.b,t.o,t.g,t.f,t.T,e,a),t.c?(t.M?($c(t,e,n),Ka&&t.c&&3==e&&ad(t)):(tc(t.b,t.f,n,null),bd(t,n)),4==e&&cd(t),t.c&&!t.B&&(4==e?t.i.ua(t):(t.c=!1,Wc(t)))):(400==a&&0<n.indexOf("Unknown SID")?(t.l=3,J(12),E(t.b.a,"XMLHTTP Unknown SID ("+t.f+")")):(t.l=0,J(13),E(t.b.a,"XMLHTTP Bad status "+a+" ("+t.f+")")),cd(t),dd(t))}}function $c(t,e,n){for(var i=!0;!t.B&&t.F<n.length;){var a=ed(t,n);if(a==Rc){4==e&&(t.l=4,J(14),i=!1),tc(t.b,t.f,null,"[Incomplete Response]");break}if(a==Qc){t.l=4,J(15),tc(t.b,t.f,n,"[Invalid Chunk]"),i=!1;break}tc(t.b,t.f,a,null),bd(t,a)}4==e&&0==n.length&&(t.l=1,J(16),i=!1),t.c=t.c&&i,i||(tc(t.b,t.f,n,"[Invalid Chunked Response]"),cd(t),dd(t))}function ad(t){t.N.aa(t.H,"tick",t.eb),t.H.start()}function ed(t,e){var n=t.F,i=e.indexOf("\n",n);return-1==i?Rc:(n=Number(e.substring(n,i)),isNaN(n)?Qc:(i+=1)+n>e.length?Rc:(e=e.substr(i,n),t.F=i+n,e))}function Wc(e){e.U=t()+e.S,fd(e,e.S)}function fd(t,e){if(null!=t.w)throw Error("WatchDog timer not null");t.w=Ec(r(t.cb,t),e)}function Zc(t){t.w&&(k.clearTimeout(t.w),t.w=null)}function dd(t){t.i.Ja()||t.B||t.i.ua(t)}function cd(t){Zc(t);var e=t.I;e&&"function"==typeof e.Z&&e.Z(),t.I=null,Yb(t.H),cc(t.N),t.a&&(e=t.a,t.a=null,e.abort(),e.Z())}function bd(t,e){try{t.i.Ma(t,e),Ac(4)}catch(e){wc(t.b,e,"Error in httprequest callback")}}function gd(t){if(t.v&&"function"==typeof t.v)return t.v();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}return Ca(t)}function hd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||l(t))ta(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.v&&"function"==typeof t.v)n=void 0;else if(ca(t)||l(t)){n=[];for(var i=t.length,a=0;a<i;a++)n.push(a)}else n=Da(t);a=(i=gd(t)).length;for(var r=0;r<a;r++)e.call(void 0,i[r],n&&n[r],t)}}function N(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t){t instanceof N?(n=t.O(),i=t.v()):(n=Da(t),i=Ca(t));for(var a=0;a<n.length;a++)this.set(n[a],i[a])}}function jd(t){t.b={},t.a.length=0,t.c=0}function kd(t,e){return!!O(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&id(t),!0)}function id(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];O(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var a={};for(n=e=0;e<t.a.length;)i=t.a[e],O(a,i)||(t.a[n++]=i,a[i]=1),e++;t.a.length=n}}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function md(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),a=null;if(0<=i){var r=t[n].substring(0,i);a=t[n].substring(i+1)}else r=t[n];e(r,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}function P(t,e){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;t instanceof P?(this.h=void 0!==e?e:t.h,nd(this,t.f),this.j=t.j,od(this,t.b),pd(this,t.i),this.a=t.a,qd(this,rd(t.c)),this.g=t.g):t&&(n=String(t).match(ld))?(this.h=!!e,nd(this,n[1]||"",!0),this.j=sd(n[2]||""),od(this,n[3]||"",!0),pd(this,n[4]),this.a=sd(n[5]||"",!0),qd(this,n[6]||"",!0),this.g=sd(n[7]||"")):(this.h=!!e,this.c=new td(null,this.h))}function L(t){return new P(t)}function nd(t,e,n){t.f=n?sd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function od(t,e,n){t.b=n?sd(e,!0):e}function pd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function qd(t,e,n){e instanceof td?(t.c=e,zd(t.c,t.h)):(n||(e=ud(e,Ad)),t.c=new td(e,t.h))}function Q(t,e,n){t.c.set(e,n)}function Xc(t,e,i){n(i)||(i=[String(i)]),Bd(t.c,e,i)}function Tc(e){return Q(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Cd(t){return t instanceof P?L(t):new P(t,void 0)}function Dd(t,e,n,i){var a=new P(null,void 0);return t&&nd(a,t),e&&od(a,e),n&&pd(a,n),i&&(a.a=i),a}function sd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Ed),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ed(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function td(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function R(t){t.a||(t.a=new N,t.b=0,t.c&&md(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Gd(t,e){R(t),e=Fd(t,e),O(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kd(t.a,e))}function Hd(t,e){return R(t),e=Fd(t,e),O(t.a.b,e)}function Bd(t,e,n){Gd(t,e),0<n.length&&(t.c=null,t.a.set(Fd(t,e),ya(n)),t.b+=n.length)}function rd(t){var e=new td;return e.c=t.c,t.a&&(e.a=new N(t.a),e.b=t.b),e}function Fd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function zd(t,e){e&&!t.f&&(R(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gd(this,e),Bd(this,n,t))},t)),t.f=e}function Id(){this.a=t()}function Kd(){Jd||(Jd=new Id)}function Ld(){Jd||(Jd=new Id)}function Md(){}function Od(){A.call(this,"d")}function Pd(){A.call(this,"c")}function Qd(t,e){this.a=t,this.b=e,this.c=this.i=null,this.h=!1,this.l=null,this.f=-1,this.m=this.g=null}function Rd(t){I(t.b,"TestConnection: starting stage 2");var e=t.a.H.a;if(null!=e)I(t.b,function(){return"Buffered"}),J(4),e?(J(10),Sd(t.a,t,!1)):(J(11),Sd(t.a,t,!0));else{t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i;var n=Td(t.a,t.g,t.l);J(4),Xc(n,"TYPE","xmlhttp");var i=t.a.j,a=t.a.J;i&&a&&Q(n,i,a),Vc(t.c,n,!1,t.g)}}function Vd(){this.a=this.b=null}function S(){this.a=new N}function Wd(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[q]||(t[q]=++ea)):e.charAt(0)+t}function Xd(t,e){this.a=t,this.b=e}function Yd(t){this.g=t||Zd,this.f=k.pa&&k.pa.Ka&&k.pa.Ka()&&k.pa.Ka().Bb?this.g:1,this.a=null,1<this.f&&(this.a=new S),this.b=null,this.c=[]}function $d(t,e){t.a||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(t.f=t.g,t.a=new S,t.b&&(ae(t,t.b),t.b=null))}function be(t){return!!t.b||!!t.a&&t.a.u()>=t.f}function ce(t,e){return t.b?t.b==e:!!t.a&&t.a.contains(e)}function ae(t,e){t.a?t.a.add(e):t.b=e}function de(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.contains(e)&&kd(t.a.a,Wd(e))}function ee(t){if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return ta(t.a.v(),function(t){e=e.concat(t.s)}),e}return ya(t.c)}function fe(t,e){t.c=t.c.concat(e)}function ge(){}function he(){this.a=new ge}function ie(t,e,n){var i=n||"";try{hd(t,function(t,n){var a=t;p(t)&&(a=Db(t)),e.push(i+n+"="+encodeURIComponent(a))})}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function je(t,e){var n=new qc;I(n,"TestLoadImage: loading "+t);var i=new Image;i.onload=ia(ke,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ia(ke,n,i,"TestLoadImage: error",!1,e),i.onabort=ia(ke,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ia(ke,n,i,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}function ke(t,e,n,i,a){try{I(t,n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch(e){wc(t,e)}}function T(t){B.call(this),this.headers=new N,this.F=t||null,this.f=!1,this.D=this.a=null,this.M=this.s="",this.j=0,this.g="",this.h=this.I=this.o=this.H=!1,this.l=0,this.B=null,this.N=le,this.C=this.m=!1}function qe(t){return z&&Ta(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function va(t){return"content-type"==t.toLowerCase()}function oe(t,e){t.f=!1,t.a&&(t.h=!0,t.a.abort(),t.h=!1),t.g=e,t.j=5,re(t),se(t)}function re(t){t.H||(t.H=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function te(t){if(t.f&&void 0!==goog)if(t.D[1]&&4==M(t)&&2==t.W())F(t.b,U(t,"Local request error detected and ignored"));else if(t.o&&4==M(t))Zb(t.La,0,t);else if(t.dispatchEvent("readystatechange"),4==M(t)){F(t.b,U(t,"Request complete")),t.f=!1;try{var e=t.W();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var i;if(!(i=n)){var a;if(a=0===e){var r=String(t.s).match(ld)[1]||null;if(!r&&k.self&&k.self.location){var s=k.self.location.protocol;r=s.substr(0,s.length-1)}a=!me.test(r?r.toLowerCase():"")}i=a}i?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.j=6,t.g=t.Ga()+" ["+t.W()+"]",re(t))}finally{se(t)}}}function se(t,e){if(t.a){pe(t);var n=t.a,i=t.D[0]?aa:null;t.a=null,t.D=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(gc,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function pe(t){t.a&&t.C&&(t.a.ontimeout=null),t.B&&(k.clearTimeout(t.B),t.B=null)}function M(t){return t.a?t.a.readyState:0}function U(t,e){return e+" ["+t.M+" "+t.s+" "+t.W()+"]"}function ue(t){var e="";return Ba(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function ve(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}if(i)return t;if(n=ue(n),l(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(i=t.indexOf("?"))||i>n){i=n;var a=""}else a=t.substring(i+1,n);n=(t=[t.substr(0,i),a,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Q(t,e,n),t}function we(t){this.ya=0,this.g=[],this.a=new qc,this.H=new Vd,this.ja=this.wa=this.F=this.ka=this.b=this.J=this.j=this.U=this.h=this.M=this.i=null,this.Ua=this.P=0,this.la=this.B=this.o=this.m=this.l=this.f=null,this.s=this.xa=this.N=-1,this.T=this.w=this.C=0,this.S=t&&t.supportsCrossDomainXhr||!1,this.I="",this.c=new Yd(t&&t.concurrentRequestLimit),this.ma=new he,this.D=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,this.Ta=t&&t.fastHandshake||!1,t&&t.Ea&&this.a.Ea()}function xe(e){if(I(e.a,"disconnect()"),ye(e),3==e.G){var n=e.P++,i=L(e.F);Q(i,"SID",e.I),Q(i,"RID",n),Q(i,"TYPE","terminate"),ze(e,i),(n=new K(e,e.a,n,void 0)).J=2,n.h=Tc(L(i)),i=!1,k.navigator&&k.navigator.sendBeacon&&(i=k.navigator.sendBeacon(n.h.toString(),"")),!i&&k.Image&&((new Image).src=n.h,i=!0),i||(n.a=n.i.da(null),n.a.fa(n.h)),n.D=t(),Wc(n)}Ae(e)}function ye(t){t.B&&(t.B.abort(),t.B=null),t.b&&(t.b.cancel(),t.b=null),t.m&&(k.clearTimeout(t.m),t.m=null),Be(t),t.c.cancel(),t.l&&(k.clearTimeout(t.l),t.l=null)}function Ce(t,e){1e3==t.g.length&&xc(t.a,function(){return"Already have 1000 queued maps upon queueing "+Db(e)}),t.g.push(new Xd(t.Ua++,e)),3==t.G&&De(t)}function De(t){be(t.c)||t.l||(t.l=Ec(r(t.Oa,t),0),t.C=0)}function Ee(t,e){var n=t.c;return(n.b?1:n.a?n.a.u():0)>=t.c.f-(t.l?1:0)?(xc(t.a,"Unexpected retry request is scheduled."),!1):t.l?(I(t.a,"Use the retry request that is already scheduled."),t.g=e.s.concat(t.g),!0):!(1==t.G||2==t.G||2<=t.C)&&(I(t.a,"Going to retry POST"),t.l=Ec(r(t.Oa,t,e),Fe(t,t.C)),t.C++,!0)}function He(t,e){var n;n=e?e.f:t.P++;var i=L(t.F);Q(i,"SID",t.I),Q(i,"RID",n),Q(i,"AID",t.N),ze(t,i),t.h&&t.i&&ve(i,t.h,t.i),n=new K(t,t.a,n,t.C+1),null===t.h&&(n.j=t.i),e&&(t.g=e.s.concat(t.g)),e=Ge(t,n),n.setTimeout(Math.round(1e4)+Math.round(1e4*Math.random())),ae(t.c,n),Sc(n,i,e)}function ze(t,e){t.f&&hd({},function(t,n){Q(e,n,t)})}function Ge(t,e){var n=Math.min(t.g.length,1e3),i=t.f?r(t.f.Va,t.f,t):null;t:for(var a=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?(s=a[0].a,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var h=!0,c=0;c<n;c++){var u=a[c].a,l=a[c].b;if(0>(u-=s))s=Math.max(0,a[c].a-100),h=!1;else try{ie(l,o,"req"+u+"_")}catch(t){i&&i(l)}}if(h){i=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,i}function Ie(t){if(!t.b&&!t.m){t.T=1;var e=t.Na;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(e,t),t.w=0}}function Je(t){return t.b||t.m?(xc(t.a,"Request already in progress"),!1):!(3<=t.w)&&(I(t.a,"Going to retry GET"),t.T++,t.m=Ec(r(t.Na,t),Fe(t,t.w)),t.w++,!0)}function Sd(t,e,n){I(t.a,"Test Connection Finished");var i=e.m;i&&$d(t.c,i),t.la=n,t.s=e.f,I(t.a,"connectChannel_()"),t.F=Ke(t,t.ka),De(t)}function Ud(t,e){I(t.a,"Test Connection Failed"),t.s=e.f,V(t,2)}function Be(t){null!=t.o&&(k.clearTimeout(t.o),t.o=null)}function Fe(t,e){var n=5e3+Math.floor(1e4*Math.random());return t.ra()||(I(t.a,"Inactive channel"),n*=2),n*e}function V(t,e){if(H(t.a,"Error code "+e),2==e){var n=null;t.f&&(n=null);var i=r(t.hb,t);n||(n=new P("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||nd(n,"https"),Tc(n)),je(n.toString(),i)}else J(2);I(t.a,"HttpChannel: error - "+e),t.G=0,t.f&&t.f.Ba(e),Ae(t),ye(t)}function Ae(t){if(t.G=0,t.s=-1,t.f){var e=ee(t.c);0==e.length&&0==t.g.length||(I(t.a,function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.g.length}),t.c.c.length=0,ya(t.g),t.g.length=0),t.f.Aa()}}function Ke(t,e){return e=Le(t,null,e),I(t.a,"GetForwardChannelUri: "+e),e}function Td(t,e,n){return e=Le(t,t.ia()?e:null,n),I(t.a,"GetBackChannelUri: "+e),e}function Le(t,e,n){var i=Cd(n);if(""!=i.b)e&&od(i,e+"."+i.b),pd(i,i.i);else{var a,r=k.location;a=e?e+"."+r.hostname:r.hostname,i=Dd(r.protocol,a,r.port,n)}return t.U&&Ba(t.U,function(t,e){Q(i,e,t)}),e=t.j,n=t.J,e&&n&&Q(i,e,n),Q(i,"VER",t.oa),ze(t,i),i}function Me(){}function Ne(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else{var a;(a=""==e)||(a=e.length-1,a=0<=a&&e.indexOf("/",a)==a),e+=a?i:"/"+i}}return e}function Oe(){if(z&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function W(t,e){B.call(this),this.a=new we(e),this.b=t,this.s=e&&e.testUrl?e.testUrl:Ne(this.b,"test"),this.f=oc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),this.a.M=t,(t=e&&e.httpHeadersOverwriteParam)&&!/^[\s\xa0]*$/.test(t)&&(this.a.h=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!/^[\s\xa0]*$/.test(e)&&(this.a.j=e,null!==(t=this.g)&&e in t&&(t=this.g,e in t&&delete t[e],E(this.f,"Ignore httpSessionIdParam also specified with messageUrlParams: "+e))),this.h=new Pe(this)}function Qe(t){Od.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Re(){Pd.call(this),this.status=1}function Pe(t){this.a=t}function Te(){this.b=[],this.a=[]}function Ue(t){return 0==t.b.length&&(t.b=t.a,t.b.reverse(),t.a=[]),t.b.pop()}function Ve(t,e){if(w.call(this),this.h=t||0,this.c=e||10,this.h>this.c)throw Error(We);this.a=new Te,this.b=new S,this.g=null,this.ba()}function Xe(t){if("function"==typeof t.Z)t.Z();else for(var e in t)t[e]=null}function Ye(t,e){this.a=t,this.b=e}function Ze(t){if(this.a=[],t)t:{if(t instanceof Ze){var e=t.O();if(t=t.v(),0>=this.u()){for(var n=this.a,i=0;i<e.length;i++)n.push(new Ye(e[i],t[i]));break t}}else e=Da(t),t=Ca(t);for(i=0;i<e.length;i++)$e(this,e[i],t[i])}}function $e(t,e,n){var i=t.a;for(i.push(new Ye(e,n)),e=i.length-1,n=(t=t.a)[e];0<e&&(i=e-1>>1,t[i].a>n.a);)t[e]=t[i],e=i;t[e]=n}function af(){Ze.call(this)}function X(t,e){this.f=new af,Ve.call(this,t,e)}function Y(t,e,n,i){this.l=t,this.j=!!i,X.call(this,e,n)}var g,goog=goog||{},k=this,q="closure_uid_"+(1e9*Math.random()>>>0),ea=0,t=Date.now||function(){return+new Date};u(ja,Error),ja.prototype.name="CustomError";var la=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};u(na,ja),na.prototype.name="AssertionError";var qa=0,ra={};w.prototype.i=!1,w.prototype.Z=function(){if(!this.i&&(this.i=!0,this.A(),0!=qa)){var t=this[q]||(this[q]=++ea);delete ra[t]}},w.prototype.A=function(){if(this.w)for(;this.w.length;)this.w.shift()()};var sa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ta=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,a=l(t)?t.split(""):t,r=0;r<i;r++)r in a&&e.call(n,a[r],r,t)},x;t:{var za=k.navigator;if(za){var Aa=za.userAgent;if(Aa){x=Aa;break t}}x=""}var Fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");Ha[" "]=aa;var Ka=y("Opera"),z=y("Trident")||y("MSIE"),La=y("Edge"),Ma=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Na=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Pa;t:{var Qa="",Ra=function(){var t=x;return Ma?/rv:([^\);]+)(\)|;)/.exec(t):La?/Edge\/([\d\.]+)/.exec(t):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Na?/WebKit\/(\S+)/.exec(t):Ka?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ra&&(Qa=Ra?Ra[1]:""),z){var Sa=Oa();if(null!=Sa&&Sa>parseFloat(Qa)){Pa=String(Sa);break t}}Pa=Qa}var Ja={},Ua,Va=k.document;Ua=Va&&z?Oa()||("CSS1Compat"==Va.compatMode?parseInt(Pa,10):5):void 0;var Wa=Object.freeze||function(t){return t},Xa=!z||9<=Number(Ua),Ya=z&&!Ta("9"),Za=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e),t}();A.prototype.b=function(){this.Pa=!1},u($a,A);var ab=Wa({2:"touch",3:"pen",4:"mouse"});$a.prototype.b=function(){$a.L.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ya)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bb="closure_listenable_"+(1e6*Math.random()|0),db=0;gb.prototype.add=function(t,e,n,i,a){var r=t.toString();(t=this.a[r])||(t=this.a[r]=[],this.b++);var s=hb(t,e,i,a);return-1<s?(e=t[s],n||(e.ca=!1)):(e=new eb(e,this.src,r,!!i,a),e.ca=n,t.push(e)),e};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0,zb="__closure_events_fn_"+(1e9*Math.random()>>>0);u(B,w),B.prototype[bb]=!0,g=B.prototype,g.addEventListener=function(t,e,n,i){nb(this,t,e,n,i)},g.removeEventListener=function(t,e,n,i){vb(this,t,e,n,i)},g.dispatchEvent=function(t){var e,n=this.J;if(n)for(e=[];n;n=n.J)e.push(n);n=this.P;var i=t.type||t;if(l(t))t=new A(t,n);else if(t instanceof A)t.target=t.target||n;else{var a=t;Ga(t=new A(i,n),a)}if(a=!0,e)for(var r=e.length-1;0<=r;r--){var s=t.a=e[r];a=Ab(s,i,!0,t)&&a}if(s=t.a=n,a=Ab(s,i,!0,t)&&a,a=Ab(s,i,!1,t)&&a,e)for(r=0;r<e.length;r++)s=t.a=e[r],a=Ab(s,i,!1,t)&&a;return a},g.A=function(){if(B.L.A.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)0,fb(n[i]);delete e.a[t],e.b--}}this.J=null},g.aa=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},g.Ha=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)},g.va=function(t,e,n,i){var a=this.c;if((t=String(t).toString())in a.a){var r=a.a[t];-1<(e=hb(r,e,n,i))&&(fb(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete a.a[t],a.b--))}};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;Jb.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nb=new Jb(function(){return new Lb},function(t){t.reset()});Kb.prototype.add=function(t,e){var n=Nb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Rb,Tb,Wb=!1,Pb=new Kb;u(Xb,B),g=Xb.prototype,g.$=!1,g.K=null,g.ib=function(){if(this.$){var e=t()-this.g;0<e&&e<.8*this.b?this.K=this.a.setTimeout(this.f,this.b-e):(this.K&&(this.a.clearTimeout(this.K),this.K=null),this.dispatchEvent("tick"),this.$&&(this.K=this.a.setTimeout(this.f,this.b),this.g=t()))}},g.start=function(){this.$=!0,this.K||(this.K=this.a.setTimeout(this.f,this.b),this.g=t())},g.A=function(){Xb.L.A.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.X=null,g.Xa=function(t){this.a=arguments,this.X?this.ha=!0:ac(this)},g.A=function(){$b.L.A.call(this),this.X&&(k.clearTimeout(this.X),this.X=null,this.ha=!1,this.a=[])},g.bb=function(){this.X=null,this.ha&&(this.ha=!1,ac(this))},u(C,w);var bc=[];C.prototype.aa=function(t,e,i,a){n(e)||(e&&(bc[0]=e.toString()),e=bc);for(var r=0;r<e.length;r++){var s=nb(t,e[r],i||this.handleEvent,a||!1,this.b||this);if(!s)break;this.a[s.key]=s}return this},C.prototype.va=function(t,e,i,a,r){if(n(e))for(var s=0;s<e.length;s++)this.va(t,e[s],i,a,r);else i=i||this.handleEvent,a=p(a)?!!a.capture:!!a,r=r||this.b||this,i=pb(i),a=!!a,(e=cb(t)?jb(t.c,String(e),i,a,r):t&&(t=rb(t))?jb(t,e,i,a,r):null)&&(wb(e),delete this.a[e.key])},C.prototype.A=function(){C.L.A.call(this),cc(this)},C.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dc.prototype.a=null;var ec=0;dc.prototype.reset=function(e,n,i,a,r){"number"==typeof r||ec++,a||t(),delete this.a},D.prototype.toString=function(){return this.name};var gc=new D("SEVERE",1e3),hc=new D("WARNING",900),ic=new D("INFO",800),jc=new D("CONFIG",700),kc=new D("FINE",500);fc.prototype.log=function(t,e,n){if(t.value>=lc(this).value)for(da(e)&&(e=e()),t=new dc(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var mc={},nc=null;qc.prototype.Ea=function(){this.b=!1};var yc=new B;u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,jb:1,qb:2,pb:3,mb:4,ob:5,rb:6,Ra:7,TIMEOUT:8,ub:9},Gc={lb:"complete",yb:"success",Sa:"error",Ra:"abort",wb:"ready",xb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",vb:"progress",nb:"downloadprogress",zb:"uploadprogress"};Hc.prototype.a=null;var Kc;u(Lc,Hc),Kc=new Lc;var Nc=45e3,Oc=250,Qc={},Rc={};g=K.prototype,g.setTimeout=function(t){this.S=t},g.fb=function(t){t=t.target;var e=this.I;e&&3==M(t)?(I(this.b,"Throttling readystatechange."),e.Xa()):this.Qa(t)},g.Qa=function(t){try{t==this.a?Yc(this):E(this.b.a,"Called back with an unexpected xmlhttp")}catch(t){if(I(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var e=this;wc(this.b,t,function(){return"ResponseText: "+e.a.V()})}else wc(this.b,t,"No response text")}},g.eb=function(){var t=M(this.a),e=this.a.V();this.F<e.length&&(Zc(this),$c(this,t,e),this.c&&4!=t&&Wc(this))},g.cancel=function(){this.B=!0,cd(this)},g.cb=function(){this.w=null;var e=t();0<=e-this.U?(this.c&&xc(this.b,"Received watchdog timeout even though request loaded successfully"),vc(this.b,this.g),2!=this.J&&(Ac(3),J(17)),cd(this),this.l=2,dd(this)):(E(this.b.a,"WatchDog timer called too early"),fd(this,this.U-e))},g=N.prototype,g.u=function(){return this.c},g.v=function(){id(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.O=function(){return id(this),this.a.concat()},g.get=function(t,e){return O(this.b,t)?this.b[t]:e},g.set=function(t,e){O(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.O(),i=0;i<n.length;i++){var a=n[i],r=this.get(a);t.call(e,r,a,this)}};var ld=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;P.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ud(e,vd,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ud(e,vd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ud(n,"/"==n.charAt(0)?wd:xd,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ud(n,yd)),t.join("")},P.prototype.resolve=function(t){var e=L(this),n=!!t.f;n?nd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?od(e,t.b):n=null!=t.i;var i=t.a;if(n)pd(e,t.i);else if(n=!!t.a){if("/"!=i.charAt(0))if(this.b&&!this.a)i="/"+i;else{var a=e.a.lastIndexOf("/");-1!=a&&(i=e.a.substr(0,a+1)+i)}if(".."==(a=i)||"."==a)i="";else if(-1!=a.indexOf("./")||-1!=a.indexOf("/.")){i=0==a.lastIndexOf("/",0),a=a.split("/");for(var r=[],s=0;s<a.length;){var o=a[s++];"."==o?i&&s==a.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),i&&s==a.length&&r.push("")):(r.push(o),i=!0)}i=r.join("/")}else i=a}return n?e.a=i:n=""!==t.c.toString(),n?qd(e,rd(t.c)):n=!!t.g,n&&(e.g=t.g),e};var vd=/[#\/\?@]/g,xd=/[#\?:]/g,wd=/[#\?]/g,Ad=/[#\?@]/g,yd=/#/g;g=td.prototype,g.u=function(){return R(this),this.b},g.add=function(t,e){R(this),this.c=null,t=Fd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){R(this),this.a.forEach(function(n,i){ta(n,function(n){t.call(e,n,i,this)},this)},this)},g.O=function(){R(this);for(var t=this.a.v(),e=this.a.O(),n=[],i=0;i<e.length;i++)for(var a=t[i],r=0;r<a.length;r++)n.push(e[i]);return n},g.v=function(t){R(this);var e=[];if(l(t))Hd(this,t)&&(e=xa(e,this.a.get(Fd(this,t))));else{t=this.a.v();for(var n=0;n<t.length;n++)e=xa(e,t[n])}return e},g.set=function(t,e){return R(this),this.c=null,t=Fd(this,t),Hd(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return 0<(t=t?this.v(t):[]).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var i=e[n],a=encodeURIComponent(String(i));i=this.v(i);for(var r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),t.push(s)}}return this.c=t.join("&")};var Jd=null;Id.prototype.set=function(t){this.a=t},Id.prototype.reset=function(){this.set(t())},Id.prototype.get=function(){return this.a},u(Ld,Kd);var Nd={OPEN:"a",kb:"b",Sa:"c",tb:"d"};u(Od,A),u(Pd,A),g=Qd.prototype,g.R=null,g.da=function(t){return this.a.da(t)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.Ja=function(){return!1},g.Ma=function(t,e){if(this.f=t.C,0==this.R){if(I(this.b,"TestConnection: Got data for stage 1"),!this.a.D&&(t=t.a)){var n=t.a?t.a.getResponseHeader("X-Client-Wire-Protocol"):null;this.m=n||null,this.a.j&&((t=t.a?t.a.getResponseHeader("X-HTTP-Session-Id"):null)?this.a.J=t:E(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(e){try{var i=this.a.ma.a.parse(e)}catch(t){return wc(this.b,t),void Ud(this.a,this)}this.g=i[0]}else I(this.b,"TestConnection: Null responseText"),Ud(this.a,this)}else 1==this.R&&(this.h?J(6):"11111"==e?(J(5),this.h=!0,(!z||10<=Number(Ua))&&(this.f=200,this.c.cancel(),I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0))):(J(7),this.h=!1))},g.ua=function(){this.f=this.c.C,this.c.c?0==this.R?(this.R=1,I(this.b,"TestConnection: request complete for initial check"),Rd(this)):1==this.R&&(I(this.b,"TestConnection: request complete for stage 2"),this.h?(I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0)):(I(this.b,"Test connection failed; not using streaming"),J(10),Sd(this.a,this,!1))):(I(this.b,"TestConnection: request failed, in state "+this.R),0==this.R?J(8):1==this.R&&J(9),Ud(this.a,this))},g.ia=function(){return this.a.ia()},g.ra=function(){return this.a.ra()},S.prototype.u=function(){return this.a.u()},S.prototype.add=function(t){this.a.set(Wd(t),t)},S.prototype.contains=function(t){return t=Wd(t),O(this.a.b,t)},S.prototype.v=function(){return this.a.v()};var Zd=10;Yd.prototype.cancel=function(){this.c=ee(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ta(this.a.v(),function(t){t.cancel()}),jd(this.a.a))},ge.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},ge.prototype.parse=function(t){return k.JSON.parse(t,void 0)},u(T,B);var le="";T.prototype.b=oc("goog.net.XhrIo");var me=/^https?$/i,ne=["POST","PUT"];g=T.prototype,g.fa=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.s+"; newUri="+t);e=e?e.toUpperCase():"GET",this.s=t,this.g="",this.j=0,this.M=e,this.H=!1,this.f=!0,this.a=this.F?Mc(this.F):Mc(Kc),this.D=this.F?Ic(this.F):Ic(Kc),this.a.onreadystatechange=r(this.La,this);try{F(this.b,U(this,"Opening Xhr")),this.I=!0,this.a.open(e,String(t),!0),this.I=!1}catch(t){return F(this.b,U(this,"Error opening Xhr: "+t.message)),void oe(this,t)}t=n||"";var a=new N(this.headers);i&&hd(i,function(t,e){a.set(e,t)}),i=ua(a.O()),n=k.FormData&&t instanceof k.FormData,!(0<=sa(ne,e))||i||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.N&&(this.a.responseType=this.N),"withCredentials"in this.a&&this.a.withCredentials!==this.m&&(this.a.withCredentials=this.m);try{pe(this),0<this.l&&(this.C=qe(this.a),F(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.C)),this.C?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ia,this)):this.B=Zb(this.Ia,this.l,this)),F(this.b,U(this,"Sending request")),this.o=!0,this.a.send(t),this.o=!1}catch(t){F(this.b,U(this,"Send error: "+t.message)),oe(this,t)}},g.Ia=function(){void 0!==goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,F(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.f&&(F(this.b,U(this,"Aborting")),this.f=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),se(this))},g.A=function(){this.a&&(this.f&&(this.f=!1,this.h=!0,this.a.abort(),this.h=!1),se(this,!0)),T.L.A.call(this)},g.La=function(){this.i||(this.I||this.o||this.h?te(this):this.ab())},g.ab=function(){te(this)},g.W=function(){try{return 2<M(this)?this.a.status:-1}catch(t){return-1}},g.Ga=function(){try{return 2<M(this)?this.a.statusText:""}catch(t){return F(this.b,"Can not get status: "+t.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(t){return F(this.b,"Can not get responseText: "+t.message),""}},g.Ya=function(t){if(this.a){var e=this.a.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,k.JSON)try{var n=k.JSON.parse(t);break t}catch(t){}n=Cb(t)}return n}},g.Fa=function(){return this.j},g.Za=function(){return l(this.g)?this.g:String(this.g)},g=we.prototype,g.oa=8,g.G=1,g.Ja=function(){return 0==this.G},g.Oa=function(t){if(this.l=null,I(this.a,"startForwardChannel_"),1==this.G)if(t)xc(this.a,"Not supposed to retry the open");else{I(this.a,"open_()"),this.P=Math.floor(1e5*Math.random()),t=this.P++;var e=new K(this,this.a,t,void 0),n=this.i;this.M&&(n?(n=Ea(n),Ga(n,this.M)):n=this.M),null===this.h&&(e.j=n);var i=Ge(this,e),a=L(this.F);Q(a,"RID",t),Q(a,"CVER",21),this.D&&this.j&&Q(a,"X-HTTP-Session-Id",this.j),ze(this,a),this.h&&n&&ve(a,this.h,n),ae(this.c,e),this.Ta?(Q(a,"$req",i),Sc(e,a,null)):Sc(e,a,i),this.G=2}else 3==this.G&&(t?He(this,t):0==this.g.length?I(this.a,"startForwardChannel_ returned: nothing to send"):be(this.c)?xc(this.a,"startForwardChannel_ returned: connection already in progress"):(He(this),I(this.a,"startForwardChannel_ finished, sent request")))},g.Na=function(){this.m=null,I(this.a,"Creating new HttpRequest"),this.b=new K(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.P=0;var t=L(this.wa);Q(t,"RID","rpc"),Q(t,"SID",this.I),Q(t,"CI",this.la?"0":"1"),Q(t,"AID",this.N),ze(this,t),Q(t,"TYPE","xmlhttp"),this.h&&this.i&&ve(t,this.h,this.i),Vc(this.b,t,!0,this.ja),I(this.a,"New Request created")},g.Ma=function(t,e){if(0!=this.G&&(this.b==t||ce(this.c,t)))if(this.s=t.C,ce(this.c,t)&&3==this.G){try{var i=this.ma.a.parse(e)}catch(t){i=null}if(n(i)&&3==i.length)if(0==(e=i)[0])t:if(I(this.a,"Server claims our backchannel is missing."),this.m)I(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<t.D))break t;Be(this),this.b.cancel(),this.b=null}else E(this.a.a,"We do not have a BackChannel established");Je(this),J(18)}else this.xa=e[1],0<(t=this.xa-this.N)&&(e=e[2],I(this.a,e+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),37500>e&&this.la&&0==this.w&&!this.o&&(this.o=Ec(r(this.$a,this),6e3)));else I(this.a,"Bad POST response data returned"),V(this,11)}else if(this.b==t&&Be(this),!/^[\s\xa0]*$/.test(e))for(e=i=this.ma.a.parse(e),i=0;i<e.length;i++){var a=e[i];if(this.N=a[0],a=a[1],2==this.G)if("c"==a[0]){this.I=a[1],this.ja=a[2];var s=a[3];null!=s&&(this.oa=s,H(this.a,"VER="+this.oa)),null!=(a=a[4])&&(this.ya=a,H(this.a,"SVER="+this.ya)),this.D&&(a=t.a)&&((s=a.a?a.a.getResponseHeader("X-Client-Wire-Protocol"):null)&&$d(this.c,s),this.j&&((a=a.a?a.a.getResponseHeader("X-HTTP-Session-Id"):null)?(this.J=a,Q(this.F,this.j,a)):E(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.G=3,this.f&&this.f.Da(),this.wa=Td(this,this.ja,this.ka),Ie(this)}else"stop"!=a[0]&&"close"!=a[0]||V(this,7);else 3==this.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?V(this,7):xe(this):"noop"!=a[0]&&this.f&&this.f.Ca(a),this.w=0)}},g.$a=function(){null!=this.o&&(this.o=null,this.b.cancel(),this.b=null,Je(this),J(19))},g.ua=function(e){I(this.a,"Request complete");var n=null;if(this.b==e){Be(this),this.b=null;var i=2}else{if(!ce(this.c,e))return;n=e.s,de(this.c,e),i=1}if(this.s=e.C,0!=this.G)if(e.c)1==i?(Dc(e.m?e.m.length:0,t()-e.D,this.C),De(this)):Ie(this);else{var a=e.l;if(3==a||0==a&&0<this.s)I(this.a,"Not retrying due to error type");else{var r=this;if(I(this.a,function(){return"Maybe retrying, last error: "+Pc(a,r.s)}),1==i&&Ee(this,e)||2==i&&Je(this))return;I(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&fe(this.c,n),I(this.a,"Error: HTTP request failed"),a){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.hb=function(t){t?(H(this.a,"Successfully pinged google.com"),J(2)):(H(this.a,"Failed to ping google.com"),J(1))},g.da=function(t){if(t&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return t=new T,t.m=this.S,t},g.ra=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Ld,g=Me.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.Va=function(){},Oe.prototype.a=function(t,e){return new W(t,e)},u(W,B),W.prototype.j=function(){this.a.f=this.h,this.o&&(this.a.S=!0);var t=this.a,e=this.s,n=this.b,i=this.g||void 0;I(t.a,"connect()"),J(0),t.ka=n,t.U=i||{},t.D&&(I(t.a,"connect() bypassed channel-test."),t.H.b=[],t.H.a=!1),I(t.a,"connectTest_()"),t.B=new Qd(t,t.a),null===t.h&&(t.B.i=t.i),n=e,t.h&&t.i&&(n=ve(e,t.h,t.i)),(t=t.B).l=n,e=Ke(t.a,t.l),J(3),null!=(n=t.a.H.b)?(t.g=n[0],t.R=1,Rd(t)):(Xc(e,"MODE","init"),!t.a.D&&t.a.j&&Xc(e,"X-HTTP-Session-Id",t.a.j),t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i,Vc(t.c,e,!1,null),t.R=0)},W.prototype.close=function(){xe(this.a)},W.prototype.l=function(t){if(l(t)){var e={};e.__data__=t,Ce(this.a,e)}else this.m?(e={},e.__data__=Db(t),Ce(this.a,e)):Ce(this.a,t)},W.prototype.A=function(){this.a.f=null,delete this.h,xe(this.a),delete this.a,W.L.A.call(this)},u(Qe,Od),u(Re,Pd),u(Pe,Me),Pe.prototype.Da=function(){pc(this.a.f,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Pe.prototype.Ca=function(t){this.a.dispatchEvent(new Qe(t))},Pe.prototype.Ba=function(t){pc(this.a.f,"WebChannel aborted on "+this.a.b+" due to channel error: "+t),this.a.dispatchEvent(new Re(t))},Pe.prototype.Aa=function(){pc(this.a.f,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Se=ia(function(t,e){function n(){}n.prototype=t.prototype;var i=new n;return t.apply(i,Array.prototype.slice.call(arguments,1)),i},Oe);Te.prototype.u=function(){return this.b.length+this.a.length},Te.prototype.contains=function(t){return 0<=sa(this.b,t)||0<=sa(this.a,t)},Te.prototype.v=function(){for(var t=[],e=this.b.length-1;0<=e;--e)t.push(this.b[e]);var n=this.a.length;for(e=0;e<n;++e)t.push(this.a[e]);return t},u(Ve,w);var We="[goog.structs.Pool] Min can not be greater than max";g=Ve.prototype,g.ea=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<this.a.u()&&(n=Ue(this.a),!this.ta(n));)this.ba();return!n&&this.u()<this.c&&(n=this.qa()),n&&(this.g=e,this.b.add(n)),n}},g.gb=function(t){return!!kd(this.b.a,Wd(t))&&(this.na(t),!0)},g.na=function(t){kd(this.b.a,Wd(t)),this.ta(t)&&this.u()<this.c?this.a.a.push(t):Xe(t)},g.ba=function(){for(var t=this.a;this.u()<this.h;){var e=this.qa();t.a.push(e)}for(;this.u()>this.c&&0<this.a.u();)Xe(Ue(t))},g.qa=function(){return{}},g.ta=function(t){return"function"!=typeof t.Wa||t.Wa()},g.contains=function(t){return this.a.contains(t)||this.b.contains(t)},g.u=function(){return this.a.u()+this.b.u()},g.A=function(){if(Ve.L.A.call(this),0<this.b.u())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var t=this.a;0!=t.b.length||0!=t.a.length;)Xe(Ue(t));delete this.a},Ze.prototype.v=function(){for(var t=this.a,e=[],n=t.length,i=0;i<n;i++)e.push(t[i].b);return e},Ze.prototype.O=function(){for(var t=this.a,e=[],n=t.length,i=0;i<n;i++)e.push(t[i].a);return e},Ze.prototype.u=function(){return this.a.length},u(af,Ze),u(X,Ve),g=X.prototype,g.ea=function(t,e){if(!t)return X.L.ea.call(this);$e(this.f,void 0!==e?e:100,t),this.sa()},g.sa=function(){for(var t=this.f;0<t.u();){var e=this.ea();if(!e)break;var n=t,i=n.a,a=i.length,r=i[0];if(0>=a)r=void 0;else{if(1==a)wa(i);else{i[0]=i.pop(),i=0,a=(n=n.a).length;for(var s=n[i];i<a>>1;){var o=2*i+1,h=2*i+2;if(o=h<a&&n[h].a<n[o].a?h:o,n[o].a>s.a)break;n[i]=n[o],i=o}n[i]=s}r=r.b}r.apply(this,[e])}},g.na=function(t){X.L.na.call(this,t),this.sa()},g.ba=function(){X.L.ba.call(this),this.sa()},g.A=function(){X.L.A.call(this),k.clearTimeout(void 0),wa(this.f.a),this.f=null},u(Y,X),Y.prototype.qa=function(){var t=new T,e=this.l;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.j&&(t.m=!0),t},Y.prototype.ta=function(t){return!t.i&&!t.a},Oe.prototype.createWebChannel=Oe.prototype.a,W.prototype.send=W.prototype.l,W.prototype.open=W.prototype.j,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Md.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",B.prototype.listen=B.prototype.aa,Y.prototype.getObject=Y.prototype.ea,Y.prototype.releaseObject=Y.prototype.gb,T.prototype.listenOnce=T.prototype.Ha,T.prototype.getLastError=T.prototype.Za,T.prototype.getLastErrorCode=T.prototype.Fa,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ga,T.prototype.getResponseJson=T.prototype.Ya,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Se,ErrorCode:Fc,EventType:Gc,WebChannel:Md,XhrIoPool:Y}}).call(void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],43:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/webchannel-wrapper"),t=require("../core/version"),r=require("../remote/rpc_error"),n=require("../remote/stream_bridge"),o=require("../util/assert"),a=require("../util/error"),s=require("../util/log"),i="Connection",d="google.firestore.v1beta1.Firestore",u="v1beta1",l={BatchGetDocuments:"batchGet",Commit:"commit"},c="gl-js/ fire/"+t.SDK_VERSION,p=15,h=function(){function t(t){this.databaseId=t.databaseId,this.pool=new e.XhrIoPool;var r=t.ssl?"https":"http";this.baseUrl=r+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r]);e["X-Goog-Api-Client"]=c,e["google-cloud-resource-prefix"]="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},t.prototype.invokeRPC=function(t,n,d){var u=this,l=this.makeUrl(t);return new Promise(function(c,h){u.pool.getObject(function(b){b.listenOnce(e.EventType.COMPLETE,function(){try{switch(b.getLastErrorCode()){case e.ErrorCode.NO_ERROR:var n=b.getResponseJson();s.debug(i,"XHR received:",JSON.stringify(n)),c(n);break;case e.ErrorCode.TIMEOUT:s.debug(i,'RPC "'+t+'" timed out'),h(new a.FirestoreError(a.Code.DEADLINE_EXCEEDED,"Request time out"));break;case e.ErrorCode.HTTP_ERROR:var d=b.getStatus();s.debug(i,'RPC "'+t+'" failed with status:',d,"response text:",b.getResponseText()),d>0?h(new a.FirestoreError(r.mapCodeFromHttpStatus(d),"Server responded with status "+b.getStatusText())):(s.debug(i,'RPC "'+t+'" failed'),h(new a.FirestoreError(a.Code.UNAVAILABLE,"Connection failed.")));break;default:o.fail('RPC "'+t+'" failed with unanticipated webchannel error '+b.getLastErrorCode()+": "+b.getLastError()+", giving up.")}}finally{s.debug(i,'RPC "'+t+'" completed.'),u.pool.releaseObject(b)}});var g=JSON.stringify(n);s.debug(i,"XHR sending: ",l+" "+g);var C={"Content-Type":"text/plain"};u.modifyHeadersForRequest(C,d),b.send(l,"POST",g,C,p)})})},t.prototype.invokeStreamingRPC=function(e,t,r){return this.invokeRPC(e,t,r)},t.prototype.openStream=function(t,u){var l=[this.baseUrl,"/",d,"/",t,"/channel"],c=e.createWebChannelTransport(),p={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},httpHeadersOverwriteParam:"$httpHeaders",sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(p.initMessageHeaders,u);var h=l.join("");s.debug(i,"Creating WebChannel: "+h+" "+p);var b=c.createWebChannel(h,p),g=!1,C=!1,f=new n.StreamBridge({sendFn:function(e){C?s.debug(i,"Not sending because WebChannel is closed:",e):(g||(s.debug(i,"Opening WebChannel transport."),b.open(),g=!0),s.debug(i,"WebChannel sending:",e),b.send(e))},closeFn:function(){return b.close()}}),E=function(e,t){b.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return E(e.WebChannel.EventType.OPEN,function(){C||s.debug(i,"WebChannel transport opened.")}),E(e.WebChannel.EventType.CLOSE,function(){C||(C=!0,s.debug(i,"WebChannel transport closed"),f.callOnClose())}),E(e.WebChannel.EventType.ERROR,function(e){C||(C=!0,s.debug(i,"WebChannel transport errored:",e),f.callOnClose(new a.FirestoreError(a.Code.UNAVAILABLE,"The operation could not be completed")))}),E(e.WebChannel.EventType.MESSAGE,function(e){if(!C){var t=e.data[0];o.assert(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){s.debug(i,"WebChannel received error:",n);var d=n.status,u=r.mapCodeFromRpcStatus(d),l=n.message;void 0===u&&(u=a.Code.INTERNAL,l="Unknown error status: "+d+" with message "+n.message),C=!0,f.callOnClose(new a.FirestoreError(u,l)),b.close()}else s.debug(i,"WebChannel received:",t),f.callOnMessage(t)}}),setTimeout(function(){f.callOnOpen()},0),f},t.prototype.makeUrl=function(e){var t=l[e];o.assert(void 0!==t,"Unknown REST mapping for: "+e);var r=[this.baseUrl,"/",u];return r.push("/projects/"),r.push(this.databaseId.projectId),r.push("/databases/"),r.push(this.databaseId.database),r.push("/documents"),r.push(":"),r.push(t),r.join("")},t}();exports.WebChannelConnection=h;
},{"../remote/rpc_error":67,"../core/version":48,"../remote/stream_bridge":68,"../util/assert":47,"../util/error":69,"../util/log":49,"@firebase/webchannel-wrapper":79}],40:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../remote/serializer"),t=require("./webchannel_connection"),o=function(){function o(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return o.prototype.loadConnection=function(e){return Promise.resolve(new t.WebChannelConnection(e))},o.prototype.newSerializer=function(t){return new e.JsonProtoSerializer(t,{useProto3Json:!0})},o.prototype.formatJSON=function(e){return JSON.stringify(e)},o.prototype.atob=function(e){return atob(e)},o.prototype.btoa=function(e){return btoa(e)},o}();exports.BrowserPlatform=o;
},{"../remote/serializer":42,"./webchannel_connection":43}],33:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../platform/platform"),e=require("./browser_platform");r.PlatformSupport.setPlatform(new e.BrowserPlatform);
},{"./browser_platform":40,"../platform/platform":41}],245:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),e=function(){function e(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=null,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(n,r){var c=this;return this.callbackAttached&&t.fail("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new e(function(t,e){c.nextCallback=function(r){c.wrapSuccess(n,r).next(t,e)},c.catchCallback=function(n){c.wrapFailure(r,n).next(t,e)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return t.reduce(function(t,e,n){return t.next(function(){return e})},e.resolve())},e.map=function(t){var n=[],r=!0,c=e.resolve(null);return t.reduce(function(t,e){return t.next(function(t){return r||n.push(t),r=!1,e})},c).next(function(t){return n.push(t),n})},e}();exports.PersistencePromise=e;
},{"../util/assert":47}],238:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),t=require("./persistence_promise"),r=function(){function r(){this.isEager=!0,this.sources=[],this.potentialGarbage=e.documentKeySet()}return r.prototype.addGarbageSource=function(e){this.sources.push(e),e.setGarbageCollector(this)},r.prototype.removeGarbageSource=function(e){this.sources.splice(this.sources.indexOf(e),1),e.setGarbageCollector(null)},r.prototype.addPotentialGarbageKey=function(e){this.potentialGarbage=this.potentialGarbage.add(e)},r.prototype.collectGarbage=function(r){var o=this,n=[],s=e.documentKeySet();return this.potentialGarbage.forEach(function(e){var i=o.documentHasAnyReferences(r,e);n.push(i.next(function(r){return r||(s=s.add(e)),t.PersistencePromise.resolve()}))}),this.potentialGarbage=e.documentKeySet(),t.PersistencePromise.waitFor(n).next(function(){return s})},r.prototype.documentHasAnyReferences=function(e,r){var o=t.PersistencePromise.resolve(!1);return this.sources.map(function(t){return function(){return t.containsKey(e,r)}}).reduce(function(e,r){return e.next(function(e){return e?t.PersistencePromise.resolve(!0):r()})},o)},r}();exports.EagerGarbageCollector=r;
},{"./persistence_promise":245,"../model/collections":220}],227:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("../model/document_key"),a=require("../util/assert"),d=require("../util/sorted_map");!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(e=exports.ChangeType||(exports.ChangeType={}));var i;!function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(i=exports.SyncState||(exports.SyncState={}));var n=function(){function i(){this.changeMap=new d.SortedMap(t.DocumentKey.comparator)}return i.prototype.track=function(t){var d=t.doc.key,i=this.changeMap.get(d);i?t.type!==e.Added&&i.type===e.Metadata?this.changeMap=this.changeMap.insert(d,t):t.type===e.Metadata&&i.type!==e.Removed?this.changeMap=this.changeMap.insert(d,{type:i.type,doc:t.doc}):t.type===e.Modified&&i.type===e.Modified?this.changeMap=this.changeMap.insert(d,{type:e.Modified,doc:t.doc}):t.type===e.Modified&&i.type===e.Added?this.changeMap=this.changeMap.insert(d,{type:e.Added,doc:t.doc}):t.type===e.Removed&&i.type===e.Added?this.changeMap=this.changeMap.remove(d):t.type===e.Removed&&i.type===e.Modified?this.changeMap=this.changeMap.insert(d,{type:e.Removed,doc:i.doc}):t.type===e.Added&&i.type===e.Removed?this.changeMap=this.changeMap.insert(d,{type:e.Modified,doc:t.doc}):a.fail("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(i)):this.changeMap=this.changeMap.insert(d,t)},i.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,a){e.push(a)}),e},i}();exports.DocumentChangeSet=n;
},{"../model/document_key":174,"../util/assert":47,"../util/sorted_map":222}],247:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/view_snapshot"),t=require("../model/collections"),o=function(){function o(e,t,o){this.query=e,this.addedKeys=t,this.removedKeys=o}return o.fromSnapshot=function(r){for(var d=t.documentKeySet(),n=t.documentKeySet(),s=0,a=r.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case e.ChangeType.Added:d=d.add(c.doc.key);break;case e.ChangeType.Removed:n=n.add(c.doc.key)}}return new o(r.query,d,n)},o}();exports.LocalViewChanges=o;
},{"../model/collections":220,"../core/view_snapshot":227}],248:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),r=require("../model/document_key"),t=require("../util/misc"),o=require("../util/sorted_set"),n=require("./persistence_promise"),i=function(){function t(){this.refsByKey=new o.SortedSet(a.compareByKey),this.refsByTarget=new o.SortedSet(a.compareByTargetId),this.garbageCollector=null}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(e,r){var t=new a(e,r);this.refsByKey=this.refsByKey.add(t),this.refsByTarget=this.refsByTarget.add(t)},t.prototype.addReferences=function(e,r){var t=this;e.forEach(function(e){return t.addReference(e,r)})},t.prototype.removeReference=function(e,r){this.removeRef(new a(e,r))},t.prototype.removeReferences=function(e,r){var t=this;e.forEach(function(e){return t.removeReference(e,r)})},t.prototype.removeReferencesForId=function(e){var t=this,o=r.DocumentKey.EMPTY,n=new a(o,e),i=new a(o,e+1);this.refsByTarget.forEachInRange([n,i],function(e){t.removeRef(e)})},t.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(r){return e.removeRef(r)})},t.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(e.key)},t.prototype.referencesForId=function(t){var o=r.DocumentKey.EMPTY,n=new a(o,t),i=new a(o,t+1),c=e.documentKeySet();return this.refsByTarget.forEachInRange([n,i],function(e){c=c.add(e.key)}),c},t.prototype.setGarbageCollector=function(e){this.garbageCollector=e},t.prototype.containsKey=function(e,r){var t=new a(r,0),o=this.refsByKey.firstAfterOrEqual(t);return n.PersistencePromise.resolve(null!==o&&r.equals(o.key))},t}();exports.ReferenceSet=i;var a=function(){function e(e,r){this.key=e,this.targetOrBatchId=r}return e.compareByKey=function(e,o){return r.DocumentKey.comparator(e.key,o.key)||t.primitiveComparator(e.targetOrBatchId,o.targetOrBatchId)},e.compareByTargetId=function(e,o){return t.primitiveComparator(e.targetOrBatchId,o.targetOrBatchId)||r.DocumentKey.comparator(e.key,o.key)},e}();exports.DocReference=a;
},{"../model/collections":220,"./persistence_promise":245,"../model/document_key":174,"../util/misc":211,"../util/sorted_set":225}],249:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./obj"),e=function(){function e(t){this.mapKeyFn=t,this.inner={}}return e.prototype.get=function(t){var e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(var n=0,i=r;n<i.length;n++){var o=i[n],s=o[0],u=o[1];if(s.equals(t))return u}},e.prototype.has=function(t){return void 0!==this.get(t)},e.prototype.set=function(t,e){var r=this.mapKeyFn(t),n=this.inner[r];if(void 0!==n){for(var i=0;i<n.length;i++)if(n[i][0].equals(t))return void(n[i]=[t,e]);n.push([t,e])}else this.inner[r]=[[t,e]]},e.prototype.delete=function(t){var e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(var n=0;n<r.length;n++)if(r[n][0].equals(t))return 1===r.length?delete this.inner[e]:r.splice(n,1),!0;return!1},e.prototype.forEach=function(e){t.forEach(this.inner,function(t,r){for(var n=0,i=r;n<i.length;n++){var o=i[n],s=o[0],u=o[1];e(s,u)}})},e.prototype.isEmpty=function(){return t.isEmpty(this.inner)},e}();exports.ObjectMap=e;
},{"./obj":167}],250:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=1;!function(e){e[e.LocalStore=0]="LocalStore",e[e.SyncEngine=1]="SyncEngine"}(e||(e={}));var r=function(){function r(e,r){void 0===r&&(r=0),this.generatorId=e;var t=r>>n<<n,o=r-t;this.previousId=o>=e?t|this.generatorId:(t|this.generatorId)-(1<<n)}return r.prototype.next=function(){return this.previousId+=1<<n,this.previousId},r.forLocalStore=function(n){return void 0===n&&(n=0),new r(e.LocalStore,n)},r.forSyncEngine=function(){return new r(e.SyncEngine)},r}();exports.TargetIdGenerator=r;
},{}],253:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),e=require("../util/sorted_map"),r=require("./collections"),o=require("./document_key"),n=function(){function n(t){this.comparator=t?function(e,r){return t(e,r)||o.DocumentKey.comparator(e.key,r.key)}:function(t,e){return o.DocumentKey.comparator(t.key,e.key)},this.keyedMap=r.documentMap(),this.sortedSet=new e.SortedMap(this.comparator)}return n.emptySet=function(t){return new n(t.comparator)},n.prototype.has=function(t){return null!=this.keyedMap.get(t)},n.prototype.get=function(t){return this.keyedMap.get(t)},n.prototype.first=function(){return this.sortedSet.minKey()},n.prototype.last=function(){return this.sortedSet.maxKey()},n.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},n.prototype.prevDoc=function(e){t.assert(this.has(e),"Trying to get a previous document to non-existing key: "+e);var r=this.keyedMap.get(e);return this.sortedSet.getPredecessorKey(r)},n.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(n.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),n.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,r){return t(e),!1})},n.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},n.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},n.prototype.equals=function(t){if(!(t instanceof n))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();e.hasNext();){var o=e.getNext().key,i=r.getNext().key;if(!o.equals(i))return!1}return!0},n.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},n.prototype.copy=function(t,e){var r=new n;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r},n}();exports.DocumentSet=n;
},{"../util/assert":47,"../util/sorted_map":222,"./document_key":174,"./collections":220}],251:[function(require,module,exports) {
"use strict";function e(e,t){var n=function(e){switch(e){case r.ChangeType.Added:return 1;case r.ChangeType.Modified:case r.ChangeType.Metadata:return 2;case r.ChangeType.Removed:return 0;default:return o.fail("Unknown ChangeType: "+e)}};return n(e)-n(t)}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../model/collections"),n=require("../model/document"),a=require("../model/document_set"),s=require("../remote/remote_event"),o=require("../util/assert"),r=require("./view_snapshot"),u=function(){return function(e){this.key=e}}();exports.AddedLimboDocument=u;var i=function(){return function(e){this.key=e}}();exports.RemovedLimboDocument=i;var c=function(){function c(e,n){this.query=e,this.syncedDocuments=n,this.syncState=null,this.current=!1,this.limboDocuments=t.documentKeySet(),this.mutatedKeys=t.documentKeySet(),this.documentSet=new a.DocumentSet(e.docComparator.bind(e))}return c.prototype.computeDocChanges=function(e,t){var a=this,s=t?t.changeSet:new r.DocumentChangeSet,u=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,c=u,d=!1,h=this.query.hasLimit()&&u.size===this.query.limit?u.last():null;if(e.inorderTraversal(function(e,t){var m=u.get(e),y=t instanceof n.Document?t:null;if(y&&(o.assert(e.equals(y.key),"Mismatching keys found in document changes: "+e+" != "+y.key),y=a.query.matches(y)?y:null),y?(c=c.add(y),i=y.hasLocalMutations?i.add(e):i.delete(e)):(c=c.delete(e),i=i.delete(e)),m&&y){var l=m.data.equals(y.data);l&&m.hasLocalMutations===y.hasLocalMutations||(l?s.track({type:r.ChangeType.Metadata,doc:y}):s.track({type:r.ChangeType.Modified,doc:y}),h&&a.query.docComparator(y,h)>0&&(d=!0))}else!m&&y?s.track({type:r.ChangeType.Added,doc:y}):m&&!y&&(s.track({type:r.ChangeType.Removed,doc:m}),h&&(d=!0))}),this.query.hasLimit())for(;c.size>this.query.limit;){var m=c.last();c=c.delete(m.key),s.track({type:r.ChangeType.Removed,doc:m})}return o.assert(!d||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:c,changeSet:s,needsRefill:d,mutatedKeys:i}},c.prototype.applyChanges=function(t,n){var a=this;o.assert(!t.needsRefill,"Cannot apply changes that need a refill");var s=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var u=t.changeSet.getChanges();u.sort(function(t,n){return e(t.type,n.type)||a.query.docComparator(t.doc,n.doc)});var i=this.applyTargetChange(n),c=0===this.limboDocuments.size&&this.current?r.SyncState.Synced:r.SyncState.Local,d=c!==this.syncState;return this.syncState=c,0!==u.length||d?{snapshot:{query:this.query,docs:t.documentSet,oldDocs:s,docChanges:u,fromCache:c===r.SyncState.Local,syncStateChanged:d,hasPendingWrites:!t.mutatedKeys.isEmpty()},limboChanges:i}:{limboChanges:i}},c.prototype.shouldBeInLimbo=function(e){return!this.syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},c.prototype.applyTargetChange=function(e){var n=this;if(e){var a=e.mapping;switch(a instanceof s.ResetMapping?this.syncedDocuments=a.documents:a instanceof s.UpdateMapping&&(this.syncedDocuments=a.applyToKeySet(this.syncedDocuments)),e.currentStatusUpdate){case s.CurrentStatusUpdate.MarkCurrent:this.current=!0;break;case s.CurrentStatusUpdate.MarkNotCurrent:this.current=!1;break;case s.CurrentStatusUpdate.None:break;default:o.fail("Unknown current status update: "+e.currentStatusUpdate)}}var r=this.limboDocuments;this.limboDocuments=t.documentKeySet(),this.current&&this.documentSet.forEach(function(e){n.shouldBeInLimbo(e.key)&&(n.limboDocuments=n.limboDocuments.add(e.key))});var c=[];return r.forEach(function(e){n.limboDocuments.has(e)||c.push(new i(e))}),this.limboDocuments.forEach(function(e){r.has(e)||c.push(new u(e))}),c},c}();exports.View=c;
},{"../model/collections":220,"../model/document":173,"../model/document_set":253,"../remote/remote_event":221,"../util/assert":47,"./view_snapshot":227}],235:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../local/eager_garbage_collector"),t=require("../local/local_view_changes"),r=require("../local/query_data"),n=require("../local/reference_set"),o=require("../model/document"),i=require("../model/document_key"),a=require("../remote/remote_event"),s=require("../util/assert"),u=require("../util/log"),c=require("../util/misc"),l=require("../util/obj"),h=require("../util/obj_map"),y=require("../util/sorted_map"),m=require("../util/types"),p=require("./query"),d=require("./snapshot_version"),f=require("./target_id_generator"),b=require("./view"),g="SyncEngine",v=function(){return function(e,t,r,n){this.query=e,this.targetId=t,this.resumeToken=r,this.view=n}}(),S=function(){function S(t,r,o){this.localStore=t,this.remoteStore=r,this.currentUser=o,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new h.ObjectMap(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new y.SortedMap(i.DocumentKey.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new n.ReferenceSet,this.limboCollector=new e.EagerGarbageCollector,this.mutationUserCallbacks={},this.targetIdGenerator=f.TargetIdGenerator.forSyncEngine()}return S.prototype.subscribe=function(e,t){s.assert(null!==e&&null!==t,"View and error handlers cannot be null"),s.assert(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=e,this.errorHandler=t,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},S.prototype.listen=function(e){var t=this;return this.assertSubscribed("listen()"),s.assert(!this.queryViewsByQuery.has(e),"We already listen to the query: "+e),this.localStore.allocateQuery(e).then(function(r){return t.localStore.executeQuery(e).then(function(n){return t.localStore.remoteDocumentKeys(r.targetId).then(function(o){var i=new b.View(e,o),a=i.computeDocChanges(n),u=i.applyChanges(a);s.assert(0===u.limboChanges.length,"View returned limbo docs before target ack from the server."),s.assert(!!u.snapshot,"applyChanges for new view should always return a snapshot");var c=new v(e,r.targetId,r.resumeToken,i);t.queryViewsByQuery.set(e,c),t.queryViewsByTarget[r.targetId]=c,t.viewHandler([u.snapshot]),t.remoteStore.listen(r)})}).then(function(){return r.targetId})})},S.prototype.unlisten=function(e){var t=this;this.assertSubscribed("unlisten()");var r=this.queryViewsByQuery.get(e);return s.assert(!!r,"Trying to unlisten on query not found:"+e),this.localStore.releaseQuery(e).then(function(){return t.remoteStore.unlisten(r.targetId),t.removeAndCleanupQuery(r).then(function(){return t.localStore.collectGarbage()})})},S.prototype.write=function(e,t){var r=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return r.addMutationCallback(e.batchId,t),r.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return r.remoteStore.fillWritePipeline()})},S.prototype.wrapUpdateFunctionError=function(e){return e},S.prototype.runTransaction=function(e,t){var r=this;void 0===t&&(t=5),s.assert(t>=0,"Got negative number of retries for transaction.");var n=this.remoteStore.createTransaction();return function(){try{var t=e(n);return!m.isNullOrUndefined(t)&&t.catch&&t.then?t.catch(function(e){return Promise.reject(r.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(e){return Promise.reject(r.wrapUpdateFunctionError(e))}}().then(function(o){return n.commit().then(function(){return o}).catch(function(n){return 0===t?Promise.reject(n):r.runTransaction(e,t-1)})})},S.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),l.forEachNumber(e.targetChanges,function(r,n){var i=t.limboKeysByTarget[r];i&&n.currentStatusUpdate===a.CurrentStatusUpdate.MarkCurrent&&!e.documentUpdates.get(i)&&e.addDocumentUpdate(new o.NoDocument(i,e.snapshotVersion))}),this.localStore.applyRemoteEvent(e).then(function(r){return t.emitNewSnapsAndNotifyLocalStore(r,e)})},S.prototype.rejectListen=function(e,t){var r=this;this.assertSubscribed("rejectListens()");var n=this.limboKeysByTarget[e];if(n){this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboKeysByTarget[e];var u=new y.SortedMap(i.DocumentKey.comparator);u=u.insert(n,new o.NoDocument(n,d.SnapshotVersion.forDeletedDoc()));var c=new a.RemoteEvent(d.SnapshotVersion.MIN,{},u);return this.applyRemoteEvent(c)}var l=this.queryViewsByTarget[e];return s.assert(!!l,"Unknown targetId: "+e),this.localStore.releaseQuery(l.query).then(function(){return r.removeAndCleanupQuery(l).then(function(){r.errorHandler(l.query,t)})})},S.prototype.applySuccessfulWrite=function(e){var t=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e.batch.batchId,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.emitNewSnapsAndNotifyLocalStore(e)})},S.prototype.rejectFailedWrite=function(e,t){var r=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then(function(e){return r.emitNewSnapsAndNotifyLocalStore(e)})},S.prototype.addMutationCallback=function(e,t){var r=this.mutationUserCallbacks[this.currentUser.toKey()];r||(r=new y.SortedMap(c.primitiveComparator)),r=r.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=r},S.prototype.processUserCallback=function(e,t){var r=this.mutationUserCallbacks[this.currentUser.toKey()];if(r){var n=r.get(e);n&&(s.assert(e===r.minKey(),"Mutation callbacks processed out-of-order?"),t?n.reject(t):n.resolve(),r=r.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=r}},S.prototype.removeAndCleanupQuery=function(e){return this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.limboDocumentRefs.removeReferencesForId(e.targetId),this.gcLimboDocuments()},S.prototype.updateTrackedLimbos=function(e,t){for(var r=0,n=t;r<n.length;r++){var o=n[r];o instanceof b.AddedLimboDocument?(this.limboDocumentRefs.addReference(o.key,e),this.trackLimboChange(o)):o instanceof b.RemovedLimboDocument?(u.debug(g,"Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,e)):s.fail("Unknown limbo change: "+JSON.stringify(o))}return this.gcLimboDocuments()},S.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){u.debug(g,"New document in limbo: "+t);var n=this.targetIdGenerator.next(),o=p.Query.atPath(t.path);this.limboKeysByTarget[n]=t,this.remoteStore.listen(new r.QueryData(o,n,r.QueryPurpose.Listen)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},S.prototype.gcLimboDocuments=function(){var e=this;return this.limboCollector.collectGarbage(null).next(function(t){t.forEach(function(t){var r=e.limboTargetsByKey.get(t);null!==r&&(e.remoteStore.unlisten(r),e.limboTargetsByKey=e.limboTargetsByKey.remove(t),delete e.limboKeysByTarget[r])})}).toPromise()},S.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},S.prototype.emitNewSnapsAndNotifyLocalStore=function(e,r){var n=this,o=[],i=[],a=[];return this.queryViewsByQuery.forEach(function(s,u){a.push(Promise.resolve().then(function(){var t=u.view.computeDocChanges(e);return t.needsRefill?n.localStore.executeQuery(u.query).then(function(e){return u.view.computeDocChanges(e,t)}):t}).then(function(e){var a=r&&r.targetChanges[u.targetId],s=u.view.applyChanges(e,a);return n.updateTrackedLimbos(u.targetId,s.limboChanges).then(function(){if(s.snapshot){o.push(s.snapshot);var e=t.LocalViewChanges.fromSnapshot(s.snapshot);i.push(e)}})}))}),Promise.all(a).then(function(){return n.viewHandler(o),n.localStore.notifyLocalViewChanges(i)}).then(function(){return n.localStore.collectGarbage()})},S.prototype.assertSubscribed=function(e){s.assert(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+e+" before calling subscribe().")},S.prototype.handleUserChange=function(e){var t=this;return this.currentUser=e,this.localStore.handleUserChange(e).then(function(e){return t.emitNewSnapsAndNotifyLocalStore(e)}).then(function(){return t.remoteStore.handleUserChange(e)})},S}();exports.SyncEngine=S;
},{"../local/eager_garbage_collector":238,"../model/document":173,"../model/document_key":174,"../util/assert":47,"../util/log":49,"../util/misc":211,"../util/sorted_map":222,"../util/types":178,"../local/query_data":172,"../local/local_view_changes":247,"../local/reference_set":248,"../util/obj":167,"../remote/remote_event":221,"../util/obj_map":249,"./snapshot_version":170,"./target_id_generator":250,"./query":169,"./view":251}],252:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e;!function(e){e[e.Unknown=0]="Unknown",e[e.Healthy=1]="Healthy",e[e.Failed=2]="Failed"}(e=exports.OnlineState||(exports.OnlineState={}));
},{}],236:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./types"),t=require("./view_snapshot"),n=require("../model/document_set"),i=require("../util/assert"),s=require("../util/obj_map"),r=function(){return function(){this.listeners=[]}}(),a=function(){function t(t){this.syncEngine=t,this.queries=new s.ObjectMap(function(e){return e.canonicalId()}),this.onlineState=e.OnlineState.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return t.prototype.listen=function(e){var t=e.query,n=!1,i=this.queries.get(t);return i||(n=!0,i=new r,this.queries.set(t,i)),i.listeners.push(e),e.onOnlineStateChanged(this.onlineState),i.viewSnap&&e.onViewSnapshot(i.viewSnap),n?this.syncEngine.listen(t).then(function(e){return i.targetId=e,e}):Promise.resolve(i.targetId)},t.prototype.unlisten=function(e){var t=e.query,n=!1,i=this.queries.get(t);if(i){var s=i.listeners.indexOf(e);s>=0&&(i.listeners.splice(s,1),n=0===i.listeners.length)}return n?(this.queries.delete(t),this.syncEngine.unlisten(t)):Promise.resolve()},t.prototype.onChange=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],s=i.query,r=this.queries.get(s);if(r){for(var a=0,o=r.listeners;a<o.length;a++){o[a].onViewSnapshot(i)}r.viewSnap=i}}},t.prototype.onError=function(e,t){var n=this.queries.get(e);if(n)for(var i=0,s=n.listeners;i<s.length;i++){s[i].onError(t)}this.queries.delete(e)},t.prototype.onOnlineStateChanged=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++){s[i].onOnlineStateChanged(e)}})},t}();exports.EventManager=a;var o=function(){function s(t,n,i){this.query=t,this.queryObserver=n,this.raisedInitialEvent=!1,this.onlineState=e.OnlineState.Unknown,this.options=i||{}}return s.prototype.onViewSnapshot=function(e){if(i.assert(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeDocumentMetadataChanges){for(var n=[],s=0,r=e.docChanges;s<r.length;s++){var a=r[s];a.type!==t.ChangeType.Metadata&&n.push(a)}e={query:e.query,docs:e.docs,oldDocs:e.oldDocs,docChanges:n,fromCache:e.fromCache,hasPendingWrites:e.hasPendingWrites,syncStateChanged:e.syncStateChanged}}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},s.prototype.onError=function(e){this.queryObserver.error(e)},s.prototype.onOnlineStateChanged=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},s.prototype.shouldRaiseInitialEvent=function(t,n){if(i.assert(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var s=n!==e.OnlineState.Failed;return this.options.waitForSyncWhenOnline&&s?(i.assert(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||n===e.OnlineState.Failed},s.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeQueryMetadataChanges},s.prototype.raiseInitialEvent=function(e){i.assert(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e={query:e.query,docs:e.docs,oldDocs:n.DocumentSet.emptySet(e.docs),docChanges:s.getInitialViewChanges(e),fromCache:e.fromCache,hasPendingWrites:e.hasPendingWrites,syncStateChanged:!0},this.raisedInitialEvent=!0,this.queryObserver.next(e)},s.getInitialViewChanges=function(e){var n=[];return e.docs.forEach(function(e){n.push({type:t.ChangeType.Added,doc:e})}),n},s}();exports.QueryListener=o;
},{"../util/assert":47,"../util/obj_map":249,"./types":252,"./view_snapshot":227,"../model/document_set":253}],268:[function(require,module,exports) {
"use strict";function e(e){for(var a="",n=0;n<e.length;n++)a.length>0&&(a=t(a)),a=r(e.get(n),a);return t(a)}function r(e,r){for(var t=r,a=e.length,n=0;n<a;n++){var s=e.charAt(n);switch(s){case"\0":t+=c+h;break;case c:t+=c+i;break;default:t+=s}}return t}function t(e){return e+c+u}function a(e){var r=e.length;if(o.assert(r>=2,"Invalid path "+e),2===r)return o.assert(e.charAt(0)===c&&e.charAt(1)===u,"Non-empty path "+e+" had length 2"),s.ResourcePath.EMPTY_PATH;for(var t=r-2,a=[],n="",d=0;d<r;){var l=e.indexOf(c,d);(l<0||l>t)&&o.fail('Invalid encoded resource path: "'+e+'"');switch(e.charAt(l+1)){case u:var f=e.substring(d,l),g=void 0;0===n.length?g=f:(g=n+=f,n=""),a.push(g);break;case h:n+=e.substring(d,l),n+="\0";break;case i:n+=e.substring(d,l+1);break;default:o.fail('Invalid encoded resource path: "'+e+'"')}d=l+2}return new s.ResourcePath(a)}function n(e){var r=e.charCodeAt(e.length-1);return o.assert(1===r,"successor may only operate on paths generated by encode"),e.substring(0,e.length-1)+String.fromCharCode(r+1)}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("../model/path"),o=require("../util/assert"),c="",u="",h="",i="";exports.encode=e,exports.decode=a,exports.prefixSuccessor=n;
},{"../util/assert":47,"../model/path":177}],265:[function(require,module,exports) {
"use strict";function e(e,r){t.assert(0===r,"Unexpected upgrade from version "+r),e.createObjectStore(s.store,{keyPath:s.keyPath}),e.createObjectStore(a.store,{keyPath:a.keyPath});e.createObjectStore(d.store,{keyPath:d.keyPath}).createIndex(d.documentTargetsIndex,d.documentTargetsKeyPath,{unique:!0});e.createObjectStore(h.store,{keyPath:h.keyPath}).createIndex(h.queryTargetsIndexName,h.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(u.store),e.createObjectStore(c.store),e.createObjectStore(n.store),e.createObjectStore(m.store)}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),r=require("./encoded_resource_path");exports.SCHEMA_VERSION=1,exports.createOrUpgradeDb=e;var o=function(){return function(e,t){this.seconds=e,this.nanos=t}}();exports.DbTimestamp=o;var n=function(){function e(e,t){this.ownerId=e,this.leaseTimestampMs=t}return e.store="owner",e}();exports.DbOwner=n;var s=function(){function e(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}return e.store="mutationQueues",e.keyPath="userId",e}();exports.DbMutationQueue=s;var a=function(){function e(e,t,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.mutations=o}return e.store="mutations",e.keyPath=["userId","batchId"],e}();exports.DbMutationBatch=a;var u=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,r.encode(t)]},e.key=function(e,t,o){return[e,r.encode(t),o]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();exports.DbDocumentMutation=u;var i=function(){return function(e,t){this.path=e,this.readTime=t}}();exports.DbNoDocument=i;var c=function(){function e(e,t){this.noDocument=e,this.document=t}return e.store="remoteDocuments",e}();exports.DbRemoteDocument=c;var h=function(){function e(e,t,r,o,n,s){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=n,this.query=s}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}();exports.DbTarget=h;var d=function(){function e(e,t){this.targetId=e,this.path=t}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}();exports.DbTargetDocument=d;var m=function(){function e(e,t,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}();exports.DbTargetGlobal=m,exports.ALL_STORES=[s.store,a.store,u.store,c.store,h.store,n.store,m.store,d.store];
},{"../util/assert":47,"./encoded_resource_path":268}],267:[function(require,module,exports) {
"use strict";function e(e){return new n.PersistencePromise(function(t,r){e.onsuccess=function(e){var r=e.target.result;t(r)},e.onerror=function(e){r(e.target.error)}})}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/assert"),r=require("../util/log"),n=require("./persistence_promise"),o="SimpleDb",i=function(){function i(e){this.db=e}return i.openOrCreate=function(e,s,u){return t.assert(i.isAvailable(),"IndexedDB not supported in current environment."),r.debug(o,"Opening database:",e),new n.PersistencePromise(function(t,n){var a=window.indexedDB.open(e,s);a.onsuccess=function(e){var r=e.target.result;t(new i(r))},a.onerror=function(e){n(e.target.error)},a.onupgradeneeded=function(t){r.debug(o,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;u(n,t.oldVersion)}}).toPromise()},i.delete=function(t){return r.debug(o,"Removing database:",t),e(window.indexedDB.deleteDatabase(t)).toPromise()},i.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;var e=window.navigator.userAgent;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)},i.prototype.runTransaction=function(e,t,r){var o=new u(this.db,e,t),i=r(o).catch(function(e){return o.abort(),n.PersistencePromise.reject(e)}).toPromise();return o.completionPromise.then(function(){return i})},i.prototype.close=function(){this.db.close()},i}();exports.SimpleDb=i;var s=function(){function t(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(e){this.nextKey=e},t.prototype.delete=function(){return e(this.dbCursor.delete())},t}();exports.IterationController=s;var u=function(){function e(e,t,r){var n=this;this.aborted=!1,this.transaction=e.transaction(r,t),this.completionPromise=new Promise(function(e,t){n.transaction.onabort=n.transaction.oncomplete=function(t){e()},n.transaction.onerror=function(e){t(e.target.error)}})}return e.prototype.abort=function(){this.aborted||(r.debug(o,"Aborting transaction."),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var r=this.transaction.objectStore(e);return t.assert(!!r,"Object store not part of transaction: "+e),new a(r)},e}();exports.SimpleDbTransaction=u;var a=function(){function i(e){this.store=e}return i.prototype.put=function(t,n){var i;return void 0!==n?(r.debug(o,"PUT",this.store.name,t,n),i=this.store.put(n,t)):(r.debug(o,"PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),e(i)},i.prototype.get=function(t){var n=this;return e(this.store.get(t)).next(function(e){return void 0===e&&(e=null),r.debug(o,"GET",n.store.name,t,e),e})},i.prototype.delete=function(t){r.debug(o,"DELETE",this.store.name,t);return e(this.store.delete(t))},i.prototype.loadAll=function(e,t){var r=this.cursor(this.options(e,t)),n=[];return this.iterateCursor(r,function(e,t){n.push(t)}).next(function(){return n})},i.prototype.deleteAll=function(e,t){r.debug(o,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var i=this.cursor(n);return this.iterateCursor(i,function(e,t,r){return r.delete()})},i.prototype.iterate=function(e,t){var r;t?r=e:(r={},t=e);var n=this.cursor(r);return this.iterateCursor(n,t)},i.prototype.iterateCursor=function(e,t){var r=[];return new n.PersistencePromise(function(o,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var u=new s(i),a=t(i.primaryKey,i.value,u);a instanceof n.PersistencePromise&&r.push(a),u.isDone?o():null===u.skipToKey?i.continue():i.continue(u.skipToKey)}else o()}}).next(function(){return n.PersistencePromise.waitFor(r)})},i.prototype.options=function(e,r){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(t.assert(void 0===r,"3rd argument must not be defined if 2nd is a range."),r=e)),{index:n,range:r}},i.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},i}();exports.SimpleDbStore=a;
},{"../util/assert":47,"../util/log":49,"./persistence_promise":245}],262:[function(require,module,exports) {
"use strict";function e(e){return n(e,d.DbTarget.store)}function t(e){return n(e,d.DbTargetGlobal.store)}function r(e){return n(e,d.DbTargetDocument.store)}function n(e,t){return e instanceof p.SimpleDbTransaction?e.store(t):u.fail("Invalid transaction object provided!")}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../core/snapshot_version"),a=require("../core/timestamp"),i=require("../model/collections"),s=require("../model/document_key"),u=require("../util/assert"),c=require("../util/misc"),l=require("./encoded_resource_path"),d=require("./indexeddb_schema"),g=require("./persistence_promise"),p=require("./simple_db"),m=function(){function n(e){this.serializer=e,this.lastRemoteSnapshotVersion=o.SnapshotVersion.MIN,this.metadata=new d.DbTargetGlobal(0,0,o.SnapshotVersion.MIN.toTimestamp()),this.garbageCollector=null}return n.prototype.start=function(e){var r=this;return t(e).get(d.DbTargetGlobal.key).next(function(e){if(null!==e){r.metadata=e;var t=e.lastRemoteSnapshotVersion;r.lastRemoteSnapshotVersion=o.SnapshotVersion.fromTimestamp(new a.Timestamp(t.seconds,t.nanos))}return g.PersistencePromise.resolve()})},n.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},n.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},n.prototype.setLastRemoteSnapshotVersion=function(e,r){return this.lastRemoteSnapshotVersion=r,this.metadata.lastRemoteSnapshotVersion=r.toTimestamp(),t(e).put(d.DbTargetGlobal.key,this.metadata)},n.prototype.addQueryData=function(r,n){var o=this,a=n.targetId,i=e(r).put(this.serializer.toDbTarget(n));return a>this.metadata.highestTargetId?(this.metadata.highestTargetId=a,i.next(function(){return t(r).put(d.DbTargetGlobal.key,o.metadata)})):i},n.prototype.removeQueryData=function(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(function(){e(t).delete(r.targetId)})},n.prototype.getQueryData=function(t,r){var n=this,o=r.canonicalId(),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]),i=null;return e(t).iterate({range:a,index:d.DbTarget.queryTargetsIndexName},function(e,t,o){var a=n.serializer.fromDbTarget(t);r.equals(a.query)&&(i=a,o.done())}).next(function(){return i})},n.prototype.addMatchingKeys=function(e,t,n){var o=[],a=r(e);return t.forEach(function(e){var t=l.encode(e.path);o.push(a.put(new d.DbTargetDocument(n,t)))}),g.PersistencePromise.waitFor(o)},n.prototype.removeMatchingKeys=function(e,t,n){var o=this,a=[],i=r(e);return t.forEach(function(e){var t=l.encode(e.path);a.push(i.delete([n,t])),null!==o.garbageCollector&&o.garbageCollector.addPotentialGarbageKey(e)}),g.PersistencePromise.waitFor(a)},n.prototype.removeMatchingKeysForTargetId=function(e,t){var n=r(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return this.notifyGCForRemovedKeys(e,o).next(function(){return n.delete(o)})},n.prototype.notifyGCForRemovedKeys=function(e,t){var n=this,o=r(e);return null!==this.garbageCollector&&this.garbageCollector.isEager?o.iterate({range:t,keysOnly:!0},function(e,t,r){var o=l.decode(e[1]),a=new s.DocumentKey(o);u.assert(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(a)}):g.PersistencePromise.resolve()},n.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),o=r(e),a=i.documentKeySet();return o.iterate({range:n,keysOnly:!0},function(e,t,r){var n=l.decode(e[1]),o=new s.DocumentKey(n);a=a.add(o)}).next(function(){return a})},n.prototype.setGarbageCollector=function(e){this.garbageCollector=e},n.prototype.containsKey=function(e,t){u.assert(null!==e,"Persistence Transaction cannot be null for query cache containsKey");var n=l.encode(t.path),o=IDBKeyRange.bound([n],[c.immediateSuccessor(n)],!1,!0),a=0;return r(e).iterate({index:d.DbTargetDocument.documentTargetsIndex,keysOnly:!0,range:o},function(e,t,r){a++,r.done()}).next(function(){return a>0})},n}();exports.IndexedDbQueryCache=m;
},{"../core/snapshot_version":170,"../core/timestamp":171,"../model/collections":220,"../model/document_key":174,"../util/assert":47,"../util/misc":211,"./encoded_resource_path":268,"./indexeddb_schema":265,"./persistence_promise":245,"./simple_db":267}],259:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./collections"),e=require("../util/assert"),o=require("../util/misc");exports.BATCHID_UNKNOWN=-1;var n=function(){function n(t,e,o){this.batchId=t,this.localWriteTime=e,this.mutations=o}return n.prototype.applyToRemoteDocument=function(t,o,n){o&&e.assert(o.key.equals(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+o.key);var s=n.mutationResults;e.assert(s.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+s.length+").");for(var i=0;i<this.mutations.length;i++){var a=this.mutations[i];if(a.key.equals(t)){var r=s[i];o=a.applyToRemoteDocument(o,r)}}return o},n.prototype.applyToLocalView=function(t,o){o&&e.assert(o.key.equals(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+o.key);for(var n=0;n<this.mutations.length;n++){var s=this.mutations[n];s.key.equals(t)&&(o=s.applyToLocalView(o,this.localWriteTime))}return o},n.prototype.keys=function(){for(var e=t.documentKeySet(),o=0,n=this.mutations;o<n.length;o++){var s=n[o];e=e.add(s.key)}return e},n.prototype.equals=function(t){return this.batchId===t.batchId&&o.arrayEquals(this.mutations,t.mutations)},n.prototype.isTombstone=function(){return 0===this.mutations.length},n.prototype.toTombstone=function(){return new n(this.batchId,this.localWriteTime,[])},n}();exports.MutationBatch=n;var s=function(){function o(t,e,o,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.streamToken=n,this.docVersions=s}return o.from=function(n,s,i,a){e.assert(n.mutations.length===i.length,"Mutations sent "+n.mutations.length+" must equal results received "+i.length);for(var r=t.documentVersionMap(),u=n.mutations,l=0;l<u.length;l++){var h=i[l].version;null===h&&(h=s),r=r.insert(u[l].key,h)}return new o(n,s,i,a,r)},o}();exports.MutationBatchResult=s;
},{"./collections":220,"../util/assert":47,"../util/misc":211}],263:[function(require,module,exports) {
"use strict";function t(t){return i.assert("string"==typeof t,"Persisting non-string stream token not supported."),t}function e(t){return o(t,d.DbMutationBatch.store)}function n(t){return o(t,d.DbDocumentMutation.store)}function r(t){return o(t,d.DbMutationQueue.store)}function o(t,e){return t instanceof l.SimpleDbTransaction?t.store(e):i.fail("Invalid transaction object provided!")}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../model/mutation_batch"),i=require("../util/assert"),u=require("../util/misc"),s=require("../util/sorted_set"),c=require("./encoded_resource_path"),d=require("./indexeddb_schema"),h=require("./persistence_promise"),l=require("./simple_db"),f=function(){function o(t,e){this.userId=t,this.serializer=e,this.garbageCollector=null}return o.forUser=function(t,e){i.assert(""!==t.uid,"UserID must not be an empty string.");return new o(t.isUnauthenticated()?"":t.uid,e)},o.prototype.start=function(t){var e=this;return o.loadNextBatchIdFromDb(t).next(function(n){return e.nextBatchId=n,r(t).get(e.userId)}).next(function(n){return n||(n=new d.DbMutationQueue(e.userId,a.BATCHID_UNKNOWN,"")),e.metadata=n,e.metadata.lastAcknowledgedBatchId>=e.nextBatchId?e.checkEmpty(t).next(function(n){return i.assert(n,"Reset nextBatchID is only possible when the queue is empty"),e.metadata.lastAcknowledgedBatchId=a.BATCHID_UNKNOWN,r(t).put(e.metadata)}):h.PersistencePromise.resolve()})},o.loadNextBatchIdFromDb=function(t){var n=a.BATCHID_UNKNOWN;return e(t).iterate({reverse:!0},function(t,e,r){var o=t[0];if(t[1]>n&&(n=e.batchId),""===o)r.done();else{var a=u.immediatePredecessor(o);r.skip([a])}}).next(function(){return n+1})},o.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return e(t).iterate({range:r},function(t,e,r){n=!1,r.done()}).next(function(){return n})},o.prototype.getNextBatchId=function(t){return h.PersistencePromise.resolve(this.nextBatchId)},o.prototype.getHighestAcknowledgedBatchId=function(t){return h.PersistencePromise.resolve(this.metadata.lastAcknowledgedBatchId)},o.prototype.acknowledgeBatch=function(e,n,o){var a=n.batchId;return i.assert(a>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=a,this.metadata.lastStreamToken=t(o),r(e).put(this.metadata)},o.prototype.getLastStreamToken=function(t){return h.PersistencePromise.resolve(this.metadata.lastStreamToken)},o.prototype.setLastStreamToken=function(e,n){return this.metadata.lastStreamToken=t(n),r(e).put(this.metadata)},o.prototype.addMutationBatch=function(t,r,o){var i=this,u=this.nextBatchId;this.nextBatchId++;var s=new a.MutationBatch(u,r,o),l=this.serializer.toDbMutationBatch(this.userId,s);return e(t).put(l).next(function(){for(var e=0,r=o;e<r.length;e++){var a=r[e],s=(c.encode(a.key.path),d.DbDocumentMutation.key(i.userId,a.key.path,u));n(t).put(s,d.DbDocumentMutation.PLACEHOLDER)}return h.PersistencePromise.waitFor([])}).next(function(){return s})},o.prototype.lookupMutationBatch=function(t,n){var r=this;return e(t).get(this.keyForBatchId(n)).next(function(t){return t?r.serializer.fromDbMutationBatch(t):null})},o.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,o=IDBKeyRange.lowerBound(this.keyForBatchId(n+1)),a=null;return e(t).iterate({range:o},function(t,e,o){e.userId===r.userId&&(i.assert(e.batchId>n,"Should have found mutation after "+n),a=r.serializer.fromDbMutationBatch(e)),o.done()}).next(function(){return a})},o.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(a.BATCHID_UNKNOWN),this.keyForBatchId(Number.POSITIVE_INFINITY));return e(t).loadAll(r).next(function(t){return t.map(function(t){return n.serializer.fromDbMutationBatch(t)})})},o.prototype.getAllMutationBatchesThroughBatchId=function(t,n){var r=this,o=IDBKeyRange.bound(this.keyForBatchId(a.BATCHID_UNKNOWN),this.keyForBatchId(n));return e(t).loadAll(o).next(function(t){return t.map(function(t){return r.serializer.fromDbMutationBatch(t)})})},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,r){var o=this,a=d.DbDocumentMutation.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(a),s=[];return n(t).iterate({range:u},function(n,a,u){var d=n[0],h=n[1],l=n[2],f=c.decode(h);if(d===o.userId&&r.path.equals(f)){var p=o.keyForBatchId(l);return e(t).get(p).next(function(t){null===t&&i.fail("Dangling document-mutation reference found: "+n+" which points to "+p),s.push(o.serializer.fromDbMutationBatch(t))})}u.done()}).next(function(){return s})},o.prototype.getAllMutationBatchesAffectingQuery=function(t,r){var o=this;i.assert(!r.isDocumentQuery(),"Document queries shouldn't go down this path");var a=r.path,l=a.length+1,f=d.DbDocumentMutation.prefixForPath(this.userId,a),p=(f[1],IDBKeyRange.lowerBound(f)),I=new s.SortedSet(u.primitiveComparator);return n(t).iterate({range:p},function(t,e,n){var r=t[0],i=t[1],u=t[2],s=c.decode(i);r===o.userId&&a.isPrefixOf(s)?s.length===l&&(I=I.add(u)):n.done()}).next(function(){var n=[],r=[];return I.forEach(function(a){var u=o.keyForBatchId(a);r.push(e(t).get(u).next(function(t){null===t&&i.fail("Dangling document-mutation reference found, which points to "+u),n.push(o.serializer.fromDbMutationBatch(t))}))}),h.PersistencePromise.waitFor(r).next(function(){return n})})},o.prototype.removeMutationBatches=function(t,r){for(var o=e(t),a=n(t),u=[],s=function(t){var e=IDBKeyRange.only(c.keyForBatchId(t.batchId)),n=0,r=o.iterate({range:e},function(t,e,r){return n++,r.delete()});u.push(r.next(function(){i.assert(1===n,"Dangling document-mutation reference found: Missing batch "+t.batchId)}));for(var s=0,h=t.mutations;s<h.length;s++){var l=h[s],f=d.DbDocumentMutation.key(c.userId,l.key.path,t.batchId);u.push(a.delete(f)),null!==c.garbageCollector&&c.garbageCollector.addPotentialGarbageKey(l.key)}},c=this,l=0,f=r;l<f.length;l++){s(f[l])}return h.PersistencePromise.waitFor(u)},o.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(r){if(!r)return h.PersistencePromise.resolve();var o=IDBKeyRange.lowerBound(d.DbDocumentMutation.prefixForUser(e.userId)),a=[];return n(t).iterate({range:o},function(t,n,r){if(t[0]===e.userId){var o=c.decode(t[1]);a.push(o)}else r.done()}).next(function(){i.assert(0===a.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+a.map(function(t){return t.canonicalString()}))})})},o.prototype.setGarbageCollector=function(t){this.garbageCollector=t},o.prototype.containsKey=function(t,e){var r=this,o=d.DbDocumentMutation.prefixForPath(this.userId,e.path),a=o[1],i=IDBKeyRange.lowerBound(o),u=!1;return n(t).iterate({range:i,keysOnly:!0},function(t,e,n){var o=t[0],i=t[1];t[2];o===r.userId&&i===a&&(u=!0),n.done()}).next(function(){return u})},o.prototype.keyForBatchId=function(t){return[this.userId,t]},o}();exports.IndexedDbMutationQueue=f;
},{"../model/mutation_batch":259,"../util/assert":47,"../util/misc":211,"../util/sorted_set":225,"./encoded_resource_path":268,"./indexeddb_schema":265,"./persistence_promise":245,"./simple_db":267}],264:[function(require,module,exports) {
"use strict";function e(e){return e instanceof u.SimpleDbTransaction?e.store(i.DbRemoteDocument.store):o.fail("Invalid transaction object provided!")}function t(e){return e.path.toArray()}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../model/collections"),n=require("../model/document"),o=require("../util/assert"),i=require("./indexeddb_schema"),u=require("./simple_db"),a=function(){function o(e){this.serializer=e}return o.prototype.addEntry=function(r,n){return e(r).put(t(n.key),this.serializer.toDbRemoteDocument(n))},o.prototype.removeEntry=function(r,n){return e(r).delete(t(n))},o.prototype.getEntry=function(r,n){var o=this;return e(r).get(t(n)).next(function(e){return e?o.serializer.fromDbRemoteDocument(e):null})},o.prototype.getDocumentsMatchingQuery=function(t,o){var i=this,u=r.documentMap(),a=o.path.toArray(),c=IDBKeyRange.lowerBound(a);return e(t).iterate({range:c},function(e,t,r){var a=i.serializer.fromDbRemoteDocument(t);o.path.isPrefixOf(a.key.path)?a instanceof n.Document&&o.matches(a)&&(u=u.insert(a.key,a)):r.done()}).next(function(){return u})},o}();exports.IndexedDbRemoteDocumentCache=a;
},{"../model/collections":220,"../model/document":173,"../util/assert":47,"./indexeddb_schema":265,"./simple_db":267}],266:[function(require,module,exports) {
"use strict";function e(e){return void 0!==e.documents}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/snapshot_version"),r=require("../core/timestamp"),o=require("../model/document"),n=require("../model/document_key"),i=require("../model/mutation_batch"),u=require("../util/assert"),a=require("./indexeddb_schema"),m=require("./query_data"),s=function(){function s(e){this.remoteSerializer=e}return s.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document);if(e.noDocument){var i=n.DocumentKey.fromSegments(e.noDocument.path),a=e.noDocument.readTime,m=new r.Timestamp(a.seconds,a.nanos);return new o.NoDocument(i,t.SnapshotVersion.fromTimestamp(m))}return u.fail("Unexpected DbRemoteDocument")},s.prototype.toDbRemoteDocument=function(e){if(e instanceof o.Document){var t=this.remoteSerializer.toDocument(e);return new a.DbRemoteDocument(null,t)}var r=e.key.path.toArray(),n=e.version.toTimestamp(),i=new a.DbTimestamp(n.seconds,n.nanos);return new a.DbRemoteDocument(new a.DbNoDocument(r,i),null)},s.prototype.toDbMutationBatch=function(e,t){var r=this,o=t.mutations.map(function(e){return r.remoteSerializer.toMutation(e)});return new a.DbMutationBatch(e,t.batchId,t.localWriteTime.toEpochMilliseconds(),o)},s.prototype.fromDbMutationBatch=function(e){var t=this,o=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),n=r.Timestamp.fromEpochMilliseconds(e.localWriteTimeMs);return new i.MutationBatch(e.batchId,n,o)},s.prototype.fromDbTarget=function(o){var n,i=new r.Timestamp(o.readTime.seconds,o.readTime.nanos),u=t.SnapshotVersion.fromTimestamp(i);return n=e(o.query)?this.remoteSerializer.fromDocumentsTarget(o.query):this.remoteSerializer.fromQueryTarget(o.query),new m.QueryData(n,o.targetId,m.QueryPurpose.Listen,u,o.resumeToken)},s.prototype.toDbTarget=function(e){u.assert(m.QueryPurpose.Listen===e.purpose,"Only queries with purpose "+m.QueryPurpose.Listen+" may be stored, got "+e.purpose);var t,r=e.snapshotVersion.toTimestamp(),o=new a.DbTimestamp(r.seconds,r.nanos);t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),u.assert("string"==typeof e.resumeToken,"Persisting non-string resume token not supported.");var n=e.resumeToken;return new a.DbTarget(e.targetId,e.query.canonicalId(),o,n,0,t)},s}();exports.LocalSerializer=s;
},{"../core/snapshot_version":170,"../core/timestamp":171,"../model/document":173,"../model/document_key":174,"../model/mutation_batch":259,"../util/assert":47,"./indexeddb_schema":265,"./query_data":172}],237:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/assert"),r=require("../util/error"),t=require("../util/log"),n=require("../util/misc"),o=require("./indexeddb_mutation_queue"),i=require("./indexeddb_query_cache"),s=require("./indexeddb_remote_document_cache"),a=require("./indexeddb_schema"),d=require("./indexeddb_schema"),u=require("./local_serializer"),c=require("./persistence_promise"),l=require("./simple_db"),w="IndexedDbPersistence",h=5e3,p=4e3,b="zombiedOwnerId",f="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",m="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",I=function(){function I(e,r){this.ownerId=this.generateOwnerId(),this.dbName=e+I.MAIN_DATABASE,this.serializer=new u.LocalSerializer(r),this.localStoragePrefix=e}return I.prototype.start=function(){var t=this;return I.isAvailable()?(e.assert(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,l.SimpleDb.openOrCreate(this.dbName,d.SCHEMA_VERSION,d.createOrUpgradeDb).then(function(e){t.simpleDb=e}).then(function(){return t.tryAcquireOwnerLease()}).then(function(){t.scheduleOwnerLeaseRefreshes(),t.attachWindowUnloadHook()})):(this.persistenceError=new r.FirestoreError(r.Code.UNIMPLEMENTED,m),Promise.reject(this.persistenceError))},I.prototype.shutdown=function(){var r=this;return e.assert(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then(function(){r.simpleDb.close()})},I.prototype.getMutationQueue=function(e){return o.IndexedDbMutationQueue.forUser(e,this.serializer)},I.prototype.getQueryCache=function(){return new i.IndexedDbQueryCache(this.serializer)},I.prototype.getRemoteDocumentCache=function(){return new s.IndexedDbRemoteDocumentCache(this.serializer)},I.prototype.runTransaction=function(e,r){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(t.debug(w,"Starting transaction:",e),this.simpleDb.runTransaction("readwrite",a.ALL_STORES,function(e){return n.ensureOwnerLease(e).next(function(){return r(e)})}))},I.isAvailable=function(){return l.SimpleDb.isAvailable()},I.buildStoragePrefix=function(e){var r=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(r+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+r+"/"},I.prototype.tryAcquireOwnerLease=function(){var e=this;return this.simpleDb.runTransaction("readwrite",[a.DbOwner.store],function(n){var o=n.store(a.DbOwner.store);return o.get("owner").next(function(n){if(e.validOwner(n))return t.debug(w,"Valid owner already. Failing. Current owner:",n),e.persistenceError=new r.FirestoreError(r.Code.FAILED_PRECONDITION,f),c.PersistencePromise.reject(e.persistenceError);var i=new a.DbOwner(e.ownerId,Date.now());return t.debug(w,"No valid owner. Acquiring owner lease. Current owner:",n,"New owner:",i),o.put("owner",i)})})},I.prototype.releaseOwnerLease=function(){var e=this;return this.simpleDb.runTransaction("readwrite",[a.DbOwner.store],function(r){var n=r.store(a.DbOwner.store);return n.get("owner").next(function(r){return null!==r&&r.ownerId===e.ownerId?(t.debug(w,"Releasing owner lease."),n.delete("owner")):c.PersistencePromise.resolve()})})},I.prototype.ensureOwnerLease=function(e){var t=this;return e.store(a.DbOwner.store).get("owner").next(function(e){return null===e||e.ownerId!==t.ownerId?(t.persistenceError=new r.FirestoreError(r.Code.FAILED_PRECONDITION,f),c.PersistencePromise.reject(t.persistenceError)):c.PersistencePromise.resolve()})},I.prototype.validOwner=function(e){var r=Date.now(),n=r-h,o=r;return null!==e&&(!(e.leaseTimestampMs<n)&&(e.leaseTimestampMs>o?(t.error("Persistence owner-lease is in the future. Discarding.",e),!1):e.ownerId!==this.getZombiedOwnerId()))},I.prototype.scheduleOwnerLeaseRefreshes=function(){var e=this;this.ownerLeaseRefreshHandle=setInterval(function(){e.runTransaction("Refresh owner timestamp",function(r){return r.store(a.DbOwner.store).put("owner",new a.DbOwner(e.ownerId,Date.now()))}).catch(function(r){t.error(r),e.stopOwnerLeaseRefreshes()})},p)},I.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},I.prototype.attachWindowUnloadHook=function(){var e=this;this.windowUnloadHandler=function(){e.setZombiedOwnerId(e.ownerId),e.shutdown()},window.addEventListener("unload",this.windowUnloadHandler)},I.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},I.prototype.getZombiedOwnerId=function(){try{var e=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return t.debug(w,"Zombied ownerID from LocalStorage:",e),e}catch(e){return t.error("Failed to get zombie owner id.",e),null}},I.prototype.setZombiedOwnerId=function(e){try{null===e?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),e)}catch(e){t.error("Failed to set zombie owner id.",e)}},I.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+b},I.prototype.generateOwnerId=function(){return n.AutoId.newId()},I.MAIN_DATABASE="main",I}();exports.IndexedDbPersistence=I;
},{"../util/assert":47,"../util/log":49,"../util/misc":211,"./persistence_promise":245,"./indexeddb_query_cache":262,"../util/error":69,"./indexeddb_mutation_queue":263,"./indexeddb_remote_document_cache":264,"./indexeddb_schema":265,"./local_serializer":266,"./simple_db":267}],260:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/snapshot_version"),t=require("../model/collections"),n=require("../model/document"),o=require("../model/document_key"),u=require("../util/assert"),r=require("./persistence_promise"),c=function(){function c(e,t){this.remoteDocumentCache=e,this.mutationQueue=t}return c.prototype.getDocument=function(e,t){var n=this;return this.remoteDocumentCache.getEntry(e,t).next(function(o){return n.computeLocalDocument(e,t,o)})},c.prototype.getDocuments=function(o,u){var c=this,i=[],s=t.maybeDocumentMap();return u.forEach(function(t){i.push(c.getDocument(o,t).next(function(o){o||(o=new n.NoDocument(t,e.SnapshotVersion.forDeletedDoc())),s=s.insert(t,o)}))}),r.PersistencePromise.waitFor(i).next(function(){return s})},c.prototype.getDocumentsMatchingQuery=function(e,t){return o.DocumentKey.isDocumentKey(t.path)?this.getDocumentsMatchingDocumentQuery(e,t.path):this.getDocumentsMatchingCollectionQuery(e,t)},c.prototype.getDocumentsMatchingDocumentQuery=function(e,u){return this.getDocument(e,new o.DocumentKey(u)).next(function(e){var o=t.documentMap();return e instanceof n.Document&&(o=o.insert(e.key,e)),o})},c.prototype.getDocumentsMatchingCollectionQuery=function(e,o){var u,c=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,o).next(function(t){return c.computeLocalDocuments(e,t)}).next(function(t){return u=t,c.mutationQueue.getAllMutationBatchesAffectingQuery(e,o)}).next(function(o){for(var i=t.documentKeySet(),s=0,a=o;s<a.length;s++)for(var m=0,f=a[s].mutations;m<f.length;m++){var h=f[m];u.get(h.key)||(i=i.add(h.key))}var p=[];return i.forEach(function(t){p.push(c.getDocument(e,t).next(function(e){e instanceof n.Document&&(u=u.insert(e.key,e))}))}),r.PersistencePromise.waitFor(p)}).next(function(){return u.forEach(function(e,t){o.matches(t)||(u=u.remove(e))}),u})},c.prototype.computeLocalDocument=function(e,t,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(e){for(var o=0,u=e;o<u.length;o++){var r=u[o];n=r.applyToLocalView(t,n)}return n})},c.prototype.computeLocalDocuments=function(e,t){var o=this,c=[];return t.forEach(function(r,i){c.push(o.computeLocalDocument(e,r,i).next(function(e){e instanceof n.Document?t=t.insert(e.key,e):e instanceof n.NoDocument?t=t.remove(e.key):u.fail("Unknown MaybeDocument: "+e)}))}),r.PersistencePromise.waitFor(c).next(function(){return t})},c}();exports.LocalDocumentsView=c;
},{"../core/snapshot_version":170,"../model/collections":220,"../model/document":173,"../model/document_key":174,"../util/assert":47,"./persistence_promise":245}],261:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),t=require("../util/assert"),r=require("./persistence_promise"),s=function(){function s(t){this.remoteDocumentCache=t,this.changes=e.maybeDocumentMap()}return s.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},s.prototype.getEntry=function(e,t){var s=this.assertChanges().get(t);return s?r.PersistencePromise.resolve(s):this.remoteDocumentCache.getEntry(e,t)},s.prototype.apply=function(e){var t=this,s=[];return this.assertChanges().forEach(function(r,n){s.push(t.remoteDocumentCache.addEntry(e,n))}),this.changes=null,r.PersistencePromise.waitFor(s)},s.prototype.assertChanges=function(){return t.assert(null!==this.changes,"Changes have already been applied."),this.changes},s}();exports.RemoteDocumentChangeBuffer=s;
},{"../model/collections":220,"../util/assert":47,"./persistence_promise":245}],239:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/snapshot_version"),t=require("../core/target_id_generator"),r=require("../core/timestamp"),n=require("../model/collections"),o=require("../model/mutation_batch"),a=require("../remote/remote_event"),u=require("../util/assert"),s=require("../util/log"),i=require("../util/obj"),c=require("./local_documents_view"),h=require("./persistence_promise"),l=require("./query_data"),m=require("./reference_set"),p=require("./remote_document_change_buffer"),f="LocalStore",d=function(){function d(e,r,n){this.persistence=e,this.garbageCollector=n,this.localViewReferences=new m.ReferenceSet,this.targetIds={},this.targetIdGenerator=t.TargetIdGenerator.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=e.getMutationQueue(r),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new c.LocalDocumentsView(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return d.prototype.start=function(){var e=this;return this.persistence.runTransaction("Start LocalStore",function(t){return e.startMutationQueue(t).next(function(){return e.startQueryCache(t)})})},d.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change",function(r){var o;return t.mutationQueue.getAllMutationBatches(r).next(function(n){return o=n,t.garbageCollector.removeGarbageSource(t.mutationQueue),t.mutationQueue=t.persistence.getMutationQueue(e),t.garbageCollector.addGarbageSource(t.mutationQueue),t.startMutationQueue(r)}).next(function(){return t.localDocuments=new c.LocalDocumentsView(t.remoteDocuments,t.mutationQueue),t.mutationQueue.getAllMutationBatches(r)}).next(function(e){for(var a=n.documentKeySet(),u=0,s=[o,e];u<s.length;u++)for(var i=0,c=s[u];i<c.length;i++)for(var h=0,l=c[i].mutations;h<l.length;h++){var m=l[h];a=a.add(m.key)}return t.localDocuments.getDocuments(r,a)})})},d.prototype.startQueryCache=function(e){var r=this;return this.queryCache.start(e).next(function(){var e=r.queryCache.getHighestTargetId();r.targetIdGenerator=t.TargetIdGenerator.forLocalStore(e)})},d.prototype.startMutationQueue=function(e){var t=this;return this.mutationQueue.start(e).next(function(){return t.heldBatchResults=[],t.mutationQueue.getHighestAcknowledgedBatchId(e)}).next(function(r){return r!==o.BATCHID_UNKNOWN?t.mutationQueue.getAllMutationBatchesThroughBatchId(e,r):h.PersistencePromise.resolve([])}).next(function(r){return r.length>0?t.mutationQueue.removeMutationBatches(e,r):h.PersistencePromise.resolve()})},d.prototype.localWrite=function(e){var t=this;return this.persistence.runTransaction("Locally write mutations",function(n){var o,a=r.Timestamp.now();return t.mutationQueue.addMutationBatch(n,a,e).next(function(e){var r=(o=e).keys();return t.localDocuments.getDocuments(n,r)}).next(function(e){return{batchId:o.batchId,changes:e}})})},d.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch",function(r){var o;return t.mutationQueue.acknowledgeBatch(r,e.batch,e.streamToken).next(function(){if(t.shouldHoldBatchResult(e.commitVersion))return t.heldBatchResults.push(e),o=n.documentKeySet(),h.PersistencePromise.resolve();var a=new p.RemoteDocumentChangeBuffer(t.remoteDocuments);return t.releaseBatchResults(r,[e],a).next(function(e){return o=e,a.apply(r)})}).next(function(){return t.mutationQueue.performConsistencyCheck(r)}).next(function(){return t.localDocuments.getDocuments(r,o)})})},d.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch",function(r){var n,o;return t.mutationQueue.lookupMutationBatch(r,e).next(function(o){return u.assert(null!=o,"Attempt to reject nonexistent batch!"),n=o,t.mutationQueue.getHighestAcknowledgedBatchId(r).next(function(t){return u.assert(e>t,"Acknowledged batches can't be rejected."),n})}).next(function(){return t.removeMutationBatch(r,n)}).next(function(e){return o=e,t.mutationQueue.performConsistencyCheck(r)}).next(function(){return t.localDocuments.getDocuments(r,o)})})},d.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token",function(t){return e.mutationQueue.getLastStreamToken(t)})},d.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token",function(r){return t.mutationQueue.setLastStreamToken(r,e)})},d.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},d.prototype.applyRemoteEvent=function(t){var r=this,o=new p.RemoteDocumentChangeBuffer(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",function(c){var l=[];i.forEachNumber(t.targetChanges,function(e,t){var n=r.targetIds[e];if(n){var o=t.mapping;if(o)if(o instanceof a.ResetMapping)l.push(r.queryCache.removeMatchingKeysForTargetId(c,e).next(function(){return r.queryCache.addMatchingKeys(c,o.documents,e)}));else{if(!(o instanceof a.UpdateMapping))return u.fail("Unknown mapping type: "+JSON.stringify(o));l.push(r.queryCache.removeMatchingKeys(c,o.removedDocuments,e).next(function(){return r.queryCache.addMatchingKeys(c,o.addedDocuments,e)}))}var s=t.resumeToken;s.length>0&&(n=n.update({resumeToken:s,snapshotVersion:t.snapshotVersion}),r.targetIds[e]=n,l.push(r.queryCache.addQueryData(c,n)))}});var m=n.documentKeySet();t.documentUpdates.forEach(function(t,n){m=m.add(t),l.push(o.getEntry(c,t).next(function(a){null==a||n.version.equals(e.SnapshotVersion.MIN)||n.version.compareTo(a.version)>=0?o.addEntry(n):s.debug(f,"Ignoring outdated watch update for ",t,". Current version:",a.version," Watch version:",n.version),r.garbageCollector.addPotentialGarbageKey(t)}))});var p=r.queryCache.getLastRemoteSnapshotVersion(),d=t.snapshotVersion;d.equals(e.SnapshotVersion.MIN)||(u.assert(d.compareTo(p)>=0,"Watch stream reverted to previous snapshot?? "+d+" < "+p),l.push(r.queryCache.setLastRemoteSnapshotVersion(c,d)));var g;return h.PersistencePromise.waitFor(l).next(function(){return r.releaseHeldBatchResults(c,o)}).next(function(e){return g=e,o.apply(c)}).next(function(){return r.localDocuments.getDocuments(c,m.unionWith(g))})})},d.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("Notify local view changes",function(r){for(var n=[],o=function(e){n.push(t.queryCache.getQueryData(r,e.query).next(function(r){u.assert(null!==r,"Local view changes contain unallocated query.");var n=r.targetId;t.localViewReferences.addReferences(e.addedKeys,n),t.localViewReferences.removeReferences(e.removedKeys,n)}))},a=0,s=e;a<s.length;a++){o(s[a])}return h.PersistencePromise.waitFor(n)})},d.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch",function(r){return void 0===e&&(e=o.BATCHID_UNKNOWN),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)})},d.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document",function(r){return t.localDocuments.getDocument(r,e)})},d.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query",function(r){var n;return t.queryCache.getQueryData(r,e).next(function(o){if(o)return n=o,h.PersistencePromise.resolve();var a=t.targetIdGenerator.next();return n=new l.QueryData(e,a,l.QueryPurpose.Listen),t.queryCache.addQueryData(r,n)}).next(function(){return u.assert(!t.targetIds[n.targetId],"Tried to allocate an already allocated query: "+e),t.targetIds[n.targetId]=n,n})})},d.prototype.releaseQuery=function(e){var t=this;return this.persistence.runTransaction("Release query",function(r){return t.queryCache.getQueryData(r,e).next(function(n){return u.assert(null!=n,"Tried to release nonexistent query: "+e),t.localViewReferences.removeReferencesForId(n.targetId),delete t.targetIds[n.targetId],t.garbageCollector.isEager?t.queryCache.removeQueryData(r,n):h.PersistencePromise.resolve()}).next(function(){if(i.isEmpty(t.targetIds)){var e=new p.RemoteDocumentChangeBuffer(t.remoteDocuments);return t.releaseHeldBatchResults(r,e).next(function(){e.apply(r)})}return h.PersistencePromise.resolve()})})},d.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query",function(r){return t.localDocuments.getDocumentsMatchingQuery(r,e)})},d.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys",function(r){return t.queryCache.getMatchingKeysForTargetId(r,e)})},d.prototype.collectGarbage=function(){var e=this;return this.persistence.runTransaction("Garbage collection",function(t){return e.garbageCollector.collectGarbage(t).next(function(r){var n=[];return r.forEach(function(r){n.push(e.remoteDocuments.removeEntry(t,r))}),h.PersistencePromise.waitFor(n)})})},d.prototype.releaseHeldBatchResults=function(e,t){for(var r=[],o=0,a=this.heldBatchResults;o<a.length;o++){var u=a[o];if(!this.isRemoteUpToVersion(u.commitVersion))break;r.push(u)}return 0===r.length?h.PersistencePromise.resolve(n.documentKeySet()):(this.heldBatchResults.splice(0,r.length),this.releaseBatchResults(e,r,t))},d.prototype.isRemoteUpToVersion=function(e){var t=this.queryCache.getLastRemoteSnapshotVersion();return e.compareTo(t)<=0||i.isEmpty(this.targetIds)},d.prototype.shouldHoldBatchResult=function(e){return!this.isRemoteUpToVersion(e)||this.heldBatchResults.length>0},d.prototype.releaseBatchResults=function(e,t,r){for(var n=this,o=h.PersistencePromise.resolve(),a=function(t){o=o.next(function(){return n.applyWriteToRemoteDocuments(e,t,r)})},u=0,s=t;u<s.length;u++){a(s[u])}return o.next(function(){return n.removeMutationBatches(e,t.map(function(e){return e.batch}))})},d.prototype.removeMutationBatch=function(e,t){return this.removeMutationBatches(e,[t])},d.prototype.removeMutationBatches=function(e,t){for(var r=n.documentKeySet(),o=0,a=t;o<a.length;o++)for(var u=0,s=a[o].mutations;u<s.length;u++){var i=s[u].key;r=r.add(i)}return this.mutationQueue.removeMutationBatches(e,t).next(function(){return r})},d.prototype.applyWriteToRemoteDocuments=function(e,t,r){var n=t.batch,o=n.keys(),a=h.PersistencePromise.resolve();return o.forEach(function(o){a=a.next(function(){return r.getEntry(e,o)}).next(function(e){var a=e,s=t.docVersions.get(o);u.assert(null!==s,"ackVersions should contain every doc in the write."),(!a||a.version.compareTo(s)<0)&&((a=n.applyToRemoteDocument(o,a,t))?r.addEntry(a):u.assert(!e,"Mutation batch "+n+" applied to document "+e+" resulted in null"))})}),a},d}();exports.LocalStore=d;
},{"../core/snapshot_version":170,"../model/collections":220,"../util/assert":47,"../util/log":49,"./persistence_promise":245,"./reference_set":248,"../core/target_id_generator":250,"../core/timestamp":171,"../model/mutation_batch":259,"../util/obj":167,"./local_documents_view":260,"./query_data":172,"./remote_document_change_buffer":261,"../remote/remote_event":221}],255:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/document_key"),t=require("../model/mutation_batch"),n=require("../platform/platform"),o=require("../util/assert"),r=require("../util/misc"),s=require("../util/sorted_set"),i=require("./persistence_promise"),a=require("./reference_set"),u=function(){function u(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=t.BATCHID_UNKNOWN,this.lastStreamToken=n.emptyByteString(),this.garbageCollector=null,this.batchesByDocumentKey=new s.SortedSet(a.DocReference.compareByKey)}return u.prototype.start=function(e){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=t.BATCHID_UNKNOWN),o.assert(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),i.PersistencePromise.resolve()},u.prototype.checkEmpty=function(e){return i.PersistencePromise.resolve(0===this.mutationQueue.length)},u.prototype.getNextBatchId=function(e){return i.PersistencePromise.resolve(this.nextBatchId)},u.prototype.getHighestAcknowledgedBatchId=function(e){return i.PersistencePromise.resolve(this.highestAcknowledgedBatchId)},u.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId;o.assert(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var s=this.indexOfExistingBatchId(r,"acknowledged"),a=this.mutationQueue[s];return o.assert(r===a.batchId,"Queue ordering failure: expected batch "+r+", got batch "+a.batchId),o.assert(!a.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,i.PersistencePromise.resolve()},u.prototype.getLastStreamToken=function(e){return i.PersistencePromise.resolve(this.lastStreamToken)},u.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,i.PersistencePromise.resolve()},u.prototype.addMutationBatch=function(e,n,r){o.assert(0!==r.length,"Mutation batches should not be empty");var s=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){var u=this.mutationQueue[this.mutationQueue.length-1];o.assert(u.batchId<s,"Mutation batchIDs must be monotonically increasing order")}var h=new t.MutationBatch(s,n,r);this.mutationQueue.push(h);for(var c=0,l=r;c<l.length;c++){var d=l[c];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new a.DocReference(d.key,s))}return i.PersistencePromise.resolve(h)},u.prototype.lookupMutationBatch=function(e,t){return i.PersistencePromise.resolve(this.findMutationBatch(t))},u.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.mutationQueue.length;t=Math.max(t+1,this.highestAcknowledgedBatchId);for(var o=this.indexOfBatchId(t),r=o<0?0:o;r<n;r++){var s=this.mutationQueue[r];if(!s.isTombstone())return i.PersistencePromise.resolve(s)}return i.PersistencePromise.resolve(null)},u.prototype.getAllMutationBatches=function(e){return i.PersistencePromise.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},u.prototype.getAllMutationBatchesThroughBatchId=function(e,t){var n=this.mutationQueue.length,o=this.indexOfBatchId(t);return o<0?o=0:o>=n?o=n:o++,i.PersistencePromise.resolve(this.getAllLiveMutationBatchesBeforeIndex(o))},u.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new a.DocReference(t,0),s=new a.DocReference(t,Number.POSITIVE_INFINITY),u=[];return this.batchesByDocumentKey.forEachInRange([r,s],function(e){o.assert(t.equals(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);o.assert(null!==r,"Batches in the index must exist in the main table"),u.push(r)}),i.PersistencePromise.resolve(u)},u.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var o=this,u=n.path,h=u.length+1,c=u;e.DocumentKey.isDocumentKey(c)||(c=c.child(""));var l=new a.DocReference(new e.DocumentKey(c),0),d=new s.SortedSet(r.primitiveComparator);this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!u.isPrefixOf(t)&&(t.length===h&&(d=d.add(e.targetOrBatchId)),!0)},l);var m=[];return d.forEach(function(e){var t=o.findMutationBatch(e);null!==t&&m.push(t)}),i.PersistencePromise.resolve(m)},u.prototype.removeMutationBatches=function(e,t){var n=t.length;o.assert(n>0,"Should not remove mutations when none exist.");var r=t[0].batchId,s=this.mutationQueue.length,u=this.indexOfExistingBatchId(r,"removed");o.assert(this.mutationQueue[u].batchId===r,"Removed batches must exist in the queue");for(var h=1,c=u+1;h<n&&c<s;){(p=this.mutationQueue[c]).isTombstone()?c++:(o.assert(p.batchId===t[h].batchId,"Removed batches must be contiguous in the queue"),h++,c++)}if(0===u){for(;c<s;c++){if(!(p=this.mutationQueue[c]).isTombstone())break}var l=c-u;this.mutationQueue.splice(u,l)}else for(var d=u;d<c;d++)this.mutationQueue[d]=this.mutationQueue[d].toTombstone();for(var m=this.batchesByDocumentKey,f=0,g=t;f<g.length;f++)for(var p,y=(p=g[f]).batchId,v=0,B=p.mutations;v<B.length;v++){var b=B[v].key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(b);var I=new a.DocReference(b,y);m=m.delete(I)}return this.batchesByDocumentKey=m,i.PersistencePromise.resolve()},u.prototype.setGarbageCollector=function(e){this.garbageCollector=e},u.prototype.containsKey=function(e,t){var n=new a.DocReference(t,0),o=this.batchesByDocumentKey.firstAfterOrEqual(n);return i.PersistencePromise.resolve(t.equals(o&&o.key))},u.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&o.assert(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),i.PersistencePromise.resolve()},u.prototype.getAllLiveMutationBatchesBeforeIndex=function(e){for(var t=[],n=0;n<e;n++){var o=this.mutationQueue[n];o.isTombstone()||t.push(o)}return t},u.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return o.assert(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},u.prototype.indexOfBatchId=function(e){if(0===this.mutationQueue.length)return 0;return e-this.mutationQueue[0].batchId},u.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return o.assert(n.batchId===e,"If found batch must match"),n.isTombstone()?null:n},u}();exports.MemoryMutationQueue=u;
},{"../model/document_key":174,"../model/mutation_batch":259,"../platform/platform":41,"../util/assert":47,"../util/misc":211,"../util/sorted_set":225,"./persistence_promise":245,"./reference_set":248}],256:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/snapshot_version"),r=require("../util/obj_map"),t=require("./persistence_promise"),s=require("./reference_set"),o=function(){function o(){this.queries=new r.ObjectMap(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=e.SnapshotVersion.MIN,this.highestTargetId=0,this.references=new s.ReferenceSet}return o.prototype.start=function(e){return t.PersistencePromise.resolve()},o.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},o.prototype.getHighestTargetId=function(){return this.highestTargetId},o.prototype.setLastRemoteSnapshotVersion=function(e,r){return this.lastRemoteSnapshotVersion=r,t.PersistencePromise.resolve()},o.prototype.addQueryData=function(e,r){this.queries.set(r.query,r);var s=r.targetId;return s>this.highestTargetId&&(this.highestTargetId=s),t.PersistencePromise.resolve()},o.prototype.removeQueryData=function(e,r){return this.queries.delete(r.query),this.references.removeReferencesForId(r.targetId),t.PersistencePromise.resolve()},o.prototype.getQueryData=function(e,r){var s=this.queries.get(r)||null;return t.PersistencePromise.resolve(s)},o.prototype.addMatchingKeys=function(e,r,s){return this.references.addReferences(r,s),t.PersistencePromise.resolve()},o.prototype.removeMatchingKeys=function(e,r,s){return this.references.removeReferences(r,s),t.PersistencePromise.resolve()},o.prototype.removeMatchingKeysForTargetId=function(e,r){return this.references.removeReferencesForId(r),t.PersistencePromise.resolve()},o.prototype.getMatchingKeysForTargetId=function(e,r){var s=this.references.referencesForId(r);return t.PersistencePromise.resolve(s)},o.prototype.setGarbageCollector=function(e){this.references.setGarbageCollector(e)},o.prototype.containsKey=function(e,r){return this.references.containsKey(e,r)},o}();exports.MemoryQueryCache=o;
},{"../core/snapshot_version":170,"./persistence_promise":245,"./reference_set":248,"../util/obj_map":249}],257:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),t=require("../model/document"),r=require("../model/document_key"),o=require("./persistence_promise"),s=function(){function s(){this.docs=e.maybeDocumentMap()}return s.prototype.addEntry=function(e,t){return this.docs=this.docs.insert(t.key,t),o.PersistencePromise.resolve()},s.prototype.removeEntry=function(e,t){return this.docs=this.docs.remove(t),o.PersistencePromise.resolve()},s.prototype.getEntry=function(e,t){return o.PersistencePromise.resolve(this.docs.get(t))},s.prototype.getDocumentsMatchingQuery=function(s,n){for(var i=e.documentMap(),c=new r.DocumentKey(n.path.child("")),u=this.docs.getIteratorFrom(c);u.hasNext();){var m=u.getNext(),a=m.key,d=m.value;if(!n.path.isPrefixOf(a.path))break;d instanceof t.Document&&n.matches(d)&&(i=i.insert(d.key,d))}return o.PersistencePromise.resolve(i)},s}();exports.MemoryRemoteDocumentCache=s;
},{"../model/collections":220,"../model/document_key":174,"./persistence_promise":245,"../model/document":173}],240:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/assert"),t=require("../util/log"),r=require("./memory_mutation_queue"),o=require("./memory_query_cache"),u=require("./memory_remote_document_cache"),n="MemoryPersistence",s=function(){function s(){this.mutationQueues={},this.remoteDocumentCache=new u.MemoryRemoteDocumentCache,this.queryCache=new o.MemoryQueryCache,this.started=!1}return s.prototype.start=function(){return e.assert(!this.started,"MemoryPersistence double-started!"),this.started=!0,Promise.resolve()},s.prototype.shutdown=function(){return e.assert(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,Promise.resolve()},s.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new r.MemoryMutationQueue,this.mutationQueues[e.toKey()]=t),t},s.prototype.getQueryCache=function(){return this.queryCache},s.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},s.prototype.runTransaction=function(e,r){return t.debug(n,"Starting transaction:",e),r(new i).toPromise()},s}();exports.MemoryPersistence=s;var i=function(){return function(){}}();
},{"../util/assert":47,"../util/log":49,"./memory_mutation_queue":255,"./memory_query_cache":256,"./memory_remote_document_cache":257}],241:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),o=require("./persistence_promise"),r=function(){function r(){this.isEager=!1}return r.prototype.addGarbageSource=function(e){},r.prototype.removeGarbageSource=function(e){},r.prototype.addPotentialGarbageKey=function(e){},r.prototype.collectGarbage=function(r){return o.PersistencePromise.resolve(e.documentKeySet())},r}();exports.NoOpGarbageCollector=r;
},{"../model/collections":220,"./persistence_promise":245}],234:[function(require,module,exports) {
"use strict";function e(e,r,t){var n=Promise.resolve(t);return e.forEach(function(e){n=n.then(function(t){return r(e,t)})}),n}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){return function(){var e=this;this.promise=new Promise(function(r,t){e.resolve=r,e.reject=t})}}();exports.Deferred=r,exports.sequence=e;
},{}],254:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/log"),e=require("../util/promise"),s="ExponentialBackoff",r=function(){function r(t,e,s){this.initialDelayMs=t,this.backoffFactor=e,this.maxDelayMs=s,this.reset()}return r.prototype.reset=function(){this.currentBaseMs=0},r.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},r.prototype.backoffAndWait=function(){var r=new e.Deferred,i=this.currentBaseMs+this.jitterDelayMs();return this.currentBaseMs>0&&t.debug(s,"Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms)"),setTimeout(function(){r.resolve()},i),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs),r.promise},r.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},r}();exports.ExponentialBackoff=r;
},{"../util/log":49,"../util/promise":234}],246:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])};return function(e,s){function r(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e,s=require("../util/assert"),r=require("../util/error"),i=require("../util/log"),n=require("./backoff"),o=require("../util/types"),a="PersistentStream";!function(t){t[t.Initial=0]="Initial",t[t.Auth=1]="Auth",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t[t.Stopped=5]="Stopped"}(e||(e={}));var h=1e3,u=6e4,l=1.5,c=6e4,p=function(){function t(t,s,r,i){this.queue=t,this.connection=s,this.credentialsProvider=r,this.idle=!1,this.stream=null,this.listener=null,this.backoff=new n.ExponentialBackoff(i||h,l,u),this.state=e.Initial}return t.prototype.isStarted=function(){return this.state===e.Backoff||this.state===e.Auth||this.state===e.Open},t.prototype.isOpen=function(){return this.state===e.Open},t.prototype.start=function(t){this.state!==e.Error?(s.assert(this.state===e.Initial,"Already started"),this.listener=t,this.auth()):this.performBackoff(t)},t.prototype.stop=function(){this.isStarted()&&this.close(e.Stopped)},t.prototype.inhibitBackoff=function(){s.assert(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=e.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.idle=!0,this.queue.schedule(function(){return t.handleIdleCloseTimer()},c).catch(function(t){s.assert(t.code===r.Code.CANCELLED,"Received unexpected error in idle timeout closure. Expected CANCELLED, but was: "+t)})},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return this.isOpen()&&this.idle?this.close(e.Initial):Promise.resolve()},t.prototype.cancelIdleCheck=function(){this.idle=!1},t.prototype.close=function(t,n){s.assert(t==e.Error||o.isNullOrUndefined(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),t!=e.Error?this.backoff.reset():n&&n.code===r.Code.RESOURCE_EXHAUSTED&&(i.error(n.toString()),i.error("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t;var a=this.listener;return this.listener=null,t!=e.Stopped?a.onClose(n):Promise.resolve()},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;s.assert(this.state===e.Initial,"Must be in initial state to auth"),this.state=e.Auth,this.credentialsProvider.getToken(!1).then(function(e){t.startStream(e)},function(s){t.queue.schedule(function(){if(t.state!==e.Stopped){var i=new r.FirestoreError(r.Code.UNKNOWN,"Fetching auth token failed: "+s.message);return t.handleStreamClose(i)}return Promise.resolve()})})},t.prototype.startStream=function(t){var r=this;if(this.state!==e.Stopped){s.assert(this.state===e.Auth,"Trying to start stream in a non-auth state");var i=function(t,e){r.queue.schedule(function(){return r.stream===t?e():Promise.resolve()})};if(null!==this.listener){var n=this.startRpc(t);this.stream=n,this.stream.onOpen(function(){i(n,function(){return s.assert(r.state===e.Auth,"Expected stream to be in state auth, but was "+r.state),r.state=e.Open,r.listener.onOpen()})}),this.stream.onClose(function(t){i(n,function(){return r.handleStreamClose(t)})}),this.stream.onMessage(function(t){i(n,function(){return r.onMessage(t)})})}}},t.prototype.performBackoff=function(t){var r=this;s.assert(this.state===e.Error,"Should only perform backoff in an error case"),this.state=e.Backoff,this.backoff.backoffAndWait().then(function(){r.queue.schedule(function(){return r.state===e.Stopped?Promise.resolve():(r.state=e.Initial,r.start(t),s.assert(r.isStarted(),"PersistentStream should have started"),Promise.resolve())})})},t.prototype.handleStreamClose=function(t){return s.assert(this.isStarted(),"Can't handle server close on non-started stream"),i.debug(a,"close with error: "+t),this.stream=null,this.close(e.Error,t)},t}();exports.PersistentStream=p;var f=function(e){function s(t,s,r,i,n,o){var a=e.call(this,s,r,i,o)||this;return a.databaseInfo=t,a.serializer=n,a}return t(s,e),s.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},s.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),s=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,s)},s.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var s=this.serializer.toListenRequestLabels(t);s&&(e.labels=s),this.sendRequest(e)},s.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},s}(p);exports.PersistentListenStream=f;var d=function(e){function r(t,s,r,i,n,o){var a=e.call(this,s,r,i,o)||this;return a.databaseInfo=t,a.serializer=n,a.handshakeComplete_=!1,a}return t(r,e),Object.defineProperty(r.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),r.prototype.start=function(t){this.handshakeComplete_=!1,e.prototype.start.call(this,t)},r.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},r.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},r.prototype.onMessage=function(t){if(s.assert(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults),r=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(r,e)}return s.assert(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},r.prototype.writeHandshake=function(){s.assert(this.isOpen(),"Writing handshake requires an opened stream"),s.assert(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},r.prototype.writeMutations=function(t){var e=this;s.assert(this.isOpen(),"Writing mutations requires an opened stream"),s.assert(this.handshakeComplete_,"Handshake must be complete before writing mutations"),s.assert(this.lastStreamToken.length>0,"Trying to write mutation without a token");var r={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(r)},r}(p);exports.PersistentWriteStream=d;
},{"../util/assert":47,"../util/error":69,"../util/log":49,"../util/types":178,"./backoff":254}],242:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../model/collections"),t=require("../util/assert"),i=require("./persistent_stream"),n=function(){function n(e,t,i,n,r,s){this.databaseInfo=e,this.queue=t,this.connection=i,this.credentials=n,this.serializer=r,this.initialBackoffDelay=s}return n.prototype.newPersistentWriteStream=function(){return new i.PersistentWriteStream(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},n.prototype.newPersistentWatchStream=function(){return new i.PersistentListenStream(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},n.prototype.commit=function(e){var t=this,i={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",i).then(function(e){return t.serializer.fromWriteResults(e.writeResults)})},n.prototype.lookup=function(i){var n=this,r={database:this.serializer.encodedDatabaseId,documents:i.map(function(e){return n.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",r).then(function(r){var s=e.maybeDocumentMap();r.forEach(function(e){var t=n.serializer.fromMaybeDocument(e);s=s.insert(t.key,t)});var o=[];return i.forEach(function(e){var i=s.get(e);t.assert(!!i,"Missing entity in write response for "+e),o.push(i)}),o})},n.prototype.invokeRPC=function(e,t){var i=this;return this.credentials.getToken(!1).then(function(n){return i.connection.invokeRPC(e,t,n)})},n.prototype.invokeStreamingRPC=function(e,t){var i=this;return this.credentials.getToken(!1).then(function(n){return i.connection.invokeStreamingRPC(e,t,n)})},n}();exports.Datastore=n;
},{"../model/collections":220,"../util/assert":47,"./persistent_stream":246}],258:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./snapshot_version"),e=require("../model/collections"),o=require("../model/document"),r=require("../model/mutation"),i=require("../util/error"),n=function(){function n(t){this.datastore=t,this.readVersions=e.documentVersionMap(),this.mutations=[],this.committed=!1}return n.prototype.recordVersion=function(e){var r=e.version;e instanceof o.NoDocument&&(r=t.SnapshotVersion.forDeletedDoc());var n=this.readVersions.get(e.key);if(null!==n){if(!r.equals(n))throw new i.FirestoreError(i.Code.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,r)},n.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){return e.recordVersion(t)}),t})},n.prototype.write=function(t){if(this.committed)throw new i.FirestoreError(i.Code.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},n.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?r.Precondition.updateTime(e):r.Precondition.NONE},n.prototype.preconditionForUpdate=function(e){var o=this.readVersions.get(e);if(o&&o.equals(t.SnapshotVersion.forDeletedDoc()))throw new i.FirestoreError(i.Code.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return o?r.Precondition.updateTime(o):r.Precondition.exists(!0)},n.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},n.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},n.prototype.delete=function(e){this.write([new r.DeleteMutation(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,t.SnapshotVersion.forDeletedDoc())},n.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},n}();exports.Transaction=n;
},{"./snapshot_version":170,"../model/document":173,"../util/error":69,"../model/collections":220,"../model/mutation":176}],243:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../core/snapshot_version"),e=require("../core/transaction"),r=require("../core/types"),n=require("../local/query_data"),a=require("../model/document"),i=require("../model/document_key"),s=require("../model/mutation_batch"),o=require("../platform/platform"),h=require("../util/assert"),l=require("../util/error"),u=require("../util/log"),c=require("../util/obj"),d=require("./remote_event"),p=require("./rpc_error"),m=require("./watch_change"),S="RemoteStore",g=10,w=2,f=function(){function f(t,e,n){this.localStore=t,this.datastore=e,this.onlineStateHandler=n,this.pendingWrites=[],this.lastBatchSeen=s.BATCHID_UNKNOWN,this.listenTargets={},this.pendingTargetResponses={},this.accumulatedWatchChanges=[],this.watchStream=null,this.writeStream=null,this.watchStreamOnlineState=r.OnlineState.Unknown,this.watchStreamFailures=0,this.shouldWarnOffline=!0}return f.prototype.start=function(){return this.enableNetwork()},f.prototype.setOnlineStateToHealthy=function(){this.shouldWarnOffline=!1,this.updateAndBroadcastOnlineState(r.OnlineState.Healthy)},f.prototype.setOnlineStateToUnknown=function(){this.watchStreamFailures=0,this.updateAndBroadcastOnlineState(r.OnlineState.Unknown)},f.prototype.updateOnlineStateAfterFailure=function(){this.watchStreamOnlineState===r.OnlineState.Healthy?this.setOnlineStateToUnknown():(this.watchStreamFailures++,this.watchStreamFailures>=w&&(this.shouldWarnOffline&&(u.error("Could not reach Firestore backend."),this.shouldWarnOffline=!1),this.updateAndBroadcastOnlineState(r.OnlineState.Failed)))},f.prototype.updateAndBroadcastOnlineState=function(t){var e=this.watchStreamOnlineState!==t;this.watchStreamOnlineState=t,e&&this.onlineStateHandler(t)},f.prototype.isNetworkEnabled=function(){return h.assert(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},f.prototype.enableNetwork=function(){var t=this;return h.assert(null==this.watchStream,"enableNetwork() called with non-null watchStream."),h.assert(null==this.writeStream,"enableNetwork() called with non-null writeStream."),this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then(function(e){return t.writeStream.lastStreamToken=e,t.shouldStartWatchStream()&&t.startWatchStream(),t.updateAndBroadcastOnlineState(r.OnlineState.Unknown),t.fillWritePipeline()})},f.prototype.disableNetwork=function(){return this.updateAndBroadcastOnlineState(r.OnlineState.Failed),this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null,Promise.resolve()},f.prototype.shutdown=function(){return u.debug(S,"RemoteStore shutting down."),this.disableNetwork(),Promise.resolve(void 0)},f.prototype.listen=function(t){h.assert(!c.contains(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(t)},f.prototype.unlisten=function(t){h.assert(c.contains(this.listenTargets,t),"unlisten called without assigned target ID!");this.listenTargets[t];delete this.listenTargets[t],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(t),c.isEmpty(this.listenTargets)&&this.watchStream.markIdle())},f.prototype.sendWatchRequest=function(t){this.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},f.prototype.sendUnwatchRequest=function(t){this.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},f.prototype.recordPendingTargetRequest=function(t){this.pendingTargetResponses[t]=(this.pendingTargetResponses[t]||0)+1},f.prototype.startWatchStream=function(){h.assert(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)})},f.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!c.isEmpty(this.listenTargets)},f.prototype.cleanUpWatchStreamState=function(){this.accumulatedWatchChanges=[],this.pendingTargetResponses={}},f.prototype.onWatchStreamOpen=function(){var t=this;return c.forEachNumber(this.listenTargets,function(e,r){t.sendWatchRequest(r)}),Promise.resolve()},f.prototype.onWatchStreamClose=function(t){return h.assert(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.updateOnlineStateAfterFailure(),this.startWatchStream()):this.setOnlineStateToUnknown(),Promise.resolve()},f.prototype.onWatchStreamChange=function(e,r){if(this.setOnlineStateToHealthy(),e instanceof m.WatchTargetChange&&e.state===m.WatchTargetChangeState.Removed&&e.cause)return this.handleTargetError(e);if(this.accumulatedWatchChanges.push(e),!r.equals(t.SnapshotVersion.MIN)&&r.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0){var n=this.accumulatedWatchChanges;return this.accumulatedWatchChanges=[],this.handleWatchChangeBatch(r,n)}return Promise.resolve()},f.prototype.handleWatchChangeBatch=function(t,e){var r=this,s=new m.WatchChangeAggregator(t,this.listenTargets,this.pendingTargetResponses);s.addChanges(e);var o=s.createRemoteEvent();this.pendingTargetResponses=s.pendingTargetResponses;var l=[];return c.forEachNumber(s.existenceFilters,function(e,s){var u=r.listenTargets[e];if(u){var c=u.query;if(c.isDocumentQuery())if(0===s.count){var p=new i.DocumentKey(c.path),m=new a.NoDocument(p,t);o.addDocumentUpdate(m)}else h.assert(1===s.count,"Single document existence filter with count: "+s.count);else{var S=r.localStore.remoteDocumentKeys(e).then(function(t){if(o.targetChanges[e]){var a=o.targetChanges[e].mapping;null!==a&&(a instanceof d.UpdateMapping?t=a.applyToKeySet(t):(h.assert(a instanceof d.ResetMapping,"Expected either reset or update mapping but got something else: "+a),t=a.documents))}if(t.size!==s.count){o.handleExistenceFilterMismatch(e);var i=new n.QueryData(c,e,u.purpose);r.listenTargets[e]=i,r.sendUnwatchRequest(e);var l=new n.QueryData(c,e,n.QueryPurpose.ExistenceFilterMismatch);r.sendWatchRequest(l)}});l.push(S)}}}),Promise.all(l).then(function(){return c.forEachNumber(o.targetChanges,function(t,e){if(e.resumeToken.length>0){var n=r.listenTargets[t];n&&(r.listenTargets[t]=n.update({resumeToken:e.resumeToken,snapshotVersion:e.snapshotVersion}))}}),r.syncEngine.applyRemoteEvent(o)})},f.prototype.handleTargetError=function(t){var e=this;h.assert(!!t.cause,"Handling target error without a cause");var r=t.cause,n=Promise.resolve();return t.targetIds.forEach(function(t){n=n.then(function(){return c.contains(e.listenTargets,t)?(delete e.listenTargets[t],e.syncEngine.rejectListen(t,r)):Promise.resolve()})}),n},f.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=s.BATCHID_UNKNOWN,this.pendingWrites=[]},f.prototype.fillWritePipeline=function(){var t=this;return this.canWriteMutations()?this.localStore.nextMutationBatch(this.lastBatchSeen).then(function(e){return null===e?(0==t.pendingWrites.length&&t.writeStream.markIdle(),Promise.resolve()):(t.commit(e),t.fillWritePipeline())}):Promise.resolve()},f.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<g},f.prototype.outstandingWrites=function(){return this.pendingWrites.length},f.prototype.commit=function(t){h.assert(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=t.batchId,this.pendingWrites.push(t),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},f.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},f.prototype.startWriteStream=function(){h.assert(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},f.prototype.onWriteStreamOpen=function(){return this.writeStream.writeHandshake(),Promise.resolve()},f.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,r=t.pendingWrites;e<r.length;e++){var n=r[e];t.writeStream.writeMutations(n.mutations)}})},f.prototype.onMutationResult=function(t,e){var r=this;h.assert(this.pendingWrites.length>0,"Got result for empty pending writes");var n=this.pendingWrites.shift(),a=s.MutationBatchResult.from(n,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(a).then(function(){return r.fillWritePipeline()})},f.prototype.onWriteStreamClose=function(t){var e=this;if(h.assert(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),t&&this.pendingWrites.length>0){h.assert(!!t,"We have pending writes, but the write stream closed without an error");return(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})}return Promise.resolve()},f.prototype.handleHandshakeError=function(t){return p.isPermanentError(t.code)||t.code===l.Code.ABORTED?(u.debug(S,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=o.emptyByteString(),this.localStore.setLastStreamToken(o.emptyByteString())):Promise.resolve()},f.prototype.handleWriteError=function(t){var e=this;if(p.isPermanentError(t.code)){var r=this.pendingWrites.shift();return this.writeStream.inhibitBackoff(),this.syncEngine.rejectFailedWrite(r.batchId,t).then(function(){return e.fillWritePipeline()})}return Promise.resolve()},f.prototype.createTransaction=function(){return new e.Transaction(this.datastore)},f.prototype.handleUserChange=function(t){return u.debug(S,"RemoteStore changing users: uid=",t.uid),this.disableNetwork(),this.enableNetwork()},f}();exports.RemoteStore=f;
},{"../core/snapshot_version":170,"../local/query_data":172,"../model/document":173,"../model/document_key":174,"../platform/platform":41,"../util/assert":47,"../util/error":69,"../util/log":49,"../util/obj":167,"./remote_event":221,"./rpc_error":67,"./watch_change":180,"../core/transaction":258,"../core/types":252,"../model/mutation_batch":259}],226:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./event_manager"),t=require("./sync_engine"),r=require("../local/eager_garbage_collector"),n=require("../local/indexeddb_persistence"),o=require("../local/local_store"),s=require("../local/memory_persistence"),i=require("../local/no_op_garbage_collector"),a=require("../remote/datastore"),u=require("../remote/remote_store"),c=require("../remote/serializer"),l=require("../util/error"),h=require("../util/log"),d=require("../util/promise"),p="FirestoreClient",f=function(){function f(e,t,r,n){this.platform=e,this.databaseInfo=t,this.credentials=r,this.asyncQueue=n}return f.prototype.start=function(e){var t=this,r=new d.Deferred,n=new d.Deferred,o=!1;return this.credentials.setUserChangeListener(function(s){o?t.asyncQueue.schedule(function(){return t.handleUserChange(s)}):(o=!0,t.initializePersistence(e,n).then(function(){return t.initializeRest(s)}).then(r.resolve,r.reject))}),this.asyncQueue.schedule(function(){return r.promise}),n.promise},f.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.schedule(function(){return e.remoteStore.enableNetwork()})},f.prototype.initializePersistence=function(e,t){var r=this;return e?this.startIndexedDbPersistence().then(t.resolve).catch(function(e){return t.reject(e),r.canFallback(e)?r.startMemoryPersistence():Promise.reject(e)}):(t.resolve(),this.startMemoryPersistence())},f.prototype.canFallback=function(e){return e.code===l.Code.FAILED_PRECONDITION||e.code===l.Code.UNIMPLEMENTED},f.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new i.NoOpGarbageCollector;var e=n.IndexedDbPersistence.buildStoragePrefix(this.databaseInfo),t=new c.JsonProtoSerializer(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new n.IndexedDbPersistence(e,t),this.persistence.start()},f.prototype.startMemoryPersistence=function(){return this.garbageCollector=new r.EagerGarbageCollector,this.persistence=new s.MemoryPersistence,this.persistence.start()},f.prototype.initializeRest=function(r){var n=this;return this.platform.loadConnection(this.databaseInfo).then(function(s){n.localStore=new o.LocalStore(n.persistence,r,n.garbageCollector);var i=n.platform.newSerializer(n.databaseInfo.databaseId),c=new a.Datastore(n.databaseInfo,n.asyncQueue,s,n.credentials,i);return n.remoteStore=new u.RemoteStore(n.localStore,c,function(e){n.eventMgr.onOnlineStateChanged(e)}),n.syncEngine=new t.SyncEngine(n.localStore,n.remoteStore,r),n.remoteStore.syncEngine=n.syncEngine,n.eventMgr=new e.EventManager(n.syncEngine),n.localStore.start()}).then(function(){return n.remoteStore.start()})},f.prototype.handleUserChange=function(e){return this.asyncQueue.verifyOperationInProgress(),h.debug(p,"User Changed: "+e.uid),this.syncEngine.handleUserChange(e)},f.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.schedule(function(){return e.remoteStore.disableNetwork()})},f.prototype.shutdown=function(){var e=this;return this.asyncQueue.schedule(function(){return e.credentials.removeUserChangeListener(),e.remoteStore.shutdown()}).then(function(){return e.persistence.shutdown()})},f.prototype.listen=function(t,r,n){var o=this,s=new e.QueryListener(t,r,n);return this.asyncQueue.schedule(function(){return o.eventMgr.listen(s)}),s},f.prototype.unlisten=function(e){var t=this;this.asyncQueue.schedule(function(){return t.eventMgr.unlisten(e)})},f.prototype.write=function(e){var t=this,r=new d.Deferred;return this.asyncQueue.schedule(function(){return t.syncEngine.write(e,r)}),r.promise},f.prototype.databaseId=function(){return this.databaseInfo.databaseId},f.prototype.transaction=function(e){var t=this;return this.asyncQueue.schedule(function(){return Promise.resolve()}).then(function(){return t.syncEngine.runTransaction(e)})},f}();exports.FirestoreClient=f;
},{"../util/error":69,"./sync_engine":235,"./event_manager":236,"../local/indexeddb_persistence":237,"../local/eager_garbage_collector":238,"../local/local_store":239,"../local/memory_persistence":240,"../local/no_op_garbage_collector":241,"../remote/datastore":242,"../remote/remote_store":243,"../remote/serializer":42,"../util/log":49,"../util/promise":234}],160:[function(require,module,exports) {
"use strict";function e(e){if(e.search(a)>=0)throw new r.FirestoreError(r.Code.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(n.bind.apply(n,[void 0].concat(e.split("."))))}catch(t){throw new r.FirestoreError(r.Code.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../model/path"),r=require("../util/error"),i=require("../util/input_validation"),n=function(){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.validateNamedArrayAtLeastNumberOfElements("FieldPath",e,"fieldNames",1);for(var a=0;a<e.length;++a)if(i.validateArgType("FieldPath","string",a,e[a]),0===e[a].length)throw new r.FirestoreError(r.Code.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new t.FieldPath(e)}return e.documentId=function(){return e._DOCUMENT_ID},e._DOCUMENT_ID=new e(t.FieldPath.keyField().canonicalString()),e}();exports.FieldPath=n;var a=new RegExp("[~\\*/\\[\\]]");exports.fromDotSeparatedString=e;
},{"../util/error":69,"../util/input_validation":210,"../model/path":177}],228:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./assert"),r=require("./log"),t=require("./promise"),n=require("./error"),o=function(){function o(){this.tail=Promise.resolve(),this.delayedOperations=[],this.delayedOperationsCount=0,this.operationInProgress=!1}return o.prototype.schedule=function(r,n){var o=this;if(this.failure&&e.fail("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message)),(n||0)>0){this.delayedOperationsCount++;var i={handle:null,op:r,deferred:new t.Deferred};return i.handle=setTimeout(function(){o.scheduleInternal(function(){return i.op().then(function(e){i.deferred.resolve(e)})}),i.handle=null,o.delayedOperationsCount--,0===o.delayedOperationsCount&&(o.delayedOperations=[])},n),this.delayedOperations.push(i),i.deferred.promise}return this.scheduleInternal(r)},o.prototype.scheduleInternal=function(e){var t=this;return this.tail=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw r.error("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(){t.operationInProgress=!1})}),this.tail},o.prototype.verifyOperationInProgress=function(){e.assert(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},o.prototype.drain=function(e){var r=this;return this.delayedOperations.forEach(function(t){t.handle&&(clearTimeout(t.handle),e?r.scheduleInternal(t.op).then(t.deferred.resolve,t.deferred.reject):t.deferred.reject(new n.FirestoreError(n.Code.CANCELLED,"Operation cancelled by shutdown")))}),this.delayedOperations=[],this.delayedOperationsCount=0,this.schedule(function(){return Promise.resolve()})},o}();exports.AsyncQueue=o;
},{"./assert":47,"./log":49,"./error":69,"./promise":234}],229:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var r=this;this.muted||setTimeout(function(){r.muted||e(t)},0)},e}();exports.AsyncObserver=e;
},{}],244:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.uid=t}return t.prototype.isUnauthenticated=function(){return null==this.uid},t.prototype.toKey=function(){return this.isUnauthenticated()?"anonymous-user":"uid:"+this.uid},t.prototype.equals=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}();exports.User=t;
},{}],230:[function(require,module,exports) {
"use strict";function e(e){if(!e)return new i;switch(e.type){case"gapi":return new a(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new s.FirestoreError(s.Code.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../auth/user"),r=require("../util/assert"),s=require("../util/error"),n=function(){return function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}}();exports.OAuthToken=n;var i=function(){function e(){this.userListener=null}return e.prototype.getToken=function(e){return Promise.resolve(null)},e.prototype.setUserChangeListener=function(e){r.assert(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=e,e(t.User.UNAUTHENTICATED)},e.prototype.removeUserChangeListener=function(){r.assert(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},e}();exports.EmptyCredentialsProvider=i;var o=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var e=t.getUser();t.currentUser&&e.equals(t.currentUser)||(t.currentUser=e,t.userCounter++,t.userListener&&t.userListener(t.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(e){var t=this;r.assert(null!=this.tokenListener,"getToken cannot be called after listener removed.");var i=this.userCounter;return this.app.INTERNAL.getToken(e).then(function(e){if(t.userCounter!==i)throw new s.FirestoreError(s.Code.ABORTED,"getToken aborted due to uid change.");return e?(r.assert("string"==typeof e.accessToken,"Invalid tokenData returned from getToken():"+e),new n(e.accessToken,t.currentUser)):null})},e.prototype.setUserChangeListener=function(e){r.assert(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeUserChangeListener=function(){r.assert(null!=this.tokenListener,"removeUserChangeListener() called twice"),r.assert(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},e.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&r.fail("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var e=this.app.INTERNAL.getUid();return r.assert(null===e||"string"==typeof e,"Received invalid UID: "+e),new t.User(e)},e}();exports.FirebaseCredentialsProvider=o;var u=function(){function e(e,s){this.gapi=e,this.sessionIndex=s,this.type="FirstParty",this.user=t.User.FIRST_PARTY,r.assert(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),e}();exports.FirstPartyToken=u;var a=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,r.assert(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return e.prototype.getToken=function(e){return Promise.resolve(new u(this.gapi,this.sessionIndex))},e.prototype.setUserChangeListener=function(e){e(t.User.FIRST_PARTY)},e.prototype.removeUserChangeListener=function(){},e}();exports.FirstPartyCredentialsProvider=a,exports.makeCredentialsProvider=e;
},{"../util/assert":47,"../util/error":69,"../auth/user":244}],231:[function(require,module,exports) {
"use strict";function e(e){return r(e,["next","error","complete"])}function r(e,r){if("object"!=typeof e||null===e)return!1;for(var t=e,n=0,o=r;n<o.length;n++){var u=o[n];if(u in t&&"function"==typeof t[u])return!0}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPartialObserver=e;
},{}],161:[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util/api"),n=function(){function e(){}return e.delete=function(){return r.instance},e.serverTimestamp=function(){return i.instance},e}();exports.FieldValueImpl=n;var r=function(t){function n(){return t.call(this)||this}return e(n,t),n.instance=new n,n}(n);exports.DeleteFieldValueImpl=r;var i=function(t){function n(){return t.call(this)||this}return e(n,t),n.instance=new n,n}(n);exports.ServerTimestampFieldValueImpl=i,exports.PublicFieldValue=t.makeConstructorPrivate(n,"Use FieldValue.<field>() instead.");
},{"../util/api":209}],232:[function(require,module,exports) {
"use strict";function e(e){switch(e){case V.Set:case V.MergeSet:case V.Update:return!0;case V.QueryValue:return!1;default:throw d.fail("Unexpected case for UserDataSource: "+e)}}function t(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof T.GeoPoint||e instanceof y.Blob||e instanceof E||e instanceof P.FieldValueImpl)}function r(e,r,a){if(!t(a)||!p.isPlainObject(a)){var n=p.valueDescription(a);throw"an object"===n?r.createError(e+" a custom object"):r.createError(e+" "+n)}}function a(e,t){if(t instanceof F.FieldPath)return t._internalPath;if("string"==typeof t)return n(e,t);throw new f.FirestoreError(f.Code.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function n(e,t){try{return F.fromDotSeparatedString(t)._internalPath}catch(t){var r=i(t);throw new f.FirestoreError(f.Code.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+r)}}function i(e){return e instanceof Error?e.message:e.toString()}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../core/timestamp"),s=require("../model/field_value"),l=require("../model/field_value"),u=require("../model/mutation"),h=require("../model/path"),d=require("../util/assert"),f=require("../util/error"),p=require("../util/input_validation"),c=require("../util/misc"),m=require("../util/obj"),v=require("../util/sorted_map"),w=require("../util/types"),y=require("./blob"),F=require("./field_path"),P=require("./field_value"),T=require("./geo_point"),M=/^__.*__$/,b=function(){function e(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}return e.prototype.toMutations=function(e,t){var r=[];return null!==this.fieldMask?r.push(new u.PatchMutation(e,this.data,this.fieldMask,t)):r.push(new u.SetMutation(e,this.data,t)),this.fieldTransforms.length>0&&r.push(new u.TransformMutation(e,this.fieldTransforms)),r},e}();exports.ParsedSetData=b;var S=function(){function e(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}return e.prototype.toMutations=function(e,t){var r=[new u.PatchMutation(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&r.push(new u.TransformMutation(e,this.fieldTransforms)),r},e}();exports.ParsedUpdateData=S;var V;!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.QueryValue=3]="QueryValue"}(V||(V={}));var g=function(){function t(e,t,r,a,n,i){this.dataSource=e,this.methodName=t,this.path=r,this.arrayElement=a,void 0===n&&this.validatePath(),this.arrayElement=void 0!==a&&a,this.fieldTransforms=n||[],this.fieldMask=i||[]}return t.prototype.childContextForField=function(e){var r=null==this.path?null:this.path.child(e),a=new t(this.dataSource,this.methodName,r,!1,this.fieldTransforms,this.fieldMask);return a.validatePathSegment(e),a},t.prototype.childContextForFieldPath=function(e){var r=null==this.path?null:this.path.child(e),a=new t(this.dataSource,this.methodName,r,!1,this.fieldTransforms,this.fieldMask);return a.validatePath(),a},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new f.FirestoreError(f.Code.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},t.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},t.prototype.validatePathSegment=function(t){if(e(this.dataSource)&&M.test(t))throw this.createError("Document fields cannot begin and end with __")},t.prototype.isWrite=function(){return this.dataSource===V.Set||this.dataSource===V.Update},t}(),E=function(){return function(e,t){this.databaseId=e,this.key=t}}();exports.DocumentKeyReference=E;var D=function(){function F(e){this.preConverter=e}return F.prototype.parseSetData=function(e,t){var a=new g(V.Set,e,h.FieldPath.EMPTY_PATH);r("Data must be an object, but it was:",a,t);var n=this.parseData(t,a);return new b(n,null,a.fieldTransforms)},F.prototype.parseMergeData=function(e,t){var a=new g(V.MergeSet,e,h.FieldPath.EMPTY_PATH);r("Data must be an object, but it was:",a,t);var n=this.parseData(t,a),i=new u.FieldMask(a.fieldMask);return new b(n,i,a.fieldTransforms)},F.prototype.parseUpdateData=function(e,t){var a=this,i=new g(V.Update,e,h.FieldPath.EMPTY_PATH);r("Data must be an object, but it was:",i,t);var o=[],l=s.ObjectValue.EMPTY;m.forEach(t,function(t,r){var s=n(e,t),u=i.childContextForFieldPath(s);if((r=a.runPreConverter(r,u))instanceof P.DeleteFieldValueImpl)o.push(s);else{var h=a.parseData(r,u);null!=h&&(o.push(s),l=l.set(s,h))}});var d=new u.FieldMask(o);return new S(l,d,i.fieldTransforms)},F.prototype.parseUpdateVarargs=function(e,t,r,n){var i=new g(V.Update,e,h.FieldPath.EMPTY_PATH),o=[a(e,t)],l=[r];if(n.length%2!=0)throw new f.FirestoreError(f.Code.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var d=0;d<n.length;d+=2)o.push(a(e,n[d])),l.push(n[d+1]);var p=[],c=s.ObjectValue.EMPTY;for(d=0;d<o.length;++d){var m=o[d],v=i.childContextForFieldPath(m),w=this.runPreConverter(l[d],v);if(w instanceof P.DeleteFieldValueImpl)p.push(m);else{var y=this.parseData(w,v);null!=y&&(p.push(m),c=c.set(m,y))}}var F=new u.FieldMask(p);return new S(c,F,i.fieldTransforms)},F.prototype.parseQueryValue=function(e,t){var r=new g(V.QueryValue,e,h.FieldPath.EMPTY_PATH),a=this.parseData(t,r);return d.assert(null!=a,"Parsed data should not be null."),d.assert(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),a},F.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var r=i(e);throw t.createError(r)}},F.prototype.parseData=function(e,a){if((e=this.runPreConverter(e,a))instanceof Array){if(a.arrayElement)throw a.createError("Nested arrays are not supported");return a.path&&a.fieldMask.push(a.path),this.parseArray(e,a)}return t(e)?(r("Unsupported field value:",a,e),this.parseObject(e,a)):(a.path&&a.fieldMask.push(a.path),this.parseScalarValue(e,a))},F.prototype.parseArray=function(e,t){for(var r=[],a=0,n=0,i=e;n<i.length;n++){var o=i[n],s=this.parseData(o,t.childContextForArray(a));null==s&&(s=l.NullValue.INSTANCE),r.push(s),a++}return new l.ArrayValue(r)},F.prototype.parseObject=function(e,t){var r=this,a=new v.SortedMap(c.primitiveComparator);return m.forEach(e,function(e,n){var i=r.parseData(n,t.childContextForField(e));null!=i&&(a=a.insert(e,i))}),new s.ObjectValue(a)},F.prototype.parseScalarValue=function(t,r){if(null===t)return l.NullValue.INSTANCE;if("number"==typeof t)return w.isSafeInteger(t)?new l.IntegerValue(t):new l.DoubleValue(t);if("boolean"==typeof t)return l.BooleanValue.of(t);if("string"==typeof t)return new l.StringValue(t);if(t instanceof Date)return new l.TimestampValue(o.Timestamp.fromDate(t));if(t instanceof T.GeoPoint)return new l.GeoPointValue(t);if(t instanceof y.Blob)return new l.BlobValue(t);if(t instanceof E)return new l.RefValue(t.databaseId,t.key);if(t instanceof P.FieldValueImpl){if(t instanceof P.DeleteFieldValueImpl){if(r.dataSource==V.MergeSet)return null;throw r.dataSource===V.Update?(d.assert(null==r.path||r.path.length>0,"FieldValue.delete() at the top level should have already been handled."),r.createError("FieldValue.delete() can only appear at the top level of your update data")):r.createError("FieldValue.delete() can only be used with update() and set() with {merge:true}")}if(t instanceof P.ServerTimestampFieldValueImpl){if(!e(r.dataSource))throw r.createError("FieldValue.serverTimestamp() can only be used with set() and update()");if(null===r.path)throw r.createError("FieldValue.serverTimestamp() is not currently supported inside arrays");return r.fieldTransforms.push(new u.FieldTransform(r.path,u.ServerTimestampTransform.instance)),null}return d.fail("Unknown FieldValue type: "+t)}throw r.createError("Unsupported field value: "+p.valueDescription(t))},F}();exports.UserDataConverter=D,exports.fieldPathFromArgument=a;
},{"../model/field_value":175,"../model/mutation":176,"../model/path":177,"../util/assert":47,"../util/error":69,"../util/input_validation":210,"../util/misc":211,"../util/obj":167,"./field_path":160,"../core/timestamp":171,"../util/types":178,"../util/sorted_map":222,"./blob":158,"./field_value":161,"./geo_point":166}],159:[function(require,module,exports) {
"use strict";function e(e,t){return void 0===t?{merge:!1}:(w.validateOptionNames(e,t,["merge"]),w.validateNamedOptionalType(e,"boolean","merge",t.merge),t)}function t(e,t,r){if(t instanceof M){if(t.firestore!==r)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw w.invalidClassError(e,"DocumentReference",1,t)}function r(e,t){if(t.oldDocs.isEmpty()){var r,o=0;return t.docChanges.map(function(n){var i=new S(e,n.doc.key,n.doc,t.fromCache);return g.assert(n.type===c.ChangeType.Added,"Invalid event type for first snapshot"),g.assert(!r||t.query.docComparator(r,n.doc)<0,"Got added events in wrong order"),r=n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:o++}})}var i=t.oldDocs;return t.docChanges.map(function(r){var o=new S(e,r.doc.key,r.doc,t.fromCache),a=-1,s=-1;return r.type!==c.ChangeType.Added&&(a=i.indexOf(r.doc.key),g.assert(a>=0,"Index for document not found"),i=i.delete(r.doc.key)),r.type!==c.ChangeType.Removed&&(s=(i=i.add(r.doc)).indexOf(r.doc.key)),{type:n(r.type),doc:o,oldIndex:a,newIndex:s}})}function n(e){switch(e){case c.ChangeType.Added:return"added";case c.ChangeType.Modified:case c.ChangeType.Metadata:return"modified";case c.ChangeType.Removed:return"removed";default:return g.fail("Unknown change type: "+e)}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./field_path"),a=require("../core/database_info"),s=require("../core/firestore_client"),u=require("../core/query"),c=require("../core/view_snapshot"),d=require("../model/document"),l=require("../model/document_key"),f=require("../model/field_value"),h=require("../model/mutation"),p=require("../model/path"),y=require("../platform/platform"),m=require("../util/api"),g=require("../util/assert"),v=require("../util/async_observer"),_=require("../util/async_queue"),b=require("../util/error"),w=require("../util/input_validation"),A=require("../util/log"),C=require("../util/log"),I=require("../util/misc"),N=require("../util/obj"),E=require("./credentials"),D=require("./observer"),O=require("./user_data_converter"),F="firestore.googleapis.com",T=!0,q=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F,this.ssl=T}else w.validateNamedType("settings","string","host",e.host),this.host=e.host,w.validateNamedOptionalType("settings","boolean","ssl",e.ssl),this.ssl=N.defaulted(e.ssl,T);w.validateOptionNames("settings",e,["host","ssl","credentials"]),w.validateNamedOptionalType("settings","object","credentials",e.credentials),this.credentials=e.credentials}return e.prototype.equals=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials},e}(),P=function(){return function(){}}(),R=function(){function e(t){var r=this;this._queue=new _.AsyncQueue,this.INTERNAL={delete:function(){return r._firestoreClient?r._firestoreClient.shutdown():Promise.resolve()},disableNetwork:function(){return r._firestoreClient.disableNetwork()},enableNetwork:function(){return r._firestoreClient.enableNetwork()},drainAsyncQueue:function(e){return r._queue.drain(e)}};var n=new P;if("object"==typeof t.options){var o=t;n.firebaseApp=o,n.databaseId=e.databaseIdFromApp(o),n.persistenceKey=n.firebaseApp.name,n.credentials=new E.FirebaseCredentialsProvider(o)}else{var i=t;if(!i.projectId)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Must provide projectId");n.databaseId=new a.DatabaseId(i.projectId,i.database),n.persistenceKey="[DEFAULT]",n.credentials=new E.EmptyCredentialsProvider}n.settings=new q({}),this._config=n,this._databaseId=n.databaseId}return e.prototype.settings=function(e){if(w.validateExactNumberOfArgs("Firestore.settings",arguments,1),w.validateArgType("Firestore.settings","object",1,e),N.contains(e,"persistence"))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new q(e);if(this._firestoreClient&&!this._config.settings.equals(t))throw new b.FirestoreError(b.Code.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=E.makeCredentialsProvider(t.credentials))},e.prototype.enablePersistence=function(){if(this._firestoreClient)throw new b.FirestoreError(b.Code.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},e.prototype.configureClient=function(e){var t=this;g.assert(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),g.assert(!this._firestoreClient,"configureClient() called multiple times");var r=new a.DatabaseInfo(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new O.UserDataConverter(function(e){if(e instanceof M){var r=t._config.databaseId,n=e.firestore._config.databaseId;if(!n.equals(r))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+r.projectId+"/"+r.database);return new O.DocumentKeyReference(t._config.databaseId,e._key)}return e}),this._firestoreClient=new s.FirestoreClient(y.PlatformSupport.getPlatform(),r,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!N.contains(t,"projectId")){if(N.contains(t,"firestoreId"))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.')}if(N.contains(t,"firestoreOptions"))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,'"firestoreOptions" values are now specified with Firestore.settings()');var r=t.projectId;if(!r||"string"!=typeof r)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new a.DatabaseId(r)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new b.FirestoreError(b.Code.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(w.validateExactNumberOfArgs("Firestore.collection",arguments,1),w.validateArgType("Firestore.collection","string",1,e),!e)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new B(p.ResourcePath.fromString(e),this)},e.prototype.doc=function(e){if(w.validateExactNumberOfArgs("Firestore.doc",arguments,1),w.validateArgType("Firestore.doc","string",1,e),!e)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),M.forPath(p.ResourcePath.fromString(e),this)},e.prototype.runTransaction=function(e){var t=this;return w.validateExactNumberOfArgs("Firestore.runTransaction",arguments,1),w.validateArgType("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(r){return e(new L(t,r))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new x(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(A.getLogLevel()){case C.LogLevel.DEBUG:return"debug";case C.LogLevel.ERROR:return"error";case C.LogLevel.SILENT:return"silent";default:return g.fail("Unknown log level: "+A.getLogLevel())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(w.validateExactNumberOfArgs("Firestore.setLogLevel",arguments,1),w.validateArgType("Firestore.setLogLevel","string",1,e),e){case"debug":A.setLogLevel(A.LogLevel.DEBUG);break;case"error":A.setLogLevel(A.LogLevel.ERROR);break;case"silent":A.setLogLevel(A.LogLevel.SILENT);break;default:throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid log level: "+e)}},e}();exports.Firestore=R;var L=function(){function r(e,t){this._firestore=e,this._transaction=t}return r.prototype.get=function(e){var r=this;w.validateExactNumberOfArgs("Transaction.get",arguments,1);var n=t("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return g.fail("Mismatch in docs returned from document lookup.");var t=e[0];return t instanceof d.NoDocument?new S(r._firestore,n._key,null,!1):new S(r._firestore,n._key,t,!1)})},r.prototype.set=function(r,n,o){w.validateBetweenNumberOfArgs("Transaction.set",arguments,2,3);var i=t("Transaction.set",r,this._firestore),a=(o=e("Transaction.set",o)).merge?this._firestore._dataConverter.parseMergeData("Transaction.set",n):this._firestore._dataConverter.parseSetData("Transaction.set",n);return this._transaction.set(i._key,a),this},r.prototype.update=function(e,r,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s,u;return"string"==typeof r||r instanceof i.FieldPath?(w.validateAtLeastNumberOfArgs("Transaction.update",arguments,3),s=t("Transaction.update",e,this._firestore),u=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",r,n,o)):(w.validateExactNumberOfArgs("Transaction.update",arguments,2),s=t("Transaction.update",e,this._firestore),u=this._firestore._dataConverter.parseUpdateData("Transaction.update",r)),this._transaction.update(s._key,u),this},r.prototype.delete=function(e){w.validateExactNumberOfArgs("Transaction.delete",arguments,1);var r=t("Transaction.delete",e,this._firestore);return this._transaction.delete(r._key),this},r}();exports.Transaction=L;var x=function(){function r(e){this._firestore=e,this._mutations=[],this._committed=!1}return r.prototype.set=function(r,n,o){w.validateBetweenNumberOfArgs("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var i=t("WriteBatch.set",r,this._firestore),a=(o=e("WriteBatch.set",o)).merge?this._firestore._dataConverter.parseMergeData("WriteBatch.set",n):this._firestore._dataConverter.parseSetData("WriteBatch.set",n);return this._mutations=this._mutations.concat(a.toMutations(i._key,h.Precondition.NONE)),this},r.prototype.update=function(e,r,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];this.verifyNotCommitted();var s,u;return"string"==typeof r||r instanceof i.FieldPath?(w.validateAtLeastNumberOfArgs("WriteBatch.update",arguments,3),s=t("WriteBatch.update",e,this._firestore),u=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",r,n,o)):(w.validateExactNumberOfArgs("WriteBatch.update",arguments,2),s=t("WriteBatch.update",e,this._firestore),u=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",r)),this._mutations=this._mutations.concat(u.toMutations(s._key,h.Precondition.exists(!0))),this},r.prototype.delete=function(e){w.validateExactNumberOfArgs("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var r=t("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new h.DeleteMutation(r._key,h.Precondition.NONE)),this},r.prototype.commit=function(){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._firestore.ensureClientConfigured().write(this._mutations):Promise.resolve()},r.prototype.verifyNotCommitted=function(){if(this._committed)throw new b.FirestoreError(b.Code.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},r}();exports.WriteBatch=x;var M=function(){function t(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,r){if(e.length%2!=0)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new l.DocumentKey(e),r)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new B(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(e){if(w.validateExactNumberOfArgs("DocumentReference.collection",arguments,1),w.validateArgType("DocumentReference.collection","string",1,e),!e)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=p.ResourcePath.fromString(e);return new B(this._key.path.child(t),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw w.invalidClassError("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.equals(e._key)},t.prototype.set=function(t,r){w.validateBetweenNumberOfArgs("DocumentReference.set",arguments,1,2);var n=(r=e("DocumentReference.set",r)).merge?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,h.Precondition.NONE))},t.prototype.update=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o;return"string"==typeof e||e instanceof i.FieldPath?(w.validateAtLeastNumberOfArgs("DocumentReference.update",arguments,2),o=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(w.validateExactNumberOfArgs("DocumentReference.update",arguments,1),o=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(o.toMutations(this._key,h.Precondition.exists(!0)))},t.prototype.delete=function(){return w.validateExactNumberOfArgs("DocumentReference.delete",arguments,0),this._firestoreClient.write([new h.DeleteMutation(this._key,h.Precondition.NONE)])},t.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];w.validateBetweenNumberOfArgs("DocumentReference.onSnapshot",arguments,1,4);var r,n={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||D.isPartialObserver(e[o])||(n=e[o],w.validateOptionNames("DocumentReference.onSnapshot",n,["includeMetadataChanges"]),w.validateNamedOptionalType("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),o++);var i={includeDocumentMetadataChanges:n.includeMetadataChanges,includeQueryMetadataChanges:n.includeMetadataChanges};return D.isPartialObserver(e[o])?r=e[o]:(w.validateArgType("DocumentReference.onSnapshot","function",o,e[o]),w.validateOptionalArgType("DocumentReference.onSnapshot","function",o+1,e[o+1]),w.validateOptionalArgType("DocumentReference.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(i,r)},t.prototype.onSnapshotInternal=function(e,t){var r=this,n=function(e){};t.error&&(n=t.error.bind(t));var o=new v.AsyncObserver({next:function(e){if(t.next){g.assert(e.docs.size<=1,"Too many documents returned on a document query");var n=e.docs.get(r._key);t.next(new S(r.firestore,r._key,n,e.fromCache))}},error:n}),i=this._firestoreClient.listen(u.Query.atPath(this._key.path),o,e);return function(){o.mute(),r._firestoreClient.unlisten(i)}},t.prototype.get=function(){var e=this;return w.validateExactNumberOfArgs("DocumentReference.get",arguments,0),new Promise(function(t,r){var n=e.onSnapshotInternal({includeQueryMetadataChanges:!0,includeDocumentMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){n(),!e.exists&&e.metadata.fromCache?r(new b.FirestoreError(b.Code.ABORTED,"Failed to get document because the client is offline.")):t(e)},error:r})})},t}();exports.DocumentReference=M;var S=function(){function e(e,t,r,n){this._firestore=e,this._key=t,this._document=r,this._fromCache=n}return e.prototype.data=function(){if(w.validateExactNumberOfArgs("DocumentSnapshot.data",arguments,0),!this._document)throw new b.FirestoreError(b.Code.NOT_FOUND,"This document doesn't exist. Check doc.exists to make sure the document exists before calling doc.data().");return this.convertObject(this._document.data)},e.prototype.get=function(e){if(w.validateExactNumberOfArgs("DocumentSnapshot.get",arguments,1),!this._document)throw new b.FirestoreError(b.Code.NOT_FOUND,"This document doesn't exist. Check doc.exists to make sure the document exists before calling doc.get().");var t=this._document.data.field(O.fieldPathFromArgument("DocumentSnapshot.get",e));return void 0===t?void 0:this.convertValue(t)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new M(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return{hasPendingWrites:null!==this._document&&this._document.hasLocalMutations,fromCache:this._fromCache}},enumerable:!0,configurable:!0}),e.prototype.convertObject=function(e){var t=this,r={};return e.forEach(function(e,n){r[e]=t.convertValue(n)}),r},e.prototype.convertValue=function(e){if(e instanceof f.ObjectValue)return this.convertObject(e);if(e instanceof f.ArrayValue)return this.convertArray(e);if(e instanceof f.RefValue){var t=e.value(),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.equals(r)||A.error("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new M(t,this._firestore)}return e.value()},e.prototype.convertArray=function(e){var t=this;return e.internalValue.map(function(e){return t.convertValue(e)})},e}();exports.DocumentSnapshot=S;var k=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,r,n){w.validateExactNumberOfArgs("Query.where",arguments,3),w.validateArgType("Query.where","string",2,r),w.validateDefined("Query.where",3,n);var o,i=O.fieldPathFromArgument("Query.where",t);if(i.isKeyField())if("string"==typeof n){if(-1!==n.indexOf("/"))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===n)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new p.ResourcePath([n]));g.assert(a.length%2==0,"Path should be a document key"),o=new f.RefValue(this.firestore._databaseId,new l.DocumentKey(a))}else{if(!(n instanceof M))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+w.valueDescription(n)+".");var s=n;o=new f.RefValue(this.firestore._databaseId,s._key)}else o=this.firestore._dataConverter.parseQueryValue("Query.where",n);var c=u.fieldFilter(i,u.RelationOp.fromString(r),o);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,r){w.validateBetweenNumberOfArgs("Query.orderBy",arguments,1,2),w.validateOptionalArgType("Query.orderBy","string",2,r);var n;if(void 0===r||"asc"===r)n=u.Direction.ASCENDING;else{if("desc"!==r)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+r+"', expected 'asc' or 'desc'.");n=u.Direction.DESCENDING}if(null!==this._query.startAt)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=O.fieldPathFromArgument("Query.orderBy",t),i=new u.OrderBy(o,n);return this.validateNewOrderBy(i),new e(this._query.addOrderBy(i),this.firestore)},e.prototype.limit=function(t){if(w.validateExactNumberOfArgs("Query.limit",arguments,1),w.validateArgType("Query.limit","number",1,t),t<=0)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];w.validateAtLeastNumberOfArgs("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",t,r,!0);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.startAfter=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];w.validateAtLeastNumberOfArgs("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",t,r,!1);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.endBefore=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];w.validateAtLeastNumberOfArgs("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",t,r,!0);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.endAt=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];w.validateAtLeastNumberOfArgs("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",t,r,!1);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw w.invalidClassError("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.equals(t._query)},e.prototype.boundFromDocOrFields=function(e,t,r,n){if(w.validateDefined(e,1,t),t instanceof S){if(r.length>0)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=t;if(!o.exists)throw new b.FirestoreError(b.Code.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,o._document,n)}var i=[t].concat(r);return this.boundFromFields(e,i,n)},e.prototype.boundFromDocument=function(e,t,r){for(var n=[],o=0,i=this._query.orderBy;o<i.length;o++){var a=i[o];if(a.field.isKeyField())n.push(new f.RefValue(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(void 0===s){var c=a.field.canonicalString();throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}n.push(s)}}return new u.Bound(n,r)},e.prototype.boundFromFields=function(e,t,r){var n=this._query.explicitOrderBy;if(t.length>n.length)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<t.length;i++){var a=t[i];if(n[i].field.isKeyField()){if("string"!=typeof a)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+e+"()");var s=new l.DocumentKey(this._query.path.child(a));o.push(new f.RefValue(this.firestore._databaseId,s))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);o.push(c)}}return new u.Bound(o,r)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];w.validateBetweenNumberOfArgs("Query.onSnapshot",arguments,1,4);var r,n={},o=0;return"object"!=typeof e[o]||D.isPartialObserver(e[o])||(n=e[o],w.validateOptionNames("Query.onSnapshot",n,["includeQueryMetadataChanges","includeDocumentMetadataChanges"]),w.validateNamedOptionalType("Query.onSnapshot","boolean","includeDocumentMetadataChanges",n.includeDocumentMetadataChanges),w.validateNamedOptionalType("Query.onSnapshot","boolean","includeQueryMetadataChanges",n.includeQueryMetadataChanges),o++),D.isPartialObserver(e[o])?r=e[o]:(w.validateArgType("Query.onSnapshot","function",o,e[o]),w.validateOptionalArgType("Query.onSnapshot","function",o+1,e[o+1]),w.validateOptionalArgType("Query.onSnapshot","function",o+2,e[o+2]),r={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(n,r)},e.prototype.onSnapshotInternal=function(e,t){var r=this,n=function(e){};t.error&&(n=t.error.bind(t));var o=new v.AsyncObserver({next:function(e){t.next&&t.next(new Q(r.firestore,r._query,e))},error:n}),i=this.firestore.ensureClientConfigured(),a=i.listen(this._query,o,e);return function(){o.mute(),i.unlisten(a)}},e.prototype.get=function(){var e=this;return w.validateExactNumberOfArgs("Query.get",arguments,0),new Promise(function(t,r){var n=e.onSnapshotInternal({includeDocumentMetadataChanges:!1,includeQueryMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){n(),t(e)},error:r})})},e.prototype.validateNewFilter=function(e){if(e instanceof u.RelationFilter&&e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.equals(e.field))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var r=this._query.getFirstOrderByField();null!==r&&this.validateOrderByAndInequalityMatch(e.field,r)}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.equals(e))throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}();exports.Query=k;var Q=function(){function e(e,t,r){this._firestore=e,this._originalQuery=t,this._snapshot=r,this._cachedChanges=null,this.metadata={fromCache:r.fromCache,hasPendingWrites:r.hasPendingWrites}}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var r=this;w.validateBetweenNumberOfArgs("QuerySnapshot.forEach",arguments,1,2),w.validateArgType("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(n){e.call(t,r.convertToDocumentImpl(n))})},Object.defineProperty(e.prototype,"query",{get:function(){return new k(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"docChanges",{get:function(){return this._cachedChanges||(this._cachedChanges=r(this._firestore,this._snapshot)),this._cachedChanges},enumerable:!0,configurable:!0}),e.prototype.convertToDocumentImpl=function(e){return new S(this._firestore,e.key,e,this.metadata.fromCache)},e}();exports.QuerySnapshot=Q;var B=function(e){function t(t,r){var n=e.call(this,u.Query.atPath(t),r)||this;if(t.length%2!=1)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return n}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new M(new l.DocumentKey(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(w.validateBetweenNumberOfArgs("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=I.AutoId.newId()),w.validateArgType("CollectionReference.doc","string",1,e),""===e)throw new b.FirestoreError(b.Code.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=p.ResourcePath.fromString(e);return M.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){w.validateExactNumberOfArgs("CollectionReference.add",arguments,1),w.validateArgType("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(k);exports.CollectionReference=B,exports.changesFromSnapshot=r,exports.PublicFirestore=m.makeConstructorPrivate(R,"Use firebase.firestore() instead."),exports.PublicTransaction=m.makeConstructorPrivate(L,"Use firebase.firestore().runTransaction() instead."),exports.PublicWriteBatch=m.makeConstructorPrivate(x,"Use firebase.firestore().batch() instead."),exports.PublicDocumentReference=m.makeConstructorPrivate(M,"Use firebase.firestore().doc() instead."),exports.PublicDocumentSnapshot=m.makeConstructorPrivate(S),exports.PublicQuery=m.makeConstructorPrivate(k),exports.PublicQuerySnapshot=m.makeConstructorPrivate(Q),exports.PublicCollectionReference=m.makeConstructorPrivate(B,"Use firebase.firestore().collection() instead.");
},{"../model/path":177,"../platform/platform":41,"../util/api":209,"../util/error":69,"../util/input_validation":210,"../util/misc":211,"../core/database_info":168,"../core/firestore_client":226,"../model/document":173,"./field_path":160,"../core/view_snapshot":227,"../core/query":169,"../model/field_value":175,"../model/mutation":176,"../model/document_key":174,"../util/async_queue":228,"../util/log":49,"../util/assert":47,"../util/async_observer":229,"./credentials":230,"../util/obj":167,"./observer":231,"./user_data_converter":232}],34:[function(require,module,exports) {
"use strict";function e(e){e.INTERNAL.registerService("firestore",function(e){return new o.Firestore(e)},n.shallowCopy(a))}function r(e){var r=n.shallowCopy(a);r.Firestore=o.Firestore,e.firestore=r}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../api/blob"),o=require("../api/database"),t=require("../api/field_path"),u=require("../api/field_value"),l=require("../api/geo_point"),n=require("../util/obj"),a={Firestore:o.PublicFirestore,GeoPoint:l.GeoPoint,Blob:i.PublicBlob,Transaction:o.PublicTransaction,WriteBatch:o.PublicWriteBatch,DocumentReference:o.PublicDocumentReference,DocumentSnapshot:o.PublicDocumentSnapshot,Query:o.PublicQuery,QuerySnapshot:o.PublicQuerySnapshot,CollectionReference:o.PublicCollectionReference,FieldPath:t.FieldPath,FieldValue:u.PublicFieldValue,setLogLevel:o.Firestore.setLogLevel};exports.configureForFirebase=e,exports.configureForStandalone=r;
},{"../api/blob":158,"../api/database":159,"../api/field_path":160,"../api/field_value":161,"../api/geo_point":166,"../util/obj":167}],32:[function(require,module,exports) {
"use strict";function r(r){i.configureForFirebase(r)}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/app");require("./src/platform_browser/browser_init");var i=require("./src/platform/config");exports.registerFirestore=r,r(e.default);
},{"./src/platform_browser/browser_init":33,"./src/platform/config":34,"@firebase/app":30}],17:[function(require,module,exports) {
require("@firebase/firestore");
},{"@firebase/firestore":32}],18:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Vue=t()}(this,function(){"use strict";function t(e){return void 0===e||null===e}function n(e){return void 0!==e&&null!==e}function r(e){return!0===e}function i(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function o(e){return null!==e&&"object"==typeof e}function a(e){return Vn.call(e).slice(8,-1)}function s(e){return"[object Object]"===Vn.call(e)}function c(e){return"[object RegExp]"===Vn.call(e)}function l(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function u(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function f(e){var t=parseFloat(e);return isNaN(t)?e:t}function d(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function p(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function v(e,t){return Jn.call(e,t)}function h(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}function m(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function y(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function g(e,t){for(var n in t)e[n]=t[n];return e}function _(e){for(var t={},n=0;n<e.length;n++)e[n]&&g(t,e[n]);return t}function b(e,t,n){}function w(e,t){if(e===t)return!0;var n=o(e),r=o(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),a=Array.isArray(t);if(i&&a)return e.length===t.length&&e.every(function(e,n){return w(e,t[n])});if(i||a)return!1;var s=Object.keys(e),c=Object.keys(t);return s.length===c.length&&s.every(function(n){return w(e[n],t[n])})}catch(e){return!1}}function $(e,t){for(var n=0;n<e.length;n++)if(w(e[n],t))return n;return-1}function x(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function C(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function k(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function A(e){return"function"==typeof e&&/native code/.test(e.toString())}function O(e){return new Ir(void 0,void 0,void 0,String(e))}function S(e,t){var n=e.componentOptions,r=new Ir(e.tag,e.data,e.children,e.text,e.elm,e.context,n,e.asyncFactory);return r.ns=e.ns,r.isStatic=e.isStatic,r.key=e.key,r.isComment=e.isComment,r.fnContext=e.fnContext,r.fnOptions=e.fnOptions,r.fnScopeId=e.fnScopeId,r.isCloned=!0,t&&(e.children&&(r.children=T(e.children,!0)),n&&n.children&&(n.children=T(n.children,!0))),r}function T(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=S(e[i],t);return r}function j(e,t,n){e.__proto__=t}function E(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];k(e,o,t[o])}}function I(e,t){if(o(e)&&!(e instanceof Ir)){var n;return v(e,"__ob__")&&e.__ob__ instanceof Rr?n=e.__ob__:Fr.shouldConvert&&!br()&&(Array.isArray(e)||s(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Rr(e)),t&&n&&n.vmCount++,n}}function M(e,t,n,r,i){var o=new jr,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set,l=!i&&I(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return jr.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&P(t))),t},set:function(t){var a=s?s.call(e):n;t===a||t!=t&&a!=a||(r&&r(),c?c.call(e,t):n=t,l=!i&&I(t),o.notify())}})}}function N(e,t,n){if(Array.isArray(e)&&l(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?(xr("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):r?(M(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function L(e,t){if(Array.isArray(e)&&l(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount?xr("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):v(e,t)&&(delete e[t],n&&n.dep.notify())}}function P(e){for(var t=void 0,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&P(t)}function D(e,t){if(!t)return e;for(var n,r,i,o=Object.keys(t),a=0;a<o.length;a++)r=e[n=o[a]],i=t[n],v(e,n)?s(r)&&s(i)&&D(r,i):N(e,n,i);return e}function F(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?D(r,i):i}:t?e?function(){return D("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function R(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function U(e,t,n,r){var i=Object.create(e||null);return t?(B(r,t,n),g(i,t)):i}function H(e){/^[a-zA-Z][\w-]*$/.test(e)||xr('Invalid component name: "'+e+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'),(zn(e)||rr.isReservedTag(e))&&xr("Do not use built-in or reserved HTML elements as component id: "+e)}function B(e,t,n){s(t)||xr('Invalid value for option "'+e+'": expected an Object, but got '+a(t)+".",n)}function V(e,t,n){function r(r){var i=Ur[r]||Vr;u[r]=i(e[r],t[r],n,r)}!function(e){for(var t in e.components)H(t)}(t),"function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,i,o={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])?o[Wn(i)]={type:null}:xr("props must be strings when using array syntax.");else if(s(n))for(var c in n)i=n[c],o[Wn(c)]=s(i)?i:{type:i};else xr('Invalid value for option "props": expected an Array or an Object, but got '+a(n)+".",t);e.props=o}}(t,n),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(s(n))for(var o in n){var c=n[o];r[o]=s(c)?g({from:o},c):{from:c}}else xr('Invalid value for option "inject": expected an Array or an Object, but got '+a(n)+".",t)}}(t,n),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t);var i=t.extends;if(i&&(e=V(e,i,n)),t.mixins)for(var o=0,c=t.mixins.length;o<c;o++)e=V(e,t.mixins[o],n);var l,u={};for(l in e)r(l);for(l in t)v(e,l)||r(l);return u}function z(e,t,n,r){if("string"==typeof n){var i=e[t];if(v(i,n))return i[n];var o=Wn(n);if(v(i,o))return i[o];var a=Gn(o);if(v(i,a))return i[a];var s=i[n]||i[o]||i[a];return r&&!s&&xr("Failed to resolve "+t.slice(0,-1)+": "+n,e),s}}function q(e,t,n,r){var i=t[e],c=!v(n,e),l=n[e];if(K(Boolean,i.type)&&(c&&!v(i,"default")?l=!1:K(String,i.type)||""!==l&&l!==Zn(e)||(l=!0)),void 0===l){l=function(e,t,n){if(!v(t,"default"))return;var r=t.default;o(r)&&xr('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e);if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof r&&"Function"!==J(t.type)?r.call(e):r}(r,i,e);var u=Fr.shouldConvert;Fr.shouldConvert=!0,I(l),Fr.shouldConvert=u}return function(e,t,n,r,i){if(e.required&&i)return void xr('Missing required prop: "'+t+'"',r);if(null==n&&!e.required)return;var o=e.type,c=!o||!0===o,l=[];if(o){Array.isArray(o)||(o=[o]);for(var u=0;u<o.length&&!c;u++){var f=function(e,t){var n,r=J(t);if(zr.test(r)){var i=typeof e;(n=i===r.toLowerCase())||"object"!==i||(n=e instanceof t)}else n="Object"===r?s(e):"Array"===r?Array.isArray(e):e instanceof t;return{valid:n,expectedType:r}}(n,o[u]);l.push(f.expectedType||""),c=f.valid}}if(!c)return void xr('Invalid prop: type check failed for prop "'+t+'". Expected '+l.map(Gn).join(", ")+", got "+a(n)+".",r);var d=e.validator;d&&(d(n)||xr('Invalid prop: custom validator check failed for prop "'+t+'".',r))}(i,e,l,r,c),l}function J(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function K(e,t){if(!Array.isArray(t))return J(t)===J(e);for(var n=0,r=t.length;n<r;n++)if(J(t[n])===J(e))return!0;return!1}function W(e,t,n){if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,e,t,n))return}catch(e){G(e,r,"errorCaptured hook")}}G(e,t,n)}function G(e,t,n){if(rr.errorHandler)try{return rr.errorHandler.call(null,e,t,n)}catch(e){Y(e,null,"config.errorHandler")}Y(e,t,n)}function Y(e,t,n){if(xr("Error in "+n+': "'+e.toString()+'"',t),!ar&&!sr||"undefined"==typeof console)throw e}function Z(){Jr=!1;var e=qr.slice(0);qr.length=0;for(var t=0;t<e.length;t++)e[t]()}function X(e,t){var n;if(qr.push(function(){if(e)try{e.call(t)}catch(e){W(e,t,"nextTick")}else n&&n(t)}),Jr||(Jr=!0,Kr?Br():Hr()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}function Q(e){ee(e,ci),ci.clear()}function ee(e,t){var n,r,i=Array.isArray(e);if((i||o(e))&&!Object.isFrozen(e)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(i)for(n=e.length;n--;)ee(e[n],t);else for(n=(r=Object.keys(e)).length;n--;)ee(e[r[n]],t)}}function te(e){function t(){var e=arguments,n=t.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,e)}return t.fns=e,t}function ne(e,n,r,i,o){var a,s,c,l;for(a in e)s=e[a],c=n[a],l=li(a),t(s)?xr('Invalid handler for event "'+l.name+'": got '+String(s),o):t(c)?(t(s.fns)&&(s=e[a]=te(s)),r(l.name,s,l.once,l.capture,l.passive,l.params)):s!==c&&(c.fns=s,e[a]=c);for(a in n)t(e[a])&&i((l=li(a)).name,n[a],l.capture)}function re(e,i,o){function a(){o.apply(this,arguments),p(s.fns,a)}e instanceof Ir&&(e=e.data.hook||(e.data.hook={}));var s,c=e[i];t(c)?s=te([a]):n(c.fns)&&r(c.merged)?(s=c).fns.push(a):s=te([c,a]),s.merged=!0,e[i]=s}function ie(e,t,r,i,o){if(n(t)){if(v(t,r))return e[r]=t[r],o||delete t[r],!0;if(v(t,i))return e[r]=t[i],o||delete t[i],!0}return!1}function oe(e){return n(e)&&n(e.text)&&function(e){return!1===e}(e.isComment)}function ae(e,o){var a,s,c,l,u=[];for(a=0;a<e.length;a++)t(s=e[a])||"boolean"==typeof s||(l=u[c=u.length-1],Array.isArray(s)?s.length>0&&(oe((s=ae(s,(o||"")+"_"+a))[0])&&oe(l)&&(u[c]=O(l.text+s[0].text),s.shift()),u.push.apply(u,s)):i(s)?oe(l)?u[c]=O(l.text+s):""!==s&&u.push(O(s)):oe(s)&&oe(l)?u[c]=O(l.text+s.text):(r(e._isVList)&&n(s.tag)&&t(s.key)&&n(o)&&(s.key="__vlist"+o+"_"+a+"__"),u.push(s)));return u}function se(e,t){return(e.__esModule||$r&&"Module"===e[Symbol.toStringTag])&&(e=e.default),o(e)?t.extend(e):e}function ce(e){return e.isComment&&e.asyncFactory}function le(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];if(n(r)&&(n(r.componentOptions)||ce(r)))return r}}function ue(e,t,n){n?si.$once(e,t):si.$on(e,t)}function fe(e,t){si.$off(e,t)}function de(e,t,n){si=e,ne(t,n||{},ue,fe,e),si=void 0}function pe(e,t){var n={};if(!e)return n;for(var r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in n)n[l].every(ve)&&delete n[l];return n}function ve(e){return e.isComment&&!e.asyncFactory||" "===e.text}function he(e,t){t=t||{};for(var n=0;n<e.length;n++)Array.isArray(e[n])?he(e[n],t):t[e[n].key]=e[n].fn;return t}function me(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function ye(e,t){if(t){if(e._directInactive=!1,me(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)ye(e.$children[n]);_e(e,"activated")}}function ge(e,t){if(!(t&&(e._directInactive=!0,me(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)ge(e.$children[n]);_e(e,"deactivated")}}function _e(e,t){var n=e.$options[t];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(e)}catch(n){W(n,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t)}function be(){gi=!0;var e,t;for(pi.sort(function(e,t){return e.id-t.id}),_i=0;_i<pi.length;_i++)if(e=pi[_i],t=e.id,hi[t]=null,e.run(),null!=hi[t]&&(mi[t]=(mi[t]||0)+1,mi[t]>di)){xr("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}var n=vi.slice(),r=pi.slice();_i=pi.length=vi.length=0,hi={},mi={},yi=gi=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,ye(e[t],!0)}(n),function(e){var t=e.length;for(;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&_e(r,"updated")}}(r),wr&&rr.devtools&&wr.emit("flush")}function we(e,t,n){$i.get=function(){return this[t][n]},$i.set=function(e){this[t][n]=e},Object.defineProperty(e,n,$i)}function $e(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;Fr.shouldConvert=o;var a=function(o){i.push(o);var a=q(o,t,n,e),s=Zn(o);(qn(s)||rr.isReservedAttr(s))&&xr('"'+s+'" is a reserved attribute and cannot be used as component prop.',e),M(r,o,a,function(){e.$parent&&!fi&&xr("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+o+'"',e)}),o in e||we(e,"_props",o)};for(var s in t)a(s);Fr.shouldConvert=!0}(e,t.props),t.methods&&function(e,t){var n=e.$options.props;for(var r in t)null==t[r]&&xr('Method "'+r+'" has an undefined value in the component definition. Did you reference the function correctly?',e),n&&v(n,r)&&xr('Method "'+r+'" has already been defined as a prop.',e),r in e&&C(r)&&xr('Method "'+r+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),e[r]=null==t[r]?b:m(t[r],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;t=e._data="function"==typeof t?function(e,t){try{return e.call(t,t)}catch(e){return W(e,t,"data()"),{}}}(t,e):t||{},s(t)||(t={},xr("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));var n=Object.keys(t),r=e.$options.props,i=e.$options.methods,o=n.length;for(;o--;){var a=n[o];i&&v(i,a)&&xr('Method "'+a+'" has already been defined as a data property.',e),r&&v(r,a)?xr('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',e):C(a)||we(e,"_data",a)}I(t,!0)}(e):I(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=br();for(var i in t){var o=t[i],a="function"==typeof o?o:o.get;null==a&&xr('Getter is missing for computed property "'+i+'".',e),r||(n[i]=new wi(e,a||b,b,xi)),i in e?i in e.$data?xr('The computed property "'+i+'" is already defined in data.',e):e.$options.props&&i in e.$options.props&&xr('The computed property "'+i+'" is already defined as a prop.',e):xe(e,i,o)}}(e,t.computed),t.watch&&t.watch!==hr&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)ke(e,n,r[i]);else ke(e,n,r)}}(e,t.watch)}function xe(e,t,n){var r=!br();"function"==typeof n?($i.get=r?Ce(t):n,$i.set=b):($i.get=n.get?r&&!1!==n.cache?Ce(t):n.get:b,$i.set=n.set?n.set:b),$i.set===b&&($i.set=function(){xr('Computed property "'+t+'" was assigned to but it has no setter.',this)}),Object.defineProperty(e,t,$i)}function Ce(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),jr.target&&t.depend(),t.value}}function ke(e,t,n,r){return s(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}function Ae(e,t){if(e){for(var n=Object.create(null),r=$r?Reflect.ownKeys(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}):Object.keys(e),i=0;i<r.length;i++){for(var o=r[i],a=e[o].from,s=t;s;){if(s._provided&&a in s._provided){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var c=e[o].default;n[o]="function"==typeof c?c.call(t):c}else xr('Injection "'+o+'" not found',t)}return n}}function Oe(e,t){var r,i,a,s,c;if(Array.isArray(e)||"string"==typeof e)for(r=new Array(e.length),i=0,a=e.length;i<a;i++)r[i]=t(e[i],i);else if("number"==typeof e)for(r=new Array(e),i=0;i<e;i++)r[i]=t(i+1,i);else if(o(e))for(s=Object.keys(e),r=new Array(s.length),i=0,a=s.length;i<a;i++)c=s[i],r[i]=t(e[c],c,i);return n(r)&&(r._isVList=!0),r}function Se(e,t,n,r){var i,a=this.$scopedSlots[e];if(a)n=n||{},r&&(o(r)||xr("slot v-bind without argument expects an Object",this),n=g(g({},r),n)),i=a(n)||t;else{var s=this.$slots[e];s&&(s._rendered&&xr('Duplicate presence of slot "'+e+'" found in the same render tree - this will likely cause render errors.',this),s._rendered=!0),i=s||t}var c=n&&n.slot;return c?this.$createElement("template",{slot:c},i):i}function Te(e){return z(this.$options,"filters",e,!0)||Qn}function je(e,t,n,r){var i=rr.keyCodes[t]||n;return i?Array.isArray(i)?-1===i.indexOf(e):i!==e:r?Zn(r)!==t:void 0}function Ee(e,t,n,r,i){if(n)if(o(n)){Array.isArray(n)&&(n=_(n));var a,s=function(o){if("class"===o||"style"===o||qn(o))a=e;else{var s=e.attrs&&e.attrs.type;a=r||rr.mustUseProp(t,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}if(!(o in a)&&(a[o]=n[o],i)){(e.on||(e.on={}))["update:"+o]=function(e){n[o]=e}}};for(var c in n)s(c)}else xr("v-bind without argument expects an Object or Array value",this);return e}function Ie(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t?Array.isArray(r)?T(r):S(r):(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Ne(r,"__static__"+e,!1),r)}function Me(e,t,n){return Ne(e,"__once__"+t+(n?"_"+n:""),!0),e}function Ne(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&Le(e[r],t+"_"+r,n);else Le(e,t,n)}function Le(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Pe(e,t){if(t)if(s(t)){var n=e.on=e.on?g({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else xr("v-on without argument expects an Object value",this);return e}function De(e){e._o=Me,e._n=f,e._s=u,e._l=Oe,e._t=Se,e._q=w,e._i=$,e._m=Ie,e._f=Te,e._k=je,e._b=Ee,e._v=O,e._e=Nr,e._u=he,e._g=Pe}function Fe(e,t,n,i,o){var a=o.options;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||Bn,this.injections=Ae(a.inject,i),this.slots=function(){return pe(n,i)};var s=Object.create(i),c=r(a._compiled),l=!c;c&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=e.scopedSlots||Bn),a._scopeId?this._c=function(e,t,n,r){var o=He(s,e,t,n,r,l);return o&&(o.fnScopeId=a._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return He(s,e,t,n,r,l)}}function Re(e,t){for(var n in t)e[Wn(n)]=t[n]}function Ue(e,i,a,s,c){if(!t(e)){var l=a.$options._base;if(o(e)&&(e=l.extend(e)),"function"==typeof e){var u;if(t(e.cid)&&(u=e,void 0===(e=function(e,i,a){if(r(e.error)&&n(e.errorComp))return e.errorComp;if(n(e.resolved))return e.resolved;if(r(e.loading)&&n(e.loadingComp))return e.loadingComp;if(!n(e.contexts)){var s=e.contexts=[a],c=!0,l=function(){for(var e=0,t=s.length;e<t;e++)s[e].$forceUpdate()},u=x(function(t){e.resolved=se(t,i),c||l()}),f=x(function(t){xr("Failed to resolve async component: "+String(e)+(t?"\nReason: "+t:"")),n(e.errorComp)&&(e.error=!0,l())}),d=e(u,f);return o(d)&&("function"==typeof d.then?t(e.resolved)&&d.then(u,f):n(d.component)&&"function"==typeof d.component.then&&(d.component.then(u,f),n(d.error)&&(e.errorComp=se(d.error,i)),n(d.loading)&&(e.loadingComp=se(d.loading,i),0===d.delay?e.loading=!0:setTimeout(function(){t(e.resolved)&&t(e.error)&&(e.loading=!0,l())},d.delay||200)),n(d.timeout)&&setTimeout(function(){t(e.resolved)&&f("timeout ("+d.timeout+"ms)")},d.timeout))),c=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(a)}(u,l,a))))return function(e,t,n,r,i){var o=Nr();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}(u,i,a,s,c);i=i||{},Ve(e),n(i.model)&&function(e,t){var r=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.props||(t.props={}))[r]=t.model.value;var o=t.on||(t.on={});n(o[i])?o[i]=[t.model.callback].concat(o[i]):o[i]=t.model.callback}(e.options,i);var f=function(e,r,i){var o=r.options.props;if(!t(o)){var a={},s=e.attrs,c=e.props;if(n(s)||n(c))for(var l in o){var u=Zn(l),f=l.toLowerCase();l!==f&&s&&v(s,f)&&Cr('Prop "'+f+'" is passed to component '+Ar(i||r)+', but the declared prop name is "'+l+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+u+'" instead of "'+l+'".'),ie(a,c,l,u,!0)||ie(a,s,l,u,!1)}return a}}(i,e,c);if(r(e.options.functional))return function(e,t,r,i,o){var a=e.options,s={},c=a.props;if(n(c))for(var l in c)s[l]=q(l,c,t||Bn);else n(r.attrs)&&Re(s,r.attrs),n(r.props)&&Re(s,r.props);var u=new Fe(r,s,o,i,e),f=a.render.call(null,u._c,u);return f instanceof Ir&&(f.fnContext=i,f.fnOptions=a,r.slot&&((f.data||(f.data={})).slot=r.slot)),f}(e,f,i,a,s);var d=i.on;if(i.on=i.nativeOn,r(e.options.abstract)){var p=i.slot;i={},p&&(i.slot=p)}!function(e){e.hook||(e.hook={});for(var t=0;t<ki.length;t++){var n=ki[t],r=e.hook[n],i=Ci[n];e.hook[n]=r?function(e,t){return function(n,r,i,o){e(n,r,i,o),t(n,r,i,o)}}(i,r):i}}(i);var h=e.options.name||c;return new Ir("vue-component-"+e.cid+(h?"-"+h:""),i,void 0,void 0,void 0,a,{Ctor:e,propsData:f,listeners:d,tag:c,children:s},u)}xr("Invalid Component definition: "+String(e),a)}}function He(e,t,o,a,s,c){return(Array.isArray(o)||i(o))&&(s=a,a=o,o=void 0),r(c)&&(s=Oi),function(e,t,r,o,a){if(n(r)&&n(r.__ob__))return xr("Avoid using observed data object as vnode data: "+JSON.stringify(r)+"\nAlways create fresh vnode data objects in each render!",e),Nr();n(r)&&n(r.is)&&(t=r.is);if(!t)return Nr();n(r)&&n(r.key)&&!i(r.key)&&xr("Avoid using non-primitive value as key, use string/number value instead.",e);Array.isArray(o)&&"function"==typeof o[0]&&((r=r||{}).scopedSlots={default:o[0]},o.length=0);a===Oi?o=function(e){return i(e)?[O(e)]:Array.isArray(e)?ae(e):void 0}(o):a===Ai&&(o=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(o));var s,c;if("string"==typeof t){var l;c=e.$vnode&&e.$vnode.ns||rr.getTagNamespace(t),s=rr.isReservedTag(t)?new Ir(rr.parsePlatformTagName(t),r,o,void 0,void 0,e):n(l=z(e.$options,"components",t))?Ue(l,r,e,o,t):new Ir(t,r,o,void 0,void 0,e)}else s=Ue(t,r,e,o);return n(s)?(c&&Be(s,c),s):Nr()}(e,t,o,a,s)}function Be(e,i,o){if(e.ns=i,"foreignObject"===e.tag&&(i=void 0,o=!0),n(e.children))for(var a=0,s=e.children.length;a<s;a++){var c=e.children[a];n(c.tag)&&(t(c.ns)||r(o))&&Be(c,i,o)}}function Ve(e){var t=e.options;if(e.super){var n=Ve(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.extendOptions,i=e.sealedOptions;for(var o in n)n[o]!==i[o]&&(t||(t={}),t[o]=function(e,t,n){if(Array.isArray(e)){var r=[];n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];for(var i=0;i<e.length;i++)(t.indexOf(e[i])>=0||n.indexOf(e[i])<0)&&r.push(e[i]);return r}return e}(n[o],r[o],i[o]));return t}(e);r&&g(e.extendOptions,r),(t=e.options=V(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function ze(e){this instanceof ze||xr("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function qe(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;o&&H(o);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=V(n.options,e),a.super=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)we(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)xe(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,tr.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=g({},a.options),i[r]=a,a}}function Je(e){return e&&(e.Ctor.options.name||e.tag)}function Ke(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!c(e)&&e.test(t)}function We(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=Je(a.componentOptions);s&&!t(s)&&Ge(n,o,r,i)}}}function Ge(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,p(n,t)}function Ye(e){for(var t=e.data,r=e,i=e;n(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=Ze(i.data,t));for(;n(r=r.parent);)r&&r.data&&(t=Ze(t,r.data));return function(e,t){if(n(e)||n(t))return Xe(e,Qe(t));return""}(t.staticClass,t.class)}function Ze(e,t){return{staticClass:Xe(e.staticClass,t.staticClass),class:n(e.class)?[e.class,t.class]:t.class}}function Xe(e,t){return e?t?e+" "+t:e:t||""}function Qe(e){return Array.isArray(e)?function(e){for(var t,r="",i=0,o=e.length;i<o;i++)n(t=Qe(e[i]))&&""!==t&&(r&&(r+=" "),r+=t);return r}(e):o(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}function et(e){return Zi(e)?"svg":"math"===e?"math":void 0}function tt(e){if("string"==typeof e){var t=document.querySelector(e);return t||(xr("Cannot find element: "+e),document.createElement("div"))}return e}function nt(e,t){var n=e.data.ref;if(n){var r=e.context,i=e.componentInstance||e.elm,o=r.$refs;t?Array.isArray(o[n])?p(o[n],i):o[n]===i&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])?o[n].indexOf(i)<0&&o[n].push(i):o[n]=[i]:o[n]=i}}function rt(e,i){return e.key===i.key&&(e.tag===i.tag&&e.isComment===i.isComment&&n(e.data)===n(i.data)&&function(e,t){if("input"!==e.tag)return!0;var r,i=n(r=e.data)&&n(r=r.attrs)&&r.type,o=n(r=t.data)&&n(r=r.attrs)&&r.type;return i===o||eo(i)&&eo(o)}(e,i)||r(e.isAsyncPlaceholder)&&e.asyncFactory===i.asyncFactory&&t(i.asyncFactory.error))}function it(e,t,r){var i,o,a={};for(i=t;i<=r;++i)n(o=e[i].key)&&(a[o]=i);return a}function ot(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,i,o=e===ro,a=t===ro,s=at(e.data.directives,e.context),c=at(t.data.directives,t.context),l=[],u=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,st(i,"update",t,e),i.def&&i.def.componentUpdated&&u.push(i)):(st(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var f=function(){for(var n=0;n<l.length;n++)st(l[n],"inserted",t,e)};o?re(t,"insert",f):f()}u.length&&re(t,"postpatch",function(){for(var n=0;n<u.length;n++)st(u[n],"componentUpdated",t,e)});if(!o)for(n in s)c[n]||st(s[n],"unbind",e,e,a)}(e,t)}function at(e,t){var n=Object.create(null);if(!e)return n;var r,i;for(r=0;r<e.length;r++)(i=e[r]).modifiers||(i.modifiers=ao),n[function(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}(i)]=i,i.def=z(t.$options,"directives",i.name,!0);return n}function st(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(r){W(r,n.context,"directive "+e.name+" "+t+" hook")}}function ct(e,r){var i=r.componentOptions;if(!(n(i)&&!1===i.Ctor.options.inheritAttrs||t(e.data.attrs)&&t(r.data.attrs))){var o,a,s=r.elm,c=e.data.attrs||{},l=r.data.attrs||{};n(l.__ob__)&&(l=r.data.attrs=g({},l));for(o in l)a=l[o],c[o]!==a&&lt(s,o,a);(ur||dr)&&l.value!==c.value&&lt(s,"value",l.value);for(o in c)t(l[o])&&(Ji(o)?s.removeAttributeNS(qi,Ki(o)):Vi(o)||s.removeAttribute(o))}}function lt(e,t,n){if(zi(t))Wi(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n));else if(Vi(t))e.setAttribute(t,Wi(n)||"false"===n?"false":"true");else if(Ji(t))Wi(n)?e.removeAttributeNS(qi,Ki(t)):e.setAttributeNS(qi,t,n);else if(Wi(n))e.removeAttribute(t);else{if(ur&&!fr&&"TEXTAREA"===e.tagName&&"placeholder"===t&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}function ut(e,r){var i=r.elm,o=r.data,a=e.data;if(!(t(o.staticClass)&&t(o.class)&&(t(a)||t(a.staticClass)&&t(a.class)))){var s=Ye(r),c=i._transitionClasses;n(c)&&(s=Xe(s,Qe(c))),s!==i._prevClass&&(i.setAttribute("class",s),i._prevClass=s)}}function ft(e){function t(){(a||(a=[])).push(e.slice(v,i).trim()),v=i+1}var n,r,i,o,a,s=!1,c=!1,l=!1,u=!1,f=0,d=0,p=0,v=0;for(i=0;i<e.length;i++)if(r=n,n=e.charCodeAt(i),s)39===n&&92!==r&&(s=!1);else if(c)34===n&&92!==r&&(c=!1);else if(l)96===n&&92!==r&&(l=!1);else if(u)47===n&&92!==r&&(u=!1);else if(124!==n||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||f||d||p){switch(n){case 34:c=!0;break;case 39:s=!0;break;case 96:l=!0;break;case 40:p++;break;case 41:p--;break;case 91:d++;break;case 93:d--;break;case 123:f++;break;case 125:f--}if(47===n){for(var h=i-1,m=void 0;h>=0&&" "===(m=e.charAt(h));h--);m&&uo.test(m)||(u=!0)}}else void 0===o?(v=i+1,o=e.slice(0,i).trim()):t();if(void 0===o?o=e.slice(0,i).trim():0!==v&&t(),a)for(i=0;i<a.length;i++)o=function(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+","+i}(o,a[i]);return o}function dt(e){}function pt(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function vt(e,t,n){(e.props||(e.props=[])).push({name:t,value:n}),e.plain=!1}function ht(e,t,n){(e.attrs||(e.attrs=[])).push({name:t,value:n}),e.plain=!1}function mt(e,t,n){e.attrsMap[t]=n,e.attrsList.push({name:t,value:n})}function yt(e,t,n,r,i,o){(e.directives||(e.directives=[])).push({name:t,rawName:n,value:r,arg:i,modifiers:o}),e.plain=!1}function gt(e,t,n,r,i,o){r=r||Bn,o&&r.prevent&&r.passive&&o("passive and prevent can't be used together. Passive handler can't prevent default event."),r.capture&&(delete r.capture,t="!"+t),r.once&&(delete r.once,t="~"+t),r.passive&&(delete r.passive,t="&"+t),"click"===t&&(r.right?(t="contextmenu",delete r.right):r.middle&&(t="mouseup"));var a;r.native?(delete r.native,a=e.nativeEvents||(e.nativeEvents={})):a=e.events||(e.events={});var s={value:n};r!==Bn&&(s.modifiers=r);var c=a[t];Array.isArray(c)?i?c.unshift(s):c.push(s):a[t]=c?i?[s,c]:[c,s]:s,e.plain=!1}function _t(e,t,n){var r=bt(e,":"+t)||bt(e,"v-bind:"+t);if(null!=r)return ft(r);if(!1!==n){var i=bt(e,t);if(null!=i)return JSON.stringify(i)}}function bt(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===t){i.splice(o,1);break}return n&&delete e.attrsMap[t],r}function wt(e,t,n){var r=n||{},i="$$v";r.trim&&(i="(typeof $$v === 'string'? $$v.trim(): $$v)"),r.number&&(i="_n("+i+")");var o=$t(t,i);e.model={value:"("+t+")",expression:'"'+t+'"',callback:"function ($$v) {"+o+"}"}}function $t(e,t){var n=function(e){if(Ei=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Ei-1)return(Ni=e.lastIndexOf("."))>-1?{exp:e.slice(0,Ni),key:'"'+e.slice(Ni+1)+'"'}:{exp:e,key:null};Ii=e,Ni=Li=Pi=0;for(;!Ct();)kt(Mi=xt())?At(Mi):91===Mi&&function(e){var t=1;Li=Ni;for(;!Ct();)if(e=xt(),kt(e))At(e);else if(91===e&&t++,93===e&&t--,0===t){Pi=Ni;break}}(Mi);return{exp:e.slice(0,Li),key:e.slice(Li+1,Pi)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function xt(){return Ii.charCodeAt(++Ni)}function Ct(){return Ni>=Ei}function kt(e){return 34===e||39===e}function At(e){for(var t=e;!Ct()&&(e=xt())!==t;);}function Ot(e,t,n,r,i){t=function(e){return e._withTask||(e._withTask=function(){Kr=!0;var t=e.apply(null,arguments);return Kr=!1,t})}(t),n&&(t=function(e,t,n){var r=Fi;return function i(){null!==e.apply(null,arguments)&&St(t,i,n,r)}}(t,e,r)),Fi.addEventListener(e,t,mr?{capture:r,passive:i}:r)}function St(e,t,n,r){(r||Fi).removeEventListener(e,t._withTask||t,n)}function Tt(e,r){if(!t(e.data.on)||!t(r.data.on)){var i=r.data.on||{},o=e.data.on||{};Fi=r.elm,function(e){if(n(e[fo])){var t=ur?"change":"input";e[t]=[].concat(e[fo],e[t]||[]),delete e[fo]}n(e[po])&&(e.change=[].concat(e[po],e.change||[]),delete e[po])}(i),ne(i,o,Ot,St,r.context),Fi=void 0}}function jt(e,r){if(!t(e.data.domProps)||!t(r.data.domProps)){var i,o,a=r.elm,s=e.data.domProps||{},c=r.data.domProps||{};n(c.__ob__)&&(c=r.data.domProps=g({},c));for(i in s)t(c[i])&&(a[i]="");for(i in c){if(o=c[i],"textContent"===i||"innerHTML"===i){if(r.children&&(r.children.length=0),o===s[i])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===i){a._value=o;var l=t(o)?"":String(o);(function(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var r=e.value,i=e._vModifiers;if(n(i)){if(i.lazy)return!1;if(i.number)return f(r)!==f(t);if(i.trim)return r.trim()!==t.trim()}return r!==t}(e,t))})(a,l)&&(a.value=l)}else a[i]=o}}}function Et(e){var t=It(e.style);return e.staticStyle?g(e.staticStyle,t):t}function It(e){return Array.isArray(e)?_(e):"string"==typeof e?mo(e):e}function Mt(e,r){var i=r.data,o=e.data;if(!(t(i.staticStyle)&&t(i.style)&&t(o.staticStyle)&&t(o.style))){var a,s,c=r.elm,l=o.staticStyle,u=o.normalizedStyle||o.style||{},f=l||u,d=It(r.data.style)||{};r.data.normalizedStyle=n(d.__ob__)?g({},d):d;var p=function(e,t){var n,r={};if(t)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=Et(i.data))&&g(r,n);(n=Et(e.data))&&g(r,n);for(var o=e;o=o.parent;)o.data&&(n=Et(o.data))&&g(r,n);return r}(r,!0);for(s in f)t(p[s])&&_o(c,s,"");for(s in p)(a=p[s])!==f[s]&&_o(c,s,null==a?"":a)}}function Nt(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Lt(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Pt(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&g(t,xo(e.name||"v")),g(t,e),t}return"string"==typeof e?xo(e):void 0}}function Dt(e){Eo(function(){Eo(e)})}function Ft(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Nt(e,t))}function Rt(e,t){e._transitionClasses&&p(e._transitionClasses,t),Lt(e,t)}function Ut(e,t,n){var r=Ht(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===ko?So:jo,c=0,l=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++c>=a&&l()};setTimeout(function(){c<a&&l()},o+1),e.addEventListener(s,u)}function Ht(e,t){var n,r=window.getComputedStyle(e),i=r[Oo+"Delay"].split(", "),o=r[Oo+"Duration"].split(", "),a=Bt(i,o),s=r[To+"Delay"].split(", "),c=r[To+"Duration"].split(", "),l=Bt(s,c),u=0,f=0;t===ko?a>0&&(n=ko,u=a,f=o.length):t===Ao?l>0&&(n=Ao,u=l,f=c.length):f=(n=(u=Math.max(a,l))>0?a>l?ko:Ao:null)?n===ko?o.length:c.length:0;return{type:n,timeout:u,propCount:f,hasTransform:n===ko&&Io.test(r[Oo+"Property"])}}function Bt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return Vt(t)+Vt(e[n])}))}function Vt(e){return 1e3*Number(e.slice(0,-1))}function zt(e,r){var i=e.elm;n(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var a=Pt(e.data.transition);if(!t(a)&&!n(i._enterCb)&&1===i.nodeType){for(var s=a.css,c=a.type,l=a.enterClass,u=a.enterToClass,d=a.enterActiveClass,p=a.appearClass,v=a.appearToClass,h=a.appearActiveClass,m=a.beforeEnter,y=a.enter,g=a.afterEnter,_=a.enterCancelled,b=a.beforeAppear,w=a.appear,$=a.afterAppear,C=a.appearCancelled,k=a.duration,A=ui,O=ui.$vnode;O&&O.parent;)A=(O=O.parent).context;var S=!A._isMounted||!e.isRootInsert;if(!S||w||""===w){var T=S&&p?p:l,j=S&&h?h:d,E=S&&v?v:u,I=S?b||m:m,M=S&&"function"==typeof w?w:y,N=S?$||g:g,L=S?C||_:_,P=f(o(k)?k.enter:k);null!=P&&Jt(P,"enter",e);var D=!1!==s&&!fr,F=Wt(M),R=i._enterCb=x(function(){D&&(Rt(i,E),Rt(i,j)),R.cancelled?(D&&Rt(i,T),L&&L(i)):N&&N(i),i._enterCb=null});e.data.show||re(e,"insert",function(){var t=i.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),M&&M(i,R)}),I&&I(i),D&&(Ft(i,T),Ft(i,j),Dt(function(){Ft(i,E),Rt(i,T),R.cancelled||F||(Kt(P)?setTimeout(R,P):Ut(i,c,R))})),e.data.show&&(r&&r(),M&&M(i,R)),D||F||R()}}}function qt(e,r){function i(){C.cancelled||(e.data.show||((a.parentNode._pending||(a.parentNode._pending={}))[e.key]=e),v&&v(a),b&&(Ft(a,u),Ft(a,p),Dt(function(){Ft(a,d),Rt(a,u),C.cancelled||w||(Kt($)?setTimeout(C,$):Ut(a,l,C))})),h&&h(a,C),b||w||C())}var a=e.elm;n(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var s=Pt(e.data.transition);if(t(s)||1!==a.nodeType)return r();if(!n(a._leaveCb)){var c=s.css,l=s.type,u=s.leaveClass,d=s.leaveToClass,p=s.leaveActiveClass,v=s.beforeLeave,h=s.leave,m=s.afterLeave,y=s.leaveCancelled,g=s.delayLeave,_=s.duration,b=!1!==c&&!fr,w=Wt(h),$=f(o(_)?_.leave:_);n($)&&Jt($,"leave",e);var C=a._leaveCb=x(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[e.key]=null),b&&(Rt(a,d),Rt(a,p)),C.cancelled?(b&&Rt(a,u),y&&y(a)):(r(),m&&m(a)),a._leaveCb=null});g?g(i):i()}}function Jt(e,t,n){"number"!=typeof e?xr("<transition> explicit "+t+" duration is not a valid number - got "+JSON.stringify(e)+".",n.context):isNaN(e)&&xr("<transition> explicit "+t+" duration is NaN - the duration expression might be incorrect.",n.context)}function Kt(e){return"number"==typeof e&&!isNaN(e)}function Wt(e){if(t(e))return!1;var r=e.fns;return n(r)?Wt(Array.isArray(r)?r[0]:r):(e._length||e.length)>1}function Gt(e,t){!0!==t.data.show&&zt(t)}function Yt(e,t,n){Zt(e,t,n),(ur||dr)&&setTimeout(function(){Zt(e,t,n)},0)}function Zt(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=$(r,Qt(a))>-1,a.selected!==o&&(a.selected=o);else if(w(Qt(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}else xr('<select multiple v-model="'+t.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(r).slice(8,-1),n)}function Xt(e,t){return t.every(function(t){return!w(t,e)})}function Qt(e){return"_value"in e?e._value:e.value}function en(e){e.target.composing=!0}function tn(e){e.target.composing&&(e.target.composing=!1,nn(e.target,"input"))}function nn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function rn(e){return!e.componentInstance||e.data&&e.data.transition?e:rn(e.componentInstance._vnode)}function on(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?on(le(t.children)):e}function an(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[Wn(o)]=i[o];return t}function sn(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function cn(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ln(e){e.data.newPos=e.elm.getBoundingClientRect()}function un(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function fn(e,t){var n=t?Vo(t):Ho;if(n.test(e)){for(var r,i,o,a=[],s=[],c=n.lastIndex=0;r=n.exec(e);){(i=r.index)>c&&(s.push(o=e.slice(c,i)),a.push(JSON.stringify(o)));var l=ft(r[1].trim());a.push("_s("+l+")"),s.push({"@binding":l}),c=i+r[0].length}return c<e.length&&(s.push(o=e.slice(c)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}function dn(e,t){var n=t?wa:ba;return e.replace(n,function(e){return _a[e]})}function pn(e,t){function n(t){u+=t,e=e.substring(t)}function r(e,n,r){var i,s;if(null==n&&(n=u),null==r&&(r=u),e&&(s=e.toLowerCase()),e)for(i=a.length-1;i>=0&&a[i].lowerCasedTag!==s;i--);else i=0;if(i>=0){for(var c=a.length-1;c>=i;c--)(c>i||!e)&&t.warn&&t.warn("tag <"+a[c].tag+"> has no matching end tag."),t.end&&t.end(a[c].tag,n,r);a.length=i,o=i&&a[i-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,r):"p"===s&&(t.start&&t.start(e,[],!1,n,r),t.end&&t.end(e,n,r))}for(var i,o,a=[],s=t.expectHTML,c=t.isUnaryTag||Xn,l=t.canBeLeftOpenTag||Xn,u=0;e;){if(i=e,o&&ya(o)){var f=0,d=o.toLowerCase(),p=ga[d]||(ga[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i")),v=e.replace(p,function(e,n,r){return f=r.length,ya(d)||"noscript"===d||(n=n.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),xa(d,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""});u+=e.length-v.length,e=v,r(d,u-f,u)}else{var h=e.indexOf("<");if(0===h){if(ra.test(e)){var m=e.indexOf("--\x3e");if(m>=0){t.shouldKeepComment&&t.comment(e.substring(4,m)),n(m+3);continue}}if(ia.test(e)){var y=e.indexOf("]>");if(y>=0){n(y+2);continue}}var g=e.match(na);if(g){n(g[0].length);continue}var _=e.match(ta);if(_){var b=u;n(_[0].length),r(_[1],b,u);continue}var w=function(){var t=e.match(Qo);if(t){var r={tagName:t[1],attrs:[],start:u};n(t[0].length);for(var i,o;!(i=e.match(ea))&&(o=e.match(Yo));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=u,r}}();if(w){!function(e){var n=e.tagName,i=e.unarySlash;s&&("p"===o&&Go(n)&&r(o),l(n)&&o===n&&r(n));for(var u=c(n)||!!i,f=e.attrs.length,d=new Array(f),p=0;p<f;p++){var v=e.attrs[p];oa&&-1===v[0].indexOf('""')&&(""===v[3]&&delete v[3],""===v[4]&&delete v[4],""===v[5]&&delete v[5]);var h=v[3]||v[4]||v[5]||"",m="a"===n&&"href"===v[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;d[p]={name:v[1],value:dn(h,m)}}u||(a.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d}),o=n),t.start&&t.start(n,d,u,e.start,e.end)}(w),xa(o,e)&&n(1);continue}}var $=void 0,x=void 0,C=void 0;if(h>=0){for(x=e.slice(h);!(ta.test(x)||Qo.test(x)||ra.test(x)||ia.test(x)||(C=x.indexOf("<",1))<0);)h+=C,x=e.slice(h);$=e.substring(0,h),n(h)}h<0&&($=e,e=""),t.chars&&$&&t.chars($)}if(e===i){t.chars&&t.chars(e),!a.length&&t.warn&&t.warn('Mal-formatted tag at end of template: "'+e+'"');break}}r()}function vn(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:function(e){for(var t={},n=0,r=e.length;n<r;n++)!t[e[n].name]||ur||dr||aa("duplicate attribute: "+e[n].name),t[e[n].name]=e[n].value;return t}(t),parent:n,children:[]}}function hn(e,t){function n(e){u||(u=!0,aa(e))}function r(e){e.pre&&(c=!1),fa(e.tag)&&(l=!1);for(var n=0;n<ua.length;n++)ua[n](e,t)}aa=t.warn||dt,fa=t.isPreTag||Xn,da=t.mustUseProp||Xn,pa=t.getTagNamespace||Xn,ca=pt(t.modules,"transformNode"),la=pt(t.modules,"preTransformNode"),ua=pt(t.modules,"postTransformNode"),sa=t.delimiters;var i,o,a=[],s=!1!==t.preserveWhitespace,c=!1,l=!1,u=!1;return pn(e,{warn:aa,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,start:function(e,s,u){function f(e){"slot"!==e.tag&&"template"!==e.tag||n("Cannot use <"+e.tag+"> as component root element because it may contain multiple nodes."),e.attrsMap.hasOwnProperty("v-for")&&n("Cannot use v-for on stateful component root element because it renders multiple elements.")}var d=o&&o.ns||pa(e);ur&&"svg"===d&&(s=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Ma.test(r.name)||(r.name=r.name.replace(Na,""),t.push(r))}return t}(s));var p=vn(e,s,o);d&&(p.ns=d),function(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}(p)&&!br()&&(p.forbidden=!0,aa("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+e+">, as they will not be parsed."));for(var v=0;v<la.length;v++)p=la[v](p,t)||p;if(c||(!function(e){null!=bt(e,"v-pre")&&(e.pre=!0)}(p),p.pre&&(c=!0)),fa(p.tag)&&(l=!0),c?function(e){var t=e.attrsList.length;if(t)for(var n=e.attrs=new Array(t),r=0;r<t;r++)n[r]={name:e.attrsList[r].name,value:JSON.stringify(e.attrsList[r].value)};else e.pre||(e.plain=!0)}(p):p.processed||(yn(p),function(e){var t=bt(e,"v-if");if(t)e.if=t,gn(e,{exp:t,block:e});else{null!=bt(e,"v-else")&&(e.else=!0);var n=bt(e,"v-else-if");n&&(e.elseif=n)}}(p),function(e){null!=bt(e,"v-once")&&(e.once=!0)}(p),mn(p,t)),i?a.length||(i.if&&(p.elseif||p.else)?(f(p),gn(i,{exp:p.elseif,block:p})):n("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.")):f(i=p),o&&!p.forbidden)if(p.elseif||p.else)!function(e,t){var n=function(e){var t=e.length;for(;t--;){if(1===e[t].type)return e[t];" "!==e[t].text&&aa('text "'+e[t].text.trim()+'" between v-if and v-else(-if) will be ignored.'),e.pop()}}(t.children);n&&n.if?gn(n,{exp:e.elseif,block:e}):aa("v-"+(e.elseif?'else-if="'+e.elseif+'"':"else")+" used on element <"+e.tag+"> without corresponding v-if.")}(p,o);else if(p.slotScope){o.plain=!1;var h=p.slotTarget||'"default"';(o.scopedSlots||(o.scopedSlots={}))[h]=p}else o.children.push(p),p.parent=o;u?r(p):(o=p,a.push(p))},end:function(){var e=a[a.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&!l&&e.children.pop(),a.length-=1,o=a[a.length-1],r(e)},chars:function(t){if(o){if(!ur||"textarea"!==o.tag||o.attrsMap.placeholder!==t){var r=o.children;if(t=l||t.trim()?function(e){return"script"===e.tag||"style"===e.tag}(o)?t:Ia(t):s&&r.length?" ":""){var i;!c&&" "!==t&&(i=fn(t,sa))?r.push({type:2,expression:i.expression,tokens:i.tokens,text:t}):" "===t&&r.length&&" "===r[r.length-1].text||r.push({type:3,text:t})}}}else t===e?n("Component template requires a root element, rather than just text."):(t=t.trim())&&n('text "'+t+'" outside root element will be ignored.')},comment:function(e){o.children.push({type:3,text:e,isComment:!0})}}),i}function mn(e,t){!function(e){var t=_t(e,"key");t&&("template"===e.tag&&aa("<template> cannot be keyed. Place the key on real elements instead."),e.key=t)}(e),e.plain=!e.key&&!e.attrsList.length,function(e){var t=_t(e,"ref");t&&(e.ref=t,e.refInFor=function(e){var t=e;for(;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){if("slot"===e.tag)e.slotName=_t(e,"name"),e.key&&aa("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.");else{var t;"template"===e.tag?((t=bt(e,"scope"))&&aa('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',!0),e.slotScope=t||bt(e,"slot-scope")):(t=bt(e,"slot-scope"))&&(e.attrsMap["v-for"]&&aa("Ambiguous combined usage of slot-scope and v-for on <"+e.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",!0),e.slotScope=t);var n=_t(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n,"template"===e.tag||e.slotScope||ht(e,"slot",n))}}(e),function(e){var t;(t=_t(e,"is"))&&(e.component=t);null!=bt(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var n=0;n<ca.length;n++)e=ca[n](e,t)||e;!function(e){var t,n,r,i,o,a,s,c=e.attrsList;for(t=0,n=c.length;t<n;t++)if(r=i=c[t].name,o=c[t].value,ka.test(r))if(e.hasBindings=!0,(a=function(e){var t=e.match(Ea);if(t){var n={};return t.forEach(function(e){n[e.slice(1)]=!0}),n}}(r))&&(r=r.replace(Ea,"")),ja.test(r))r=r.replace(ja,""),o=ft(o),s=!1,a&&(a.prop&&(s=!0,"innerHtml"===(r=Wn(r))&&(r="innerHTML")),a.camel&&(r=Wn(r)),a.sync&&gt(e,"update:"+Wn(r),$t(o,"$event"))),s||!e.component&&da(e.tag,e.attrsMap.type,r)?vt(e,r,o):ht(e,r,o);else if(Ca.test(r))r=r.replace(Ca,""),gt(e,r,o,a,!1,aa);else{var l=(r=r.replace(ka,"")).match(Ta),u=l&&l[1];u&&(r=r.slice(0,-(u.length+1))),yt(e,r,i,o,u,a),"model"===r&&function(e,t){var n=e;for(;n;)n.for&&n.alias===t&&aa("<"+e.tag+' v-model="'+t+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.'),n=n.parent}(e,o)}else{var f=fn(o,sa);f&&aa(r+'="'+o+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.'),ht(e,r,JSON.stringify(o)),!e.component&&"muted"===r&&da(e.tag,e.attrsMap.type,r)&&vt(e,r,"true")}}(e)}function yn(e){var t;if(t=bt(e,"v-for")){var n=function(e){var t=e.match(Aa);if(!t)return;var n={};n.for=t[2].trim();var r=t[1].trim().replace(Sa,""),i=r.match(Oa);i?(n.alias=r.replace(Oa,""),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(t);n?g(e,n):aa("Invalid v-for expression: "+t)}}function gn(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function _n(e){return vn(e.tag,e.attrsList.slice(),e.parent)}function bn(e){if(e.static=function(e){if(2===e.type)return!1;if(3===e.type)return!0;return!(!e.pre&&(e.hasBindings||e.if||e.for||zn(e.tag)||!ha(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(va)))}(e),1===e.type){if(!ha(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];bn(r),r.static||(e.static=!1)}if(e.ifConditions)for(var i=1,o=e.ifConditions.length;i<o;i++){var a=e.ifConditions[i].block;bn(a),a.static||(e.static=!1)}}}function wn(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)wn(e.children[n],t||!!e.for);if(e.ifConditions)for(var i=1,o=e.ifConditions.length;i<o;i++)wn(e.ifConditions[i].block,t)}}function $n(e,t,n){var r=t?"nativeOn:{":"on:{";for(var i in e)r+='"'+i+'":'+xn(i,e[i])+",";return r.slice(0,-1)+"}"}function xn(e,t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return xn(e,t)}).join(",")+"]";var n=Ra.test(t.value),r=Fa.test(t.value);if(t.modifiers){var i="",o="",a=[];for(var s in t.modifiers)if(Ba[s])o+=Ba[s],Ua[s]&&a.push(s);else if("exact"===s){var c=t.modifiers;o+=Ha(["ctrl","shift","alt","meta"].filter(function(e){return!c[e]}).map(function(e){return"$event."+e+"Key"}).join("||"))}else a.push(s);a.length&&(i+=function(e){return"if(!('button' in $event)&&"+e.map(Cn).join("&&")+")return null;"}(a)),o&&(i+=o);return"function($event){"+i+(n?t.value+"($event)":r?"("+t.value+")($event)":t.value)+"}"}return n||r?t.value:"function($event){"+t.value+"}"}function Cn(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=Ua[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key)"}function kn(e,t){var n=new za(t);return{render:"with(this){return "+(e?An(e,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function An(e,t){if(e.staticRoot&&!e.staticProcessed)return On(e,t);if(e.once&&!e.onceProcessed)return Sn(e,t);if(e.for&&!e.forProcessed)return function(e,t,n,r){var i=e.for,o=e.alias,a=e.iterator1?","+e.iterator1:"",s=e.iterator2?","+e.iterator2:"";t.maybeComponent(e)&&"slot"!==e.tag&&"template"!==e.tag&&!e.key&&t.warn("<"+e.tag+' v-for="'+o+" in "+i+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',!0);return e.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||An)(e,t)+"})"}(e,t);if(e.if&&!e.ifProcessed)return Tn(e,t);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=Mn(e,t),i="_t("+n+(r?","+r:""),o=e.attrs&&"{"+e.attrs.map(function(e){return Wn(e.name)+":"+e.value}).join(",")+"}",a=e.attrsMap["v-bind"];!o&&!a||r||(i+=",null");o&&(i+=","+o);a&&(i+=(o?"":",null")+","+a);return i+")"}(e,t);var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:Mn(t,n,!0);return"_c("+e+","+En(t,n)+(r?","+r:"")+")"}(e.component,e,t);else{var r=e.plain?void 0:En(e,t),i=e.inlineTemplate?null:Mn(e,t,!0);n="_c('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<t.transforms.length;o++)n=t.transforms[o](e,n);return n}return Mn(e,t)||"void 0"}function On(e,t){return e.staticProcessed=!0,t.staticRenderFns.push("with(this){return "+An(e,t)+"}"),"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Sn(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Tn(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+An(e,t)+","+t.onceId+++","+n+")":(t.warn("v-once can only be used inside v-for that is keyed. "),An(e,t))}return On(e,t)}function Tn(e,t,n,r){return e.ifProcessed=!0,jn(e.ifConditions.slice(),t,n,r)}function jn(e,t,n,r){function i(e){return n?n(e,t):e.once?Sn(e,t):An(e,t)}if(!e.length)return r||"_e()";var o=e.shift();return o.exp?"("+o.exp+")?"+i(o.block)+":"+jn(e,t,n,r):""+i(o.block)}function En(e,t){var n="{",r=function(e,t){var n=e.directives;if(!n)return;var r,i,o,a,s="directives:[",c=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var l=t.directives[o.name];l&&(a=!!l(e,o,t.warn)),a&&(c=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?',arg:"'+o.arg+'"':"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(c)return s.slice(0,-1)+"]"}(e,t);r&&(n+=r+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:{"+Ln(e.attrs)+"},"),e.props&&(n+="domProps:{"+Ln(e.props)+"},"),e.events&&(n+=$n(e.events,!1,t.warn)+","),e.nativeEvents&&(n+=$n(e.nativeEvents,!0,t.warn)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t){return"scopedSlots:_u(["+Object.keys(e).map(function(n){return In(n,e[n],t)}).join(",")+"])"}(e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var o=function(e,t){var n=e.children[0];1===e.children.length&&1===n.type||t.warn("Inline-template components must have exactly one child element.");if(1===n.type){var r=kn(n,t.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}(e,t);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function In(e,t,n){if(t.for&&!t.forProcessed)return function(e,t,n){var r=t.for,i=t.alias,o=t.iterator1?","+t.iterator1:"",a=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,"_l(("+r+"),function("+i+o+a+"){return "+In(e,t,n)+"})"}(e,t,n);return"{key:"+e+",fn:"+("function("+String(t.slotScope)+"){return "+("template"===t.tag?t.if?t.if+"?"+(Mn(t,n)||"undefined")+":undefined":Mn(t,n)||"undefined":An(t,n))+"}")+"}"}function Mn(e,t,n,r,i){var o=e.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag)return(r||An)(a,t);var s=n?function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(Nn(i)||i.ifConditions&&i.ifConditions.some(function(e){return Nn(e.block)})){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some(function(e){return t(e.block)}))&&(n=1)}}return n}(o,t.maybeComponent):0,c=i||function(e,t){if(1===e.type)return An(e,t);return 3===e.type&&e.isComment?function(e){return"_e("+JSON.stringify(e.text)+")"}(e):function(e){return"_v("+(2===e.type?e.expression:Pn(JSON.stringify(e.text)))+")"}(e)};return"["+o.map(function(e){return c(e,t)}).join(",")+"]"+(s?","+s:"")}}function Nn(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Ln(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+='"'+r.name+'":'+Pn(r.value)+","}return t.slice(0,-1)}function Pn(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Dn(e,t){if(1===e.type){for(var n in e.attrsMap)if(ka.test(n)){var r=e.attrsMap[n];r&&("v-for"===n?function(e,t,n){Rn(e.for||"",t,n),Fn(e.alias,"v-for alias",t,n),Fn(e.iterator1,"v-for iterator",t,n),Fn(e.iterator2,"v-for iterator",t,n)}(e,'v-for="'+r+'"',t):Ca.test(n)?function(e,t,n){var r=e.replace(Ka,""),i=r.match(Ja);i&&"$"!==r.charAt(i.index-1)&&n.push('avoid using JavaScript unary operator as property name: "'+i[0]+'" in expression '+t.trim());Rn(e,t,n)}(r,n+'="'+r+'"',t):Rn(r,n+'="'+r+'"',t))}if(e.children)for(var i=0;i<e.children.length;i++)Dn(e.children[i],t)}else 2===e.type&&Rn(e.expression,e.text,t)}function Fn(e,t,n,r){if("string"==typeof e)try{new Function("var "+e+"=_")}catch(i){r.push("invalid "+t+' "'+e+'" in expression: '+n.trim())}}function Rn(e,t,n){try{new Function("return "+e)}catch(i){var r=e.replace(Ka,"").match(qa);r?n.push('avoid using JavaScript keyword as property name: "'+r[0]+'"\n  Raw expression: '+t.trim()):n.push("invalid expression: "+i.message+" in\n\n    "+e+"\n\n  Raw expression: "+t.trim()+"\n")}}function Un(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),b}}function Hn(e){return ma=ma||document.createElement("div"),ma.innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',ma.innerHTML.indexOf("&#10;")>0}var Bn=Object.freeze({}),Vn=Object.prototype.toString,zn=d("slot,component",!0),qn=d("key,ref,slot,slot-scope,is"),Jn=Object.prototype.hasOwnProperty,Kn=/-(\w)/g,Wn=h(function(e){return e.replace(Kn,function(e,t){return t?t.toUpperCase():""})}),Gn=h(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),Yn=/\B([A-Z])/g,Zn=h(function(e){return e.replace(Yn,"-$1").toLowerCase()}),Xn=function(e,t,n){return!1},Qn=function(e){return e},er="data-server-rendered",tr=["component","directive","filter"],nr=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],rr={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Xn,isReservedAttr:Xn,isUnknownElement:Xn,getTagNamespace:b,parsePlatformTagName:Qn,mustUseProp:Xn,_lifecycleHooks:nr},ir=/[^\w.$]/,or="__proto__"in{},ar="undefined"!=typeof window,sr="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,cr=sr&&WXEnvironment.platform.toLowerCase(),lr=ar&&window.navigator.userAgent.toLowerCase(),ur=lr&&/msie|trident/.test(lr),fr=lr&&lr.indexOf("msie 9.0")>0,dr=lr&&lr.indexOf("edge/")>0,pr=lr&&lr.indexOf("android")>0||"android"===cr,vr=lr&&/iphone|ipad|ipod|ios/.test(lr)||"ios"===cr,hr=(lr&&/chrome\/\d+/.test(lr),{}.watch),mr=!1;if(ar)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){mr=!0}}),window.addEventListener("test-passive",null,yr)}catch(e){}var gr,_r,br=function(){return void 0===gr&&(gr=!ar&&void 0!==e&&"server"===e.process.env.VUE_ENV),gr},wr=ar&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,$r="undefined"!=typeof Symbol&&A(Symbol)&&"undefined"!=typeof Reflect&&A(Reflect.ownKeys);_r="undefined"!=typeof Set&&A(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var xr=b,Cr=b,kr=b,Ar=b,Or="undefined"!=typeof console,Sr=/(?:^|[-_])(\w)/g;xr=function(e,t){var n=t?kr(t):"";rr.warnHandler?rr.warnHandler.call(null,e,t,n):Or&&rr.silent},Cr=function(e,t){Or&&rr.silent},Ar=function(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},r=n.name||n._componentTag,i=n.__file;if(!r&&i){var o=i.match(/([^/\\]+)\.vue$/);r=o&&o[1]}return(r?"<"+function(e){return e.replace(Sr,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")}(r)+">":"<Anonymous>")+(i&&!1!==t?" at "+i:"")};kr=function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,t){return""+(0===t?"---\x3e ":function(e,t){for(var n="";t;)t%2==1&&(n+=e),t>1&&(e+=e),t>>=1;return n}(" ",5+2*t))+(Array.isArray(e)?Ar(e[0])+"... ("+e[1]+" recursive calls)":Ar(e))}).join("\n")}return"\n\n(found in "+Ar(e)+")"};var Tr=0,jr=function(){this.id=Tr++,this.subs=[]};jr.prototype.addSub=function(e){this.subs.push(e)},jr.prototype.removeSub=function(e){p(this.subs,e)},jr.prototype.depend=function(){jr.target&&jr.target.addDep(this)},jr.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},jr.target=null;var Er=[],Ir=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Mr={child:{configurable:!0}};Mr.child.get=function(){return this.componentInstance},Object.defineProperties(Ir.prototype,Mr);var Nr=function(e){void 0===e&&(e="");var t=new Ir;return t.text=e,t.isComment=!0,t},Lr=Array.prototype,Pr=Object.create(Lr);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Lr[e];k(Pr,e,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var Dr=Object.getOwnPropertyNames(Pr),Fr={shouldConvert:!0},Rr=function(e){if(this.value=e,this.dep=new jr,this.vmCount=0,k(e,"__ob__",this),Array.isArray(e)){(or?j:E)(e,Pr,Dr),this.observeArray(e)}else this.walk(e)};Rr.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)M(e,t[n],e[t[n]])},Rr.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)I(e[t])};var Ur=rr.optionMergeStrategies;Ur.el=Ur.propsData=function(e,t,n,r){return n||xr('option "'+r+'" can only be used during instance creation with the `new` keyword.'),Vr(e,t)},Ur.data=function(e,t,n){return n?F(e,t,n):t&&"function"!=typeof t?(xr('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):F(e,t)},nr.forEach(function(e){Ur[e]=R}),tr.forEach(function(e){Ur[e+"s"]=U}),Ur.watch=function(e,t,n,r){if(e===hr&&(e=void 0),t===hr&&(t=void 0),!t)return Object.create(e||null);if(B(r,t,n),!e)return t;var i={};g(i,e);for(var o in t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ur.props=Ur.methods=Ur.inject=Ur.computed=function(e,t,n,r){if(t&&B(r,t,n),!e)return t;var i=Object.create(null);return g(i,e),t&&g(i,t),i},Ur.provide=F;var Hr,Br,Vr=function(e,t){return void 0===t?e:t},zr=/^(String|Number|Boolean|Function|Symbol)$/,qr=[],Jr=!1,Kr=!1;if("undefined"!=typeof setImmediate&&A(setImmediate))Br=function(){setImmediate(Z)};else if("undefined"==typeof MessageChannel||!A(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Br=function(){setTimeout(Z,0)};else{var Wr=new MessageChannel,Gr=Wr.port2;Wr.port1.onmessage=Z,Br=function(){Gr.postMessage(1)}}if("undefined"!=typeof Promise&&A(Promise)){var Yr=Promise.resolve();Hr=function(){Yr.then(Z),vr&&setTimeout(b)}}else Hr=Br;var Zr,Xr,Qr=ar&&window.performance;Qr&&Qr.mark&&Qr.measure&&Qr.clearMarks&&Qr.clearMeasures&&(Zr=function(e){return Qr.mark(e)},Xr=function(e,t,n){Qr.measure(e,t,n),Qr.clearMarks(t),Qr.clearMarks(n),Qr.clearMeasures(e)});var ei,ti=d("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),ni=function(e,t){xr('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',e)},ri="undefined"!=typeof Proxy&&Proxy.toString().match(/native code/);if(ri){var ii=d("stop,prevent,self,ctrl,shift,alt,meta,exact");rr.keyCodes=new Proxy(rr.keyCodes,{set:function(e,t,n){return ii(t)?(xr("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})}var oi={has:function(e,t){var n=t in e,r=ti(t)||"_"===t.charAt(0);return n||r||ni(e,t),n||!r}},ai={get:function(e,t){return"string"!=typeof t||t in e||ni(e,t),e[t]}};ei=function(e){if(ri){var t=e.$options,n=t.render&&t.render._withStripped?ai:oi;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var si,ci=new _r,li=h(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}),ui=null,fi=!1,di=100,pi=[],vi=[],hi={},mi={},yi=!1,gi=!1,_i=0,bi=0,wi=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++bi,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new _r,this.newDepIds=new _r,this.expression=t.toString(),"function"==typeof t?this.getter=t:(this.getter=function(e){if(!ir.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=function(){},xr('Failed watching path: "'+t+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()};wi.prototype.get=function(){!function(e){jr.target&&Er.push(jr.target),jr.target=e}(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;W(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Q(e),jr.target=Er.pop(),this.cleanupDeps()}return e},wi.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},wi.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},wi.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==hi[t]){if(hi[t]=!0,gi){for(var n=pi.length-1;n>_i&&pi[n].id>e.id;)n--;pi.splice(n+1,0,e)}else pi.push(e);yi||(yi=!0,X(be))}}(this)},wi.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||o(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){W(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},wi.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},wi.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},wi.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||p(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var $i={enumerable:!0,configurable:!0,get:b,set:b},xi={lazy:!0};De(Fe.prototype);var Ci={init:function(e,t,r,i){if(!e.componentInstance||e.componentInstance._isDestroyed){(e.componentInstance=function(e,t,r,i){var o={_isComponent:!0,parent:t,_parentVnode:e,_parentElm:r||null,_refElm:i||null},a=e.data.inlineTemplate;return n(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new e.componentOptions.Ctor(o)}(e,ui,r,i)).$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var o=e;Ci.prepatch(o,o)}},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,r,i){fi=!0;var o=!!(i||e.$options._renderChildren||r.data.scopedSlots||e.$scopedSlots!==Bn);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=i,e.$attrs=r.data&&r.data.attrs||Bn,e.$listeners=n||Bn,t&&e.$options.props){Fr.shouldConvert=!1;for(var a=e._props,s=e.$options._propKeys||[],c=0;c<s.length;c++){var l=s[c];a[l]=q(l,e.$options.props,t,e)}Fr.shouldConvert=!0,e.$options.propsData=t}if(n){var u=e.$options._parentListeners;e.$options._parentListeners=n,de(e,n,u)}o&&(e.$slots=pe(i,r.context),e.$forceUpdate()),fi=!1}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,_e(n,"mounted")),e.data.keepAlive&&(t._isMounted?function(e){e._inactive=!1,vi.push(e)}(n):ye(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?ge(t,!0):t.$destroy())}},ki=Object.keys(Ci),Ai=1,Oi=2,Si=0;!function(e){e.prototype._init=function(e){this._uid=Si++;var t,n;rr.performance&&Zr&&(t="vue-perf-start:"+this._uid,n="vue-perf-end:"+this._uid,Zr(t)),this._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r,n._parentElm=t._parentElm,n._refElm=t._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(this,e):this.$options=V(Ve(this.constructor),e||{},this),ei(this),this._self=this,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(this),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&de(e,t)}(this),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=pe(t._renderChildren,r),e.$scopedSlots=Bn,e._c=function(t,n,r,i){return He(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return He(e,t,n,r,i,!0)};var i=n&&n.data;M(e,"$attrs",i&&i.attrs||Bn,function(){!fi&&xr("$attrs is readonly.",e)},!0),M(e,"$listeners",t._parentListeners||Bn,function(){!fi&&xr("$listeners is readonly.",e)},!0)}(this),_e(this,"beforeCreate"),function(e){var t=Ae(e.$options.inject,e);t&&(Fr.shouldConvert=!1,Object.keys(t).forEach(function(n){M(e,n,t[n],function(){xr('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',e)})}),Fr.shouldConvert=!0)}(this),$e(this),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(this),_e(this,"created"),rr.performance&&Zr&&(this._name=Ar(this,!1),Zr(n),Xr("vue "+this._name+" init",t,n)),this.$options.el&&this.$mount(this.$options.el)}}(ze),function(e){var t={};t.get=function(){return this._data};var n={};n.get=function(){return this._props},t.set=function(e){xr("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){xr("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=N,e.prototype.$delete=L,e.prototype.$watch=function(e,t,n){if(s(t))return ke(this,e,t,n);(n=n||{}).user=!0;var r=new wi(this,e,t,n);return n.immediate&&t.call(this,r.value),function(){r.teardown()}}}(ze),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)this.$on(e[r],n);else(this._events[e]||(this._events[e]=[])).push(n),t.test(e)&&(this._hasHookEvent=!0);return this},e.prototype.$once=function(e,t){function n(){r.$off(e,n),t.apply(r,arguments)}var r=this;return n.fn=t,r.$on(e,n),r},e.prototype.$off=function(e,t){if(!arguments.length)return this._events=Object.create(null),this;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)this.$off(e[n],t);return this}var i=this._events[e];if(!i)return this;if(!t)return this._events[e]=null,this;if(t)for(var o,a=i.length;a--;)if((o=i[a])===t||o.fn===t){i.splice(a,1);break}return this},e.prototype.$emit=function(e){var t=e.toLowerCase();t!==e&&this._events[t]&&Cr('Event "'+t+'" is emitted in component '+Ar(this)+' but the handler is registered for "'+e+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+Zn(e)+'" instead of "'+e+'".');var n=this._events[e];if(n){n=n.length>1?y(n):n;for(var r=y(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(this,r)}catch(t){W(t,this,'event handler for "'+e+'"')}}return this}}(ze),function(e){e.prototype._update=function(e,t){this._isMounted&&_e(this,"beforeUpdate");var n=this.$el,r=this._vnode,i=ui;ui=this,this._vnode=e,r?this.$el=this.__patch__(r,e):(this.$el=this.__patch__(this.$el,e,t,!1,this.$options._parentElm,this.$options._refElm),this.$options._parentElm=this.$options._refElm=null),ui=i,n&&(n.__vue__=null),this.$el&&(this.$el.__vue__=this),this.$vnode&&this.$parent&&this.$vnode===this.$parent._vnode&&(this.$parent.$el=this.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){if(!this._isBeingDestroyed){_e(this,"beforeDestroy"),this._isBeingDestroyed=!0;var e=this.$parent;!e||e._isBeingDestroyed||this.$options.abstract||p(e.$children,this),this._watcher&&this._watcher.teardown();for(var t=this._watchers.length;t--;)this._watchers[t].teardown();this._data.__ob__&&this._data.__ob__.vmCount--,this._isDestroyed=!0,this.__patch__(this._vnode,null),_e(this,"destroyed"),this.$off(),this.$el&&(this.$el.__vue__=null),this.$vnode&&(this.$vnode.parent=null)}}}(ze),function(e){De(e.prototype),e.prototype.$nextTick=function(e){return X(e,this)},e.prototype._render=function(){var e=this.$options,t=e.render,n=e._parentVnode;if(this._isMounted)for(var r in this.$slots){var i=this.$slots[r];(i._rendered||i[0]&&i[0].elm)&&(this.$slots[r]=T(i,!0))}this.$scopedSlots=n&&n.data.scopedSlots||Bn,this.$vnode=n;var o;try{o=t.call(this._renderProxy,this.$createElement)}catch(e){if(W(e,this,"render"),this.$options.renderError)try{o=this.$options.renderError.call(this._renderProxy,this.$createElement,e)}catch(e){W(e,this,"renderError"),o=this._vnode}else o=this._vnode}return o instanceof Ir||(Array.isArray(o)&&xr("Multiple root nodes returned from render function. Render function should return a single root node.",this),o=Nr()),o.parent=n,o}}(ze);var Ti=[String,RegExp,Array],ji={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ti,exclude:Ti,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Ge(this.cache,e,this.keys)},watch:{include:function(e){We(this,function(t){return Ke(e,t)})},exclude:function(e){We(this,function(t){return!Ke(e,t)})}},render:function(){var e=this.$slots.default,t=le(e),n=t&&t.componentOptions;if(n){var r=Je(n),i=this.include,o=this.exclude;if(i&&(!r||!Ke(i,r))||o&&r&&Ke(o,r))return t;var a=this.cache,s=this.keys,c=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[c]?(t.componentInstance=a[c].componentInstance,p(s,c),s.push(c)):(a[c]=t,s.push(c),this.max&&s.length>parseInt(this.max)&&Ge(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={};t.get=function(){return rr},t.set=function(){xr("Do not replace the Vue.config object, set individual fields instead.")},Object.defineProperty(e,"config",t),e.util={warn:xr,extend:g,mergeOptions:V,defineReactive:M},e.set=N,e.delete=L,e.nextTick=X,e.options=Object.create(null),tr.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,g(e.options.components,ji),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=y(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=V(this.options,e),this}}(e),qe(e),function(e){tr.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&H(e),"component"===t&&s(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}(e)}(ze),Object.defineProperty(ze.prototype,"$isServer",{get:br}),Object.defineProperty(ze.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),ze.version="2.5.13";var Ei,Ii,Mi,Ni,Li,Pi,Di,Fi,Ri,Ui=d("style,class"),Hi=d("input,textarea,option,select,progress"),Bi=function(e,t,n){return"value"===n&&Hi(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Vi=d("contenteditable,draggable,spellcheck"),zi=d("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),qi="http://www.w3.org/1999/xlink",Ji=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ki=function(e){return Ji(e)?e.slice(6,e.length):""},Wi=function(e){return null==e||!1===e},Gi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Yi=d("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Zi=d("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Xi=function(e){return Yi(e)||Zi(e)},Qi=Object.create(null),eo=d("text,number,password,search,email,tel,url"),to=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(e,t){return document.createElementNS(Gi[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setAttribute:function(e,t,n){e.setAttribute(t,n)}}),no={create:function(e,t){nt(t)},update:function(e,t){e.data.ref!==t.data.ref&&(nt(e,!0),nt(t))},destroy:function(e){nt(e,!0)}},ro=new Ir("",{},[]),io=["create","activate","update","remove","destroy"],oo={create:ot,update:ot,destroy:function(e){ot(e,ro)}},ao=Object.create(null),so=[no,oo],co={create:ct,update:ct},lo={create:ut,update:ut},uo=/[\w).+\-_$\]]/,fo="__r",po="__c",vo={create:Tt,update:Tt},ho={create:jt,update:jt},mo=h(function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}),yo=/^--/,go=/\s*!important$/,_o=function(e,t,n){if(yo.test(t))e.style.setProperty(t,n);else if(go.test(n))e.style.setProperty(t,n.replace(go,""),"important");else{var r=wo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},bo=["Webkit","Moz","ms"],wo=h(function(e){if(Ri=Ri||document.createElement("div").style,"filter"!==(e=Wn(e))&&e in Ri)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<bo.length;n++){var r=bo[n]+t;if(r in Ri)return r}}),$o={create:Mt,update:Mt},xo=h(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),Co=ar&&!fr,ko="transition",Ao="animation",Oo="transition",So="transitionend",To="animation",jo="animationend";Co&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Oo="WebkitTransition",So="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(To="WebkitAnimation",jo="webkitAnimationEnd"));var Eo=ar?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()},Io=/\b(transform|all)(,|$)/,Mo=function(e){function o(e){var t=T.parentNode(e);n(t)&&T.removeChild(t,e)}function a(e,t){return!t&&!e.ns&&!(rr.ignoredElements.length&&rr.ignoredElements.some(function(t){return c(t)?t.test(e.tag):t===e.tag}))&&rr.isUnknownElement(e.tag)}function s(e,t,i,o,s){if(e.isRootInsert=!s,!function(e,t,i,o){var a=e.data;if(n(a)){var s=n(e.componentInstance)&&a.keepAlive;if(n(a=a.hook)&&n(a=a.init)&&a(e,!1,i,o),n(e.componentInstance))return l(e,t),r(s)&&function(e,t,r,i){for(var o,a=e;a.componentInstance;)if(a=a.componentInstance._vnode,n(o=a.data)&&n(o=o.transition)){for(o=0;o<O.activate.length;++o)O.activate[o](ro,a);t.push(a);break}u(r,e.elm,i)}(e,t,i,o),!0}}(e,t,i,o)){var c=e.data,d=e.children,p=e.tag;n(p)?(c&&c.pre&&j++,a(e,j)&&xr("Unknown custom element: <"+p+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?T.createElementNS(e.ns,p):T.createElement(p,e),h(e),f(e,d,t),n(c)&&v(e,t),u(i,e.elm,o),c&&c.pre&&j--):r(e.isComment)?(e.elm=T.createComment(e.text),u(i,e.elm,o)):(e.elm=T.createTextNode(e.text),u(i,e.elm,o))}}function l(e,t){n(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,p(e)?(v(e,t),h(e)):(nt(e),t.push(e))}function u(e,t,r){n(e)&&(n(r)?r.parentNode===e&&T.insertBefore(e,t,r):T.appendChild(e,t))}function f(e,t,n){if(Array.isArray(t)){w(t);for(var r=0;r<t.length;++r)s(t[r],n,e.elm,null,!0)}else i(e.text)&&T.appendChild(e.elm,T.createTextNode(String(e.text)))}function p(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return n(e.tag)}function v(e,t){for(var r=0;r<O.create.length;++r)O.create[r](ro,e);n(k=e.data.hook)&&(n(k.create)&&k.create(ro,e),n(k.insert)&&t.push(e))}function h(e){var t;if(n(t=e.fnScopeId))T.setAttribute(e.elm,t,"");else for(var r=e;r;)n(t=r.context)&&n(t=t.$options._scopeId)&&T.setAttribute(e.elm,t,""),r=r.parent;n(t=ui)&&t!==e.context&&t!==e.fnContext&&n(t=t.$options._scopeId)&&T.setAttribute(e.elm,t,"")}function m(e,t,n,r,i,o){for(;r<=i;++r)s(n[r],o,e,t)}function y(e){var t,r,i=e.data;if(n(i))for(n(t=i.hook)&&n(t=t.destroy)&&t(e),t=0;t<O.destroy.length;++t)O.destroy[t](e);if(n(t=e.children))for(r=0;r<e.children.length;++r)y(e.children[r])}function g(e,t,r,i){for(;r<=i;++r){var a=t[r];n(a)&&(n(a.tag)?(_(a),y(a)):o(a.elm))}}function _(e,t){if(n(t)||n(e.data)){var r,i=O.remove.length+1;for(n(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&o(e)}return n.listeners=t,n}(e.elm,i),n(r=e.componentInstance)&&n(r=r._vnode)&&n(r.data)&&_(r,t),r=0;r<O.remove.length;++r)O.remove[r](e,t);n(r=e.data.hook)&&n(r=r.remove)?r(e,t):t()}else o(e.elm)}function b(e,r,i,o,a){var c,l,u,f=0,d=0,p=r.length-1,v=r[0],h=r[p],y=i.length-1,_=i[0],b=i[y],x=!a;for(w(i);f<=p&&d<=y;)t(v)?v=r[++f]:t(h)?h=r[--p]:rt(v,_)?($(v,_,o),v=r[++f],_=i[++d]):rt(h,b)?($(h,b,o),h=r[--p],b=i[--y]):rt(v,b)?($(v,b,o),x&&T.insertBefore(e,v.elm,T.nextSibling(h.elm)),v=r[++f],b=i[--y]):rt(h,_)?($(h,_,o),x&&T.insertBefore(e,h.elm,v.elm),h=r[--p],_=i[++d]):(t(c)&&(c=it(r,f,p)),t(l=n(_.key)?c[_.key]:function(e,t,r,i){for(var o=r;o<i;o++){var a=t[o];if(n(a)&&rt(e,a))return o}}(_,r,f,p))?s(_,o,e,v.elm):rt(u=r[l],_)?($(u,_,o),r[l]=void 0,x&&T.insertBefore(e,u.elm,v.elm)):s(_,o,e,v.elm),_=i[++d]);f>p?m(e,t(i[y+1])?null:i[y+1].elm,i,d,y,o):d>y&&g(0,r,f,p)}function w(e){for(var t={},r=0;r<e.length;r++){var i=e[r],o=i.key;n(o)&&(t[o]?xr("Duplicate keys detected: '"+o+"'. This may cause an update error.",i.context):t[o]=!0)}}function $(e,i,o,a){if(e!==i){var s=i.elm=e.elm;if(r(e.isAsyncPlaceholder))n(i.asyncFactory.resolved)?C(e.elm,i,o):i.isAsyncPlaceholder=!0;else if(r(i.isStatic)&&r(e.isStatic)&&i.key===e.key&&(r(i.isCloned)||r(i.isOnce)))i.componentInstance=e.componentInstance;else{var c,l=i.data;n(l)&&n(c=l.hook)&&n(c=c.prepatch)&&c(e,i);var u=e.children,f=i.children;if(n(l)&&p(i)){for(c=0;c<O.update.length;++c)O.update[c](e,i);n(c=l.hook)&&n(c=c.update)&&c(e,i)}t(i.text)?n(u)&&n(f)?u!==f&&b(s,u,f,o,a):n(f)?(n(e.text)&&T.setTextContent(s,""),m(s,null,f,0,f.length-1,o)):n(u)?g(0,u,0,u.length-1):n(e.text)&&T.setTextContent(s,""):e.text!==i.text&&T.setTextContent(s,i.text),n(l)&&n(c=l.hook)&&n(c=c.postpatch)&&c(e,i)}}}function x(e,t,i){if(r(i)&&n(e.parent))e.parent.data.pendingInsert=t;else for(var o=0;o<t.length;++o)t[o].data.hook.insert(t[o])}function C(e,t,i,o){var s,c=t.tag,u=t.data,d=t.children;if(o=o||u&&u.pre,t.elm=e,r(t.isComment)&&n(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(!function(e,t,r){return n(t.tag)?0===t.tag.indexOf("vue-component")||!a(t,r)&&t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}(e,t,o))return!1;if(n(u)&&(n(s=u.hook)&&n(s=s.init)&&s(t,!0),n(s=t.componentInstance)))return l(t,i),!0;if(n(c)){if(n(d))if(e.hasChildNodes())if(n(s=u)&&n(s=s.domProps)&&n(s=s.innerHTML)){if(s!==e.innerHTML)return"undefined"==typeof console||E||(E=!0),!1}else{for(var p=!0,h=e.firstChild,m=0;m<d.length;m++){if(!h||!C(h,d[m],i,o)){p=!1;break}h=h.nextSibling}if(!p||h)return"undefined"==typeof console||E||(E=!0),!1}else f(t,d,i);if(n(u)){var y=!1;for(var g in u)if(!I(g)){y=!0,v(t,i);break}!y&&u.class&&Q(u.class)}}else e.data!==t.text&&(e.data=t.text);return!0}var k,A,O={},S=e.modules,T=e.nodeOps;for(k=0;k<io.length;++k)for(O[io[k]]=[],A=0;A<S.length;++A)n(S[A][io[k]])&&O[io[k]].push(S[A][io[k]]);var j=0,E=!1,I=d("attrs,class,staticClass,staticStyle,key");return function(e,i,o,a,c,l){if(!t(i)){var u=!1,f=[];if(t(e))u=!0,s(i,f,c,l);else{var d=n(e.nodeType);if(!d&&rt(e,i))$(e,i,f,a);else{if(d){if(1===e.nodeType&&e.hasAttribute(er)&&(e.removeAttribute(er),o=!0),r(o)){if(C(e,i,f))return x(i,f,!0),e;xr("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=function(e){return new Ir(T.tagName(e).toLowerCase(),{},[],void 0,e)}(e)}var v=e.elm,h=T.parentNode(v);if(s(i,f,v._leaveCb?null:h,T.nextSibling(v)),n(i.parent))for(var m=i.parent,_=p(i);m;){for(var b=0;b<O.destroy.length;++b)O.destroy[b](m);if(m.elm=i.elm,_){for(var w=0;w<O.create.length;++w)O.create[w](ro,m);var k=m.data.hook.insert;if(k.merged)for(var A=1;A<k.fns.length;A++)k.fns[A]()}else nt(m);m=m.parent}n(h)?g(0,[e],0,0):n(e.tag)&&y(e)}}return x(i,f,u),i.elm}n(e)&&y(e)}}({nodeOps:to,modules:[co,lo,vo,ho,$o,ar?{create:Gt,activate:Gt,remove:function(e,t){!0!==e.data.show?qt(e,t):t()}}:{}].concat(so)});fr&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&nn(e,"input")});var No={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?re(n,"postpatch",function(){No.componentUpdated(e,t,n)}):Yt(e,t,n.context),e._vOptions=[].map.call(e.options,Qt)):("textarea"===n.tag||eo(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("change",tn),pr||(e.addEventListener("compositionstart",en),e.addEventListener("compositionend",tn)),fr&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Yt(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Qt);if(i.some(function(e,t){return!w(e,r[t])})){(e.multiple?t.value.some(function(e){return Xt(e,i)}):t.value!==t.oldValue&&Xt(t.value,i))&&nn(e,"change")}}}},Lo={model:No,show:{bind:function(e,t,n){var r=t.value,i=(n=rn(n)).data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,zt(n,function(){e.style.display=o})):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value;if(r!==t.oldValue){(n=rn(n)).data&&n.data.transition?(n.data.show=!0,r?zt(n,function(){e.style.display=e.__vOriginalDisplay}):qt(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}}},Po={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},Do={name:"transition",props:Po,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(function(e){return e.tag||ce(e)})).length){n.length>1&&xr("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var r=this.mode;r&&"in-out"!==r&&"out-in"!==r&&xr("invalid <transition> mode: "+r,this.$parent);var o=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return o;var a=on(o);if(!a)return o;if(this._leaving)return sn(e,o);var s="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?s+"comment":s+a.tag:i(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var c=(a.data||(a.data={})).transition=an(this),l=this._vnode,u=on(l);if(a.data.directives&&a.data.directives.some(function(e){return"show"===e.name})&&(a.data.show=!0),u&&u.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(a,u)&&!ce(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var f=u.data.transition=g({},c);if("out-in"===r)return this._leaving=!0,re(f,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),sn(e,o);if("in-out"===r){if(ce(a))return l;var d,p=function(){d()};re(c,"afterEnter",p),re(c,"enterCancelled",p),re(f,"delayLeave",function(e){d=e})}}return o}}},Fo=g({tag:String,moveClass:String},Po);delete Fo.mode;var Ro={Transition:Do,TransitionGroup:{props:Fo,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=an(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else{var l=c.componentOptions,u=l?l.Ctor.options.name||l.tag||"":c.tag;xr("<transition-group> children must be keyed: <"+u+">")}}if(r){for(var f=[],d=[],p=0;p<r.length;p++){var v=r[p];v.data.transition=a,v.data.pos=v.elm.getBoundingClientRect(),n[v.key]?f.push(v):d.push(v)}this.kept=e(t,null,f),this.removed=d}return e(t,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(cn),e.forEach(ln),e.forEach(un),this._reflow=document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;Ft(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(So,n._moveCb=function e(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(So,e),n._moveCb=null,Rt(n,t))})}}))},methods:{hasMove:function(e,t){if(!Co)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){Lt(n,e)}),Nt(n,t),n.style.display="none",this.$el.appendChild(n);var r=Ht(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};ze.config.mustUseProp=Bi,ze.config.isReservedTag=Xi,ze.config.isReservedAttr=Ui,ze.config.getTagNamespace=et,ze.config.isUnknownElement=function(e){if(!ar)return!0;if(Xi(e))return!1;if(e=e.toLowerCase(),null!=Qi[e])return Qi[e];var t=document.createElement(e);return e.indexOf("-")>-1?Qi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Qi[e]=/HTMLUnknownElement/.test(t.toString())},g(ze.options.directives,Lo),g(ze.options.components,Ro),ze.prototype.__patch__=ar?Mo:b,ze.prototype.$mount=function(e,t){return e=e&&ar?tt(e):void 0,function(e,t,n){e.$el=t,e.$options.render||(e.$options.render=Nr,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?xr("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):xr("Failed to mount component: template or render function not defined.",e)),_e(e,"beforeMount");var r;return r=rr.performance&&Zr?function(){var t=e._name,r=e._uid,i="vue-perf-start:"+r,o="vue-perf-end:"+r;Zr(i);var a=e._render();Zr(o),Xr("vue "+t+" render",i,o),Zr(i),e._update(a,n),Zr(o),Xr("vue "+t+" patch",i,o)}:function(){e._update(e._render(),n)},new wi(e,r,b,null,!0),n=!1,null==e.$vnode&&(e._isMounted=!0,_e(e,"mounted")),e}(this,e,t)},ze.nextTick(function(){rr.devtools&&wr&&wr.emit("init",ze),rr.productionTip},0);var Uo,Ho=/\{\{((?:.|\n)+?)\}\}/g,Bo=/[-.*+?^${}()|[\]\/\\]/g,Vo=h(function(e){var t=e[0].replace(Bo,"\\$&"),n=e[1].replace(Bo,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}),zo={staticKeys:["staticClass"],transformNode:function(e,t){var n=t.warn||dt,r=bt(e,"class");r&&fn(r,t.delimiters)&&n('class="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.');r&&(e.staticClass=JSON.stringify(r));var i=_t(e,"class",!1);i&&(e.classBinding=i)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}},qo={staticKeys:["staticStyle"],transformNode:function(e,t){var n=t.warn||dt,r=bt(e,"style");r&&(fn(r,t.delimiters)&&n('style="'+r+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.'),e.staticStyle=JSON.stringify(mo(r)));var i=_t(e,"style",!1);i&&(e.styleBinding=i)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},Jo=function(e){return Uo=Uo||document.createElement("div"),Uo.innerHTML=e,Uo.textContent},Ko=d("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Wo=d("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Go=d("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Yo=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Zo="[a-zA-Z_][\\w\\-\\.]*",Xo="((?:"+Zo+"\\:)?"+Zo+")",Qo=new RegExp("^<"+Xo),ea=/^\s*(\/?)>/,ta=new RegExp("^<\\/"+Xo+"[^>]*>"),na=/^<!DOCTYPE [^>]+>/i,ra=/^<!--/,ia=/^<!\[/,oa=!1;"x".replace(/x(.)?/g,function(e,t){oa=""===t});var aa,sa,ca,la,ua,fa,da,pa,va,ha,ma,ya=d("script,style,textarea",!0),ga={},_a={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},ba=/&(?:lt|gt|quot|amp);/g,wa=/&(?:lt|gt|quot|amp|#10|#9);/g,$a=d("pre,textarea",!0),xa=function(e,t){return e&&$a(e)&&"\n"===t[0]},Ca=/^@|^v-on:/,ka=/^v-|^@|^:/,Aa=/(.*?)\s+(?:in|of)\s+(.*)/,Oa=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Sa=/^\(|\)$/g,Ta=/:(.*)$/,ja=/^:|^v-bind:/,Ea=/\.[^.]+/g,Ia=h(Jo),Ma=/^xmlns:NS\d+/,Na=/^NS\d+:/,La=[zo,qo,{preTransformNode:function(e,t){if("input"===e.tag){var n=e.attrsMap;if(n["v-model"]&&(n["v-bind:type"]||n[":type"])){var r=_t(e,"type"),i=bt(e,"v-if",!0),o=i?"&&("+i+")":"",a=null!=bt(e,"v-else",!0),s=bt(e,"v-else-if",!0),c=_n(e);yn(c),mt(c,"type","checkbox"),mn(c,t),c.processed=!0,c.if="("+r+")==='checkbox'"+o,gn(c,{exp:c.if,block:c});var l=_n(e);bt(l,"v-for",!0),mt(l,"type","radio"),mn(l,t),gn(c,{exp:"("+r+")==='radio'"+o,block:l});var u=_n(e);return bt(u,"v-for",!0),mt(u,":type",r),mn(u,t),gn(c,{exp:i,block:u}),a?c.else=!0:s&&(c.elseif=s),c}}}}],Pa={expectHTML:!0,modules:La,directives:{model:function(e,t,n){Di=n;var r=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;if("input"===o&&"file"===a&&Di("<"+e.tag+' v-model="'+r+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.'),e.component)return wt(e,r,i),!1;if("select"===o)!function(e,t,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";r=r+" "+$t(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),gt(e,"change",r,null,!0)}(e,r,i);else if("input"===o&&"checkbox"===a)!function(e,t,n){var r=n&&n.number,i=_t(e,"value")||"null",o=_t(e,"true-value")||"true",a=_t(e,"false-value")||"false";vt(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===o?":("+t+")":":_q("+t+","+o+")")),gt(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+t+"=$$a.concat([$$v]))}else{$$i>-1&&("+t+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+$t(t,"$$c")+"}",null,!0)}(e,r,i);else if("input"===o&&"radio"===a)!function(e,t,n){var r=n&&n.number,i=_t(e,"value")||"null";vt(e,"checked","_q("+t+","+(i=r?"_n("+i+")":i)+")"),gt(e,"change",$t(t,i),null,!0)}(e,r,i);else if("input"===o||"textarea"===o)!function(e,t,n){var r=e.attrsMap.type,i=e.attrsMap["v-bind:value"]||e.attrsMap[":value"];if(i){var o=e.attrsMap["v-bind:value"]?"v-bind:value":":value";Di(o+'="'+i+'" conflicts with v-model on the same element because the latter already expands to a value binding internally')}var a=n||{},s=a.lazy,c=a.number,l=a.trim,u=!s&&"range"!==r,f=s?"change":"range"===r?fo:"input",d="$event.target.value";l&&(d="$event.target.value.trim()"),c&&(d="_n("+d+")");var p=$t(t,d);u&&(p="if($event.target.composing)return;"+p),vt(e,"value","("+t+")"),gt(e,f,p,null,!0),(l||c)&&gt(e,"blur","$forceUpdate()")}(e,r,i);else{if(!rr.isReservedTag(o))return wt(e,r,i),!1;Di("<"+e.tag+' v-model="'+r+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.")}return!0},text:function(e,t){t.value&&vt(e,"textContent","_s("+t.value+")")},html:function(e,t){t.value&&vt(e,"innerHTML","_s("+t.value+")")}},isPreTag:function(e){return"pre"===e},isUnaryTag:Ko,mustUseProp:Bi,canBeLeftOpenTag:Wo,isReservedTag:Xi,getTagNamespace:et,staticKeys:function(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}(La)},Da=h(function(e){return d("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))}),Fa=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Ra=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,Ua={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ha=function(e){return"if("+e+")return null;"},Ba={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Ha("$event.target !== $event.currentTarget"),ctrl:Ha("!$event.ctrlKey"),shift:Ha("!$event.shiftKey"),alt:Ha("!$event.altKey"),meta:Ha("!$event.metaKey"),left:Ha("'button' in $event && $event.button !== 0"),middle:Ha("'button' in $event && $event.button !== 1"),right:Ha("'button' in $event && $event.button !== 2")},Va={on:function(e,t){t.modifiers&&xr("v-on without argument does not support modifiers."),e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:b},za=function(e){this.options=e,this.warn=e.warn||dt,this.transforms=pt(e.modules,"transformCode"),this.dataGenFns=pt(e.modules,"genData"),this.directives=g(g({},Va),e.directives);var t=e.isReservedTag||Xn;this.maybeComponent=function(e){return!t(e.tag)},this.onceId=0,this.staticRenderFns=[]},qa=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Ja=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Ka=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g,Wa=function(e){return function(t){function n(n,r){var i=Object.create(t),o=[],a=[];if(i.warn=function(e,t){(t?a:o).push(e)},r){r.modules&&(i.modules=(t.modules||[]).concat(r.modules)),r.directives&&(i.directives=g(Object.create(t.directives||null),r.directives));for(var s in r)"modules"!==s&&"directives"!==s&&(i[s]=r[s])}var c=e(n,i);return o.push.apply(o,function(e){var t=[];return e&&Dn(e,t),t}(c.ast)),c.errors=o,c.tips=a,c}return{compile:n,compileToFunctions:function(e){var t=Object.create(null);return function(n,r,i){var o=(r=g({},r)).warn||xr;delete r.warn;try{new Function("return 1")}catch(e){e.toString().match(/unsafe-eval|CSP/)&&o("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var a=r.delimiters?String(r.delimiters)+n:n;if(t[a])return t[a];var s=e(n,r);s.errors&&s.errors.length&&o("Error compiling template:\n\n"+n+"\n\n"+s.errors.map(function(e){return"- "+e}).join("\n")+"\n",i),s.tips&&s.tips.length&&s.tips.forEach(function(e){return Cr(e,i)});var c={},l=[];return c.render=Un(s.render,l),c.staticRenderFns=s.staticRenderFns.map(function(e){return Un(e,l)}),s.errors&&s.errors.length||!l.length||o("Failed to generate render function:\n\n"+l.map(function(e){var t=e.err,n=e.code;return t.toString()+" in\n\n"+n+"\n"}).join("\n"),i),t[a]=c}}(n)}}}(function(e,t){var n=hn(e.trim(),t);!1!==t.optimize&&function(e,t){e&&(va=Da(t.staticKeys||""),ha=t.isReservedTag||Xn,bn(e),wn(e,!1))}(n,t);var r=kn(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}})(Pa).compileToFunctions,Ga=!!ar&&Hn(!1),Ya=!!ar&&Hn(!0),Za=h(function(e){var t=tt(e);return t&&t.innerHTML}),Xa=ze.prototype.$mount;return ze.prototype.$mount=function(e,t){if((e=e&&tt(e))===document.body||e===document.documentElement)return xr("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&((r=Za(r))||xr("Template element not found or is empty: "+n.template,this));else{if(!r.nodeType)return xr("invalid template option:"+r,this),this;r=r.innerHTML}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(r){rr.performance&&Zr&&Zr("compile");var i=Wa(r,{shouldDecodeNewlines:Ga,shouldDecodeNewlinesForHref:Ya,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a,rr.performance&&Zr&&(Zr("compile end"),Xr("vue "+this._name+" compile","compile","compile end"))}}return Xa.call(this,e,t)},ze.compile=Wa,ze});
},{}],19:[function(require,module,exports) {

},{}],20:[function(require,module,exports) {
var global = (1,eval)("this");
var t=(0,eval)("this");!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueRouter=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new Error("[vue-router] "+e)}function e(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function r(t,e,r){void 0===e&&(e={});var n,o=r||function(t){var e={};if(!(t=t.trim().replace(/^(\?|#|&)/,"")))return e;return t.split("&").forEach(function(t){var r=t.replace(/\+/g," ").split("="),n=ut(r.shift()),o=r.length>0?ut(r.join("=")):null;void 0===e[n]?e[n]=o:Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]}),e};try{n=o(t||"")}catch(t){t.message,n={}}for(var i in e)n[i]=e[i];return n}function n(t,e,r,n){var a=n&&n.options.stringifyQuery,u=e.query||{};try{u=o(u)}catch(t){}var c={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:u,params:e.params||{},fullPath:i(e,a),matched:t?function(t){var e=[];for(;t;)e.unshift(t),t=t.parent;return e}(t):[]};return r&&(c.redirectedFrom=i(r,a)),Object.freeze(c)}function o(t){if(Array.isArray(t))return t.map(o);if(t&&"object"==typeof t){var e={};for(var r in t)e[r]=o(t[r]);return e}return t}function i(t,e){var r=t.path,n=t.query;void 0===n&&(n={});var o=t.hash;void 0===o&&(o="");return(r||"/")+(e||function(t){var e=t?Object.keys(t).map(function(e){var r=t[e];if(void 0===r)return"";if(null===r)return at(e);if(Array.isArray(r)){var n=[];return r.forEach(function(t){void 0!==t&&(null===t?n.push(at(e)):n.push(at(e)+"="+at(t)))}),n.join("&")}return at(e)+"="+at(r)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""})(n)+o}function a(t,e){return e===st?t===e:!!e&&(t.path&&e.path?t.path.replace(ct,"")===e.path.replace(ct,"")&&t.hash===e.hash&&u(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&u(t.query,e.query)&&u(t.params,e.params)))}function u(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(r){var n=t[r],o=e[r];return"object"==typeof n&&"object"==typeof o?u(n,o):String(n)===String(o)})}function c(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function s(t){if(t)for(var e,r=0;r<t.length;r++){if("a"===(e=t[r]).tag)return e;if(e.children&&(e=s(e.children)))return e}}function f(t){if(!f.installed||et!==t){f.installed=!0,et=t;var e=function(t){return void 0!==t},r=function(t,r){var n=t.$options._parentVnode;e(n)&&e(n=n.data)&&e(n=n.registerRouteInstance)&&n(t,r)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",rt),t.component("router-link",ht);var n=t.config.optionMergeStrategies;n.beforeRouteEnter=n.beforeRouteLeave=n.beforeRouteUpdate=n.created}}function p(t,e,r){var n=t.charAt(0);if("/"===n)return t;if("?"===n||"#"===n)return e+t;var o=e.split("/");r&&o[o.length-1]||o.pop();for(var i=t.replace(/^\//,"").split("/"),a=0;a<i.length;a++){var u=i[a];".."===u?o.pop():"."!==u&&o.push(u)}return""!==o[0]&&o.unshift(""),o.join("/")}function h(t){return t.replace(/\/\//g,"/")}function l(t,e){for(var r,n=[],o=0,i=0,a="",u=e&&e.delimiter||"/";null!=(r=wt.exec(t));){var c=r[0],s=r[1],f=r.index;if(a+=t.slice(i,f),i=f+c.length,s)a+=s[1];else{var p=t[i],h=r[2],l=r[3],d=r[4],y=r[5],v=r[6],g=r[7];a&&(n.push(a),a="");var b=null!=h&&null!=p&&p!==h,w="+"===v||"*"===v,x="?"===v||"*"===v,k=r[2]||u,E=d||y;n.push({name:l||o++,prefix:h||"",delimiter:k,optional:x,repeat:w,partial:b,asterisk:!!g,pattern:E?function(t){return t.replace(/([=!:$\/()])/g,"\\$1")}(E):g?".*":"[^"+m(k)+"]+?"})}}return i<t.length&&(a+=t.substr(i)),a&&n.push(a),n}function d(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function y(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function v(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},a=(n||{}).pretty?d:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!=typeof c){var s,f=i[c.name];if(null==f){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(dt(f)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(s=a(f[p]),!e[u].test(s))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===p?c.prefix:c.delimiter)+s}}else{if(s=c.asterisk?y(f):a(f),!e[u].test(s))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+s+'"');o+=c.prefix+s}}else o+=c}return o}}function m(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function g(t,e){return t.keys=e,t}function b(t){return t.sensitive?"":"i"}function w(t,e,r){dt(e)||(r=e||r,e=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,i="",a=0;a<t.length;a++){var u=t[a];if("string"==typeof u)i+=m(u);else{var c=m(u.prefix),s="(?:"+u.pattern+")";e.push(u),u.repeat&&(s+="(?:"+c+s+")*"),i+=s=u.optional?u.partial?c+"("+s+")?":"(?:"+c+"("+s+"))?":c+"("+s+")"}}var f=m(r.delimiter||"/"),p=i.slice(-f.length)===f;return n||(i=(p?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?"),i+=o?"$":n&&p?"":"(?="+f+"|$)",g(new RegExp("^"+i,b(r)),e)}function x(t,e,r){return dt(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?function(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return g(t,e)}(t,e):dt(t)?function(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(x(t[o],e,r).source);return g(new RegExp("(?:"+n.join("|")+")",b(r)),e)}(t,e,r):function(t,e,r){return w(l(t,r),e,r)}(t,e,r)}function k(t,e,r){try{return(xt[t]||(xt[t]=yt.compile(t)))(e||{},{pretty:!0})}catch(t){return t.message,""}}function E(t,e,r,n){var o=e||[],i=r||Object.create(null),a=n||Object.create(null);t.forEach(function(t){R(o,i,a,t)});for(var u=0,c=o.length;u<c;u++)"*"===o[u]&&(o.push(o.splice(u,1)[0]),c--,u--);return{pathList:o,pathMap:i,nameMap:a}}function R(e,r,n,o,i,a){var u=o.path,c=o.name;t(null!=u,'"path" is required in a route configuration.'),t("string"!=typeof o.component,'route config "component" for path: '+String(u||c)+" cannot be a string id. Use an actual component instead.");var s=o.pathToRegexpOptions||{},f=function(t,e,r){r||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return h(e.path+"/"+t)}(u,i,s.strict);"boolean"==typeof o.caseSensitive&&(s.sensitive=o.caseSensitive);var p={path:f,regex:function(t,e){var r=yt(t,[],e),n=Object.create(null);return r.keys.forEach(function(t){n[t.name],n[t.name]=!0}),r}(f,s),components:o.components||{default:o.component},instances:{},name:c,parent:i,matchAs:a,redirect:o.redirect,beforeEnter:o.beforeEnter,meta:o.meta||{},props:null==o.props?{}:o.components?o.props:{default:o.props}};if(o.children&&(o.name&&!o.redirect&&o.children.some(function(t){return/^\/?$/.test(t.path)})&&(o.name,o.name),o.children.forEach(function(t){var o=a?h(a+"/"+t.path):void 0;R(e,r,n,t,p,o)})),void 0!==o.alias){(Array.isArray(o.alias)?o.alias:[o.alias]).forEach(function(t){var a={path:t,children:o.children};R(e,r,n,a,i,p.path||"/")})}r[p.path]||(e.push(p.path),r[p.path]=p),c&&(n[c]||(n[c]=p))}function O(t,e,n,o){var i="string"==typeof t?{path:t}:t;if(i.name||i._normalized)return i;if(!i.path&&i.params&&e){(i=C({},i))._normalized=!0;var a=C(C({},e.params),i.params);if(e.name)i.name=e.name,i.params=a;else if(e.matched.length){var u=e.matched[e.matched.length-1].path;i.path=k(u,a,e.path)}return i}var c=function(t){var e="",r="",n=t.indexOf("#");n>=0&&(e=t.slice(n),t=t.slice(0,n));var o=t.indexOf("?");return o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),{path:t,query:r,hash:e}}(i.path||""),s=e&&e.path||"/",f=c.path?p(c.path,s,n||i.append):s,h=r(c.query,i.query,o&&o.options.parseQuery),l=i.hash||c.hash;return l&&"#"!==l.charAt(0)&&(l="#"+l),{_normalized:!0,path:f,query:h,hash:l}}function C(t,e){for(var r in e)t[r]=e[r];return t}function j(e,r){function o(t,e,n){var o=O(t,e,!1,r),i=o.name;if(i){var u=f[i];if(!u)return a(null,o);var p=u.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof o.params&&(o.params={}),e&&"object"==typeof e.params)for(var h in e.params)!(h in o.params)&&p.indexOf(h)>-1&&(o.params[h]=e.params[h]);if(u)return o.path=k(u.path,o.params),a(u,o,n)}else if(o.path){o.params={};for(var l=0;l<c.length;l++){var d=c[l],y=s[d];if(function(t,e,r){var n=e.match(t);if(!n)return!1;if(!r)return!0;for(var o=1,i=n.length;o<i;++o){var a=t.keys[o-1],u="string"==typeof n[o]?decodeURIComponent(n[o]):n[o];a&&(r[a.name]=u)}return!0}(y.regex,o.path,o.params))return a(y,o,n)}}return a(null,o)}function i(e,i){var u=e.redirect,c="function"==typeof u?u(n(e,i,null,r)):u;if("string"==typeof c&&(c={path:c}),!c||"object"!=typeof c)return JSON.stringify(c),a(null,i);var s=c,h=s.name,l=s.path,d=i.query,y=i.hash,v=i.params;if(d=s.hasOwnProperty("query")?s.query:d,y=s.hasOwnProperty("hash")?s.hash:y,v=s.hasOwnProperty("params")?s.params:v,h){return t(f[h],'redirect failed: named route "'+h+'" not found.'),o({_normalized:!0,name:h,query:d,hash:y,params:v},void 0,i)}if(l){var m=function(t,e){return p(t,e.parent?e.parent.path:"/",!0)}(l,e);return o({_normalized:!0,path:k(m,v),query:d,hash:y},void 0,i)}return JSON.stringify(c),a(null,i)}function a(t,e,u){return t&&t.redirect?i(t,u||e):t&&t.matchAs?function(t,e,r){var n=o({_normalized:!0,path:k(r,e.params)});if(n){var i=n.matched,u=i[i.length-1];return e.params=n.params,a(u,e)}return a(null,e)}(0,e,t.matchAs):n(t,e,u,r)}var u=E(e),c=u.pathList,s=u.pathMap,f=u.nameMap;return{match:o,addRoutes:function(t){E(t,c,s,f)}}}function A(){window.history.replaceState({key:U()},""),window.addEventListener("popstate",function(t){S(),t.state&&t.state.key&&function(t){Ot=t}(t.state.key)})}function _(e,r,n,o){if(e.app){var i=e.options.scrollBehavior;i&&(t("function"==typeof i,"scrollBehavior must be a function"),e.app.$nextTick(function(){var e=function(){var t=U();if(t)return kt[t]}(),a=i(r,n,o?e:null);a&&("function"==typeof a.then?a.then(function(t){L(t,e)}).catch(function(e){t(!1,e.toString())}):L(a,e))}))}}function S(){var t=U();t&&(kt[t]={x:window.pageXOffset,y:window.pageYOffset})}function T(t){return q(t.x)||q(t.y)}function $(t){return{x:q(t.x)?t.x:window.pageXOffset,y:q(t.y)?t.y:window.pageYOffset}}function q(t){return"number"==typeof t}function L(t,e){var r="object"==typeof t;if(r&&"string"==typeof t.selector){var n=document.querySelector(t.selector);if(n){var o=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{x:n.left-r.left-e.x,y:n.top-r.top-e.y}}(n,o=function(t){return{x:q(t.x)?t.x:0,y:q(t.y)?t.y:0}}(o))}else T(t)&&(e=$(t))}else r&&T(t)&&(e=$(t));e&&window.scrollTo(e.x,e.y)}function P(){return Rt.now().toFixed(3)}function U(){return Ot}function M(t,e){S();var r=window.history;try{e?r.replaceState({key:Ot},"",t):(Ot=P(),r.pushState({key:Ot},"",t))}catch(r){window.location[e?"replace":"assign"](t)}}function V(t){M(t,!0)}function B(t,e,r){var n=function(o){o>=t.length?r():t[o]?e(t[o],function(){n(o+1)}):n(o+1)};n(0)}function H(t){return function(r,n,o){var i=!1,a=0,u=null;I(t,function(t,r,n,c){if("function"==typeof t&&void 0===t.cid){i=!0,a++;var s,f=F(function(e){(function(t){return t.__esModule||Ct&&"Module"===t[Symbol.toStringTag]})(e)&&(e=e.default),t.resolved="function"==typeof e?e:et.extend(e),n.components[c]=e,--a<=0&&o()}),p=F(function(t){var r="Failed to resolve async component "+c+": "+t;u||(u=e(t)?t:new Error(r),o(u))});try{s=t(f,p)}catch(t){p(t)}if(s)if("function"==typeof s.then)s.then(f,p);else{var h=s.component;h&&"function"==typeof h.then&&h.then(f,p)}}}),i||o()}}function I(t,e){return z(t.map(function(t){return Object.keys(t.components).map(function(r){return e(t.components[r],t.instances[r],t,r)})}))}function z(t){return Array.prototype.concat.apply([],t)}function F(t){var e=!1;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];if(!e)return e=!0,t.apply(this,r)}}function D(t,e,r,n){var o=I(t,function(t,n,o,i){var a=function(t,e){"function"!=typeof t&&(t=et.extend(t));return t.options[e]}(t,e);if(a)return Array.isArray(a)?a.map(function(t){return r(t,n,o,i)}):r(a,n,o,i)});return z(n?o.reverse():o)}function J(t,e){if(e)return function(){return t.apply(e,arguments)}}function K(t,e,r){return D(t,"beforeRouteEnter",function(t,n,o,i){return function(t,e,r,n,o){return function(i,a,u){return t(i,a,function(t){u(t),"function"==typeof t&&n.push(function(){N(t,e.instances,r,o)})})}}(t,o,i,e,r)})}function N(t,e,r,n){e[r]?t(e[r]):n()&&setTimeout(function(){N(t,e,r,n)},16)}function Q(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function X(){var t=Y();return"/"===t.charAt(0)||(Z("/"+t),!1)}function Y(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.slice(e+1)}function W(t){var e=window.location.href,r=e.indexOf("#");return(r>=0?e.slice(0,r):e)+"#"+t}function G(t){Et?M(W(t)):window.location.hash=t}function Z(t){Et?V(W(t)):window.location.replace(W(t))}function tt(t,e){return t.push(e),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}var et,rt={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var r=e.props,n=e.children,o=e.parent,i=e.data;i.routerView=!0;for(var a=o.$createElement,u=r.name,c=o.$route,s=o._routerViewCache||(o._routerViewCache={}),f=0,p=!1;o&&o._routerRoot!==o;)o.$vnode&&o.$vnode.data.routerView&&f++,o._inactive&&(p=!0),o=o.$parent;if(i.routerViewDepth=f,p)return a(s[u],i,n);var h=c.matched[f];if(!h)return s[u]=null,a();var l=s[u]=h.components[u];i.registerRouteInstance=function(t,e){var r=h.instances[u];(e&&r!==t||!e&&r===t)&&(h.instances[u]=e)},(i.hook||(i.hook={})).prepatch=function(t,e){h.instances[u]=e.componentInstance};var d=i.props=function(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:t.path}}(c,h.props&&h.props[u]);if(d){d=i.props=function(t,e){for(var r in e)t[r]=e[r];return t}({},d);var y=i.attrs=i.attrs||{};for(var v in d)l.props&&v in l.props||(y[v]=d[v],delete d[v])}return a(l,i,n)}},nt=/[!'()*]/g,ot=function(t){return"%"+t.charCodeAt(0).toString(16)},it=/%2C/g,at=function(t){return encodeURIComponent(t).replace(nt,ot).replace(it,",")},ut=decodeURIComponent,ct=/\/?$/,st=n(null,{path:"/"}),ft=[String,Object],pt=[String,Array],ht={name:"router-link",props:{to:{type:ft,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:pt,default:"click"}},render:function(t){var e=this,r=this.$router,o=this.$route,i=r.resolve(this.to,o,this.append),u=i.location,f=i.route,p=i.href,h={},l=r.options.linkActiveClass,d=r.options.linkExactActiveClass,y=null==l?"router-link-active":l,v=null==d?"router-link-exact-active":d,m=null==this.activeClass?y:this.activeClass,g=null==this.exactActiveClass?v:this.exactActiveClass,b=u.path?n(null,u,null,r):f;h[g]=a(o,b),h[m]=this.exact?h[g]:function(t,e){return 0===t.path.replace(ct,"/").indexOf(e.path.replace(ct,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var r in e)if(!(r in t))return!1;return!0}(t.query,e.query)}(o,b);var w=function(t){c(t)&&(e.replace?r.replace(u):r.push(u))},x={click:c};Array.isArray(this.event)?this.event.forEach(function(t){x[t]=w}):x[this.event]=w;var k={class:h};if("a"===this.tag)k.on=x,k.attrs={href:p};else{var E=s(this.$slots.default);if(E){E.isStatic=!1;var R=et.util.extend;(E.data=R({},E.data)).on=x;(E.data.attrs=R({},E.data.attrs)).href=p}else k.on=x}return t(this.tag,k,this.$slots.default)}},lt="undefined"!=typeof window,dt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},yt=x,vt=l,mt=function(t,e){return v(l(t,e))},gt=v,bt=w,wt=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");yt.parse=vt,yt.compile=mt,yt.tokensToFunction=gt,yt.tokensToRegExp=bt;var xt=Object.create(null),kt=Object.create(null),Et=lt&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),Rt=lt&&window.performance&&window.performance.now?window.performance:Date,Ot=P(),Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,jt=function(t,e){this.router=t,this.base=function(t){if(!t)if(lt){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}(e),this.current=st,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};jt.prototype.listen=function(t){this.cb=t},jt.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},jt.prototype.onError=function(t){this.errorCbs.push(t)},jt.prototype.transitionTo=function(t,e,r){var n=this,o=this.router.match(t,this.current);this.confirmTransition(o,function(){n.updateRoute(o),e&&e(o),n.ensureURL(),n.ready||(n.ready=!0,n.readyCbs.forEach(function(t){t(o)}))},function(t){r&&r(t),t&&!n.ready&&(n.ready=!0,n.readyErrorCbs.forEach(function(e){e(t)}))})},jt.prototype.confirmTransition=function(t,r,n){var o=this,i=this.current,u=function(t){e(t)&&o.errorCbs.length&&o.errorCbs.forEach(function(e){e(t)}),n&&n(t)};if(a(t,i)&&t.matched.length===i.matched.length)return this.ensureURL(),u();var c=function(t,e){var r,n=Math.max(t.length,e.length);for(r=0;r<n&&t[r]===e[r];r++);return{updated:e.slice(0,r),activated:e.slice(r),deactivated:t.slice(r)}}(this.current.matched,t.matched),s=c.updated,f=c.deactivated,p=c.activated,h=[].concat(function(t){return D(t,"beforeRouteLeave",J,!0)}(f),this.router.beforeHooks,function(t){return D(t,"beforeRouteUpdate",J)}(s),p.map(function(t){return t.beforeEnter}),H(p));this.pending=t;var l=function(r,n){if(o.pending!==t)return u();try{r(t,i,function(t){!1===t||e(t)?(o.ensureURL(!0),u(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(u(),"object"==typeof t&&t.replace?o.replace(t):o.push(t)):n(t)})}catch(t){u(t)}};B(h,l,function(){var e=[];B(K(p,e,function(){return o.current===t}).concat(o.router.resolveHooks),l,function(){if(o.pending!==t)return u();o.pending=null,r(t),o.router.app&&o.router.app.$nextTick(function(){e.forEach(function(t){t()})})})})},jt.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(r){r&&r(t,e)})};var At=function(t){function e(e,r){var n=this;t.call(this,e,r);var o=e.options.scrollBehavior;o&&A();var i=Q(this.base);window.addEventListener("popstate",function(t){var r=n.current,a=Q(n.base);n.current===st&&a===i||n.transitionTo(a,function(t){o&&_(e,t,r,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,r){var n=this,o=this.current;this.transitionTo(t,function(t){M(h(n.base+t.fullPath)),_(n.router,t,o,!1),e&&e(t)},r)},e.prototype.replace=function(t,e,r){var n=this,o=this.current;this.transitionTo(t,function(t){V(h(n.base+t.fullPath)),_(n.router,t,o,!1),e&&e(t)},r)},e.prototype.ensureURL=function(t){if(Q(this.base)!==this.current.fullPath){var e=h(this.base+this.current.fullPath);t?M(e):V(e)}},e.prototype.getCurrentLocation=function(){return Q(this.base)},e}(jt),_t=function(t){function e(e,r,n){t.call(this,e,r),n&&function(t){var e=Q(t);if(!/^\/#/.test(e))return window.location.replace(h(t+"/#"+e)),!0}(this.base)||X()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router.options.scrollBehavior,r=Et&&e;r&&A(),window.addEventListener(Et?"popstate":"hashchange",function(){var e=t.current;X()&&t.transitionTo(Y(),function(n){r&&_(t.router,n,e,!0),Et||Z(n.fullPath)})})},e.prototype.push=function(t,e,r){var n=this,o=this.current;this.transitionTo(t,function(t){G(t.fullPath),_(n.router,t,o,!1),e&&e(t)},r)},e.prototype.replace=function(t,e,r){var n=this,o=this.current;this.transitionTo(t,function(t){Z(t.fullPath),_(n.router,t,o,!1),e&&e(t)},r)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Y()!==e&&(t?G(e):Z(e))},e.prototype.getCurrentLocation=function(){return Y()},e}(jt),St=function(t){function e(e,r){t.call(this,e,r),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,r){var n=this;this.transitionTo(t,function(t){n.stack=n.stack.slice(0,n.index+1).concat(t),n.index++,e&&e(t)},r)},e.prototype.replace=function(t,e,r){var n=this;this.transitionTo(t,function(t){n.stack=n.stack.slice(0,n.index).concat(t),e&&e(t)},r)},e.prototype.go=function(t){var e=this,r=this.index+t;if(!(r<0||r>=this.stack.length)){var n=this.stack[r];this.confirmTransition(n,function(){e.index=r,e.updateRoute(n)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(jt),Tt=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=j(e.routes||[],this);var r=e.mode||"hash";switch(this.fallback="history"===r&&!Et&&!1!==e.fallback,this.fallback&&(r="hash"),lt||(r="abstract"),this.mode=r,r){case"history":this.history=new At(this,e.base);break;case"hash":this.history=new _t(this,e.base,this.fallback);break;case"abstract":this.history=new St(this,e.base);break;default:t(!1,"invalid mode: "+r)}},$t={currentRoute:{configurable:!0}};return Tt.prototype.match=function(t,e,r){return this.matcher.match(t,e,r)},$t.currentRoute.get=function(){return this.history&&this.history.current},Tt.prototype.init=function(e){var r=this;if(t(f.installed,"not installed. Make sure to call `Vue.use(VueRouter)` before creating root instance."),this.apps.push(e),!this.app){this.app=e;var n=this.history;if(n instanceof At)n.transitionTo(n.getCurrentLocation());else if(n instanceof _t){var o=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),o,o)}n.listen(function(t){r.apps.forEach(function(e){e._route=t})})}},Tt.prototype.beforeEach=function(t){return tt(this.beforeHooks,t)},Tt.prototype.beforeResolve=function(t){return tt(this.resolveHooks,t)},Tt.prototype.afterEach=function(t){return tt(this.afterHooks,t)},Tt.prototype.onReady=function(t,e){this.history.onReady(t,e)},Tt.prototype.onError=function(t){this.history.onError(t)},Tt.prototype.push=function(t,e,r){this.history.push(t,e,r)},Tt.prototype.replace=function(t,e,r){this.history.replace(t,e,r)},Tt.prototype.go=function(t){this.history.go(t)},Tt.prototype.back=function(){this.go(-1)},Tt.prototype.forward=function(){this.go(1)},Tt.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},Tt.prototype.resolve=function(t,e,r){var n=O(t,e||this.history.current,r,this),o=this.match(n,e),i=o.redirectedFrom||o.fullPath;return{location:n,route:o,href:function(t,e,r){var n="hash"===r?"#"+e:e;return t?h(t+"/"+n):n}(this.history.base,i,this.mode),normalizedTo:n,resolved:o}},Tt.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==st&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Tt.prototype,$t),Tt.install=f,Tt.version="3.0.1",lt&&window.Vue&&window.Vue.use(Tt),Tt});
},{}],21:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Vuefire={})}(this,function(e){"use strict";function t(e){return Object.defineProperty(e.data(),"id",{value:e.id})}function n(e,t,r,i){void 0===r&&(r=""),void 0===i&&(i=[{},{}]),t=t||{};var o=Object.getOwnPropertyDescriptor(e,"id");return o&&!o.enumerable&&Object.defineProperty(i[0],"id",o),Object.keys(e).reduce(function(i,o){var s=e[o];return s&&"function"==typeof s.isEqual?(i[0][o]=t[o]||s.path,i[1][r+o]=s):Array.isArray(s)?(i[0][o]=Array(s.length).fill(null),n(s,t[o],r+o+".",[i[0][o],i[1]])):!function(e){return e&&"object"==typeof e}(s)?i[0][o]=s:(i[0][o]={},n(s,t[o],r+o+".",[i[0][o],i[1]])),i},i)}function r(e,t,n){var r=(""+t).split("."),i=r.pop(),o=r.reduce(function(e,t){return e[t]},e);isFinite(i)?o.splice(i,1,n):o[i]=n}function i(e){for(var t in e)e[t].unsub()}function o(e,n){var o=e.subs,u=e.refs,c=e.target,f=e.path,a=(e.data,e.depth),l=e.resolve,d=Object.keys(u);if(Object.keys(o).filter(function(e){return d.indexOf(e)<0}).forEach(function(e){o[e].unsub(),delete o[e]}),!d.length||++a>n.maxRefDepth)return l(f);var p=0,h=d.length,v=Object.create(null);d.forEach(function(e){var d=o[e],b=u[e],y=f+"."+e;if(v[y]=!0,d){if(d.path===b.path)return;d.unsub()}o[e]={unsub:function(e,n){var o=e.ref,u=e.target,c=e.path,f=e.depth,a=e.resolve,l=Object.create(null),d=o.onSnapshot(function(e){e.exists?s({snapshot:t(e),target:u,path:c,subs:l,depth:f,resolve:a},n):(r(u,c,null),a(c))});return function(){d(),i(l)}}({ref:b,target:c,path:y,depth:a,resolve:function(e){e in v&&++p>=h&&l(f)}.bind(null,y)},n),path:b.path}})}function s(e,t){var i=e.snapshot,s=e.target,u=e.path,c=e.subs,f=e.depth;void 0===f&&(f=0);var a=e.resolve,l=n(i,function(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}(s,u)),d=l[0],p=l[1];r(s,u,d),o({data:d,subs:c,refs:p,target:s,path:u,depth:f,resolve:a},t)}function u(e,r){var u=e.vm,c=e.key,f=e.ref;return void 0===r&&(r={maxRefDepth:2}),new Promise(function(e,a){var l;l=f.where?function(e,r){var s,u=e.vm,c=e.key,f=e.collection,a=e.resolve,l=e.reject,d=u[c]=[],p=a,h=[],v={added:function(e){var i=e.newIndex,s=e.doc;h.splice(i,0,Object.create(null));var u=h[i],c=n(t(s)),f=c[0],l=c[1];d.splice(i,0,f),o({data:f,refs:l,subs:u,target:d,path:i,depth:0,resolve:a.bind(null,s)},r)},modified:function(e){var i=e.oldIndex,s=e.newIndex,u=e.doc,c=h.splice(i,1)[0];h.splice(s,0,c);var f=d.splice(i,1)[0],l=n(t(u),f),p=l[0],v=l[1];d.splice(s,0,p),o({data:p,refs:v,subs:c,target:d,path:s,depth:0,resolve:a},r)},removed:function(e){var t=e.oldIndex;d.splice(t,1),i(h.splice(t,1)[0])}},b=f.onSnapshot(function(e){var t=e.docChanges;if(!s&&t.length){s=!0;var n=0,r=t.length,i=t.reduce(function(e,t){return e[t.doc.id]=!1,e},Object.create(null));a=function(e){e.id in i&&++n>=r&&(p(u[c]),a=function(e){})}}t.forEach(function(e){v[e.type](e)}),t.length||a()},l);return function(){b(),h.forEach(i)}}({vm:u,key:c,collection:f,resolve:e,reject:a},r):function(e,n){var r=e.vm,o=e.key,u=e.document,c=e.resolve,f=e.reject,a=Object.create(null);c=function(e,t){var n;return function(){if(!n)return n=!0,e(t())}}(c,function(){return r[o]});var l=u.onSnapshot(function(e){e.exists?s({snapshot:t(e),target:r,path:o,subs:a,resolve:c},n):c()},f);return function(){l(),i(a)}}({vm:u,key:c,document:f,resolve:e,reject:a},r),u._firestoreUnbinds[c]=l})}e.default=function(e,t){var n=e.config.optionMergeStrategies;n.firestore=n.provide,e.mixin({created:function(){var e=this,t=this.$options.firestore;this._firestoreUnbinds=Object.create(null),this.$firestoreRefs=Object.create(null);var n="function"==typeof t?t.call(this):t;n&&Object.keys(n).forEach(function(t){e.$bind(t,n[t])})},beforeDestroy:function(){for(var e in this._firestoreUnbinds)this._firestoreUnbinds[e]();this._firestoreUnbinds=null,this.$firestoreRefs=null}}),e.prototype.$bind=function(e,t,n){this._firestoreUnbinds[e]&&this.$unbind(e);var r=u({vm:this,key:e,ref:t},n);return this.$firestoreRefs[e]=t,r},e.prototype.$unbind=function(e){this._firestoreUnbinds[e](),delete this._firestoreUnbinds[e],delete this.$firestoreRefs[e]}},Object.defineProperty(e,"__esModule",{value:!0})});
},{}],22:[function(require,module,exports) {
var global = (1,eval)("this");
var t=(0,eval)("this");!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueMDCAdapter=e()}(this,function(){"use strict";function e(t){return{install:function(e){for(var n in t){var i=t[n];e.component(i.name,i)}},components:t}}function n(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=void 0;"function"==typeof CustomEvent?s=new CustomEvent(e,{detail:n,bubbles:i}):(s=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,n),t.dispatchEvent(s)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"==typeof M&&!e)return M;if(t.CSS&&"function"==typeof t.CSS.supports){var n=t.CSS.supports("--css-vars","yes"),i=t.CSS.supports("(--css-vars: yes)")&&t.CSS.supports("color","#00000000");return M=!(!n&&!i)&&!function(t){var e=t.document,n=e.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",e.body.appendChild(n);var i=t.getComputedStyle(n),s=null!==i&&"solid"===i.borderTopStyle;return n.remove(),s}(t)}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===P||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}P=n}return!!P&&{passive:!0}}function a(t){return["webkitMatchesSelector","msMatchesSelector","matches"].filter(function(e){return e in t}).pop()}function r(t){return!!t&&"function"==typeof t.set}function o(t,e){if(!function(t){return void 0!==t.document&&"function"==typeof t.document.createElement}(t)||!function(t){return t in rt||t in ot}(e))return e;var n=e in rt?rt:ot,i=t.document.createElement("div");return n===rt?function(t,e,n){return e[t].styleProperty in n.style?e[t].noPrefix:e[t].webkitPrefix}(e,n,i):n[e].noPrefix in i.style?n[e].noPrefix:n[e].webkitPrefix}function c(t,e){return o(t,e)}function d(t,e){return o(t,e)}function l(t){t&&t.focus&&t!==document.activeElement&&(t.focus(),"input"===t.tagName.toLowerCase()&&t.select())}function u(t){if(!("ontouchstart"in(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window).document))switch(t){case"touchstart":return"pointerdown";case"touchmove":return"pointermove";case"touchend":return"pointerup";default:return t}return t}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===At||e){var n="transform"in t.document.createElement("div").style?"transform":"-webkit-transform";At=n}return At}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===It||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}It=n}return!!It&&{passive:!0}}function _(t){t.hasAttribute("tabindex")&&t.setAttribute(Tt,t.getAttribute("tabindex")),t.setAttribute(kt,!0)}function m(t){t.hasAttribute(kt)&&(t.hasAttribute(Tt)?(t.setAttribute("tabindex",t.getAttribute(Tt)),t.removeAttribute(Tt)):t.removeAttribute("tabindex"),t.removeAttribute(kt))}function p(t){return"Space"===t.key||32===t.keyCode}function v(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===ie||e){var n="transform"in t.document.createElement("div").style?"transform":"webkitTransform";ie=n}return ie}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(n,Math.max(e,t))}function y(t,e,n,i,s){return b(function(t,e,n){if(t<=0)return 0;if(t>=1)return 1;for(var i=t,s=0,a=1,r=0,o=0;o<8;o++){r=b(i,e,n);var c=(b(i+1e-6,e,n)-r)/1e-6;if(Math.abs(r-t)<1e-6)return i;if(Math.abs(c)<1e-6)break;r<t?s=i:a=i,i-=(r-t)/c}for(var d=0;Math.abs(r-t)>1e-6&&d<8;d++)r<t?(s=i,i=(i+a)/2):(a=i,i=(i+s)/2),r=b(i,e,n);return i}(t,e,i),n,s)}function b(t,e,n){if(0===t||1===t)return t;var i=t*e,s=e+t*(n-e);return i+=t*(s-i),s+=t*(n+t*(1-n)-s),i+t*(s-i)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===pn||e){var n=!1;try{t.document.addEventListener("test",null,{get passive(){n=!0}})}catch(t){}pn=n}return!!pn&&{passive:!0}}function E(t,e,n){return{props:{tag:{type:String,default:t},typo:{type:String,default:e,validator:function(t){return-1!==n.indexOf(t)}},"adjust-margin":{type:Boolean,default:!1}}}}var T={functional:!0,render:function(t,e){return t(e.props.is||e.props.tag||"div",e.data,e.children)}},k={components:{CustomElement:T}},A=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},I=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),S=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},O=function t(e,n,i){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,n);if(void 0===s){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in s)return s.value;var r=s.get;if(void 0!==r)return r.call(i)},x=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},H=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},L={name:"custom-link",props:{tag:{type:String,default:"a"},event:{type:[String,Array],default:"click"},link:Object},render:function(t){var e=void 0,n={attrs:this.$attrs,on:this.$listeners};return this.$router&&this.link?(e=this.$root.$options.components["router-link"],n.props=w({tag:this.tag},this.link)):e=this.tag,t(e,n,this.$slots.default)}},D={props:{to:[String,Object],exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String},computed:{link:function(){return this.to&&{to:this.to,exact:this.exact,append:this.append,replace:this.replace,activeClass:this.activeClass,exactActiveClass:this.exactActiveClass}}},components:{CustomLink:L}},R={props:{event:String,"event-target":Object,"event-args":Array},methods:{dispatchEvent:function(t){if(this.$emit(t.type),this.event){var e=this.eventTarget||this.$root,n=this.eventArgs||[];e.$emit.apply(e,[this.event].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n)))}}}},F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,t),this.adapter_=e}return I(t,null,[{key:"cssClasses",get:function(){return{}}},{key:"strings",get:function(){return{}}},{key:"numbers",get:function(){return{}}},{key:"defaultAdapter",get:function(){return{}}}]),I(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}(),N=(function(){function t(){A(this,t)}I(t,[{key:"browserSupportsCssVars",value:function(){}},{key:"isUnbounded",value:function(){}},{key:"isSurfaceActive",value:function(){}},{key:"isSurfaceDisabled",value:function(){}},{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"registerResizeHandler",value:function(t){}},{key:"deregisterResizeHandler",value:function(t){}},{key:"updateCssVariable",value:function(t,e){}},{key:"computeBoundingRect",value:function(){}},{key:"getWindowPageOffset",value:function(){}}])}(),{ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded",BG_FOCUSED:"mdc-ripple-upgraded--background-focused",BG_ACTIVE_FILL:"mdc-ripple-upgraded--background-active-fill",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation"}),B={VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top",VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end"},$={PADDING:10,INITIAL_ORIGIN_SCALE:.6,DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150},M=void 0,P=void 0,V={mouseup:"mousedown",pointerup:"pointerdown",touchend:"touchstart",keyup:"keydown",blur:"focus"},U=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.layoutFrame_=0,n.frame_={width:0,height:0},n.activationState_=n.defaultActivationState_(),n.xfDuration_=0,n.initialSize_=0,n.maxRadius_=0,n.listenerInfos_=[{activate:"touchstart",deactivate:"touchend"},{activate:"pointerdown",deactivate:"pointerup"},{activate:"mousedown",deactivate:"mouseup"},{activate:"keydown",deactivate:"keyup"},{focus:"focus",blur:"blur"}],n.listeners_={activate:function(t){return n.activate_(t)},deactivate:function(t){return n.deactivate_(t)},focus:function(){return requestAnimationFrame(function(){return n.adapter_.addClass(e.cssClasses.BG_FOCUSED)})},blur:function(){return requestAnimationFrame(function(){return n.adapter_.removeClass(e.cssClasses.BG_FOCUSED)})}},n.resizeHandler_=function(){return n.layout()},n.unboundedCoords_={left:0,top:0},n.fgScale_=0,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.activationAnimationHasEnded_=!1,n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return N}},{key:"strings",get:function(){return B}},{key:"numbers",get:function(){return $}},{key:"defaultAdapter",get:function(){return{browserSupportsCssVars:function(){},isUnbounded:function(){},isSurfaceActive:function(){},isSurfaceDisabled:function(){},addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},updateCssVariable:function(){},computeBoundingRect:function(){},getWindowPageOffset:function(){}}}}]),I(e,[{key:"isSupported_",value:function(){return this.adapter_.browserSupportsCssVars()}},{key:"defaultActivationState_",value:function(){return{isActivated:!1,hasDeactivationUXRun:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1,activationStartTime:0,activationEvent:null,isProgrammatic:!1}}},{key:"init",value:function(){var t=this;if(this.isSupported_()){this.addEventListeners_();var n=e.cssClasses,i=n.ROOT,s=n.UNBOUNDED;requestAnimationFrame(function(){t.adapter_.addClass(i),t.adapter_.isUnbounded()&&t.adapter_.addClass(s),t.layoutInternal_()})}}},{key:"addEventListeners_",value:function(){var t=this;this.listenerInfos_.forEach(function(e){Object.keys(e).forEach(function(n){t.adapter_.registerInteractionHandler(e[n],t.listeners_[n])})}),this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"activate_",value:function(t){var e=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;n.isActivated||(n.isActivated=!0,n.isProgrammatic=null===t,n.activationEvent=t,n.wasActivatedByPointer=!n.isProgrammatic&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type),n.activationStartTime=Date.now(),requestAnimationFrame(function(){n.wasElementMadeActive=!t||"keydown"!==t.type||e.adapter_.isSurfaceActive(),n.wasElementMadeActive?e.animateActivation_():e.activationState_=e.defaultActivationState_()}))}}},{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activate_(t)}},{key:"animateActivation_",value:function(){var t=this,n=e.strings,i=n.VAR_FG_TRANSLATE_START,s=n.VAR_FG_TRANSLATE_END,a=e.cssClasses,r=a.BG_ACTIVE_FILL,o=a.FG_DEACTIVATION,c=a.FG_ACTIVATION,d=e.numbers.DEACTIVATION_TIMEOUT_MS,l="",u="";if(!this.adapter_.isUnbounded()){var h=this.getFgTranslationCoordinates_(),f=h.startPoint,_=h.endPoint;l=f.x+"px, "+f.y+"px",u=_.x+"px, "+_.y+"px"}this.adapter_.updateCssVariable(i,l),this.adapter_.updateCssVariable(s,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(o),this.adapter_.computeBoundingRect(),this.adapter_.addClass(r),this.adapter_.addClass(c),this.activationTimer_=setTimeout(function(){return t.activationTimerCallback_()},d)}},{key:"getFgTranslationCoordinates_",value:function(){var t=this.activationState_,e=t.activationEvent,n=void 0;return{startPoint:n={x:(n=t.wasActivatedByPointer?function(t,e,n){var i=e.x,s=e.y,a=i+n.left,r=s+n.top,o=void 0,c=void 0;return"touchstart"===t.type?(o=t.changedTouches[0].pageX-a,c=t.changedTouches[0].pageY-r):(o=t.pageX-a,c=t.pageY-r),{x:o,y:c}}(e,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:n.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}}},{key:"runDeactivationUXLogicIfReady_",value:function(){var t=this,n=e.cssClasses.FG_DEACTIVATION,i=this.activationState_,s=i.hasDeactivationUXRun,a=i.isActivated;(s||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout(function(){t.adapter_.removeClass(n)},$.FG_DEACTIVATION_MS))}},{key:"rmBoundedActivationClasses_",value:function(){var t=e.cssClasses,n=t.BG_ACTIVE_FILL,i=t.FG_ACTIVATION;this.adapter_.removeClass(n),this.adapter_.removeClass(i),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()}},{key:"deactivate_",value:function(t){var e=this,n=this.activationState_;if(n.isActivated){if(n.isProgrammatic){var i=w({},n);return requestAnimationFrame(function(){return e.animateDeactivation_(null,i)}),void(this.activationState_=this.defaultActivationState_())}var s=V[t.type]===n.activationEvent.type,a=s;n.wasActivatedByPointer&&(a="mouseup"===t.type);var r=w({},n);requestAnimationFrame(function(){s&&(e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(t,r)),a&&(e.activationState_=e.defaultActivationState_())})}}},{key:"deactivate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deactivate_(t)}},{key:"animateDeactivation_",value:function(t,n){var i=n.wasActivatedByPointer,s=n.wasElementMadeActive,a=e.cssClasses.BG_FOCUSED;(i||s)&&(this.adapter_.removeClass(a),this.runDeactivationUXLogicIfReady_())}},{key:"destroy",value:function(){var t=this;if(this.isSupported_()){this.removeEventListeners_();var n=e.cssClasses,i=n.ROOT,s=n.UNBOUNDED;requestAnimationFrame(function(){t.adapter_.removeClass(i),t.adapter_.removeClass(s),t.removeCssVars_()})}}},{key:"removeEventListeners_",value:function(){var t=this;this.listenerInfos_.forEach(function(e){Object.keys(e).forEach(function(n){t.adapter_.deregisterInteractionHandler(e[n],t.listeners_[n])})}),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"removeCssVars_",value:function(){var t=this,n=e.strings;Object.keys(n).forEach(function(e){0===e.indexOf("VAR_")&&t.adapter_.updateCssVariable(n[e],null)})}},{key:"layout",value:function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){t.layoutInternal_(),t.layoutFrame_=0})}},{key:"layoutInternal_",value:function(){this.frame_=this.adapter_.computeBoundingRect();var t=Math.max(this.frame_.height,this.frame_.width),n=Math.sqrt(Math.pow(this.frame_.width,2)+Math.pow(this.frame_.height,2));this.initialSize_=t*e.numbers.INITIAL_ORIGIN_SCALE,this.maxRadius_=n+e.numbers.PADDING,this.fgScale_=this.maxRadius_/this.initialSize_,this.xfDuration_=1e3*Math.sqrt(this.maxRadius_/1024),this.updateLayoutCssVars_()}},{key:"updateLayoutCssVars_",value:function(){var t=e.strings,n=t.VAR_FG_SIZE,i=t.VAR_LEFT,s=t.VAR_TOP,a=t.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))}}]),e}(),z=function(t){function e(t,n){return A(this,e),H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w({browserSupportsCssVars:function(){return i(window)},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isUnbounded:function(){return!1},computeBoundingRect:function(){return t.$el.getBoundingClientRect()},isSurfaceActive:function(){return t.$el[e.MATCHES](":active")},isSurfaceDisabled:function(){return t.disabled},addClass:function(e){t.$set(t.classes,e,!0)},removeClass:function(e){t.$delete(t.classes,e)},registerInteractionHandler:function(e,n){t.$el.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){t.$el.removeEventListener(e,n)},updateCssVariable:function(e,n){t.$set(t.styles,e,n)}},n)))}return x(e,U),I(e,null,[{key:"isSurfaceActive",value:function(t){return t[e.MATCHES](":active")}},{key:"MATCHES",get:function(){return e._matches||(e._matches=a(HTMLElement.prototype))}}]),e}(),K=e({mdcRipple:{render:function(){var t=this.$createElement;return(this._self._c||t)("custom-element",{staticClass:"mdc-ripple",attrs:{tag:this.tag,classes:this.classes,styles:this.styles}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-ripple",mixins:[k],props:{tag:String},data:function(){return{classes:{},styles:{}}},mounted:function(){this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.ripple.destroy()}}}),X={render:function(){var t=this.$createElement;return(this._self._c||t)("custom-element",{ref:"root",staticClass:"mdc-button",class:this.classes,style:this.styles,attrs:{tag:this.isLink?"a":"button",href:this.isLink&&this.href,role:this.isLink?"button":void 0,disabled:this.disabled},on:{click:this.dispatchEvent}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-button",mixins:[R,k],props:{href:String,disabled:Boolean,raised:Boolean,unelevated:Boolean,stroked:Boolean,dense:Boolean,compact:Boolean},data:function(){return{classes:{"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--stroked":this.stroked,"mdc-button--dense":this.dense,"mdc-button--compact":this.compact},styles:{}}},computed:{isLink:function(){return this.href&&!this.disabled}},watch:{raised:function(){this.$set(this.classes,"mdc-button--raised",this.raised)},unelevated:function(){this.$set(this.classes,"mdc-button--unelevated",this.unelevated)},stroked:function(){this.$set(this.classes,"mdc-button--stroked",this.stroked)},dense:function(){this.$set(this.classes,"mdc-button--dense",this.dense)},compact:function(){this.$set(this.classes,"mdc-button--compact",this.compact)}},mounted:function(){this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.ripple.destroy()}},G=e({mdcButton:X}),W={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-card",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card",props:{dark:Boolean},data:function(){return{classes:{"mdc-card--theme-dark":this.dark}}}},j={render:function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"mdc-card-media mdc-card__media",style:this.styles,attrs:{classes:{"mdc-theme--dark":this.dark}}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-media",props:{src:String,size:String,position:String,height:[String,Number],dark:Boolean},computed:{styles:function(){var t={backgroundImage:"url("+this.src+")",backgroundSize:this.size,backgroundPosition:this.position};return this.height&&(t.height=this.height+"px"),t}}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"mdc-card-header mdc-card__primary"},[this._t("default",[this.title?e("h1",{staticClass:"mdc-card__title",class:{"mdc-card__title--large":this.largeTitle}},[this._v(" "+this._s(this.title)+" ")]):this._e(),this._v(" "),this.subtitle?e("h2",{staticClass:"mdc-card__subtitle"},[this._v(" "+this._s(this.subtitle)+" ")]):this._e()])],2)},staticRenderFns:[],name:"mdc-card-header",props:{title:String,subtitle:String,"large-title":{type:Boolean,default:!0}}},Y={render:function(){var t=this.$createElement;return(this._self._c||t)("h1",{staticClass:"mdc-card-title mdc-card__title",class:{"mdc-card__title--large":this.large}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-title",props:{large:Boolean}},J={render:function(){var t=this.$createElement;return(this._self._c||t)("img",{staticClass:"mdc-card-img mdc-card__media-item",class:this.classes,attrs:{src:this.src}})},staticRenderFns:[],name:"mdc-card-img",props:{src:{type:String,required:!0},mult:{type:[Number,String],validator:function(t){return-1!==[1,1.5,2,3].indexOf(Number(t))}}},computed:{classes:function(){var t=Number(this.mult);return{"mdc-card__media-item--1dot5x":1.5===t,"mdc-card__media-item--2x":2===t,"mdc-card__media-item--3x":3===t}}}},Z={render:function(){var t=this.$createElement;return(this._self._c||t)("custom-element",{ref:"root",staticClass:"mdc-card-action-button",class:this.classes,style:this.styles,attrs:{tag:this.isLink?"a":"button",href:this.isLink&&this.href,role:this.isLink?"button":void 0,disabled:this.disabled},on:{click:this.dispatchEvent}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-action-button",mixins:[R,k],props:{href:String,disabled:Boolean},data:function(){return{classes:{"mdc-button":!0,"mdc-button--compact":!0,"mdc-card__action":!0},styles:{}}},computed:{isLink:function(){return this.href&&!this.disabled}},mounted:function(){this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.ripple.destroy()}},Q=e({mdcCard:W,mdcCardMedia:j,mdcCardHeader:q,mdcCardTitle:Y,mdcCardSubtitle:{render:function(){var t=this.$createElement;return(this._self._c||t)("h2",{staticClass:"mdc-card-subtitle mdc-card__subtitle"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-subtitle"},mdcCardText:{render:function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"mdc-card-text mdc-card__supporting-text"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-text"},mdcCardHorizontal:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-card-horizontal mdc-card__horizontal-block"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-horizontal"},mdcCardImg:J,mdcCardActions:{render:function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"mdc-card-actions",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-card-actions",props:{vertical:Boolean},components:{"mdc-card-action-button":Z},data:function(){return{classes:{"mdc-card__actions":!0,"mdc-card__actions--vertical":this.vertical}}}},mdcCardActionButton:Z}),tt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;A(this,t),this.root_=e;for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];this.initialize.apply(this,s),this.foundation_=void 0===n?this.getDefaultFoundation():n,this.foundation_.init(),this.initialSyncWithDOM()}return I(t,null,[{key:"attachTo",value:function(e){return new t(e,new F)}}]),I(t,[{key:"initialize",value:function(){}},{key:"getDefaultFoundation",value:function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}},{key:"initialSyncWithDOM",value:function(){}},{key:"destroy",value:function(){this.foundation_.destroy()}},{key:"listen",value:function(t,e){this.root_.addEventListener(t,e)}},{key:"unlisten",value:function(t,e){this.root_.removeEventListener(t,e)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0;"function"==typeof CustomEvent?i=new CustomEvent(t,{detail:e,bubbles:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,n,!1,e),this.root_.dispatchEvent(i)}}]),t}(),et=(function(t){function e(){var t;A(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=H(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.disabled=!1,a.unbounded_,a}x(e,tt),I(e,[{key:"activate",value:function(){this.foundation_.activate()}},{key:"deactivate",value:function(){this.foundation_.deactivate()}},{key:"layout",value:function(){this.foundation_.layout()}},{key:"getDefaultFoundation",value:function(){return new U(e.createAdapter(this))}},{key:"initialSyncWithDOM",value:function(){this.unbounded="mdcRippleIsUnbounded"in this.root_.dataset}},{key:"unbounded",get:function(){return this.unbounded_},set:function(t){var e=U.cssClasses.UNBOUNDED;this.unbounded_=Boolean(t),this.unbounded_?this.root_.classList.add(e):this.root_.classList.remove(e)}}],[{key:"attachTo",value:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isUnbounded,i=void 0===n?void 0:n,s=new e(t);return void 0!==i&&(s.unbounded=i),s}},{key:"createAdapter",value:function(t){var e=a(HTMLElement.prototype);return{browserSupportsCssVars:function(){return i(window)},isUnbounded:function(){return t.unbounded},isSurfaceActive:function(){return t.root_[e](":active")},isSurfaceDisabled:function(){return t.disabled},addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n,s())},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n,s())},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},updateCssVariable:function(e,n){return t.root_.style.setProperty(e,n)},computeBoundingRect:function(){return t.root_.getBoundingClientRect()},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}}}}])}(),function(){function t(){A(this,t)}I(t,[{key:"ripple",get:function(){}}])}(),function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerAnimationEndHandler",value:function(t){}},{key:"deregisterAnimationEndHandler",value:function(t){}},{key:"registerChangeHandler",value:function(t){}},{key:"deregisterChangeHandler",value:function(t){}},{key:"getNativeControl",value:function(){}},{key:"forceLayout",value:function(){}},{key:"isAttachedToDOM",value:function(){}}])}(),{UPGRADED:"mdc-checkbox--upgraded",CHECKED:"mdc-checkbox--checked",INDETERMINATE:"mdc-checkbox--indeterminate",DISABLED:"mdc-checkbox--disabled",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked"}),nt={NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_UNCHECKED:"unchecked",TRANSITION_STATE_INDETERMINATE:"indeterminate"},it={ANIM_END_LATCH_MS:100},st=["checked","indeterminate"],at=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.currentCheckState_=nt.TRANSITION_STATE_INIT,n.currentAnimationClass_="",n.animEndLatchTimer_=0,n.animEndHandler_=function(){clearTimeout(n.animEndLatchTimer_),n.animEndLatchTimer_=setTimeout(function(){n.adapter_.removeClass(n.currentAnimationClass_),n.adapter_.deregisterAnimationEndHandler(n.animEndHandler_)},it.ANIM_END_LATCH_MS)},n.changeHandler_=function(){return n.transitionCheckState_()},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return et}},{key:"strings",get:function(){return nt}},{key:"numbers",get:function(){return it}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerAnimationEndHandler:function(){},deregisterAnimationEndHandler:function(){},registerChangeHandler:function(){},deregisterChangeHandler:function(){},getNativeControl:function(){},forceLayout:function(){},isAttachedToDOM:function(){}}}}]),I(e,[{key:"init",value:function(){this.currentCheckState_=this.determineCheckState_(this.getNativeControl_()),this.adapter_.addClass(et.UPGRADED),this.adapter_.registerChangeHandler(this.changeHandler_),this.installPropertyChangeHooks_()}},{key:"destroy",value:function(){this.adapter_.deregisterChangeHandler(this.changeHandler_),this.uninstallPropertyChangeHooks_()}},{key:"isChecked",value:function(){return this.getNativeControl_().checked}},{key:"setChecked",value:function(t){this.getNativeControl_().checked=t}},{key:"isIndeterminate",value:function(){return this.getNativeControl_().indeterminate}},{key:"setIndeterminate",value:function(t){this.getNativeControl_().indeterminate=t}},{key:"isDisabled",value:function(){return this.getNativeControl_().disabled}},{key:"setDisabled",value:function(t){this.getNativeControl_().disabled=t,t?this.adapter_.addClass(et.DISABLED):this.adapter_.removeClass(et.DISABLED)}},{key:"getValue",value:function(){return this.getNativeControl_().value}},{key:"setValue",value:function(t){this.getNativeControl_().value=t}},{key:"installPropertyChangeHooks_",value:function(){var t=this,e=this.getNativeControl_(),n=Object.getPrototypeOf(e);st.forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);if(r(s)){var a={get:s.get,set:function(n){s.set.call(e,n),t.transitionCheckState_()},configurable:s.configurable,enumerable:s.enumerable};Object.defineProperty(e,i,a)}})}},{key:"uninstallPropertyChangeHooks_",value:function(){var t=this.getNativeControl_(),e=Object.getPrototypeOf(t);st.forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);r(i)&&Object.defineProperty(t,n,i)})}},{key:"transitionCheckState_",value:function(){var t=this.adapter_.getNativeControl();if(t){var e=this.currentCheckState_,n=this.determineCheckState_(t);e!==n&&(this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,n),this.currentCheckState_=n,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.adapter_.registerAnimationEndHandler(this.animEndHandler_)))}}},{key:"determineCheckState_",value:function(t){var e=nt.TRANSITION_STATE_INDETERMINATE,n=nt.TRANSITION_STATE_CHECKED,i=nt.TRANSITION_STATE_UNCHECKED;return t.indeterminate?e:t.checked?n:i}},{key:"getTransitionAnimationClass_",value:function(t,n){var i=nt.TRANSITION_STATE_INIT,s=nt.TRANSITION_STATE_CHECKED,a=nt.TRANSITION_STATE_UNCHECKED,r=e.cssClasses,o=r.ANIM_UNCHECKED_CHECKED,c=r.ANIM_UNCHECKED_INDETERMINATE,d=r.ANIM_CHECKED_UNCHECKED,l=r.ANIM_CHECKED_INDETERMINATE,u=r.ANIM_INDETERMINATE_CHECKED,h=r.ANIM_INDETERMINATE_UNCHECKED;switch(t){case i:if(n===a)return"";case a:return n===s?o:c;case s:return n===a?d:l;default:return n===s?u:h}}},{key:"getNativeControl_",value:function(){return this.adapter_.getNativeControl()||{checked:!1,indeterminate:!1,disabled:!1,value:null}}}]),e}(),rt={animationstart:{noPrefix:"animationstart",webkitPrefix:"webkitAnimationStart",styleProperty:"animation"},animationend:{noPrefix:"animationend",webkitPrefix:"webkitAnimationEnd",styleProperty:"animation"},animationiteration:{noPrefix:"animationiteration",webkitPrefix:"webkitAnimationIteration",styleProperty:"animation"},transitionend:{noPrefix:"transitionend",webkitPrefix:"webkitTransitionEnd",styleProperty:"transition"}},ot={animation:{noPrefix:"animation",webkitPrefix:"-webkit-animation"},transform:{noPrefix:"transform",webkitPrefix:"-webkit-transform"},transition:{noPrefix:"transition",webkitPrefix:"-webkit-transition"}},ct=["transform","WebkitTransform","MozTransform","OTransform","MSTransform"],dt=e({mdcCheckbox:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-checkbox-wrapper",class:this.formFieldClasses},[e("div",{ref:"root",staticClass:"mdc-checkbox",class:this.classes,style:this.styles},[e("input",{ref:"control",staticClass:"mdc-checkbox__native-control",attrs:{id:this._uid,type:"checkbox"},domProps:{value:this.value},on:{change:this.onChange}}),this._v(" "),e("div",{staticClass:"mdc-checkbox__background"},[e("svg",{staticClass:"mdc-checkbox__checkmark",attrs:{viewBox:"0 0 24 24"}},[e("path",{staticClass:"mdc-checkbox__checkmark__path",attrs:{fill:"none",stroke:"white",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}})]),this._v(" "),e("div",{staticClass:"mdc-checkbox__mixedmark"})])]),this._v(" "),e("div",{ref:"label"},[this.label?e("label",{attrs:{for:this._uid}},[this._v(this._s(this.label))]):this._e()])])},staticRenderFns:[],name:"mdc-checkbox",model:{prop:"checked",event:"change"},props:{checked:Boolean,indeterminate:Boolean,disabled:Boolean,label:String,"align-end":Boolean,value:{type:String,default:function(){return"on"}}},data:function(){return{styles:{},classes:{}}},computed:{formFieldClasses:function(){return{"mdc-form-field":this.label,"mdc-form-field--align-end":this.label&&this.alignEnd}}},watch:{checked:function(t){this.foundation.setChecked(t)},disabled:function(t){this.foundation.setDisabled(t)},indeterminate:function(t){this.foundation.setIndeterminate(t)}},mounted:function(){var t=this;this.foundation=new at({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},registerAnimationEndHandler:function(e){return t.$refs.root.addEventListener(c(window,"animationend"),e)},deregisterAnimationEndHandler:function(e){return t.$refs.root.removeEventListener(c(window,"animationend"),e)},registerChangeHandler:function(e){return t.$refs.control.addEventListener("change",e)},deregisterChangeHandler:function(e){return t.$refs.control.removeEventListener("change",e)},getNativeControl:function(){return t.$refs.control},forceLayout:function(){return t.$forceUpdate()},isAttachedToDOM:function(){return Boolean(t.$el.parentNode)}}),this.foundation.init(),this.foundation.setChecked(this.checked),this.foundation.setDisabled(this.disabled),this.foundation.setIndeterminate(this.indeterminate),this.ripple=new z(this,{isUnbounded:function(){return!0},isSurfaceActive:function(){return z.isSurfaceActive(t.$refs.control)},registerInteractionHandler:function(e,n){t.$refs.root.addEventListener(e,n),t.$refs.label.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){t.$refs.root.removeEventListener(e,n),t.$refs.label.removeEventListener(e,n)},computeBoundingRect:function(){var e=t.$refs.control.getBoundingClientRect(),n=e.left,i=e.top;return{top:i,left:n,right:n+40,bottom:i+40,width:40,height:40}}}),this.ripple.init()},beforeDestroy:function(){this.ripple.destroy(),this.foundation.destroy()},methods:{onChange:function(){this.$emit("update:indeterminate",this.foundation.isIndeterminate()),this.$emit("change",this.foundation.isChecked())}}}}),lt={ROOT:"mdc-dialog",OPEN:"mdc-dialog--open",ANIMATING:"mdc-dialog--animating",BACKDROP:"mdc-dialog__backdrop",SCROLL_LOCK:"mdc-dialog-scroll-lock",ACCEPT_BTN:"mdc-dialog__footer__button--accept",CANCEL_BTN:"mdc-dialog__footer__button--cancel"},ut={OPEN_DIALOG_SELECTOR:".mdc-dialog--open",DIALOG_SURFACE_SELECTOR:".mdc-dialog__surface",ACCEPT_SELECTOR:".mdc-dialog__footer__button--accept",ACCEPT_EVENT:"MDCDialog:accept",CANCEL_EVENT:"MDCDialog:cancel"},ht=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.isOpen_=!1,n.componentClickHandler_=function(t){n.adapter_.eventTargetHasClass(t.target,lt.BACKDROP)&&n.cancel(!0)},n.dialogClickHandler_=function(t){return n.handleDialogClick_(t)},n.documentKeydownHandler_=function(t){(t.key&&"Escape"===t.key||27===t.keyCode)&&n.cancel(!0)},n.transitionEndHandler_=function(t){return n.handleTransitionEnd_(t)},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return lt}},{key:"strings",get:function(){return ut}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},addBodyClass:function(){},removeBodyClass:function(){},eventTargetHasClass:function(){return!1},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerSurfaceInteractionHandler:function(){},deregisterSurfaceInteractionHandler:function(){},registerDocumentKeydownHandler:function(){},deregisterDocumentKeydownHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){},notifyAccept:function(){},notifyCancel:function(){},trapFocusOnSurface:function(){},untrapFocusOnSurface:function(){},isDialog:function(){return!1},layoutFooterRipples:function(){}}}}]),I(e,[{key:"destroy",value:function(){this.isOpen_&&(this.adapter_.deregisterSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.adapter_.untrapFocusOnSurface(),this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_),this.adapter_.removeClass(e.cssClasses.ANIMATING),this.adapter_.removeClass(e.cssClasses.OPEN),this.enableScroll_())}},{key:"open",value:function(){this.isOpen_=!0,this.disableScroll_(),this.adapter_.registerDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.registerSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.registerInteractionHandler("click",this.componentClickHandler_),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING),this.adapter_.addClass(e.cssClasses.OPEN)}},{key:"close",value:function(){this.isOpen_=!1,this.adapter_.deregisterSurfaceInteractionHandler("click",this.dialogClickHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.adapter_.untrapFocusOnSurface(),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING),this.adapter_.removeClass(e.cssClasses.OPEN)}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"accept",value:function(t){t&&this.adapter_.notifyAccept(),this.close()}},{key:"cancel",value:function(t){t&&this.adapter_.notifyCancel(),this.close()}},{key:"handleDialogClick_",value:function(t){var e=t.target;this.adapter_.eventTargetHasClass(e,lt.ACCEPT_BTN)?this.accept(!0):this.adapter_.eventTargetHasClass(e,lt.CANCEL_BTN)&&this.cancel(!0)}},{key:"handleTransitionEnd_",value:function(t){this.adapter_.isDialog(t.target)&&(this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_),this.adapter_.removeClass(e.cssClasses.ANIMATING),this.isOpen_?(this.adapter_.trapFocusOnSurface(),this.adapter_.layoutFooterRipples()):this.enableScroll_())}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(lt.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(lt.SCROLL_LOCK)}}]),e}(),ft=function(t,e){e=e||{};var n=t.ownerDocument||t,i=[],s=[],a=function(t){function e(i,s){if(i===t.documentElement)return!1;for(var a=0,r=n.length;a<r;a++)if(n[a][0]===i)return n[a][1];var o=!1;return"none"===(s=s||t.defaultView.getComputedStyle(i)).display?o=!0:i.parentNode&&(o=e(i.parentNode)),n.push([i,o]),o}var n=[];return function(n){if(n===t.documentElement)return!1;var i=t.defaultView.getComputedStyle(n);return!!e(n,i)||"hidden"===i.visibility}}(n),r=["input","select","a[href]","textarea","button","[tabindex]"],o=t.querySelectorAll(r);if(e.includeContainer){var c=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;r.some(function(e){return c.call(t,e)})&&(o=Array.prototype.slice.apply(o)).unshift(t)}for(var d,l,u=0,h=o.length;u<h;u++)d=o[u],(l=parseInt(d.getAttribute("tabindex"),10)||d.tabIndex)<0||"INPUT"===d.tagName&&"hidden"===d.type||d.disabled||a(d,n)||(0===l?i.push(d):s.push({index:u,tabIndex:l,node:d}));var f=s.sort(function(t,e){return t.tabIndex===e.tabIndex?t.index-e.index:t.tabIndex-e.tabIndex}).map(function(t){return t.node});return Array.prototype.push.apply(f,i),f},_t=null,mt=function(t,e){function n(t){if(p){var e={returnFocus:t&&void 0!==t.returnFocus?t.returnFocus:b.returnFocusOnDeactivate,onDeactivate:t&&void 0!==t.onDeactivate?t.onDeactivate:b.onDeactivate};return s(),e.onDeactivate&&e.onDeactivate(),e.returnFocus&&setTimeout(function(){l(m)},0),p=!1,v=!1,this}}function i(){if(p)return _t&&_t.pause(),_t=C,u(),l(function(){var t;if(!(t=null!==a("initialFocus")?a("initialFocus"):y.contains(document.activeElement)?document.activeElement:h[0]||a("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return t}()),document.addEventListener("focus",c,!0),document.addEventListener("click",o,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("touchstart",r,!0),document.addEventListener("keydown",d,!0),C}function s(){if(p&&_t===C)return document.removeEventListener("focus",c,!0),document.removeEventListener("click",o,!0),document.removeEventListener("mousedown",r,!0),document.removeEventListener("touchstart",r,!0),document.removeEventListener("keydown",d,!0),_t=null,C}function a(t){var e=b[t],n=e;if(!e)return null;if("string"==typeof e&&!(n=document.querySelector(e)))throw new Error("`"+t+"` refers to no known node");if("function"==typeof e&&!(n=e()))throw new Error("`"+t+"` did not return a node");return n}function r(t){b.clickOutsideDeactivates&&!y.contains(t.target)&&n({returnFocus:!1})}function o(t){b.clickOutsideDeactivates||y.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation())}function c(t){y.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof t.target.blur&&t.target.blur(),g&&function(t){if(t.shiftKey)return l(_);l(f)}(g))}function d(t){"Tab"!==t.key&&9!==t.keyCode||function(t){if(u(),t.target.hasAttribute("tabindex")&&Number(t.target.getAttribute("tabindex"))<0)return g=t;t.preventDefault();var e=h.indexOf(t.target);t.shiftKey?t.target===f||-1===h.indexOf(t.target)?l(_):l(h[e-1]):t.target===_?l(f):l(h[e+1])}(t),!1!==b.escapeDeactivates&&function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&n()}function u(){h=ft(y),f=h[0],_=h[h.length-1]}var h=[],f=null,_=null,m=null,p=!1,v=!1,g=null,y="string"==typeof t?document.querySelector(t):t,b=e||{};b.returnFocusOnDeactivate=!e||void 0===e.returnFocusOnDeactivate||e.returnFocusOnDeactivate,b.escapeDeactivates=!e||void 0===e.escapeDeactivates||e.escapeDeactivates;var C={activate:function(t){if(!p){var e={onActivate:t&&void 0!==t.onActivate?t.onActivate:b.onActivate};return p=!0,v=!1,m=document.activeElement,e.onActivate&&e.onActivate(),i(),C}},deactivate:n,pause:function(){!v&&p&&(v=!0,s())},unpause:function(){v&&p&&(v=!1,i())}};return C},pt=e({mdcDialog:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("aside",{ref:"root",staticClass:"mdc-dialog",class:this.classes,style:this.styles,attrs:{role:"alertdialog","aria-labelledby":"label"+this._uid,"aria-describedby":"desc"+this._uid}},[e("div",{ref:"surface",staticClass:"mdc-dialog__surface",class:this.surfaceClasses},[e("header",{staticClass:"mdc-dialog__header"},[e("h2",{staticClass:"mdc-dialog__header__title",attrs:{id:"label"+this._uid}},[this._v(" "+this._s(this.title)+" ")])]),this._v(" "),e("section",{staticClass:"mdc-dialog__body",class:this.bodyClasses,attrs:{id:"desc"+this._uid}},[this._t("default")],2),this._v(" "),e("footer",{staticClass:"mdc-dialog__footer"},[this.cancel?e("mdcButton",{ref:"cancel",staticClass:"mdc-dialog__footer__button mdc-dialog__footer__button--cancel"},[this._v(" "+this._s(this.cancel)+" ")]):this._e(),this._v(" "),e("mdcButton",{ref:"accept",staticClass:"mdc-dialog__footer__button mdc-dialog__footer__button--accept"},[this._v(" "+this._s(this.accept)+" ")])],1)]),this._v(" "),e("div",{staticClass:"mdc-dialog__backdrop"})])},staticRenderFns:[],name:"mdc-dialog",props:{title:{type:String,required:!0},accept:{type:String,default:"Ok"},cancel:{type:String,default:"Cancel"},scrollable:Boolean,dark:Boolean},components:{mdcButton:X},data:function(){return{classes:{"mdc-theme--dark":this.dark},styles:{},surfaceClasses:{},bodyClasses:{"mdc-dialog__body--scrollable":this.scrollable}}},mounted:function(){var t=this;this.focusTrap=function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt)(t,{initialFocus:e,clickOutsideDeactivates:!0})}(this.$refs.surface,this.$refs.accept),this.foundation=new ht({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},registerInteractionHandler:function(e,n){return t.$refs.root.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.$refs.root.removeEventListener(e,n)},registerSurfaceInteractionHandler:function(e,n){return t.$refs.surface.addEventListener(e,n)},deregisterSurfaceInteractionHandler:function(e,n){return t.$refs.surface.removeEventListener(e,n)},registerDocumentKeydownHandler:function(t){return document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){return document.removeEventListener("keydown",t)},registerTransitionEndHandler:function(e){return t.$refs.surface.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){return t.$refs.surface.removeEventListener("transitionend",e)},notifyAccept:function(){return t.$emit("accept")},notifyCancel:function(){return t.$emit("cancel")},trapFocusOnSurface:function(){return t.focusTrap.activate()},untrapFocusOnSurface:function(){return t.focusTrap.deactivate()},isDialog:function(e){return t.$refs.surface===e},layoutFooterRipples:function(){t.$refs.accept.ripple.layout(),t.cancel&&t.$refs.cancel.ripple.layout()}}),this.foundation.init()},beforeDestroy:function(){this.foundation.destroy()},methods:{show:function(){this.foundation.open()},close:function(){this.foundation.close()}}}}),vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"mdc-permanent-drawer mdc-typography"},[this.toolbarSpacer?e("div",{staticClass:"mdc-permanent-drawer__toolbar-spacer"}):this._e(),this._v(" "),e("nav",{staticClass:"mdc-permanent-drawer__content"},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-permanent-drawer",props:{"toolbar-spacer":Boolean}},gt="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]",yt=function(t){function e(t,n,i,s){A(this,e);var a=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return a.rootCssClass_=n,a.animatingCssClass_=i,a.openCssClass_=s,a.transitionEndHandler_=function(t){return a.handleTransitionEnd_(t)},a.inert_=!1,a.componentTouchStartHandler_=function(t){return a.handleTouchStart_(t)},a.componentTouchMoveHandler_=function(t){return a.handleTouchMove_(t)},a.componentTouchEndHandler_=function(t){return a.handleTouchEnd_(t)},a.documentKeydownHandler_=function(t){(t.key&&"Escape"===t.key||27===t.keyCode)&&a.close()},a}return x(e,F),I(e,null,[{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},hasNecessaryDom:function(){return!1},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerDrawerInteractionHandler:function(){},deregisterDrawerInteractionHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){},registerDocumentKeydownHandler:function(){},deregisterDocumentKeydownHandler:function(){},setTranslateX:function(){},getFocusableElements:function(){},saveElementTabState:function(){},restoreElementTabState:function(){},makeElementUntabbable:function(){},notifyOpen:function(){},notifyClose:function(){},isRtl:function(){return!1},getDrawerWidth:function(){return 0}}}}]),I(e,[{key:"init",value:function(){var t=this.rootCssClass_,e=this.openCssClass_;if(!this.adapter_.hasClass(t))throw new Error(t+" class required in root element.");if(!this.adapter_.hasNecessaryDom())throw new Error("Required DOM nodes missing in "+t+" component.");this.adapter_.hasClass(e)?this.isOpen_=!0:(this.detabinate_(),this.isOpen_=!1),this.adapter_.registerDrawerInteractionHandler("touchstart",this.componentTouchStartHandler_),this.adapter_.registerInteractionHandler("touchmove",this.componentTouchMoveHandler_),this.adapter_.registerInteractionHandler("touchend",this.componentTouchEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterDrawerInteractionHandler("touchstart",this.componentTouchStartHandler_),this.adapter_.deregisterInteractionHandler("touchmove",this.componentTouchMoveHandler_),this.adapter_.deregisterInteractionHandler("touchend",this.componentTouchEndHandler_),this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_)}},{key:"open",value:function(){this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.registerDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.addClass(this.animatingCssClass_),this.adapter_.addClass(this.openCssClass_),this.retabinate_(),this.isOpen_||this.adapter_.notifyOpen(),this.isOpen_=!0}},{key:"close",value:function(){this.adapter_.deregisterDocumentKeydownHandler(this.documentKeydownHandler_),this.adapter_.registerTransitionEndHandler(this.transitionEndHandler_),this.adapter_.addClass(this.animatingCssClass_),this.adapter_.removeClass(this.openCssClass_),this.detabinate_(),this.isOpen_&&this.adapter_.notifyClose(),this.isOpen_=!1}},{key:"isOpen",value:function(){return this.isOpen_}},{key:"detabinate_",value:function(){if(!this.inert_){var t=this.adapter_.getFocusableElements();if(t)for(var e=0;e<t.length;e++)this.adapter_.saveElementTabState(t[e]),this.adapter_.makeElementUntabbable(t[e]);this.inert_=!0}}},{key:"retabinate_",value:function(){if(this.inert_){var t=this.adapter_.getFocusableElements();if(t)for(var e=0;e<t.length;e++)this.adapter_.restoreElementTabState(t[e]);this.inert_=!1}}},{key:"handleTouchStart_",value:function(t){this.adapter_.hasClass(this.openCssClass_)&&(t.pointerType&&"touch"!==t.pointerType||(this.direction_=this.adapter_.isRtl()?-1:1,this.drawerWidth_=this.adapter_.getDrawerWidth(),this.startX_=t.touches?t.touches[0].pageX:t.pageX,this.currentX_=this.startX_,this.updateRaf_=requestAnimationFrame(this.updateDrawer_.bind(this))))}},{key:"handleTouchMove_",value:function(t){t.pointerType&&"touch"!==t.pointerType||(this.currentX_=t.touches?t.touches[0].pageX:t.pageX)}},{key:"handleTouchEnd_",value:function(t){t.pointerType&&"touch"!==t.pointerType||(this.prepareForTouchEnd_(),Math.abs(this.newPosition_/this.drawerWidth_)>=.5?this.close():this.open())}},{key:"prepareForTouchEnd_",value:function(){cancelAnimationFrame(this.updateRaf_),this.adapter_.setTranslateX(null)}},{key:"updateDrawer_",value:function(){this.updateRaf_=requestAnimationFrame(this.updateDrawer_.bind(this)),this.adapter_.setTranslateX(this.newPosition_)}},{key:"isRootTransitioningEventTarget_",value:function(){return!1}},{key:"handleTransitionEnd_",value:function(t){this.isRootTransitioningEventTarget_(t.target)&&(this.adapter_.removeClass(this.animatingCssClass_),this.adapter_.deregisterTransitionEndHandler(this.transitionEndHandler_))}},{key:"newPosition_",get:function(){return 1===this.direction_?Math.min(0,this.currentX_-this.startX_):Math.max(0,this.currentX_-this.startX_)}}]),e}(),bt={ROOT:"mdc-persistent-drawer",OPEN:"mdc-persistent-drawer--open",ANIMATING:"mdc-persistent-drawer--animating"},Ct={DRAWER_SELECTOR:".mdc-persistent-drawer__drawer",FOCUSABLE_ELEMENTS:gt,OPEN_EVENT:"MDCPersistentDrawer:open",CLOSE_EVENT:"MDCPersistentDrawer:close"},Et=function(t){function e(t){return A(this,e),H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t),e.cssClasses.ROOT,e.cssClasses.ANIMATING,e.cssClasses.OPEN))}return x(e,yt),I(e,null,[{key:"cssClasses",get:function(){return bt}},{key:"strings",get:function(){return Ct}},{key:"defaultAdapter",get:function(){return w(yt.defaultAdapter,{isDrawer:function(){return!1}})}}]),I(e,[{key:"isRootTransitioningEventTarget_",value:function(t){return this.adapter_.isDrawer(t)}}]),e}(),Tt="data-mdc-tabindex",kt="data-mdc-tabindex-handled",At=void 0,It=void 0,St={render:function(){var t=this.$createElement,e=this._self._c||t;return e("aside",{staticClass:"mdc-persistent-drawer mdc-typography",class:this.classes},[this.toolbarSpacer?e("div",{staticClass:"mdc-persistent-drawer__toolbar-spacer"}):this._e(),this._v(" "),e("nav",{ref:"drawer",staticClass:"mdc-persistent-drawer__drawer"},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-persistent-drawer",model:{prop:"open",event:"change"},props:{"toolbar-spacer":Boolean,open:Boolean},data:function(){return{classes:{}}},watch:{open:function(){this._refresh()}},methods:{_refresh:function(){this.open?this.foundation&&this.foundation.open():this.foundation&&this.foundation.close()}},mounted:function(){var t=this,e=Et.strings.FOCUSABLE_ELEMENTS;this.foundation=new Et({addClass:function(e){t.$set(t.classes,e,!0)},removeClass:function(e){t.$delete(t.classes,e)},hasClass:function(e){return t.$el.classList.contains(e)},hasNecessaryDom:function(){return!!t.$refs.drawer},registerInteractionHandler:function(e,n){t.$el.addEventListener(u(e),n,f())},deregisterInteractionHandler:function(e,n){t.$el.removeEventListener(u(e),n,f())},registerDrawerInteractionHandler:function(e,n){t.$refs.drawer.addEventListener(u(e),n)},deregisterDrawerInteractionHandler:function(e,n){t.$refs.drawer.removeEventListener(u(e),n)},registerTransitionEndHandler:function(e){t.$refs.drawer.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){t.$refs.drawer.removeEventListener("transitionend",e)},registerDocumentKeydownHandler:function(t){document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){document.removeEventListener("keydown",t)},getDrawerWidth:function(){return t.$refs.drawer.offsetWidth},setTranslateX:function(e){t.$refs.drawer.style.setProperty(h(),null===e?null:"translateX("+e+"px)")},getFocusableElements:function(){return t.$refs.drawer.querySelectorAll(e)},saveElementTabState:function(t){_(t)},restoreElementTabState:function(t){m(t)},makeElementUntabbable:function(t){t.setAttribute("tabindex",-1)},notifyOpen:function(){t.$emit("change",!0),t.$emit("open")},notifyClose:function(){t.$emit("change",!1),t.$emit("close")},isRtl:function(){return"rtl"===getComputedStyle(t.$el).getPropertyValue("direction")},isDrawer:function(e){return e===t.$refs.drawer}}),this.foundation&&this.foundation.init(),this._refresh()},beforeDestroy:function(){this.foundation&&this.foundation.destroy(),this.foundation=null}},wt={ROOT:"mdc-temporary-drawer",OPEN:"mdc-temporary-drawer--open",ANIMATING:"mdc-temporary-drawer--animating",SCROLL_LOCK:"mdc-drawer-scroll-lock"},Ot={DRAWER_SELECTOR:".mdc-temporary-drawer__drawer",OPACITY_VAR_NAME:"--mdc-temporary-drawer-opacity",FOCUSABLE_ELEMENTS:gt,OPEN_EVENT:"MDCTemporaryDrawer:open",CLOSE_EVENT:"MDCTemporaryDrawer:close"},xt=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t),e.cssClasses.ROOT,e.cssClasses.ANIMATING,e.cssClasses.OPEN));return n.componentClickHandler_=function(t){n.adapter_.eventTargetHasClass(t.target,wt.ROOT)&&n.close(!0)},n}return x(e,yt),I(e,null,[{key:"cssClasses",get:function(){return wt}},{key:"strings",get:function(){return Ot}},{key:"defaultAdapter",get:function(){return w(yt.defaultAdapter,{addBodyClass:function(){},removeBodyClass:function(){},isDrawer:function(){return!1},updateCssVariable:function(){},eventTargetHasClass:function(){return!1}})}}]),I(e,[{key:"init",value:function(){O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.adapter_.updateCssVariable(0),this.adapter_.registerInteractionHandler("click",this.componentClickHandler_)}},{key:"destroy",value:function(){O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.adapter_.deregisterInteractionHandler("click",this.componentClickHandler_),this.enableScroll_()}},{key:"open",value:function(){this.disableScroll_(),this.adapter_.updateCssVariable(""),O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this)}},{key:"close",value:function(){this.adapter_.updateCssVariable(""),O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this)}},{key:"prepareForTouchEnd_",value:function(){O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareForTouchEnd_",this).call(this),this.adapter_.updateCssVariable("")}},{key:"updateDrawer_",value:function(){O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDrawer_",this).call(this);var t=Math.max(0,1+this.direction_*(this.newPosition_/this.drawerWidth_));this.adapter_.updateCssVariable(t)}},{key:"isRootTransitioningEventTarget_",value:function(t){return this.adapter_.isDrawer(t)}},{key:"handleTransitionEnd_",value:function(t){O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"handleTransitionEnd_",this).call(this,t),this.isOpen_||this.enableScroll_()}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(wt.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(wt.SCROLL_LOCK)}}]),e}(),Ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("aside",{staticClass:"mdc-temporary-drawer mdc-typography",class:this.classes},[this.toolbarSpacer?e("div",{staticClass:"mdc-temporary-drawer__toolbar-spacer"}):this._e(),this._v(" "),e("nav",{ref:"drawer",staticClass:"mdc-temporary-drawer__drawer"},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-temporary-drawer",model:{prop:"open",event:"change"},props:{open:Boolean,"toolbar-spacer":Boolean},data:function(){return{classes:{}}},watch:{open:function(){this._refresh()}},methods:{_refresh:function(){this.open?this.foundation&&this.foundation.open():this.foundation&&this.foundation.close()}},mounted:function(){var t=this,e=xt.strings,n=e.FOCUSABLE_ELEMENTS,i=e.OPACITY_VAR_NAME;this.foundation=new xt({addClass:function(e){t.$set(t.classes,e,!0)},removeClass:function(e){t.$delete(t.classes,e)},hasClass:function(e){return t.$el.classList.contains(e)},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},hasNecessaryDom:function(){return!!t.$refs.drawer},registerInteractionHandler:function(e,n){t.$el.addEventListener(u(e),n,f())},deregisterInteractionHandler:function(e,n){t.$el.removeEventListener(u(e),n,f())},registerDrawerInteractionHandler:function(e,n){t.$refs.drawer.addEventListener(u(e),n)},deregisterDrawerInteractionHandler:function(e,n){t.$refs.drawer.removeEventListener(u(e),n)},registerTransitionEndHandler:function(e){t.$refs.drawer.addEventListener("transitionend",e)},deregisterTransitionEndHandler:function(e){t.$refs.drawer.removeEventListener("transitionend",e)},registerDocumentKeydownHandler:function(t){document.addEventListener("keydown",t)},deregisterDocumentKeydownHandler:function(t){document.removeEventListener("keydown",t)},getDrawerWidth:function(){return t.$refs.drawer.offsetWidth},setTranslateX:function(e){t.$refs.drawer.style.setProperty(h(),null===e?null:"translateX("+e+"px)")},updateCssVariable:function(e){(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return"CSS"in t&&t.CSS.supports("(--color: red)")})()&&t.$el.style.setProperty(i,e)},getFocusableElements:function(){return t.$refs.drawer.querySelectorAll(n)},saveElementTabState:function(t){_(t)},restoreElementTabState:function(t){m(t)},makeElementUntabbable:function(t){t.setAttribute("tabindex",-1)},notifyOpen:function(){t.$emit("change",!0),t.$emit("open")},notifyClose:function(){t.$emit("change",!1),t.$emit("close")},isRtl:function(){return"rtl"===getComputedStyle(t.$el).getPropertyValue("direction")},isDrawer:function(e){return e===t.$refs.drawer}}),this.foundation&&this.foundation.init(),this._refresh()},beforeDestroy:function(){this.foundation&&this.foundation.destroy(),this.foundation=null}},Lt=new(function(){function t(){A(this,t)}return I(t,[{key:"mobile",get:function(){return this._mobile||(this._mobile=window.matchMedia("(max-width: 840px)"))}},{key:"xlarge",get:function(){return this._xlarge||(this._xlarge=window.matchMedia("(min-width: 1320px)"))}}]),t}()),Dt=e({mdcDrawer:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.type,{ref:"drawer",tag:"component",staticClass:"mdc-drawer",attrs:{"toolbar-spacer":t.toolbarSpacer},model:{value:t.open_,callback:function(e){t.open_=e},expression:"open_"}},[t._t("default")],2)},staticRenderFns:[],name:"mdc-drawer",props:{permanent:Boolean,persistent:Boolean,temporary:Boolean,"drawer-type":{type:String,validator:function(t){return t in["temporary","persistent","permanent"]}},"toggle-on":String,"toggle-on-source":{type:Object,required:!1},"toolbar-spacer":Boolean},provide:function(){return{mdcDrawer:this}},data:function(){return{mobile:!1,xlarge:!1,open_:!1}},components:{"mdc-permanent-drawer":vt,"mdc-persistent-drawer":St,"mdc-temporary-drawer":Ht},computed:{type:function(){if(this.permanent)return"mdc-permanent-drawer";if(this.persistent)return"mdc-persistent-drawer";if(this.temporary)return"mdc-temporary-drawer";switch(this.drawerType){case"permanent":return"mdc-permanent-drawer";case"persistent":return"mdc-persistent-drawer";case"temporary":return"mdc-temporary-drawer";default:return this.mobile?"mdc-temporary-drawer":"mdc-persistent-drawer"}},isPermanent:function(){return this.permanent||"mdc-permanent-drawer"===this.type},isPersistent:function(){return this.persistent||"mdc-persistent-drawer"===this.type},isTemporary:function(){return this.temporary||"mdc-temporary-drawer"===this.type}},methods:{open:function(){this.open_=!0},close:function(){this.isPermanent||(this.open_=!1)},toggle:function(){this.isPermanent||(this.isOpen()?this.close():this.open())},isOpen:function(){return this.isPermanent||this.open_},refreshMedia:function(){this.mobile=Lt.mobile.matches,this.xlarge=Lt.xlarge.matches,this.xlarge&&this.isPersistent&&this.open(),this.mobile&&this.close()}},created:function(){window&&window.matchMedia&&(this.mobile=Lt.mobile.matches,this.xlarge=Lt.xlarge.matches)},mounted:function(){var t=this;if(this.toggleOn){(this.toggleOnSource||this.$root).$on(this.toggleOn,function(){return t.toggle()})}Lt.mobile.addListener(this.refreshMedia),Lt.xlarge.addListener(this.refreshMedia),this.$nextTick(function(){return t.refreshMedia()})},beforeDestroy:function(){Lt.mobile.removeListener(this.refreshMedia),Lt.xlarge.removeListener(this.refreshMedia)}},mdcDrawerLayout:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-drawer-layout"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-drawer-layout"},mdcDrawerHeader:{render:function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("header",{staticClass:"mdc-drawer-header",class:[this.headerClass]},[e("div",{class:[this.headerContentClass]},[this._t("default")],2)]):this._e()},staticRenderFns:[],name:"mdc-drawer-header",props:{permanent:Boolean,persistent:Boolean,temporary:Boolean},inject:["mdcDrawer"],computed:{headerClass:function(){return this.mdcDrawer.type+"__header"},headerContentClass:function(){return this.mdcDrawer.type+"__header-content"},show:function(){return!(this.temporary||this.persistent||this.permanent)||(this.temporary&&this.mdcDrawer.isTemporary||this.persistent&&this.mdcDrawer.isPersistent||this.permanent&&this.mdcDrawer.isPermanent)}}},mdcDrawerList:{render:function(){var t=this.$createElement;return(this._self._c||t)("nav",{staticClass:"mdc-drawer-list mdc-list",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-drawer-list",props:{dense:Boolean},data:function(){return{classes:{"mdc-list--dense":this.dense}}}},mdcDrawerItem:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("custom-link",{staticClass:"mdc-drawer-item mdc-list-item",class:t.classes,style:t.styles,attrs:{link:t.link},nativeOn:{click:function(e){t.onClick(e)}}},[t.hasStartDetail?n("span",{staticClass:"mdc-list-item__start-detail"},[t._t("start-detail",[n("i",{staticClass:"material-icons",attrs:{"aria-hidden":"true"}},[t._v(t._s(t.startIcon))])])],2):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[],name:"mdc-drawer-item",inject:["mdcDrawer"],mixins:[R,D],props:{"start-icon":String,"temporary-close":{type:Boolean,default:!0}},data:function(){return{classes:{},styles:{}}},computed:{hasStartDetail:function(){return this.startIcon||this.$slots["start-detail"]}},methods:{onClick:function(t){this.mdcDrawer.isTemporary&&this.temporaryClose&&this.mdcDrawer.close(),this.dispatchEvent(t)}},mounted:function(){this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.ripple&&this.ripple.destroy(),this.ripple=null}},mdcDrawerDivider:{render:function(){var t=this.$createElement;return(this._self._c||t)("hr",{staticClass:"mdc-list-divider"})},staticRenderFns:[],name:"mdc-drawer-divider"}}),Rt=e({mdcElevation:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-elevation"})},staticRenderFns:[],name:"mdc-elevation",props:{}}}),Ft=e({mdcFAB:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("custom-element",{staticClass:"mdc-fab",class:this.classes,style:this.styles,attrs:{tag:this.href?"a":"button",href:this.href,role:this.href?"button":void 0},on:{click:this.dispatchEvent}},[e("span",{staticClass:"mdc-fab__icon"},[this._t("default",[this._v(this._s(this.icon))])],2)])},staticRenderFns:[],name:"mdc-fab",mixins:[R,k],props:{href:String,icon:String,mini:Boolean,absolute:Boolean,fixed:Boolean},data:function(){return{classes:{"material-icons":this.icon,"mdc-fab--mini":this.mini,"mdc-fab--absolute":this.absolute,"mdc-fab--fixed":this.fixed},styles:{}}},mounted:function(){this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.ripple.destroy()}}}),Nt={TILES_SELECTOR:".mdc-grid-list__tiles",TILE_SELECTOR:".mdc-grid-tile"},Bt=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.resizeHandler_=function(){return n.alignCenter()},n.resizeFrame_=0,n}return x(e,F),I(e,null,[{key:"strings",get:function(){return Nt}},{key:"defaultAdapter",get:function(){return{getOffsetWidth:function(){return 0},getNumberOfTiles:function(){return 0},getOffsetWidthForTileAtIndex:function(){return 0},setStyleForTilesElement:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){}}}}]),I(e,[{key:"init",value:function(){this.alignCenter(),this.adapter_.registerResizeHandler(this.resizeHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"alignCenter",value:function(){var t=this;0!==this.resizeFrame_&&cancelAnimationFrame(this.resizeFrame_),this.resizeFrame_=requestAnimationFrame(function(){t.alignCenter_(),t.resizeFrame_=0})}},{key:"alignCenter_",value:function(){if(0!=this.adapter_.getNumberOfTiles()){var t=this.adapter_.getOffsetWidth(),e=this.adapter_.getOffsetWidthForTileAtIndex(0),n=e*Math.floor(t/e);this.adapter_.setStyleForTilesElement("width",n+"px")}}}]),e}(),$t=e({mdcGridList:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-grid-list",class:this.classes,style:this.styles},[e("ul",{staticClass:"mdc-grid-list__tiles"},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-grid-list",props:{width:[String,Number],ratio:String,"narrow-gutter":Boolean,"header-caption":Boolean,"icon-align-start":Boolean,"icon-align-end":Boolean,"with-support-text":Boolean},data:function(){var t={};this.narrowGutter&&(t["mdc-grid-list--tile-gutter-1"]=!0),this.headerCaption&&(t["mdc-grid-list--header-caption"]=!0),this.ratio&&(t["mdc-grid-list--tile-aspect-"+this.ratio]=!0),this.iconAlignStart&&(t["mdc-grid-list--with-icon-align-start"]=!0),this.iconAlignEnd&&(t["mdc-grid-list--with-icon-align-end"]=!0),this.withSupportText&&(t["mdc-grid-list--twoline-caption"]=!0);var e={};return this.width&&(e["--mdc-grid-list-tile-width"]=this.width+"px"),{classes:t,styles:e}},mounted:function(){var t=this;this.foundation=new Bt({getOffsetWidth:function(){return t.$el.offsetWidth},getNumberOfTiles:function(){return t.$el.querySelectorAll(Bt.strings.TILE_SELECTOR).length},getOffsetWidthForTileAtIndex:function(e){return t.$el.querySelectorAll(Bt.strings.TILE_SELECTOR)[e].offsetWidth},setStyleForTilesElement:function(e,n){t.$el.querySelector(Bt.strings.TILES_SELECTOR).style[e]=n},registerResizeHandler:function(t){window.addEventListener("resize",t)},deregisterResizeHandler:function(t){window.removeEventListener("resize",t)}}),this.foundation.init()},beforeDestroy:function(){this.foundation.destroy()}},mdcGridTile:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"mdc-grid-tile"},[this.cover?e("div",{staticClass:"mdc-grid-tile__primary"},[e("div",{staticClass:"mdc-grid-tile__primary-content",style:{backgroundImage:"url("+this.src+")"}})]):e("div",{staticClass:"mdc-grid-tile__primary"},[e("img",{staticClass:"mdc-grid-tile__primary-content",attrs:{src:this.src}})]),this._v(" "),this.title||this.supportText?e("span",{staticClass:"mdc-grid-tile__secondary"},[this.icon?e("i",{staticClass:"mdc-grid-tile__icon material-icons"},[this._v(this._s(this.icon))]):this._e(),this._v(" "),this.title?e("span",{staticClass:"mdc-grid-tile__title"},[this._v(this._s(this.title))]):this._e(),this._v(" "),this.supportText?e("span",{staticClass:"mdc-grid-tile__support-text"},[this._v(this._s(this.supportText))]):this._e()]):this._e()])},staticRenderFns:[],name:"mdc-grid-tile",props:{src:String,cover:Boolean,icon:String,title:String,"support-text":String}}}),Mt=e({mdcICon:{render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"mdc-icon mdc-icon--material",class:{"material-icons":!!this.icon}},[this._t("default",[this._v(this._s(this.icon))])],2)},staticRenderFns:[],name:"mdc-icon",props:{icon:String}}}),Pt=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"setText",value:function(t){}},{key:"getTabIndex",value:function(){}},{key:"setTabIndex",value:function(t){}},{key:"getAttr",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"rmAttr",value:function(t){}},{key:"notifyChange",value:function(t){}}])}(),{ROOT:"mdc-icon-toggle",DISABLED:"mdc-icon-toggle--disabled"}),Vt={DATA_TOGGLE_ON:"data-toggle-on",DATA_TOGGLE_OFF:"data-toggle-off",ARIA_PRESSED:"aria-pressed",ARIA_DISABLED:"aria-disabled",ARIA_LABEL:"aria-label",CHANGE_EVENT:"MDCIconToggle:change"},Ut=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.on_=!1,n.disabled_=!1,n.savedTabIndex_=-1,n.toggleOnData_=null,n.toggleOffData_=null,n.clickHandler_=function(){return n.toggleFromEvt_()},n.isHandlingKeydown_=!1,n.keydownHandler_=function(t){if(p(t))return n.isHandlingKeydown_=!0,t.preventDefault()},n.keyupHandler_=function(t){p(t)&&(n.isHandlingKeydown_=!1,n.toggleFromEvt_())},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return Pt}},{key:"strings",get:function(){return Vt}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},setText:function(){},getTabIndex:function(){return 0},setTabIndex:function(){},getAttr:function(){return""},setAttr:function(){},rmAttr:function(){},notifyChange:function(){}}}}]),I(e,[{key:"init",value:function(){this.refreshToggleData(),this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("keyup",this.keyupHandler_)}},{key:"refreshToggleData",value:function(){var t=e.strings,n=t.DATA_TOGGLE_ON,i=t.DATA_TOGGLE_OFF;this.toggleOnData_=this.parseJsonDataAttr_(n),this.toggleOffData_=this.parseJsonDataAttr_(i)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.keyupHandler_)}},{key:"toggleFromEvt_",value:function(){this.toggle();var t=this.on_;this.adapter_.notifyChange({isOn:t})}},{key:"isOn",value:function(){return this.on_}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.on_;this.on_=t;var n=e.strings,i=n.ARIA_LABEL,s=n.ARIA_PRESSED;this.on_?this.adapter_.setAttr(s,"true"):this.adapter_.setAttr(s,"false");var a=(this.on_?this.toggleOffData_:this.toggleOnData_).cssClass;a&&this.adapter_.removeClass(a);var r=this.on_?this.toggleOnData_:this.toggleOffData_,o=r.content,c=r.label,d=r.cssClass;d&&this.adapter_.addClass(d),o&&this.adapter_.setText(o),c&&this.adapter_.setAttr(i,c)}},{key:"parseJsonDataAttr_",value:function(t){var e=this.adapter_.getAttr(t);return e?JSON.parse(e):{}}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){this.disabled_=t;var n=e.cssClasses.DISABLED,i=e.strings.ARIA_DISABLED;this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setTabIndex(-1),this.adapter_.setAttr(i,"true"),this.adapter_.addClass(n)):(this.adapter_.setTabIndex(this.savedTabIndex_),this.adapter_.rmAttr(i),this.adapter_.removeClass(n))}},{key:"isKeyboardActivated",value:function(){return this.isHandlingKeydown_}}]),e}(),zt=e({mdcIConToggle:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"mdc-icon-toggle",class:this.classes,style:this.styles,attrs:{role:"button","aria-pressed":"false",tabindex:this.tabIndex,"data-toggle-on":this.toggleOnData,"data-toggle-off":this.toggleOffData}},[e("i",{class:this.iconClasses,attrs:{"aria-hidden":"true"}},[this._v(this._s(this.text))])])},staticRenderFns:[],name:"mdc-icon-toggle",props:{toggleOn:[String,Object],toggleOff:[String,Object],value:Boolean,disabled:Boolean,primary:Boolean,accent:Boolean},data:function(){return{classes:{"mdc-icon-toggle--primary":this.primary,"mdc-icon-toggle--accent":this.accent},styles:{},iconClasses:{},tabIndex:0,text:""}},watch:{value:function(t){this.foundation&&this.foundation.toggle(t)},disabled:function(t){this.foundation&&this.foundation.setDisabled(t)},toggleOnData:function(){this.foundation&&this.foundation.refreshToggleData()},toggleOffData:function(){this.foundation&&this.foundation.refreshToggleData()},primary:function(t){this.$set(this.classes,"mdc-icon-toggle--primary",t)},accent:function(t){this.$set(this.classes,"mdc-icon-toggle--secondary",t)}},computed:{toggleOnData:function(){var t=this.toggleOn;return t&&JSON.stringify("string"==typeof t?{content:t,cssClass:"material-icons"}:{content:t.icon||t.content,label:t.label,cssClass:t.icon?"material-icons":t.cssClass})},toggleOffData:function(){var t=this.toggleOff;return t&&JSON.stringify("string"==typeof t?{content:t,cssClass:"material-icons"}:{content:t.icon||t.content,label:t.label,cssClass:t.icon?"material-icons":t.cssClass})}},mounted:function(){var t=this;this.foundation=new Ut({addClass:function(e){return t.$set(t.iconClasses,e,!0)},removeClass:function(e){return t.$delete(t.iconClasses,e)},registerInteractionHandler:function(e,n){return t.$el.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.$el.removeEventListener(e,n)},setText:function(e){t.text=e},getTabIndex:function(){return t.tabIndex},setTabIndex:function(e){t.tabIndex=e},getAttr:function(e,n){return t.$el.getAttribute(e,n)},setAttr:function(e,n){t.$el.setAttribute(e,n)},rmAttr:function(e){t.$el.removeAttribute(e)},notifyChange:function(e){t.$emit("input",e.isOn)}}),this.foundation.init(),this.foundation.toggle(this.value),this.foundation.setDisabled(this.disabled),this.ripple=new z(this,{isUnbounded:function(){return!0},isSurfaceActive:function(){return t.foundation.isKeyboardActivated()},computeBoundingRect:function(){var e=t.$el.getBoundingClientRect(),n=e.left;return{left:n,top:e.top,width:48,height:48,right:n+48,bottom:n+48}}}),this.ripple.init()},beforeDestroy:function(){this.foundation.destroy(),this.ripple.destroy()}}}),Kt=e({mdcLayoutApp:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-layout-app"},[e("div",{staticClass:"mdc-layout-app--toolbar-wrapper"},[this._t("toolbar")],2),this._v(" "),e("div",{staticClass:"mdc-layout-app--main-container"},[e("div",{staticClass:"mdc-layout-app--drawer-wrapper"},[this._t("drawer")],2),this._v(" "),e("div",{staticClass:"mdc-layout-app--content-wrapper"},[this._t("default")],2)])])},staticRenderFns:[],name:"mdc-layout-app"}}),Xt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-layout-grid",class:this.classes},[e("div",{staticClass:"mdc-layout-grid__inner"},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-layout-grid",props:{"fixed-column-width":Boolean},data:function(){return{classes:{"mdc-layout-grid--fixed-column-width":this.fixedColumnWidth}}}},Gt={type:[String,Number],default:null,validator:function(t){var e=Number(t);return isFinite(e)&&e<=12&&e>0}},Wt=e({mdcLayoutGrid:Xt,mdcLayoutCell:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-layout-cell mdc-layout-grid__cell",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-layout-cell",props:{span:Gt,order:Gt,phone:Gt,tablet:Gt,desktop:Gt,align:{type:String,validator:function(t){return-1!==["top","bottom","middle"].indexOf(t)}}},computed:{classes:function(){var t=[];return this.span&&t.push("mdc-layout-grid__cell--span-"+this.span),this.order&&t.push("mdc-layout-grid__cell--order-"+this.order),this.phone&&t.push("mdc-layout-grid__cell--span-"+this.phone+"-phone"),this.tablet&&t.push("mdc-layout-grid__cell--span-"+this.tablet+"-tablet"),this.desktop&&t.push("mdc-layout-grid__cell--span-"+this.desktop+"-desktop"),this.align&&t.push("mdc-layout-grid__cell--align-"+this.align),t}}},mdcLayoutInnerGrid:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-layout-inner-grid mdc-layout-grid__inner"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-layout-inner-grid"}}),jt={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},qt={PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar",BUFFER_SELECTOR:".mdc-linear-progress__buffer"},Yt=function(t){function e(t){return A(this,e),H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)))}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return jt}},{key:"strings",get:function(){return qt}},{key:"defaultAdapter",get:function(){return{addClass:function(){},getPrimaryBar:function(){},getBuffer:function(){},hasClass:function(){return!1},removeClass:function(){},setStyle:function(){}}}}]),I(e,[{key:"init",value:function(){this.determinate_=!this.adapter_.hasClass(jt.INDETERMINATE_CLASS),this.reverse_=this.adapter_.hasClass(jt.REVERSED_CLASS)}},{key:"setDeterminate",value:function(t){this.determinate_=t,this.determinate_?this.adapter_.removeClass(jt.INDETERMINATE_CLASS):(this.adapter_.addClass(jt.INDETERMINATE_CLASS),this.setScale_(this.adapter_.getPrimaryBar(),1),this.setScale_(this.adapter_.getBuffer(),1))}},{key:"setProgress",value:function(t){this.determinate_&&this.setScale_(this.adapter_.getPrimaryBar(),t)}},{key:"setBuffer",value:function(t){this.determinate_&&this.setScale_(this.adapter_.getBuffer(),t)}},{key:"setReverse",value:function(t){this.reverse_=t,this.reverse_?this.adapter_.addClass(jt.REVERSED_CLASS):this.adapter_.removeClass(jt.REVERSED_CLASS)}},{key:"open",value:function(){this.adapter_.removeClass(jt.CLOSED_CLASS)}},{key:"close",value:function(){this.adapter_.addClass(jt.CLOSED_CLASS)}},{key:"setScale_",value:function(t,e){var n=this,i="scaleX("+e+")";ct.forEach(function(e){n.adapter_.setStyle(t,e,i)})}}]),e}(),Jt={type:[Number,String],validator:function(t){return Number(t)>=0&&Number(t)<=1}},Zt=e({mdcLinearProgress:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-linear-progress",class:this.classes,style:this.styles,attrs:{role:"progressbar"}},[e("div",{staticClass:"mdc-linear-progress__buffering-dots"}),this._v(" "),e("div",{ref:"buffer",staticClass:"mdc-linear-progress__buffer"}),this._v(" "),e("div",{ref:"primary",staticClass:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"},[e("span",{staticClass:"mdc-linear-progress__bar-inner"})]),this._v(" "),this._m(0,!1,!1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"},[e("span",{staticClass:"mdc-linear-progress__bar-inner"})])}],name:"mdc-linear-progress",props:{open:{type:Boolean,default:!0},indeterminate:Boolean,reverse:Boolean,accent:Boolean,progress:Jt,buffer:Jt},data:function(){return{classes:{"mdc-linear-progress--accent":this.accent},styles:{}}},watch:{open:function(){this.open?this.foundation.open():this.foundation.close()},progress:function(){this.foundation.setProgress(Number(this.progress))},buffer:function(){this.foundation.setBuffer(Number(this.buffer))},indeterminate:function(){this.foundation.setDeterminate(!this.indeterminate)},reverse:function(){this.foundation.setReverse(this.reverse)}},mounted:function(){var t=this;this.foundation=new Yt({addClass:function(e){t.$set(t.classes,e,!0)},getPrimaryBar:function(){return t.$refs.primary},getBuffer:function(){return t.$refs.buffer},hasClass:function(e){t.$el.classList.contains(e)},removeClass:function(e){t.$delete(t.classes,e)},setStyle:function(t,e,n){t.style[e]=n}}),this.foundation.init(),this.foundation.setReverse(this.reverse),this.foundation.setProgress(Number(this.progress)),this.foundation.setBuffer(Number(this.buffer)),this.foundation.setDeterminate(!this.indeterminate),this.open?this.foundation.open():this.foundation.close()},beforeDestroy:function(){this.foundation.destroy()}}}),Qt=e({mdcList:{render:function(){var t=this.$createElement;return(this._self._c||t)("ul",{staticClass:"mdc-list",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-list",props:{dense:Boolean,"avatar-list":Boolean,"two-line":Boolean,bordered:Boolean},data:function(){return{classes:{"mdc-list--dense":this.dense,"mdc-list--avatar-list":this.avatarList,"mdc-list--two-line":this.twoLine,"mdc-list--bordered":this.bordered}}}},mdcListItem:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"mdc-list-item"},[this.hasStartDetail?e("span",{staticClass:"mdc-list-item__start-detail"},[this._t("start-detail")],2):this._e(),this._v(" "),this.hasSecondary?e("span",{staticClass:"mdc-list-item__text"},[this._t("default"),this._v(" "),e("span",{staticClass:"mdc-list-item__secondary-text"},[this._t("secondary")],2)],2):this._t("default"),this._v(" "),this.hasEndDetail?e("span",{staticClass:"mdc-list-item__end-detail"},[this._t("end-detail")],2):this._e()],2)},staticRenderFns:[],name:"mdc-list-item",computed:{hasSecondary:function(){return!!this.$slots.secondary},hasEndDetail:function(){return!!this.$slots["end-detail"]},hasStartDetail:function(){return!!this.$slots["start-detail"]}}},mdcListDivider:{render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"mdc-list-divider",class:this.classes,attrs:{role:"separator"}})},staticRenderFns:[],name:"mdc-list-divider",props:{inset:Boolean},data:function(){return{classes:{"mdc-list-divider--inset":this.inset}}}},mdcListGroup:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-list-group"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-list-group"},mdcListGroupHeader:{render:function(){var t=this.$createElement;return(this._self._c||t)("h3",{staticClass:"mdc-list-group-header mdc-list-group__subheader"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-list-group-header"},mdcListGroupDivider:{render:function(){var t=this.$createElement;return(this._self._c||t)("hr",{staticClass:"mdc-list-group-divider mdc-list-divider"})},staticRenderFns:[],name:"mdc-list-group-divider"}}),te=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"hasClass",value:function(t){}},{key:"hasNecessaryDom",value:function(){}},{key:"getAttributeForEventTarget",value:function(t,e){}},{key:"eventTargetHasClass",value:function(t,e){}},{key:"getInnerDimensions",value:function(){}},{key:"hasAnchor",value:function(){}},{key:"getAnchorDimensions",value:function(){}},{key:"getWindowDimensions",value:function(){}},{key:"setScale",value:function(t,e){}},{key:"setInnerScale",value:function(t,e){}},{key:"getNumberOfItems",value:function(){}},{key:"registerInteractionHandler",value:function(t,e){}},{key:"deregisterInteractionHandler",value:function(t,e){}},{key:"registerBodyClickHandler",value:function(t){}},{key:"deregisterBodyClickHandler",value:function(t){}},{key:"getYParamsForItemAtIndex",value:function(t){}},{key:"setTransitionDelayForItemAtIndex",value:function(t,e){}},{key:"getIndexForEventTarget",value:function(t){}},{key:"notifySelected",value:function(t){}},{key:"notifyCancel",value:function(){}},{key:"saveFocus",value:function(){}},{key:"restoreFocus",value:function(){}},{key:"isFocused",value:function(){}},{key:"focus",value:function(){}},{key:"getFocusedItemIndex",value:function(){}},{key:"focusItemAtIndex",value:function(t){}},{key:"isRtl",value:function(){}},{key:"setTransformOrigin",value:function(t){}},{key:"setPosition",value:function(t){}},{key:"getAccurateTime",value:function(){}}])}(),{ROOT:"mdc-simple-menu",OPEN:"mdc-simple-menu--open",ANIMATING:"mdc-simple-menu--animating",TOP_RIGHT:"mdc-simple-menu--open-from-top-right",BOTTOM_LEFT:"mdc-simple-menu--open-from-bottom-left",BOTTOM_RIGHT:"mdc-simple-menu--open-from-bottom-right",LIST_ITEM:"mdc-list-item"}),ee={ITEMS_SELECTOR:".mdc-simple-menu__items",SELECTED_EVENT:"MDCSimpleMenu:selected",CANCEL_EVENT:"MDCSimpleMenu:cancel",ARIA_DISABLED_ATTR:"aria-disabled"},ne={SELECTED_TRIGGER_DELAY:50,TRANSITION_DURATION_MS:300,TRANSITION_SCALE_ADJUSTMENT_X:.5,TRANSITION_SCALE_ADJUSTMENT_Y:.2,TRANSITION_X1:0,TRANSITION_Y1:0,TRANSITION_X2:.2,TRANSITION_Y2:1},ie=void 0,se=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.clickHandler_=function(t){return n.handlePossibleSelected_(t)},n.keydownHandler_=function(t){return n.handleKeyboardDown_(t)},n.keyupHandler_=function(t){return n.handleKeyboardUp_(t)},n.documentClickHandler_=function(t){return n.handleDocumentClick_(t)},n.isOpen_=!1,n.startScaleX_=0,n.startScaleY_=0,n.targetScale_=1,n.scaleX_=0,n.scaleY_=0,n.running_=!1,n.selectedTriggerTimerId_=0,n.animationRequestId_=0,n.dimensions_,n.startTime_,n.itemHeight_,n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return te}},{key:"strings",get:function(){return ee}},{key:"numbers",get:function(){return ne}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasNecessaryDom:function(){return!1},getAttributeForEventTarget:function(){},eventTargetHasClass:function(){},getInnerDimensions:function(){return{}},hasAnchor:function(){return!1},getAnchorDimensions:function(){return{}},getWindowDimensions:function(){return{}},setScale:function(){},setInnerScale:function(){},getNumberOfItems:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerBodyClickHandler:function(){},deregisterBodyClickHandler:function(){},getYParamsForItemAtIndex:function(){return{}},setTransitionDelayForItemAtIndex:function(){},getIndexForEventTarget:function(){return 0},notifySelected:function(){},notifyCancel:function(){},saveFocus:function(){},restoreFocus:function(){},isFocused:function(){return!1},focus:function(){},getFocusedItemIndex:function(){return-1},focusItemAtIndex:function(){},isRtl:function(){return!1},setTransformOrigin:function(){},setPosition:function(){},getAccurateTime:function(){return 0}}}}]),I(e,[{key:"init",value:function(){var t=e.cssClasses,n=t.ROOT,i=t.OPEN;if(!this.adapter_.hasClass(n))throw new Error(n+" class required in root element.");if(!this.adapter_.hasNecessaryDom())throw new Error("Required DOM nodes missing in "+n+" component.");this.adapter_.hasClass(i)&&(this.isOpen_=!0),this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keyup",this.keyupHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_)}},{key:"destroy",value:function(){clearTimeout(this.selectedTriggerTimerId_),cancelAnimationFrame(this.animationRequestId_),this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.keyupHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterBodyClickHandler(this.documentClickHandler_)}},{key:"applyTransitionDelays_",value:function(){for(var t=e.cssClasses,n=t.BOTTOM_LEFT,i=t.BOTTOM_RIGHT,s=this.adapter_.getNumberOfItems(),a=this.dimensions_.height,r=e.numbers.TRANSITION_DURATION_MS/1e3,o=e.numbers.TRANSITION_SCALE_ADJUSTMENT_Y,c=0;c<s;c++){var d=this.adapter_.getYParamsForItemAtIndex(c),l=d.top,u=d.height;this.itemHeight_=u;var h=l/a;(this.adapter_.hasClass(n)||this.adapter_.hasClass(i))&&(h=(a-l-u)/a);var f=(o+h*(1-o))*r;this.adapter_.setTransitionDelayForItemAtIndex(c,f.toFixed(3)+"s")}}},{key:"removeTransitionDelays_",value:function(){for(var t=this.adapter_.getNumberOfItems(),e=0;e<t;e++)this.adapter_.setTransitionDelayForItemAtIndex(e,null)}},{key:"animationLoop_",value:function(){var t=this,n=this.adapter_.getAccurateTime(),i=e.numbers,s=i.TRANSITION_DURATION_MS,a=i.TRANSITION_X1,r=i.TRANSITION_Y1,o=i.TRANSITION_X2,c=i.TRANSITION_Y2,d=i.TRANSITION_SCALE_ADJUSTMENT_X,l=i.TRANSITION_SCALE_ADJUSTMENT_Y,u=g((n-this.startTime_)/s),h=g((u-d)/(1-d)),f=u,_=this.startScaleY_;1===this.targetScale_&&(this.itemHeight_&&(_=Math.max(this.itemHeight_/this.dimensions_.height,_)),h=g(u+d),f=g((u-l)/(1-l)));var m=y(h,a,r,o,c),p=y(f,a,r,o,c);this.scaleX_=this.startScaleX_+(this.targetScale_-this.startScaleX_)*m;var v=1/(0===this.scaleX_?1:this.scaleX_);this.scaleY_=_+(this.targetScale_-_)*p;var b=1/(0===this.scaleY_?1:this.scaleY_);this.adapter_.setScale(this.scaleX_,this.scaleY_),this.adapter_.setInnerScale(v,b),u<1?this.animationRequestId_=requestAnimationFrame(function(){return t.animationLoop_()}):(this.animationRequestId_=0,this.running_=!1,this.adapter_.removeClass(e.cssClasses.ANIMATING))}},{key:"animateMenu_",value:function(){var t=this;this.startTime_=this.adapter_.getAccurateTime(),this.startScaleX_=this.scaleX_,this.startScaleY_=this.scaleY_,this.targetScale_=this.isOpen_?1:0,this.running_||(this.running_=!0,this.animationRequestId_=requestAnimationFrame(function(){return t.animationLoop_()}))}},{key:"focusOnOpen_",value:function(t){null===t?(this.adapter_.focus(),this.adapter_.isFocused()||this.adapter_.focusItemAtIndex(0)):this.adapter_.focusItemAtIndex(t)}},{key:"handleDocumentClick_",value:function(t){for(var e=t.target;e&&e!==document.documentElement;){if(this.adapter_.eventTargetHasClass(e,te.LIST_ITEM))return;e=e.parentNode}this.adapter_.notifyCancel(),this.close(t)}},{key:"handleKeyboardDown_",value:function(t){if(t.altKey||t.ctrlKey||t.metaKey)return!0;var e=t.keyCode,n=t.key,i=t.shiftKey,s="Tab"===n||9===e,a="ArrowUp"===n||38===e,r="ArrowDown"===n||40===e,o="Space"===n||32===e,c=this.adapter_.getFocusedItemIndex(),d=this.adapter_.getNumberOfItems()-1;return i&&s&&0===c?(this.adapter_.focusItemAtIndex(d),t.preventDefault(),!1):!i&&s&&c===d?(this.adapter_.focusItemAtIndex(0),t.preventDefault(),!1):((a||r||o)&&t.preventDefault(),a?0===c||this.adapter_.isFocused()?this.adapter_.focusItemAtIndex(d):this.adapter_.focusItemAtIndex(c-1):r&&(c===d||this.adapter_.isFocused()?this.adapter_.focusItemAtIndex(0):this.adapter_.focusItemAtIndex(c+1)),!0)}},{key:"handleKeyboardUp_",value:function(t){if(t.altKey||t.ctrlKey||t.metaKey)return!0;var e=t.keyCode,n=t.key,i="Escape"===n||27===e;return("Enter"===n||13===e||("Space"===n||32===e))&&this.handlePossibleSelected_(t),i&&(this.adapter_.notifyCancel(),this.close()),!0}},{key:"handlePossibleSelected_",value:function(t){var e=this;if("true"!==this.adapter_.getAttributeForEventTarget(t.target,ee.ARIA_DISABLED_ATTR)){var n=this.adapter_.getIndexForEventTarget(t.target);n<0||this.selectedTriggerTimerId_||(this.selectedTriggerTimerId_=setTimeout(function(){e.selectedTriggerTimerId_=0,e.close(),e.adapter_.notifySelected({index:n})},ne.SELECTED_TRIGGER_DELAY))}}},{key:"autoPosition_",value:function(){var t;if(this.adapter_.hasAnchor()){var e="top",n="left",i=this.adapter_.getAnchorDimensions(),s=this.adapter_.getWindowDimensions(),a=i.top+this.dimensions_.height-s.height,r=this.dimensions_.height-i.bottom;a>0&&r<a&&(e="bottom");var o=i.left+this.dimensions_.width-s.width,c=this.dimensions_.width-i.right,d=o>0,l=c>0;this.adapter_.isRtl()?(n="right",l&&o<c&&(n="left")):d&&c<o&&(n="right");var u=(t={},S(t,n,"0"),S(t,e,"0"),t);this.adapter_.setTransformOrigin(e+" "+n),this.adapter_.setPosition(u)}}},{key:"open",value:function(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focusIndex,i=void 0===n?null:n;this.adapter_.saveFocus(),this.adapter_.addClass(e.cssClasses.ANIMATING),this.animationRequestId_=requestAnimationFrame(function(){t.dimensions_=t.adapter_.getInnerDimensions(),t.applyTransitionDelays_(),t.autoPosition_(),t.animateMenu_(),t.adapter_.addClass(e.cssClasses.OPEN),t.focusOnOpen_(i),t.adapter_.registerBodyClickHandler(t.documentClickHandler_)}),this.isOpen_=!0}},{key:"close",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!!n&&"true"===this.adapter_.getAttributeForEventTarget(n.target,ee.ARIA_DISABLED_ATTR)||(this.adapter_.deregisterBodyClickHandler(this.documentClickHandler_),this.adapter_.addClass(e.cssClasses.ANIMATING),requestAnimationFrame(function(){t.removeTransitionDelays_(),t.animateMenu_(),t.adapter_.removeClass(e.cssClasses.OPEN)}),this.isOpen_=!1,this.adapter_.restoreFocus())}},{key:"isOpen",value:function(){return this.isOpen_}}]),e}(),ae={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"root",staticClass:"mdc-menu mdc-simple-menu",class:this.classes,attrs:{tabindex:"-1"}},[e("ul",{ref:"items",staticClass:"mdc-simple-menu__items mdc-list",attrs:{role:"menu","aria-hidden":this.isOpen()?"false":"true"}},[this._t("default")],2)])},staticRenderFns:[],name:"mdc-menu",props:{"open-from-top-left":Boolean,"open-from-top-right":Boolean,"open-from-bottom-left":Boolean,"open-from-bottom-right":Boolean},data:function(){return{classes:{"mdc-simple-menu--open-from-top-left":this.openFromTopLeft,"mdc-simple-menu--open-from-top-right":this.openFromTopRight,"mdc-simple-menu--open-from-bottom-left":this.openFromBottomLeft,"mdc-simple-menu--open-from-bottom-right":this.openFromBottomRight},items:[]}},methods:{show:function(t){this.foundation.open(t)},hide:function(){this.foundation.close()},isOpen:function(){return!!this.foundation&&this.foundation.isOpen()}},mounted:function(){var t=this,e=function(){t.items=[].slice.call(t.$refs.items.querySelectorAll(".mdc-list-item[role]")),t.$emit("update")};this.slotObserver=new MutationObserver(function(){return e()}),this.slotObserver.observe(this.$el,{childList:!0,subtree:!0});var i=v(window);this._previousFocus=void 0,this.foundation=new se({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},hasClass:function(e){return t.$refs.root.classList.contains(e)},hasNecessaryDom:function(){return Boolean(t.$refs.items)},getAttributeForEventTarget:function(t,e){return t.getAttribute(e)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},getInnerDimensions:function(){return{width:t.$refs.items.offsetWidth,height:t.$refs.items.offsetHeight}},hasAnchor:function(){return t.$refs.root.parentElement&&t.$refs.root.parentElement.classList.contains("mdc-menu-anchor")},getAnchorDimensions:function(){return t.$refs.root.parentElement.getBoundingClientRect()},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},setScale:function(e,n){t.$refs.root.style[i]="scale("+e+", "+n+")"},setInnerScale:function(e,n){t.$refs.items.style[i]="scale("+e+", "+n+")"},getNumberOfItems:function(){return t.items.length},registerInteractionHandler:function(e,n){return t.$refs.root.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.$refs.root.removeEventListener(e,n)},registerBodyClickHandler:function(t){return document.body.addEventListener("click",t)},deregisterBodyClickHandler:function(t){return document.body.removeEventListener("click",t)},getYParamsForItemAtIndex:function(e){var n=t.items[e];return{top:n.offsetTop,height:n.offsetHeight}},setTransitionDelayForItemAtIndex:function(e,n){return t.items[e].style.setProperty("transition-delay",n)},getIndexForEventTarget:function(e){return t.items.indexOf(e)},notifySelected:function(e){var i={index:e.index,item:t.items[e.index]};t.$emit("select",i),n(t.$el,se.strings.SELECTED_EVENT,i)},notifyCancel:function(){t.$emit("cancel"),n(t.$el,se.strings.CANCEL_EVENT,{})},saveFocus:function(){t._previousFocus=document.activeElement},restoreFocus:function(){t._previousFocus&&t._previousFocus.focus()},isFocused:function(){return document.activeElement===t.$refs.root},focus:function(){return t.$refs.root.focus()},getFocusedItemIndex:function(){return t.items.indexOf(document.activeElement)},focusItemAtIndex:function(e){return t.items[e].focus()},isRtl:function(){return"rtl"===getComputedStyle(t.$refs.root).getPropertyValue("direction")},setTransformOrigin:function(e){t.$refs.root.style[v(window)+"-origin"]=e},setPosition:function(e){t.$refs.root.style.left="left"in e?e.left:null,t.$refs.root.style.right="right"in e?e.right:null,t.$refs.root.style.top="top"in e?e.top:null,t.$refs.root.style.bottom="bottom"in e?e.bottom:null},getAccurateTime:function(){return window.performance.now()}}),e(),this.foundation.init()},beforeDestroy:function(){this._previousFocus=null,this.slotObserver.disconnect(),this.foundation.destroy()}},re=e({mdcMenu:ae,mdcMenuItem:{render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"mdc-menu-item mdc-list-item",attrs:{role:"menuitem",tabindex:this.disabled?"-1":"0","aria-disabled":this.disabled}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-menu-item",props:{disabled:Boolean}},mdcMenuDivider:{render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"mdc-menu-divider mdc-list-divider",attrs:{role:"separator"}})},staticRenderFns:[],name:"mdc-menu-divider"},mdcMenuAnchor:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-menu-anchor"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-menu-anchor"}}),oe=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"getNativeControl",value:function(){}}])}(),{NATIVE_CONTROL_SELECTOR:".mdc-radio__native-control"}),ce={ROOT:"mdc-radio",DISABLED:"mdc-radio--disabled"},de=function(t){function e(){return A(this,e),H(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return x(e,F),I(e,[{key:"isChecked",value:function(){return this.getNativeControl_().checked}},{key:"setChecked",value:function(t){this.getNativeControl_().checked=t}},{key:"isDisabled",value:function(){return this.getNativeControl_().disabled}},{key:"setDisabled",value:function(t){var n=e.cssClasses.DISABLED;this.getNativeControl_().disabled=t,t?this.adapter_.addClass(n):this.adapter_.removeClass(n)}},{key:"getValue",value:function(){return this.getNativeControl_().value}},{key:"setValue",value:function(t){this.getNativeControl_().value=t}},{key:"getNativeControl_",value:function(){return this.adapter_.getNativeControl()||{checked:!1,disabled:!1,value:null}}}],[{key:"cssClasses",get:function(){return ce}},{key:"strings",get:function(){return oe}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},getNativeControl:function(){}}}}]),e}(),le=e({mdcRadio:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-radio-wrapper",class:this.formFieldClasses},[e("div",{ref:"root",staticClass:"mdc-radio",class:this.classes,style:this.styles},[e("input",{ref:"control",staticClass:"mdc-radio__native-control",attrs:{type:"radio",id:this._uid,name:this.name},on:{change:this.sync}}),this._v(" "),e("div",{ref:"label",staticClass:"mdc-radio__background"},[e("div",{staticClass:"mdc-radio__outer-circle"}),this._v(" "),e("div",{staticClass:"mdc-radio__inner-circle"})])]),this._v(" "),this.label?e("label",{ref:"label",attrs:{for:this._uid}},[this._v(this._s(this.label))]):this._e()])},staticRenderFns:[],name:"mdc-radio",model:{prop:"picked",event:"change"},props:{name:String,value:String,picked:String,checked:Boolean,label:String,"align-end":Boolean,disabled:Boolean},data:function(){return{classes:{},styles:{},formFieldClasses:{"mdc-form-field":this.label,"mdc-form-field--align-end":this.label&&this.alignEnd}}},mounted:function(){var t=this;this.foundation=new de({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},getNativeControl:function(){return t.$refs.control}}),this.foundation.init(),this.foundation.setValue(this.value?this.value:this.label),this.foundation.setDisabled(this.disabled),this.foundation.setChecked(this.checked||this.picked==this.foundation.getValue()),this.ripple=new z(this,{isUnbounded:function(){return!0},isSurfaceActive:function(){return!1},registerInteractionHandler:function(e,n){t.$refs.root.addEventListener(e,n),t.$refs.label.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){t.$refs.root.removeEventListener(e,n),t.$refs.label.removeEventListener(e,n)},computeBoundingRect:function(){var e=t.$refs.root.getBoundingClientRect(),n=e.left,i=e.top;return{top:i,left:n,right:n+40,bottom:i+40,width:40,height:40}}}),this.ripple.init(),this.checked&&this.sync()},beforeDestroy:function(){this.foundation.destroy(),this.ripple.destroy()},watch:{disabled:function(t){this.foundation.setDisabled(t)}},methods:{isChecked:function(){return this.foundation.isChecked()},sync:function(){this.$emit("change",this.foundation.getValue())}}}}),ue={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],ref:"root",staticClass:"mdc-select mdc-native-select",attrs:{disabled:t.disabled},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?n:n[0]},t.onChange]}},[t.label?n("option",{attrs:{disabled:"disabled",value:""}},[t._v(t._s(t.label))]):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[],name:"mdc-native-select",model:{prop:"value",event:"change"},props:{value:[String,Array],disabled:Boolean,label:String},data:function(){return{selected:this.value}},methods:{onChange:function(){this.$emit("change",this.selected)}}},he={BOTTOM_LINE:"mdc-select__bottom-line",BOTTOM_LINE_ACTIVE:"mdc-select__bottom-line--active",BOX:"mdc-select--box",DISABLED:"mdc-select--disabled",LABEL_FLOAT_ABOVE:"mdc-select__label--float-above",OPEN:"mdc-select--open",ROOT:"mdc-select",SCROLL_LOCK:"mdc-select-scroll-lock"},fe={CHANGE_EVENT:"MDCSelect:change",BOTTOM_LINE_SELECTOR:".mdc-select__bottom-line",LABEL_SELECTOR:".mdc-select__label",MENU_SELECTOR:".mdc-select__menu",SURFACE_SELECTOR:".mdc-select__surface",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text"},_e=(function(t){function e(){var t;A(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=H(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i)));return a.previousFocus_,a}x(e,tt),I(e,[{key:"show",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focusIndex,e=void 0===t?null:t;this.foundation_.open({focusIndex:e})}},{key:"hide",value:function(){this.foundation_.close()}},{key:"getDefaultFoundation",value:function(){var t=this;return new se({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},hasNecessaryDom:function(){return Boolean(t.itemsContainer_)},getAttributeForEventTarget:function(t,e){return t.getAttribute(e)},eventTargetHasClass:function(t,e){return t.classList.contains(e)},getInnerDimensions:function(){var e=t.itemsContainer_;return{width:e.offsetWidth,height:e.offsetHeight}},hasAnchor:function(){return t.root_.parentElement&&t.root_.parentElement.classList.contains("mdc-menu-anchor")},getAnchorDimensions:function(){return t.root_.parentElement.getBoundingClientRect()},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},setScale:function(e,n){t.root_.style[v(window)]="scale("+e+", "+n+")"},setInnerScale:function(e,n){t.itemsContainer_.style[v(window)]="scale("+e+", "+n+")"},getNumberOfItems:function(){return t.items.length},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n)},registerBodyClickHandler:function(t){return document.body.addEventListener("click",t)},deregisterBodyClickHandler:function(t){return document.body.removeEventListener("click",t)},getYParamsForItemAtIndex:function(e){var n=t.items[e];return{top:n.offsetTop,height:n.offsetHeight}},setTransitionDelayForItemAtIndex:function(e,n){return t.items[e].style.setProperty("transition-delay",n)},getIndexForEventTarget:function(e){return t.items.indexOf(e)},notifySelected:function(e){return t.emit(se.strings.SELECTED_EVENT,{index:e.index,item:t.items[e.index]})},notifyCancel:function(){return t.emit(se.strings.CANCEL_EVENT,{})},saveFocus:function(){t.previousFocus_=document.activeElement},restoreFocus:function(){t.previousFocus_&&t.previousFocus_.focus()},isFocused:function(){return document.activeElement===t.root_},focus:function(){return t.root_.focus()},getFocusedItemIndex:function(){return t.items.indexOf(document.activeElement)},focusItemAtIndex:function(e){return t.items[e].focus()},isRtl:function(){return"rtl"===getComputedStyle(t.root_).getPropertyValue("direction")},setTransformOrigin:function(e){t.root_.style[v(window)+"-origin"]=e},setPosition:function(e){t.root_.style.left="left"in e?e.left:null,t.root_.style.right="right"in e?e.right:null,t.root_.style.top="top"in e?e.top:null,t.root_.style.bottom="bottom"in e?e.bottom:null},getAccurateTime:function(){return window.performance.now()}})}},{key:"open",get:function(){return this.foundation_.isOpen()},set:function(t){t?this.foundation_.open():this.foundation_.close()}},{key:"itemsContainer_",get:function(){return this.root_.querySelector(se.strings.ITEMS_SELECTOR)}},{key:"items",get:function(){var t=this.itemsContainer_;return[].slice.call(t.querySelectorAll(".mdc-list-item[role]"))}}],[{key:"attachTo",value:function(t){return new e(t)}}])}(),[{key:"ArrowUp",keyCode:38,forType:"keydown"},{key:"ArrowDown",keyCode:40,forType:"keydown"},{key:"Space",keyCode:32,forType:"keyup"}]),me=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.ctx_=null,n.selectedIndex_=-1,n.disabled_=!1,n.isFocused_=!1,n.setPointerXOffset_=function(t){return n.setBottomLineOrigin_(t)},n.displayHandler_=function(t){t.preventDefault(),n.adapter_.isMenuOpen()||n.open_()},n.displayViaKeyboardHandler_=function(t){return n.handleDisplayViaKeyboard_(t)},n.selectionHandler_=function(t){var e=t.detail.index;e!==n.selectedIndex_&&(n.setSelectedIndex(e),n.adapter_.notifyChange()),n.close_()},n.cancelHandler_=function(){n.close_(),-1===n.selectedIndex_&&n.adapter_.removeClassFromLabel(he.LABEL_FLOAT_ABOVE)},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return he}},{key:"strings",get:function(){return fe}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},addClassToLabel:function(){},removeClassFromLabel:function(){},addClassToBottomLine:function(){},removeClassFromBottomLine:function(){},setBottomLineAttr:function(){},addBodyClass:function(){},removeBodyClass:function(){},setAttr:function(){},rmAttr:function(){},computeBoundingRect:function(){return{left:0,top:0}},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},focus:function(){},makeTabbable:function(){},makeUntabbable:function(){},getComputedStyleValue:function(){return""},setStyle:function(){},create2dRenderingContext:function(){return{font:"",measureText:function(){return{width:0}}}},setMenuElStyle:function(){},setMenuElAttr:function(){},rmMenuElAttr:function(){},getMenuElOffsetHeight:function(){return 0},openMenu:function(){},isMenuOpen:function(){return!1},setSelectedTextContent:function(){},getNumberOfOptions:function(){return 0},getTextForOptionAtIndex:function(){return""},getValueForOptionAtIndex:function(){return""},setAttrForOptionAtIndex:function(){},rmAttrForOptionAtIndex:function(){},getOffsetTopForOptionAtIndex:function(){return 0},registerMenuInteractionHandler:function(){},deregisterMenuInteractionHandler:function(){},notifyChange:function(){},getWindowInnerHeight:function(){return 0}}}}]),I(e,[{key:"init",value:function(){var t=this;this.ctx_=this.adapter_.create2dRenderingContext(),this.adapter_.registerInteractionHandler("click",this.displayHandler_),this.adapter_.registerInteractionHandler("keydown",this.displayViaKeyboardHandler_),this.adapter_.registerInteractionHandler("keyup",this.displayViaKeyboardHandler_),this.adapter_.registerMenuInteractionHandler(se.strings.SELECTED_EVENT,this.selectionHandler_),this.adapter_.registerMenuInteractionHandler(se.strings.CANCEL_EVENT,this.cancelHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.registerInteractionHandler(e,t.setPointerXOffset_)}),this.resize()}},{key:"destroy",value:function(){var t=this;this.ctx_=null,this.adapter_.deregisterInteractionHandler("click",this.displayHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.displayViaKeyboardHandler_),this.adapter_.deregisterInteractionHandler("keyup",this.displayViaKeyboardHandler_),this.adapter_.deregisterMenuInteractionHandler(se.strings.SELECTED_EVENT,this.selectionHandler_),this.adapter_.deregisterMenuInteractionHandler(se.strings.CANCEL_EVENT,this.cancelHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.deregisterInteractionHandler(e,t.setPointerXOffset_)})}},{key:"getValue",value:function(){return this.selectedIndex_>=0?this.adapter_.getValueForOptionAtIndex(this.selectedIndex_):""}},{key:"getSelectedIndex",value:function(){return this.selectedIndex_}},{key:"setSelectedIndex",value:function(t){this.selectedIndex_>=0&&this.adapter_.rmAttrForOptionAtIndex(this.selectedIndex_,"aria-selected"),this.selectedIndex_=t>=0&&t<this.adapter_.getNumberOfOptions()?t:-1;var e="";this.selectedIndex_>=0&&(e=this.adapter_.getTextForOptionAtIndex(this.selectedIndex_).trim(),this.adapter_.setAttrForOptionAtIndex(this.selectedIndex_,"aria-selected","true")),this.adapter_.setSelectedTextContent(e)}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){var n=e.cssClasses.DISABLED;this.disabled_=t,this.disabled_?(this.adapter_.addClass(n),this.adapter_.setAttr("aria-disabled","true"),this.adapter_.makeUntabbable()):(this.adapter_.removeClass(n),this.adapter_.rmAttr("aria-disabled"),this.adapter_.makeTabbable())}},{key:"resize",value:function(){var t=this.adapter_.getComputedStyleValue("font"),e=parseFloat(this.adapter_.getComputedStyleValue("letter-spacing"));if(t)this.ctx_.font=t;else{var n=this.adapter_.getComputedStyleValue("font-family").split(",")[0],i=this.adapter_.getComputedStyleValue("font-size");this.ctx_.font=i+" "+n}for(var s=0,a=0,r=this.adapter_.getNumberOfOptions();a<r;a++){var o=parseInt(this.adapter_.getComputedStyleValue("padding-right"),10)+parseInt(this.adapter_.getComputedStyleValue("padding-left"),10),c=this.adapter_.getTextForOptionAtIndex(a).trim(),d=this.ctx_.measureText(c).width,l=e*c.length;s=Math.max(s,Math.ceil(d+l+o))}this.adapter_.setStyle("width",s+"px")}},{key:"open_",value:function(){this.disableScroll_();var t=e.cssClasses.OPEN,n=this.selectedIndex_<0?0:this.selectedIndex_;this.setMenuStylesForOpenAtIndex_(n),this.adapter_.addClassToLabel(he.LABEL_FLOAT_ABOVE),this.adapter_.addClassToBottomLine(he.BOTTOM_LINE_ACTIVE),this.adapter_.addClass(t),this.adapter_.openMenu(n),this.isFocused_=!0}},{key:"setBottomLineOrigin_",value:function(t){var e=t.target.getBoundingClientRect(),n=t.clientX,i=(t.clientY,"transform-origin: "+(n-e.left)+"px bottom");this.adapter_.setBottomLineAttr("style",i)}},{key:"setMenuStylesForOpenAtIndex_",value:function(t){var e=this.adapter_.getWindowInnerHeight(),n=this.adapter_.computeBoundingRect(),i=n.left,s=n.top;this.adapter_.setMenuElAttr("aria-hidden","true"),this.adapter_.setMenuElStyle("display","block");var a=this.adapter_.getMenuElOffsetHeight(),r=this.adapter_.getOffsetTopForOptionAtIndex(t);this.adapter_.setMenuElStyle("display",""),this.adapter_.rmMenuElAttr("aria-hidden");var o=s-r,c=o+a>e;o<0?o=0:c&&(o=Math.max(0,e-a)),this.adapter_.setMenuElStyle("left",i+"px"),this.adapter_.setMenuElStyle("top",o+"px"),this.adapter_.setMenuElStyle("transform-origin","center "+r+"px")}},{key:"close_",value:function(){var t=e.cssClasses.OPEN;this.adapter_.removeClass(t),this.adapter_.removeClassFromBottomLine(he.BOTTOM_LINE_ACTIVE),this.adapter_.focus(),this.enableScroll_()}},{key:"handleDisplayViaKeyboard_",value:function(t){if(2===t.eventPhase){"keydown"===t.type&&("Space"===t.key||32===t.keyCode)&&t.preventDefault();_e.some(function(e){var n=e.key,i=e.keyCode,s=e.forType;return t.type===s&&(t.key===n||t.keyCode===i)})&&this.displayHandler_(t)}}},{key:"disableScroll_",value:function(){this.adapter_.addBodyClass(he.SCROLL_LOCK)}},{key:"enableScroll_",value:function(){this.adapter_.removeBodyClass(he.SCROLL_LOCK)}}]),e}(),pe={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-select mdc-menu-select mdc-menu-anchor",class:this.classes,attrs:{role:"listbox",tabindex:this.tabIndex}},[e("div",{ref:"surface",staticClass:"mdc-select__surface",style:this.styles},[e("div",{ref:"label",staticClass:"mdc-select__label",class:this.labelClasses},[this._v(this._s(this.label))]),this._v(" "),e("div",{ref:"selectedContent",staticClass:"mdc-select__selected-text"},[this._v(this._s(this.selectedTextContent))]),this._v(" "),e("div",{ref:"bottomLine",staticClass:"mdc-select__bottom-line",class:this.bottomLineClasses})]),this._v(" "),e("mdc-menu",{ref:"menu",style:this.menuStyles,on:{update:this.resetIndex}},[this._t("default")],2)],1)},staticRenderFns:[],name:"mdc-menu-select",model:{prop:"value",event:"change"},props:{multiple:Boolean,value:[String,Array],disabled:Boolean,label:String},data:function(){return{classes:{},labelClasses:{},bottomLineClasses:{},styles:{},menuStyles:{},tabIndex:0,selectedTextContent:""}},components:{"mdc-menu":ae},methods:{resetIndex:function(){this.foundation&&(this.foundation.setSelectedIndex(-1),this.$emit("change",this.foundation.getValue()),this.$delete(this.labelClasses,"mdc-select__label--float-above"))}},mounted:function(){var t=this,e=new me({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},addClassToLabel:function(e){return t.$set(t.labelClasses,e,!0)},removeClassFromLabel:function(e){return t.$delete(t.labelClasses,e)},addClassToBottomLine:function(e){return t.$set(t.bottomLineClasses,e,!0)},removeClassFromBottomLine:function(e){return t.$delete(t.bottomLineClasses,e)},setBottomLineAttr:function(e,n){return t.$refs.bottomLine.setAttribute(e,n)},setAttr:function(e,n){return t.$el.setAttribute(e,n)},rmAttr:function(e,n){return t.$el.removeAttribute(e,n)},computeBoundingRect:function(){return t.$refs.surface.getBoundingClientRect()},registerInteractionHandler:function(e,n){return t.$el.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.$el.removeEventListener(e,n)},focus:function(){return t.$el.focus()},makeTabbable:function(){t.tabIndex=0},makeUntabbable:function(){t.tabIndex=-1},getComputedStyleValue:function(e){return window.getComputedStyle(t.$refs.surface).getPropertyValue(e)},setStyle:function(e,n){return t.$set(t.styles,e,n)},create2dRenderingContext:function(){return document.createElement("canvas").getContext("2d")},setMenuElStyle:function(e,n){return t.$set(t.menuStyles,e,n)},setMenuElAttr:function(e,n){return t.$refs.menu.$el.setAttribute(e,n)},rmMenuElAttr:function(e){return t.$refs.menu.$el.removeAttribute(e)},getMenuElOffsetHeight:function(){return t.$refs.menu.$el.offsetHeight},openMenu:function(e){return t.$refs.menu.show({focusIndex:e})},isMenuOpen:function(){return t.$refs.menu.isOpen()},setSelectedTextContent:function(e){t.selectedTextContent=e},getNumberOfOptions:function(){return t.$refs.menu.items.length},getTextForOptionAtIndex:function(e){return t.$refs.menu.items[e].textContent.trim()},getValueForOptionAtIndex:function(e){return t.$refs.menu.items[e].getAttribute("data-value")||t.$refs.menu.items[e].textContent.trim()},setAttrForOptionAtIndex:function(e,n,i){return t.$refs.menu.items[e].setAttribute(n,i)},rmAttrForOptionAtIndex:function(e,n){return t.$refs.menu.items[e].removeAttribute(n)},getOffsetTopForOptionAtIndex:function(e){return t.$refs.menu.items[e].offsetTop},registerMenuInteractionHandler:function(e,n){return t.$refs.menu.foundation.adapter_.registerInteractionHandler(e,n)},deregisterMenuInteractionHandler:function(e,n){return t.$refs.menu.foundation.adapter_.deregisterInteractionHandler(e,n)},notifyChange:function(){t.$emit("change",t.foundation.getValue())},getWindowInnerHeight:function(){return window.innerHeight},addBodyClass:function(t){return document.body.classList.add(t)},removeBodyClass:function(t){return document.body.classList.remove(t)}});e.resize=function(){var n=e.adapter_.getComputedStyleValue("font"),i=parseFloat(e.adapter_.getComputedStyleValue("letter-spacing"));if(n)e.ctx_.font=n;else{var s=e.adapter_.getComputedStyleValue("font-family").split(",")[0],a=e.adapter_.getComputedStyleValue("font-size");e.ctx_.font=a+" "+s}for(var r=0,o=parseInt(e.adapter_.getComputedStyleValue("padding-right"),10)+parseInt(e.adapter_.getComputedStyleValue("padding-left"),10),c=0,d=e.adapter_.getNumberOfOptions();c<d;c++){var l=e.adapter_.getTextForOptionAtIndex(c).trim(),u=e.ctx_.measureText(l).width,h=i*l.length;r=Math.max(r,Math.ceil(u+h+o))}var f=t.label,_=e.ctx_.measureText(f).width,m=i*f.length;r=Math.max(r,Math.ceil(_+m+o)),e.adapter_.setStyle("width",r+"px")},e.init();for(var n=this.$refs.menu.items,i=0;i<n.length;i++){var s=n[i].getAttribute("data-value")||n[i].textContent.trim();if(this.value===s){e.setSelectedIndex(i);break}}e.setDisabled(this.disabled),this.foundation=e,this.value!==this.foundation.getValue()&&this.$emit("change",this.foundation.getValue())},beforeDestroy:function(){var t=this.foundation;this.foundation=null,t.destroy()}},ve={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],ref:"root",staticClass:"mdc-select mdc-multi-select mdc-list",style:t.styles,attrs:{multiple:t.multiple,disabled:t.disabled},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?n:n[0]},t.onChange]}},[t.label?n("optgroup",{ref:"optgroup",staticClass:"mdc-list-group",attrs:{label:t.label}},[t._t("default")],2):t._t("default")],2)},staticRenderFns:[],name:"mdc-multi-select",model:{prop:"value",event:"change"},props:{multiple:Boolean,value:[String,Array],disabled:Boolean,label:String,"max-size":[String,Number]},data:function(){return{selected:this.value,size:void 0,count:void 0}},computed:{styles:function(){var t=this.count>this.size,e={height:48*this.size+(t?0:16)+"px","overflow-y":t?"scroll":"hidden"};return t||(e["background-image"]="unset"),e}},methods:{onChange:function(){this.$emit("change",this.selected)}},mounted:function(){var t=this,e=function(){var e=t.$refs.root.querySelectorAll("option, optgroup").length;t.count=e;var n=Number(t.maxSize);t.label&&(n+=1),t.size=Math.min(e,n)};this.slotObserver=new MutationObserver(function(){return e()}),this.slotObserver.observe(this.$el,{childList:!0,subtree:!0}),e()},beforeDestroy:function(){this.slotObserver.disconnect()}},ge=new(function(){function t(){A(this,t)}return I(t,[{key:"mobile",get:function(){return this._mobile||(this._mobile=window.matchMedia("(max-width: 600px) and (pointer: coarse)"))}}]),t}()),ye={render:function(){var t=this.$createElement;return(this._self._c||t)(this.type,{tag:"component",attrs:{multiple:this.multiple,"max-size":this.multiple?this.maxSize:void 0,disabled:this.disabled,label:this.label,value:this.value},on:{change:this.onChange}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-select",model:{prop:"value",event:"change"},props:{multiple:Boolean,value:[String,Array],disabled:Boolean,label:String,"max-size":{type:[String,Number],default:4}},provide:function(){return{mdcSelect:this}},components:{"mdc-native-select":ue,"mdc-menu-select":pe,"mdc-multi-select":ve},data:function(){return{mobile:!window||ge.mobile.matches}},computed:{type:function(){return this.multiple?"mdc-multi-select":this.menu?"mdc-menu-select":this.native?"mdc-native-select":"mdc-menu-select"},native:function(){return this.multiple||this.mobile}},methods:{onChange:function(t){this.$emit("change",t)},refreshMedia:function(){this.mobile=ge.mobile.matches}},beforeMount:function(){ge.mobile.addListener(this.refreshMedia),this.refreshMedia()},beforeDestroy:function(){ge.mobile.removeListener(this.refreshMedia)}},be={render:function(){var t=this.$createElement,e=this._self._c||t;return this.hasValue?e("option",{staticClass:"mdc-option mdc-native-option",attrs:{disabled:this.disabled},domProps:{value:this.value}},[this._t("default")],2):e("option",{staticClass:"mdc-option mdc-native-option",attrs:{disabled:this.disabled}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-native-option",props:{value:String,disabled:Boolean},computed:{hasValue:function(){return!("undefined"==typeof value)}}},Ce={render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"mdc-option mdc-menu-option mdc-list-item",attrs:{role:"option",tabindex:this.disabled?-1:0,"aria-disabled":this.disabled,"data-value":this.value}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-menu-option",props:{value:String,disabled:Boolean}},Ee={render:function(){var t=this.$createElement,e=this._self._c||t;return this.hasValue?e("option",{staticClass:"mdc-option mdc-multi-option mdc-list-item",attrs:{disabled:this.disabled},domProps:{value:this.value}},[this._t("default")],2):e("option",{staticClass:"mdc-option mdc-multi-option mdc-list-item",attrs:{disabled:this.disabled}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-multi-option",props:{value:String,disabled:Boolean},computed:{hasValue:function(){return!("undefined"==typeof value)}}},Te=e({mdcSelect:ye,mdcOption:{render:function(){var t=this.$createElement;return(this._self._c||t)(this.type,{tag:"component",attrs:{disabled:this.disabled,value:this.value}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-option",props:{value:String,disabled:Boolean},inject:["mdcSelect"],components:{"mdc-native-option":be,"mdc-multi-option":Ee,"mdc-menu-option":Ce},computed:{native:function(){return this.mdcSelect.native},multiple:function(){return this.mdcSelect.multiple},type:function(){return this.multiple?"mdc-multi-option":this.native?"mdc-native-option":"mdc-menu-option"}}}}),ke={ACTIVE:"mdc-slider--active",DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",FOCUS:"mdc-slider--focus",IN_TRANSIT:"mdc-slider--in-transit",IS_DISCRETE:"mdc-slider--discrete",HAS_TRACK_MARKER:"mdc-slider--display-markers"},Ae={TRACK_SELECTOR:".mdc-slider__track",TRACK_MARKER_CONTAINER_SELECTOR:".mdc-slider__track-marker-container",LAST_TRACK_MARKER_SELECTOR:".mdc-slider__track-marker:last-child",THUMB_CONTAINER_SELECTOR:".mdc-slider__thumb-container",PIN_VALUE_MARKER_SELECTOR:".mdc-slider__pin-value-marker",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUENOW:"aria-valuenow",ARIA_DISABLED:"aria-disabled",STEP_DATA_ATTR:"data-step",CHANGE_EVENT:"MDCSlider:change",INPUT_EVENT:"MDCSlider:input"},Ie={PAGE_FACTOR:4},Se="ArrowLeft",we="ArrowRight",Oe="ArrowUp",xe="ArrowDown",He="Home",Le="End",De="PageUp",Re="PageDown",Fe=["mouseup","pointerup","touchend"],Ne=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.rect_=null,n.savedTabIndex_=NaN,n.active_=!1,n.inTransit_=!1,n.isDiscrete_=!1,n.hasTrackMarker_=!1,n.handlingThumbTargetEvt_=!1,n.min_=0,n.max_=100,n.step_=0,n.value_=0,n.disabled_=!1,n.preventFocusState_=!1,n.updateUIFrame_=0,n.thumbContainerPointerHandler_=function(){n.handlingThumbTargetEvt_=!0},n.mousedownHandler_=n.createDownHandler_("mousemove"),n.pointerdownHandler_=n.createDownHandler_("pointermove"),n.touchstartHandler_=n.createDownHandler_("touchmove",function(t){return t.targetTouches[0].pageX}),n.keydownHandler_=function(t){return n.handleKeydown_(t)},n.focusHandler_=function(){return n.handleFocus_()},n.blurHandler_=function(){return n.handleBlur_()},n.resizeHandler_=function(){return n.layout()},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return ke}},{key:"strings",get:function(){return Ae}},{key:"numbers",get:function(){return Ie}},{key:"defaultAdapter",get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabIndex:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerThumbContainerInteractionHandler:function(){},deregisterThumbContainerInteractionHandler:function(){},registerBodyInteractionHandler:function(){},deregisterBodyInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},notifyInput:function(){},notifyChange:function(){},setThumbContainerStyleProperty:function(){},setTrackStyleProperty:function(){},setMarkerValue:function(){},appendTrackMarkers:function(){},removeTrackMarkers:function(){},setLastTrackMarkersStyleProperty:function(){},isRTL:function(){return!1}}}}]),I(e,[{key:"init",value:function(){var t=this;this.isDiscrete_=this.adapter_.hasClass(ke.IS_DISCRETE),this.hasTrackMarker_=this.adapter_.hasClass(ke.HAS_TRACK_MARKER),this.adapter_.registerInteractionHandler("mousedown",this.mousedownHandler_),this.adapter_.registerInteractionHandler("pointerdown",this.pointerdownHandler_),this.adapter_.registerInteractionHandler("touchstart",this.touchstartHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_),["mousedown","pointerdown","touchstart"].forEach(function(e){t.adapter_.registerThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)}),this.adapter_.registerResizeHandler(this.resizeHandler_),this.layout(),this.isDiscrete_&&0==this.getStep()&&(this.step_=1)}},{key:"destroy",value:function(){var t=this;this.adapter_.deregisterInteractionHandler("mousedown",this.mousedownHandler_),this.adapter_.deregisterInteractionHandler("pointerdown",this.pointerdownHandler_),this.adapter_.deregisterInteractionHandler("touchstart",this.touchstartHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),["mousedown","pointerdown","touchstart"].forEach(function(e){t.adapter_.deregisterThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)}),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"setupTrackMarker",value:function(){if(this.isDiscrete_&&this.hasTrackMarker_&&0!=this.getStep()){var t=this.getMin(),e=this.getMax(),n=this.getStep(),i=(e-t)/n,s=Math.ceil(i)!==i;if(s&&(i=Math.ceil(i)),this.adapter_.removeTrackMarkers(),this.adapter_.appendTrackMarkers(i),s){var a=(e-i*n)/n+1,r=d(window,"flex");this.adapter_.setLastTrackMarkersStyleProperty(r,a)}}}},{key:"layout",value:function(){this.rect_=this.adapter_.computeBoundingRect(),this.updateUIForCurrentValue_()}},{key:"getValue",value:function(){return this.value_}},{key:"setValue",value:function(t){this.setValue_(t,!1)}},{key:"getMax",value:function(){return this.max_}},{key:"setMax",value:function(t){if(t<this.min_)throw new Error("Cannot set max to be less than the slider's minimum value");this.max_=t,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Ae.ARIA_VALUEMAX,String(this.max_)),this.setupTrackMarker()}},{key:"getMin",value:function(){return this.min_}},{key:"setMin",value:function(t){if(t>this.max_)throw new Error("Cannot set min to be greater than the slider's maximum value");this.min_=t,this.setValue_(this.value_,!1,!0),this.adapter_.setAttribute(Ae.ARIA_VALUEMIN,String(this.min_)),this.setupTrackMarker()}},{key:"getStep",value:function(){return this.step_}},{key:"setStep",value:function(t){if(t<0)throw new Error("Step cannot be set to a negative number");this.isDiscrete_&&("number"!=typeof t||t<1)&&(t=1),this.step_=t,this.setValue_(this.value_,!1,!0),this.setupTrackMarker()}},{key:"isDisabled",value:function(){return this.disabled_}},{key:"setDisabled",value:function(t){this.disabled_=t,this.toggleClass_(ke.DISABLED,this.disabled_),this.disabled_?(this.savedTabIndex_=this.adapter_.getTabIndex(),this.adapter_.setAttribute(Ae.ARIA_DISABLED,"true"),this.adapter_.removeAttribute("tabindex")):(this.adapter_.removeAttribute(Ae.ARIA_DISABLED),isNaN(this.savedTabIndex_)||this.adapter_.setAttribute("tabindex",String(this.savedTabIndex_)))}},{key:"createDownHandler_",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.pageX},i=function(t){t.preventDefault(),e.setValueFromEvt_(t,n)},s=function n(){e.setActive_(!1),e.adapter_.deregisterBodyInteractionHandler(t,i),Fe.forEach(function(t){return e.adapter_.deregisterBodyInteractionHandler(t,n)}),e.adapter_.notifyChange()};return function(a){e.disabled_||(e.preventFocusState_=!0,e.setInTransit_(!e.handlingThumbTargetEvt_),e.handlingThumbTargetEvt_=!1,e.setActive_(!0),e.adapter_.registerBodyInteractionHandler(t,i),Fe.forEach(function(t){return e.adapter_.registerBodyInteractionHandler(t,s)}),e.setValueFromEvt_(a,n))}}},{key:"setValueFromEvt_",value:function(t,e){var n=e(t),i=this.computeValueFromPageX_(n);this.setValue_(i,!0)}},{key:"computeValueFromPageX_",value:function(t){var e=this.max_,n=this.min_,i=(t-this.rect_.left)/this.rect_.width;return this.adapter_.isRTL()&&(i=1-i),n+i*(e-n)}},{key:"handleKeydown_",value:function(t){var e=this.getKeyId_(t),n=this.getValueForKeyId_(e);isNaN(n)||(t.preventDefault(),this.adapter_.addClass(ke.FOCUS),this.setValue_(n,!0),this.adapter_.notifyChange())}},{key:"getKeyId_",value:function(t){return t.key===Se||37===t.keyCode?Se:t.key===we||39===t.keyCode?we:t.key===Oe||38===t.keyCode?Oe:t.key===xe||40===t.keyCode?xe:t.key===He||36===t.keyCode?He:t.key===Le||35===t.keyCode?Le:t.key===De||33===t.keyCode?De:t.key===Re||34===t.keyCode?Re:""}},{key:"getValueForKeyId_",value:function(t){var e=this.max_,n=this.min_,i=this.step_||(e-n)/100;switch(this.adapter_.isRTL()&&(t===Se||t===we)&&(i=-i),t){case Se:case xe:return this.value_-i;case we:case Oe:return this.value_+i;case He:return this.min_;case Le:return this.max_;case De:return this.value_+i*Ie.PAGE_FACTOR;case Re:return this.value_-i*Ie.PAGE_FACTOR;default:return NaN}}},{key:"handleFocus_",value:function(){this.preventFocusState_||this.adapter_.addClass(ke.FOCUS)}},{key:"handleBlur_",value:function(){this.preventFocusState_=!1,this.adapter_.removeClass(ke.FOCUS)}},{key:"setValue_",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t!==this.value_||n){var i=this.min_,s=this.max_,a=t===i||t===s;this.step_&&!a&&(t=this.quantize_(t)),t<i?t=i:t>s&&(t=s),this.value_=t,this.adapter_.setAttribute(Ae.ARIA_VALUENOW,String(this.value_)),this.updateUIForCurrentValue_(),e&&(this.adapter_.notifyInput(),this.isDiscrete_&&this.adapter_.setMarkerValue(t))}}},{key:"quantize_",value:function(t){return Math.round(t/this.step_)*this.step_}},{key:"updateUIForCurrentValue_",value:function(){var t=this,e=this.max_,n=this.min_,i=(this.value_-n)/(e-n),s=i*this.rect_.width;this.adapter_.isRTL()&&(s=this.rect_.width-s);var a=d(window,"transform"),r=c(window,"transitionend");if(this.inTransit_){var o=function e(){t.setInTransit_(!1),t.adapter_.deregisterThumbContainerInteractionHandler(r,e)};this.adapter_.registerThumbContainerInteractionHandler(r,o)}this.updateUIFrame_=requestAnimationFrame(function(){t.adapter_.setThumbContainerStyleProperty(a,"translateX("+s+"px) translateX(-50%)"),t.adapter_.setTrackStyleProperty(a,"scaleX("+i+")")})}},{key:"setActive_",value:function(t){this.active_=t,this.toggleClass_(ke.ACTIVE,this.active_)}},{key:"setInTransit_",value:function(t){this.inTransit_=t,this.toggleClass_(ke.IN_TRANSIT,this.inTransit_)}},{key:"toggleClass_",value:function(t,e){e?this.adapter_.addClass(t):this.adapter_.removeClass(t)}}]),e}(),Be=e({mdcSlider:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdc-slider",class:t.classes,attrs:{tabindex:"0",role:"slider"}},[n("div",{staticClass:"mdc-slider__track-container"},[n("div",{staticClass:"mdc-slider__track",style:t.trackStyles}),t._v(" "),t.hasMarkers?n("div",{staticClass:"mdc-slider__track-marker-container"},t._l(t.numMarkers,function(e){return n("div",{key:e,staticClass:"mdc-slider__track-marker",style:e==t.numMarkers?t.lastTrackMarkersStyles:{}})})):t._e()]),t._v(" "),n("div",{ref:"thumbContainer",staticClass:"mdc-slider__thumb-container",style:t.thumbStyles},[t.isDiscrete?n("div",{staticClass:"mdc-slider__pin"},[n("span",{staticClass:"mdc-slider__pin-value-marker"},[t._v(t._s(t.markerValue))])]):t._e(),t._v(" "),n("svg",{staticClass:"mdc-slider__thumb",attrs:{width:"21",height:"21"}},[n("circle",{attrs:{cx:"10.5",cy:"10.5",r:"7.875"}})]),t._v(" "),n("div",{staticClass:"mdc-slider__focus-ring"})])])},staticRenderFns:[],name:"mdc-slider",model:{prop:"value",event:"change"},props:{value:[Number,String],min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:0},"display-markers":Boolean,disabled:Boolean},data:function(){return{classes:{"mdc-slider--discrete":!!this.step,"mdc-slider--display-markers":this.displayMarkers},trackStyles:{},lastTrackMarkersStyles:{},thumbStyles:{},markerValue:"",numMarkers:0}},computed:{isDiscrete:function(){return!!this.step},hasMarkers:function(){return!!this.step&&this.displayMarkers&&this.numMarkers}},watch:{value:function(){this.foundation.getValue()!==Number(this.value)&&this.foundation.setValue(this.value)},min:function(){this.foundation.setMin(Number(this.min))},max:function(){this.foundation.setMax(Number(this.max))},step:function(){this.foundation.setStep(Number(this.step))},disabled:function(){this.foundation.setDisabled(this.disabled)}},methods:{layout:function(){this.foundation&&this.foundation.layout()}},mounted:function(){var t=this;this.foundation=new Ne({hasClass:function(e){return t.$el.classList.contains(e)},addClass:function(e){t.$set(t.classes,e,!0)},removeClass:function(e){t.$delete(t.classes,e,!0)},getAttribute:function(e){return t.$el.getAttribute(e)},setAttribute:function(e,n){return t.$el.setAttribute(e,n)},removeAttribute:function(e){return t.$el.removeAttribute(e)},computeBoundingRect:function(){return t.$el.getBoundingClientRect()},getTabIndex:function(){return t.$el.tabIndex},registerInteractionHandler:function(e,n){t.$el.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){t.$el.removeEventListener(e,n)},registerThumbContainerInteractionHandler:function(e,n){t.$refs.thumbContainer.addEventListener(e,n)},deregisterThumbContainerInteractionHandler:function(e,n){t.$refs.thumbContainer.removeEventListener(e,n)},registerBodyInteractionHandler:function(t,e){document.body.addEventListener(t,e)},deregisterBodyInteractionHandler:function(t,e){document.body.removeEventListener(t,e)},registerResizeHandler:function(t){window.addEventListener("resize",t)},deregisterResizeHandler:function(t){window.removeEventListener("resize",t)},notifyInput:function(){t.$emit("input",t.foundation.getValue())},notifyChange:function(){t.$emit("change",t.foundation.getValue())},setThumbContainerStyleProperty:function(e,n){t.$set(t.thumbStyles,e,n)},setTrackStyleProperty:function(e,n){t.$set(t.trackStyles,e,n)},setMarkerValue:function(e){t.markerValue=e},appendTrackMarkers:function(e){t.numMarkers=e},removeTrackMarkers:function(){t.numMarkers=0},setLastTrackMarkersStyleProperty:function(e,n){t.$set(t.lastTrackMarkersStyles,e,n)},isRTL:function(){return!1}}),this.foundation.init(),this.foundation.setDisabled(this.disabled),this.foundation.setMin(Number(this.min)),this.foundation.setMax(Number(this.max)),this.foundation.setStep(Number(this.step)),this.foundation.setValue(Number(this.value)),this.hasMarkers&&this.foundation.setupTrackMarker(),this.$root.$on("mdc:layout",function(){t.$nextTick(function(){t.foundation.layout()})})},beforeDestroy:function(){this.foundation.destroy()}}}),$e={ROOT:"mdc-snackbar",TEXT:"mdc-snackbar__text",ACTION_WRAPPER:"mdc-snackbar__action-wrapper",ACTION_BUTTON:"mdc-snackbar__action-button",ACTIVE:"mdc-snackbar--active",MULTILINE:"mdc-snackbar--multiline",ACTION_ON_BOTTOM:"mdc-snackbar--action-on-bottom"},Me={TEXT_SELECTOR:".mdc-snackbar__text",ACTION_WRAPPER_SELECTOR:".mdc-snackbar__action-wrapper",ACTION_BUTTON_SELECTOR:".mdc-snackbar__action-button"},Pe={MESSAGE_TIMEOUT:2750},Ve=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.active_=!1,n.actionWasClicked_=!1,n.dismissOnAction_=!0,n.firstFocus_=!0,n.pointerDownRecognized_=!1,n.snackbarHasFocus_=!1,n.snackbarData_=null,n.queue_=[],n.actionClickHandler_=function(){n.actionWasClicked_=!0,n.invokeAction_()},n.visibilitychangeHandler_=function(){clearTimeout(n.timeoutId_),n.snackbarHasFocus_=!0,n.adapter_.visibilityIsHidden()||setTimeout(n.cleanup_.bind(n),n.snackbarData_.timeout||Pe.MESSAGE_TIMEOUT)},n.interactionHandler_=function(t){"touchstart"!=t.type&&"mousedown"!=t.type||(n.pointerDownRecognized_=!0),n.handlePossibleTabKeyboardFocus_(t),"focus"==t.type&&(n.pointerDownRecognized_=!1)},n.blurHandler_=function(){clearTimeout(n.timeoutId_),n.snackbarHasFocus_=!1,n.timeoutId_=setTimeout(n.cleanup_.bind(n),n.snackbarData_.timeout||Pe.MESSAGE_TIMEOUT)},n}return x(e,F),I(e,[{key:"active",get:function(){return this.active_}}],[{key:"cssClasses",get:function(){return $e}},{key:"strings",get:function(){return Me}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},setAriaHidden:function(){},unsetAriaHidden:function(){},setActionAriaHidden:function(){},unsetActionAriaHidden:function(){},setActionText:function(){},setMessageText:function(){},setFocus:function(){},visibilityIsHidden:function(){return!1},registerCapturedBlurHandler:function(){},deregisterCapturedBlurHandler:function(){},registerVisibilityChangeHandler:function(){},deregisterVisibilityChangeHandler:function(){},registerCapturedInteractionHandler:function(){},deregisterCapturedInteractionHandler:function(){},registerActionClickHandler:function(){},deregisterActionClickHandler:function(){},registerTransitionEndHandler:function(){},deregisterTransitionEndHandler:function(){}}}}]),I(e,[{key:"init",value:function(){this.adapter_.registerActionClickHandler(this.actionClickHandler_),this.adapter_.setAriaHidden(),this.adapter_.setActionAriaHidden()}},{key:"destroy",value:function(){var t=this;this.adapter_.deregisterActionClickHandler(this.actionClickHandler_),this.adapter_.deregisterCapturedBlurHandler(this.blurHandler_),this.adapter_.deregisterVisibilityChangeHandler(this.visibilitychangeHandler_),["touchstart","mousedown","focus"].forEach(function(e){t.adapter_.deregisterCapturedInteractionHandler(e,t.interactionHandler_)})}},{key:"dismissesOnAction",value:function(){return this.dismissOnAction_}},{key:"setDismissOnAction",value:function(t){this.dismissOnAction_=!!t}},{key:"show",value:function(t){var e=this;if(!t)throw new Error("Please provide a data object with at least a message to display.");if(!t.message)throw new Error("Please provide a message to be displayed.");if(t.actionHandler&&!t.actionText)throw new Error("Please provide action text with the handler.");if(this.active)this.queue_.push(t);else{clearTimeout(this.timeoutId_),this.snackbarData_=t,this.firstFocus_=!0,this.adapter_.registerVisibilityChangeHandler(this.visibilitychangeHandler_),this.adapter_.registerCapturedBlurHandler(this.blurHandler_),["touchstart","mousedown","focus"].forEach(function(t){e.adapter_.registerCapturedInteractionHandler(t,e.interactionHandler_)});var n=$e.ACTIVE,i=$e.MULTILINE,s=$e.ACTION_ON_BOTTOM;this.adapter_.setMessageText(this.snackbarData_.message),this.snackbarData_.multiline&&(this.adapter_.addClass(i),this.snackbarData_.actionOnBottom&&this.adapter_.addClass(s)),this.snackbarData_.actionHandler?(this.adapter_.setActionText(this.snackbarData_.actionText),this.actionHandler_=this.snackbarData_.actionHandler,this.setActionHidden_(!1)):(this.setActionHidden_(!0),this.actionHandler_=null,this.adapter_.setActionText(null)),this.active_=!0,this.adapter_.addClass(n),this.adapter_.unsetAriaHidden(),this.timeoutId_=setTimeout(this.cleanup_.bind(this),this.snackbarData_.timeout||Pe.MESSAGE_TIMEOUT)}}},{key:"handlePossibleTabKeyboardFocus_",value:function(){this.firstFocus_&&!this.pointerDownRecognized_&&this.setFocusOnAction_(),this.firstFocus_=!1}},{key:"setFocusOnAction_",value:function(){this.adapter_.setFocus(),this.snackbarHasFocus_=!0,this.firstFocus_=!1}},{key:"invokeAction_",value:function(){try{if(!this.actionHandler_)return;this.actionHandler_()}finally{this.dismissOnAction_&&this.cleanup_()}}},{key:"cleanup_",value:function(){var t=this;if(!this.snackbarHasFocus_||this.actionWasClicked_){var e=$e.ACTIVE,n=$e.MULTILINE,i=$e.ACTION_ON_BOTTOM;this.adapter_.removeClass(e);var s=function e(){clearTimeout(t.timeoutId_),t.adapter_.deregisterTransitionEndHandler(e),t.adapter_.removeClass(n),t.adapter_.removeClass(i),t.setActionHidden_(!0),t.adapter_.setAriaHidden(),t.active_=!1,t.snackbarHasFocus_=!1,t.showNext_()};this.adapter_.registerTransitionEndHandler(s)}}},{key:"showNext_",value:function(){this.queue_.length&&this.show(this.queue_.shift())}},{key:"setActionHidden_",value:function(t){t?this.adapter_.setActionAriaHidden():this.adapter_.unsetActionAriaHidden()}}]),e}(),Ue=e({mdcSnackbar:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"root",staticClass:"mdc-snackbar",class:this.classes,attrs:{"aria-live":"assertive","aria-atomic":"true","aria-hidden":this.hidden}},[e("div",{staticClass:"mdc-snackbar__text"},[this._v(this._s(this.message))]),this._v(" "),e("div",{staticClass:"mdc-snackbar__action-wrapper"},[e("button",{ref:"button",staticClass:"mdc-snackbar__action-button",attrs:{type:"button","aria-hidden":this.actionHidden}},[this._v(this._s(this.actionText))])])])},staticRenderFns:[],name:"mdc-snackbar",props:{"align-start":Boolean,event:{type:String,required:!1,default:function(){return"show-snackbar"}},"event-source":{type:Object,required:!1,default:function(){return this.$root}},"dismisses-on-action":{type:Boolean,default:!0}},data:function(){return{classes:{"mdc-snackbar--align-start":this["align-start"]},message:"",actionText:"",hidden:!1,actionHidden:!1}},methods:{show:function(t){this.foundation.show(t)}},mounted:function(){var t=this;this.foundation=new Ve({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},setAriaHidden:function(){return t.hidden=!0},unsetAriaHidden:function(){return t.hidden=!1},setActionAriaHidden:function(){return t.actionHidden=!0},unsetActionAriaHidden:function(){return t.actionHidden=!1},setActionText:function(e){t.actionText=e},setMessageText:function(e){t.message=e},setFocus:function(){return t.$refs.button.focus()},visibilityIsHidden:function(){return document.hidden},registerCapturedBlurHandler:function(e){return t.$refs.button.addEventListener("blur",e,!0)},deregisterCapturedBlurHandler:function(e){return t.$refs.button.removeEventListener("blur",e,!0)},registerVisibilityChangeHandler:function(t){return document.addEventListener("visibilitychange",t)},deregisterVisibilityChangeHandler:function(t){return document.removeEventListener("visibilitychange",t)},registerCapturedInteractionHandler:function(t,e){return document.body.addEventListener(t,e,!0)},deregisterCapturedInteractionHandler:function(t,e){return document.body.removeEventListener(t,e,!0)},registerActionClickHandler:function(e){return t.$refs.button.addEventListener("click",e)},deregisterActionClickHandler:function(e){return t.$refs.button.removeEventListener("click",e)},registerTransitionEndHandler:function(e){t.$refs.root.addEventListener(c(window,"transitionend"),e)},deregisterTransitionEndHandler:function(e){t.$refs.root.removeEventListener(c(window,"transitionend"),e)}}),this.foundation.init(),this.event&&this.eventSource.$on(this.event,function(e){t.foundation.show(e)}),this.foundation.setDismissOnAction(this.dismissesOnAction)},beforeDestroy:function(){this.foundation.destroy()}}}),ze=e({mdcSwitch:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-switch-wrapper",class:this.formFieldClasses},[e("div",{ref:"root",staticClass:"mdc-switch",class:{"mdc-switch--disabled":this.disabled}},[e("input",{ref:"control",staticClass:"mdc-switch__native-control",attrs:{type:"checkbox",id:this._uid,disabled:this.disabled},domProps:{checked:this.checked},on:{change:this.onChanged}}),this._v(" "),this._m(0,!1,!1)]),this._v(" "),this.label?e("label",{attrs:{for:this._uid}},[this._v(this._s(this.label))]):this._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdc-switch__background"},[e("div",{staticClass:"mdc-switch__knob"})])}],name:"mdc-switch",model:{prop:"checked",event:"change"},props:{checked:Boolean,label:String,alignEnd:Boolean,disabled:Boolean,value:{type:String,default:function(){return"on"}}},data:function(){return{formFieldClasses:{"mdc-form-field":this.label,"mdc-form-field--align-end":this.label&&this.alignEnd}}},watch:{disabled:function(t){this.foundation.setDisabled(t)}},computed:{},methods:{onChanged:function(t){this.$emit("change",t.target.checked)}}}}),Ke={ACTIVE:"mdc-tab--active"},Xe={SELECTED_EVENT:"MDCTab:selected"},Ge=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.computedWidth_=0,n.computedLeft_=0,n.isActive_=!1,n.preventDefaultOnClick_=!1,n.clickHandler_=function(t){n.preventDefaultOnClick_&&t.preventDefault(),n.adapter_.notifySelected()},n.keydownHandler_=function(t){(t.key&&"Enter"===t.key||13===t.keyCode)&&n.adapter_.notifySelected()},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return Ke}},{key:"strings",get:function(){return Xe}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},getOffsetWidth:function(){return 0},getOffsetLeft:function(){return 0},notifySelected:function(){}}}}]),I(e,[{key:"init",value:function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_),this.adapter_.registerInteractionHandler("keydown",this.keydownHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_),this.adapter_.deregisterInteractionHandler("keydown",this.keydownHandler_)}},{key:"getComputedWidth",value:function(){return this.computedWidth_}},{key:"getComputedLeft",value:function(){return this.computedLeft_}},{key:"isActive",value:function(){return this.isActive_}},{key:"setActive",value:function(t){this.isActive_=t,this.isActive_?this.adapter_.addClass(Ke.ACTIVE):this.adapter_.removeClass(Ke.ACTIVE)}},{key:"preventsDefaultOnClick",value:function(){return this.preventDefaultOnClick_}},{key:"setPreventDefaultOnClick",value:function(t){this.preventDefaultOnClick_=t}},{key:"measureSelf",value:function(){this.computedWidth_=this.adapter_.getOffsetWidth(),this.computedLeft_=this.adapter_.getOffsetLeft()}}]),e}(),We={render:function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"mdc-tab",class:this.classes,style:this.styles,on:{click:this.dispatchEvent}},[this.hasIcon?e("i",{staticClass:"material-icons mdc-tab__icon"},[this._v(this._s(this.icon))]):this._e(),this._v(" "),e("span",[this._t("default")],2)])},staticRenderFns:[],name:"mdc-tab",mixins:[R],props:{active:Boolean,icon:String},data:function(){return{classes:{},styles:{}}},computed:{hasIcon:function(){return!!this.icon},hasText:function(){return!!this.$slots.default}},methods:{getComputedWidth:function(){return this.foundation.getComputedWidth()},getComputedLeft:function(){return this.foundation.getComputedLeft()},isActive:function(){return this.foundation.isActive()},setActive:function(t){this.foundation.setActive(t)},isDefaultPreventedOnClick:function(){return this.foundation.preventsDefaultOnClick()},setPreventDefaultOnClick:function(t){this.foundation.setPreventDefaultOnClick(t)},measureSelf:function(){this.foundation.measureSelf()}},mounted:function(){var t=this;this.foundation=new Ge({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},registerInteractionHandler:function(e,n){return t.$el.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.$el.removeEventListener(e,n)},getOffsetWidth:function(){return t.$el.offsetWidth},getOffsetLeft:function(){return t.$el.offsetLeft},notifySelected:function(){n(t.$el,Ge.strings.SELECTED_EVENT,{tab:t},!0)}}),this.foundation.init(),this.setActive(this.active),this.ripple=new z(this),this.ripple.init()},beforeDestroy:function(){this.foundation.destroy(),this.ripple.destroy()}},je={UPGRADED:"mdc-tab-bar-upgraded"},qe={TAB_SELECTOR:".mdc-tab",INDICATOR_SELECTOR:".mdc-tab-bar__indicator",CHANGE_EVENT:"MDCTabBar:change"},Ye=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.isIndicatorShown_=!1,n.computedWidth_=0,n.computedLeft_=0,n.activeTabIndex_=0,n.layoutFrame_=0,n.resizeHandler_=function(){return n.layout()},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return je}},{key:"strings",get:function(){return qe}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},bindOnMDCTabSelectedEvent:function(){},unbindOnMDCTabSelectedEvent:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},getOffsetWidth:function(){return 0},setStyleForIndicator:function(){},getOffsetWidthForIndicator:function(){return 0},notifyChange:function(){},getNumberOfTabs:function(){return 0},isTabActiveAtIndex:function(){return!1},setTabActiveAtIndex:function(){},isDefaultPreventedOnClickForTabAtIndex:function(){return!1},setPreventDefaultOnClickForTabAtIndex:function(){},measureTabAtIndex:function(){},getComputedWidthForTabAtIndex:function(){return 0},getComputedLeftForTabAtIndex:function(){return 0}}}}]),I(e,[{key:"init",value:function(){this.adapter_.addClass(je.UPGRADED),this.adapter_.bindOnMDCTabSelectedEvent(),this.adapter_.registerResizeHandler(this.resizeHandler_);var t=this.findActiveTabIndex_();t>=0&&(this.activeTabIndex_=t),this.layout()}},{key:"destroy",value:function(){this.adapter_.removeClass(je.UPGRADED),this.adapter_.unbindOnMDCTabSelectedEvent(),this.adapter_.deregisterResizeHandler(this.resizeHandler_)}},{key:"layoutInternal_",value:function(){var t=this;this.forEachTabIndex_(function(e){return t.adapter_.measureTabAtIndex(e)}),this.computedWidth_=this.adapter_.getOffsetWidth(),this.layoutIndicator_()}},{key:"layoutIndicator_",value:function(){var t=!this.isIndicatorShown_;t&&this.adapter_.setStyleForIndicator("transition","none");var e="translateX("+this.adapter_.getComputedLeftForTabAtIndex(this.activeTabIndex_)+"px) scale("+this.adapter_.getComputedWidthForTabAtIndex(this.activeTabIndex_)/this.adapter_.getOffsetWidth()+", 1)";this.adapter_.setStyleForIndicator(d(window,"transform"),e),t&&(this.adapter_.getOffsetWidthForIndicator(),this.adapter_.setStyleForIndicator("transition",""),this.adapter_.setStyleForIndicator("visibility","visible"),this.isIndicatorShown_=!0)}},{key:"findActiveTabIndex_",value:function(){var t=this,e=-1;return this.forEachTabIndex_(function(n){if(t.adapter_.isTabActiveAtIndex(n))return e=n,!0}),e}},{key:"forEachTabIndex_",value:function(t){for(var e=this.adapter_.getNumberOfTabs(),n=0;n<e;n++){if(t(n))break}}},{key:"layout",value:function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame(function(){t.layoutInternal_(),t.layoutFrame_=0})}},{key:"switchToTabAtIndex",value:function(t,e){var n=this;if(t!==this.activeTabIndex_){if(t<0||t>=this.adapter_.getNumberOfTabs())throw new Error("Out of bounds index specified for tab: "+t);var i=this.activeTabIndex_;this.activeTabIndex_=t,requestAnimationFrame(function(){i>=0&&n.adapter_.setTabActiveAtIndex(i,!1),n.adapter_.setTabActiveAtIndex(n.activeTabIndex_,!0),n.layoutIndicator_(),e&&n.adapter_.notifyChange({activeTabIndex:n.activeTabIndex_})})}}},{key:"getActiveTabIndex",value:function(){return this.findActiveTabIndex_()}}]),e}(),Je=e({mdcTab:We,mdcTabBar:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"mdc-tab-bar",class:this.classes},[this._t("default"),this._v(" "),e("span",{ref:"indicator",staticClass:"mdc-tab-bar__indicator",style:this.indicatorStyles})],2)},staticRenderFns:[],name:"mdc-tab-bar",props:{"indicator-primary":Boolean,"indicator-accent":Boolean},data:function(){return{classes:{"mdc-tab-bar--indicator-primary":this.indicatorPrimary,"mdc-tab-bar--indicator-accent":this.indicatorAccent},indicatorStyles:{},tabs:[]}},methods:{onSelect:function(t){var e=t.detail.tab,n=this.tabs.indexOf(e);if(n<0)throw new Error("mdc-tab-bar internal error: index not found");this.foundation.switchToTabAtIndex(n,!0)}},mounted:function(){var t=this;this.foundation=new Ye({addClass:function(e){return t.$set(t.classes,e,!0)},removeClass:function(e){return t.$delete(t.classes,e)},bindOnMDCTabSelectedEvent:function(){t.$el.addEventListener(Ge.strings.SELECTED_EVENT,t.onSelect)},unbindOnMDCTabSelectedEvent:function(){return t.$el.removeEventListener(Ge.strings.SELECTED_EVENT,t.onSelect)},registerResizeHandler:function(t){return window.addEventListener("resize",t)},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},getOffsetWidth:function(){return t.$el.offsetWidth},setStyleForIndicator:function(e,n){return t.$set(t.indicatorStyles,e,n)},getOffsetWidthForIndicator:function(){return t.$refs.indicator.offsetWidth},notifyChange:function(e){t.$emit("change",e.activeTabIndex)},getNumberOfTabs:function(){return t.tabs.length},isTabActiveAtIndex:function(e){return t.tabs[e].isActive()},setTabActiveAtIndex:function(e,n){t.tabs[e].setActive(n)},isDefaultPreventedOnClickForTabAtIndex:function(e){return t.tabs[e].isDefaultPreventedOnClick()},setPreventDefaultOnClickForTabAtIndex:function(e,n){t.tabs[e].setPreventDefaultOnClick(n)},measureTabAtIndex:function(e){return t.tabs[e].measureSelf()},getComputedWidthForTabAtIndex:function(e){return t.tabs[e].getComputedWidth()},getComputedLeftForTabAtIndex:function(e){return t.tabs[e].getComputedLeft()}});var e=function(){var e=[].slice.call(t.$el.querySelectorAll(Ye.strings.TAB_SELECTOR));t.tabs=e.map(function(t){return t.__vue__});var n=void 0,i=void 0,s=t.tabs,a=!0,r=!1,o=void 0;try{for(var c,d=s[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){if(c.value.hasText){n=!0;break}}}catch(t){r=!0,o=t}finally{try{!a&&d.return&&d.return()}finally{if(r)throw o}}var l=!0,u=!1,h=void 0;try{for(var f,_=s[Symbol.iterator]();!(l=(f=_.next()).done);l=!0){if(f.value.hasIcon){i=!0;break}}}catch(t){u=!0,h=t}finally{try{!l&&_.return&&_.return()}finally{if(u)throw h}}if(n&&i?t.$set(t.classes,"mdc-tab-bar--icons-with-text",!0):i&&t.$set(t.classes,"mdc-tab-bar--icon-tab-bar",!0),t.foundation){var m=t.foundation.getActiveTabIndex();m>=0?t.foundation.switchToTabAtIndex(m,!0):t.foundation.switchToTabAtIndex(0,!0),t.foundation.layout()}};e(),this.slotObserver=new MutationObserver(function(){return e()}),this.slotObserver.observe(this.$el,{childList:!0,subtree:!0}),this.foundation.init()},beforeDestroy:function(){this.slotObserver.disconnect(),this.foundation.destroy()}}}),Ze=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"registerEventHandler",value:function(t,e){}},{key:"deregisterEventHandler",value:function(t,e){}},{key:"notifyAnimationEnd",value:function(){}}])}(),{ANIMATION_END_EVENT:"MDCTextFieldBottomLine:animation-end"}),Qe={BOTTOM_LINE_ACTIVE:"mdc-text-field__bottom-line--active"},tn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.transitionEndHandler_=function(t){return n.handleTransitionEnd(t)},n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return Qe}},{key:"strings",get:function(){return Ze}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},setAttr:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},notifyAnimationEnd:function(){}}}}]),I(e,[{key:"init",value:function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)}},{key:"activate",value:function(){this.adapter_.addClass(Qe.BOTTOM_LINE_ACTIVE)}},{key:"setTransformOrigin",value:function(t){var e=t.target.getBoundingClientRect(),n=t.clientX,i=(t.clientY,"transform-origin: "+(n-e.left)+"px center");this.adapter_.setAttr("style",i)}},{key:"deactivate",value:function(){this.adapter_.removeClass(Qe.BOTTOM_LINE_ACTIVE)}},{key:"handleTransitionEnd",value:function(t){"opacity"===t.propertyName&&this.adapter_.notifyAnimationEnd()}}]),e}(),en=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"hasClass",value:function(t){}},{key:"setAttr",value:function(t,e){}},{key:"removeAttr",value:function(t){}},{key:"setContent",value:function(t){}}])}(),{ARIA_HIDDEN:"aria-hidden",ROLE:"role"}),nn={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg"},sn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A(this,e),H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)))}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return nn}},{key:"strings",get:function(){return en}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){},setAttr:function(){},removeAttr:function(){},setContent:function(){}}}}]),I(e,[{key:"setContent",value:function(t){this.adapter_.setContent(t)}},{key:"showToScreenReader",value:function(){this.adapter_.removeAttr(en.ARIA_HIDDEN)}},{key:"setValidity",value:function(t){var e=this.adapter_.hasClass(nn.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(nn.HELPER_TEXT_VALIDATION_MSG)&&!t;n?this.adapter_.setAttr(en.ROLE,"alert"):this.adapter_.removeAttr(en.ROLE),e||n||this.hide_()}},{key:"hide_",value:function(){this.adapter_.setAttr(en.ARIA_HIDDEN,"true")}}]),e}(),an=(function(){function t(){A(this,t)}I(t,[{key:"addClass",value:function(t){}},{key:"removeClass",value:function(t){}},{key:"addClassToLabel",value:function(t){}},{key:"removeClassFromLabel",value:function(t){}},{key:"setIconAttr",value:function(t,e){}},{key:"eventTargetHasClass",value:function(t,e){}},{key:"registerTextFieldInteractionHandler",value:function(t,e){}},{key:"deregisterTextFieldInteractionHandler",value:function(t,e){}},{key:"notifyIconAction",value:function(){}},{key:"registerInputInteractionHandler",value:function(t,e){}},{key:"deregisterInputInteractionHandler",value:function(t,e){}},{key:"registerBottomLineEventHandler",value:function(t,e){}},{key:"deregisterBottomLineEventHandler",value:function(t,e){}},{key:"getNativeInput",value:function(){}}])}(),{ARIA_CONTROLS:"aria-controls",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-text-field__label",ICON_SELECTOR:".mdc-text-field__icon",ICON_EVENT:"MDCTextField:icon",BOTTOM_LINE_SELECTOR:".mdc-text-field__bottom-line"}),rn={ROOT:"mdc-text-field",UPGRADED:"mdc-text-field--upgraded",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",INVALID:"mdc-text-field--invalid",LABEL_FLOAT_ABOVE:"mdc-text-field__label--float-above",LABEL_SHAKE:"mdc-text-field__label--shake",BOX:"mdc-text-field--box",TEXT_FIELD_ICON:"mdc-text-field__icon",TEXTAREA:"mdc-text-field--textarea"},on=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(this,e);var i=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return i.bottomLine_=n.bottomLine,i.helperText_=n.helperText,i.isFocused_=!1,i.receivedUserInput_=!1,i.useCustomValidityChecking_=!1,i.inputFocusHandler_=function(){return i.activateFocus()},i.inputBlurHandler_=function(){return i.deactivateFocus()},i.inputInputHandler_=function(){return i.autoCompleteFocus()},i.setPointerXOffset_=function(t){return i.setBottomLineTransformOrigin(t)},i.textFieldInteractionHandler_=function(t){return i.handleTextFieldInteraction(t)},i.bottomLineAnimationEndHandler_=function(){return i.handleBottomLineAnimationEnd()},i}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return rn}},{key:"strings",get:function(){return an}},{key:"defaultAdapter",get:function(){return{addClass:function(){},removeClass:function(){},addClassToLabel:function(){},removeClassFromLabel:function(){},setIconAttr:function(){},eventTargetHasClass:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},notifyIconAction:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerBottomLineEventHandler:function(){},deregisterBottomLineEventHandler:function(){},getNativeInput:function(){}}}}]),I(e,[{key:"init",value:function(){var t=this;this.adapter_.addClass(e.cssClasses.UPGRADED),this.getNativeInput_().value&&this.adapter_.addClassToLabel(e.cssClasses.LABEL_FLOAT_ABOVE),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.registerInputInteractionHandler(e,t.setPointerXOffset_)}),["click","keydown"].forEach(function(e){t.adapter_.registerTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)}),this.adapter_.registerBottomLineEventHandler(tn.strings.ANIMATION_END_EVENT,this.bottomLineAnimationEndHandler_)}},{key:"destroy",value:function(){var t=this;this.adapter_.removeClass(e.cssClasses.UPGRADED),this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),["mousedown","touchstart"].forEach(function(e){t.adapter_.deregisterInputInteractionHandler(e,t.setPointerXOffset_)}),["click","keydown"].forEach(function(e){t.adapter_.deregisterTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)}),this.adapter_.deregisterBottomLineEventHandler(tn.strings.ANIMATION_END_EVENT,this.bottomLineAnimationEndHandler_)}},{key:"handleTextFieldInteraction",value:function(t){if(!this.adapter_.getNativeInput().disabled){this.receivedUserInput_=!0;var n=t.target,i=t.type,s=e.cssClasses.TEXT_FIELD_ICON,a=this.adapter_.eventTargetHasClass(n,s),r="click"===i||"Enter"===t.key||13===t.keyCode;a&&r&&this.adapter_.notifyIconAction()}}},{key:"activateFocus",value:function(){var t=e.cssClasses,n=t.FOCUSED,i=t.LABEL_FLOAT_ABOVE,s=t.LABEL_SHAKE;this.adapter_.addClass(n),this.bottomLine_&&this.bottomLine_.activate(),this.adapter_.addClassToLabel(i),this.adapter_.removeClassFromLabel(s),this.helperText_&&this.helperText_.showToScreenReader(),this.isFocused_=!0}},{key:"setBottomLineTransformOrigin",value:function(t){this.bottomLine_&&this.bottomLine_.setTransformOrigin(t)}},{key:"autoCompleteFocus",value:function(){this.receivedUserInput_||this.activateFocus()}},{key:"handleBottomLineAnimationEnd",value:function(){!this.isFocused_&&this.bottomLine_&&this.bottomLine_.deactivate()}},{key:"deactivateFocus",value:function(){var t=e.cssClasses,n=t.FOCUSED,i=t.LABEL_FLOAT_ABOVE,s=t.LABEL_SHAKE,a=this.getNativeInput_();this.isFocused_=!1,this.adapter_.removeClass(n),this.adapter_.removeClassFromLabel(s),a.value||this.isBadInput_()||(this.adapter_.removeClassFromLabel(i),this.receivedUserInput_=!1),this.useCustomValidityChecking_||this.changeValidity_(a.checkValidity())}},{key:"changeValidity_",value:function(t){var n=e.cssClasses,i=n.INVALID,s=n.LABEL_SHAKE;t?this.adapter_.removeClass(i):(this.adapter_.addClassToLabel(s),this.adapter_.addClass(i)),this.helperText_&&this.helperText_.setValidity(t)}},{key:"isBadInput_",value:function(){var t=this.getNativeInput_();return t.validity?t.validity.badInput:t.badInput}},{key:"isDisabled",value:function(){return this.getNativeInput_().disabled}},{key:"setDisabled",value:function(t){var n=e.cssClasses,i=n.DISABLED,s=n.INVALID;this.getNativeInput_().disabled=t,t?(this.adapter_.addClass(i),this.adapter_.removeClass(s),this.adapter_.setIconAttr("tabindex","-1")):(this.adapter_.removeClass(i),this.adapter_.setIconAttr("tabindex","0"))}},{key:"setHelperTextContent",value:function(t){this.helperText_&&this.helperText_.setContent(t)}},{key:"getNativeInput_",value:function(){return this.adapter_.getNativeInput()||{checkValidity:function(){return!0},value:"",disabled:!1,badInput:!1}}},{key:"setValid",value:function(t){this.useCustomValidityChecking_=!0,this.changeValidity_(t)}}]),e}(),cn=e({mdcTextField:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdc-textfield-wrapper"},[t.multiline&&t.fullwidth?n("div",{ref:"root",class:t.rootClasses},[n("textarea",{ref:"input",class:t.inputClasses,attrs:{rows:t.rows,minlength:t.minlength,maxlength:t.maxlength,"aria-controls":"help-"+t._uid,placeholder:t.label,"aria-label":t.label},domProps:{value:t.value},on:{input:function(e){t.updateValue(e.target.value)},blur:t.emitBlurEvent}})]):t.multiline?n("div",{ref:"root",class:t.rootClasses},[n("textarea",{ref:"input",class:t.inputClasses,attrs:{id:t._uid,rows:t.rows,cols:t.cols,minlength:t.minlength,maxlength:t.maxlength,"aria-controls":"help-"+t._uid},domProps:{value:t.value},on:{input:function(e){t.updateValue(e.target.value)},blur:t.emitBlurEvent}}),t._v(" "),t.label?n("label",{ref:"label",class:t.labelClassesUpgraded,attrs:{for:t._uid}},[t._v(" "+t._s(t.label)+" ")]):t._e()]):t.fullwidth?n("div",{ref:"root",class:t.rootClasses},[n("input",{ref:"input",class:t.inputClasses,attrs:{type:t.type,required:t.required,minlength:t.minlength,maxlength:t.maxlength,"aria-controls":"help-"+t._uid,placeholder:t.label,"aria-label":t.label},domProps:{value:t.value},on:{input:function(e){t.updateValue(e.target.value)},blur:t.emitBlurEvent}})]):n("div",{ref:"root",class:t.rootClasses},[n("input",{ref:"input",class:t.inputClasses,attrs:{type:t.type,id:t._uid,required:t.required,size:t.size,minlength:t.minlength,maxlength:t.maxlength,"aria-controls":"help-"+t._uid},domProps:{value:t.value},on:{input:function(e){t.updateValue(e.target.value)},blur:t.emitBlurEvent}}),t._v(" "),t.label?n("label",{ref:"label",class:t.labelClassesUpgraded,attrs:{for:t._uid}},[t._v(" "+t._s(t.label)+" ")]):t._e(),t._v(" "),n("div",{ref:"bottom",class:t.bottomClasses})]),t._v(" "),t.helptext?n("p",{ref:"help",class:t.helpClasses,attrs:{id:"help-"+t._uid,"aria-hidden":"true"}},[t._v(" "+t._s(t.helptext)+" ")]):t._e()])},staticRenderFns:[],name:"mdc-textfield",props:{value:String,type:{type:String,default:"text",validator:function(t){return-1!==["text","email","search","password","tel","url"].indexOf(t)}},dense:Boolean,label:String,helptext:String,"helptext-persistent":Boolean,"helptext-validation":Boolean,disabled:Boolean,required:Boolean,minlength:{type:[Number,String],default:void 0},maxlength:{type:[Number,String],default:void 0},size:{type:[Number,String],default:20},fullwidth:Boolean,multiline:Boolean,rows:{type:[Number,String],default:8},cols:{type:[Number,String],default:40}},data:function(){return{text:this.value,rootClasses:{"mdc-textfield":!0,"mdc-text-field":!0,"mdc-text-field--upgraded":!0,"mdc-text-field--disabled":this.disabled,"mdc-text-field--dense":this.dense,"mdc-text-field--fullwidth":this.fullwidth,"mdc-text-field--textarea":this.multiline},inputClasses:{"mdc-text-field__input":!0},labelClasses:{"mdc-text-field__label":!0},bottomClasses:{"mdc-text-field__bottom-line":!0},helpClasses:{"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":this.helptextPersistent,"mdc-text-field-helper-text--validation-msg":this.helptextValidation}}},watch:{disabled:function(){this.foundation&&this.foundation.setDisabled(this.disabled)}},methods:{updateValue:function(t){this.$emit("input",t)},emitBlurEvent:function(t){this.$emit("blur",t)}},computed:{labelClassesUpgraded:function(){return w(this.labelClasses,{"mdc-text-field__label--float-above":this.value})}},mounted:function(){var t=this;this.$refs.bottom&&(this.bottomLineFoundation=new tn({addClass:function(e){t.$set(t.bottomClasses,e,!0)},removeClass:function(e){t.$delete(t.bottomClasses,e)},setAttr:function(e,n){t.$refs.bottom.setAttribute(e,n)},registerEventHandler:function(e,n){t.$refs.bottom.addEventListener(e,n)},deregisterEventHandler:function(e,n){t.$refs.bottom.removeEventListener(e,n)},notifyAnimationEnd:function(){n(t.$refs.bottom,tn.strings.ANIMATION_END_EVENT,{})}}),this.bottomLineFoundation.init()),this.$refs.help&&(this.helperTextFoundation=new sn({addClass:function(e){t.$set(t.helpClasses,e,!0)},removeClass:function(e){t.$delete(t.helpClasses,e)},hasClass:function(e){return t.$refs.help.classList.contains(e)},setAttr:function(e,n){t.$refs.help.setAttribute(e,n)},removeAttr:function(e){t.$refs.help.removeAttribute(e)},setContent:function(e){t.$refs.help.textContent=e}}),this.helperTextFoundation.init()),this.foundation=new on({addClass:function(e){t.$set(t.rootClasses,e,!0)},removeClass:function(e){t.$delete(t.rootClasses,e)},addClassToLabel:function(e){t.$set(t.labelClasses,e,!0)},removeClassFromLabel:function(e){t.$delete(t.labelClasses,e)},setIconAttr:function(){},eventTargetHasClass:function(t,e){return t.classList.contains(e)},registerTextFieldInteractionHandler:function(e,n){t.$refs.root.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){t.$refs.root.removeEventListener(e,n)},registerInputInteractionHandler:function(e,n){t.$refs.input.addEventListener(e,n)},deregisterInputInteractionHandler:function(e,n){t.$refs.input.removeEventListener(e,n)},getNativeInput:function(){return t.$refs.input},notifyIconAction:function(){t.$emit("icon")},registerBottomLineEventHandler:function(e,n){t.$refs.bottom&&t.$refs.bottom.addEventListener(e,n)},deregisterBottomLineEventHandler:function(e,n){t.$refs.bottom&&t.$refs.bottom.removeEventListener(e,n)}},{bottomLine:this.bottomLineFoundation,helperText:this.helperTextFoundation}),this.foundation.init(),this.foundation.setDisabled(this.disabled),this.textbox&&(this.ripple=new z(this),this.ripple.init())},beforeDestroy:function(){this.foundation&&this.foundation.destroy(),this.bottomLineFoundation&&this.bottomLineFoundation.destroy(),this.helperTextFoundation&&this.helperTextFoundation.destroy(),this.ripple&&this.ripple.destroy()}}}),dn=["primary","secondary","background","primary-light","secondary-light","secondary-dark","primary-dark"],ln=["text-primary","text-secondary","text-hint","text-icon","text-disabled"],un=e({mdcTheme:{render:function(){var t=this.$createElement;return(this._self._c||t)("custom-element",{staticClass:"mdc-theme",class:this.classes,attrs:{tag:this.tag}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-theme",components:{CustomElement:T},props:{tag:{type:String,default:"div"},color:String,background:String},computed:{classes:function(){var t={};return this.color&&-1!==dn.indexOf(this.color)&&(t["mdc-theme--"+this.color]=!0),this.background&&-1!==dn.indexOf(this.background)&&(t["mdc-theme--"+this.background+"-bg"]=!0,this.color&&-1!==ln.indexOf(this.color)&&(t["mdc-theme--"+this.color+"-on-"+this.background]=!0)),t}}}}),hn={FIXED:"mdc-toolbar--fixed",FIXED_LASTROW:"mdc-toolbar--fixed-lastrow-only",FIXED_AT_LAST_ROW:"mdc-toolbar--fixed-at-last-row",TOOLBAR_ROW_FLEXIBLE:"mdc-toolbar--flexible",FLEXIBLE_DEFAULT_BEHAVIOR:"mdc-toolbar--flexible-default-behavior",FLEXIBLE_MAX:"mdc-toolbar--flexible-space-maximized",FLEXIBLE_MIN:"mdc-toolbar--flexible-space-minimized"},fn={TITLE_SELECTOR:".mdc-toolbar__title",FIRST_ROW_SELECTOR:".mdc-toolbar__row:first-child",CHANGE_EVENT:"MDCToolbar:change"},_n={MAX_TITLE_SIZE:2.125,MIN_TITLE_SIZE:1.25,TOOLBAR_ROW_HEIGHT:64,TOOLBAR_ROW_MOBILE_HEIGHT:56,TOOLBAR_MOBILE_BREAKPOINT:600},mn=function(t){function e(t){A(this,e);var n=H(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w(e.defaultAdapter,t)));return n.resizeHandler_=function(){return n.checkRowHeight_()},n.scrollHandler_=function(){return n.updateToolbarStyles_()},n.checkRowHeightFrame_=0,n.scrollFrame_=0,n.executedLastChange_=!1,n.calculations_={toolbarRowHeight:0,toolbarRatio:0,flexibleExpansionRatio:0,maxTranslateYRatio:0,scrollThresholdRatio:0,toolbarHeight:0,flexibleExpansionHeight:0,maxTranslateYDistance:0,scrollThreshold:0},n.fixed_=!1,n.fixedLastrow_=!1,n.hasFlexibleRow_=!1,n.useFlexDefaultBehavior_=!1,n}return x(e,F),I(e,null,[{key:"cssClasses",get:function(){return hn}},{key:"strings",get:function(){return fn}},{key:"numbers",get:function(){return _n}},{key:"defaultAdapter",get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},registerScrollHandler:function(){},deregisterScrollHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},getViewportWidth:function(){return 0},getViewportScrollY:function(){return 0},getOffsetHeight:function(){return 0},getFirstRowElementOffsetHeight:function(){return 0},notifyChange:function(){},setStyle:function(){},setStyleForTitleElement:function(){},setStyleForFlexibleRowElement:function(){},setStyleForFixedAdjustElement:function(){}}}}]),I(e,[{key:"init",value:function(){this.fixed_=this.adapter_.hasClass(e.cssClasses.FIXED),this.fixedLastrow_=this.adapter_.hasClass(e.cssClasses.FIXED_LASTROW)&this.fixed_,this.hasFlexibleRow_=this.adapter_.hasClass(e.cssClasses.TOOLBAR_ROW_FLEXIBLE),this.hasFlexibleRow_&&(this.useFlexDefaultBehavior_=this.adapter_.hasClass(e.cssClasses.FLEXIBLE_DEFAULT_BEHAVIOR)),this.initKeyRatio_(),this.setKeyHeights_(),this.adapter_.registerResizeHandler(this.resizeHandler_),this.adapter_.registerScrollHandler(this.scrollHandler_)}},{key:"destroy",value:function(){this.adapter_.deregisterResizeHandler(this.resizeHandler_),this.adapter_.deregisterScrollHandler(this.scrollHandler_)}},{key:"updateAdjustElementStyles",value:function(){this.fixed_&&this.adapter_.setStyleForFixedAdjustElement("margin-top",this.calculations_.toolbarHeight+"px")}},{key:"getFlexibleExpansionRatio_",value:function(t){return Math.max(0,1-t/(this.calculations_.flexibleExpansionHeight+1e-4))}},{key:"checkRowHeight_",value:function(){var t=this;cancelAnimationFrame(this.checkRowHeightFrame_),this.checkRowHeightFrame_=requestAnimationFrame(function(){return t.setKeyHeights_()})}},{key:"setKeyHeights_",value:function(){var t=this.getRowHeight_();t!==this.calculations_.toolbarRowHeight&&(this.calculations_.toolbarRowHeight=t,this.calculations_.toolbarHeight=this.calculations_.toolbarRatio*this.calculations_.toolbarRowHeight,this.calculations_.flexibleExpansionHeight=this.calculations_.flexibleExpansionRatio*this.calculations_.toolbarRowHeight,this.calculations_.maxTranslateYDistance=this.calculations_.maxTranslateYRatio*this.calculations_.toolbarRowHeight,this.calculations_.scrollThreshold=this.calculations_.scrollThresholdRatio*this.calculations_.toolbarRowHeight,this.updateAdjustElementStyles(),this.updateToolbarStyles_())}},{key:"updateToolbarStyles_",value:function(){var t=this;cancelAnimationFrame(this.scrollFrame_),this.scrollFrame_=requestAnimationFrame(function(){var e=t.adapter_.getViewportScrollY(),n=t.scrolledOutOfThreshold_(e);if(!n||!t.executedLastChange_){var i=t.getFlexibleExpansionRatio_(e);t.updateToolbarFlexibleState_(i),t.fixedLastrow_&&t.updateToolbarFixedState_(e),t.hasFlexibleRow_&&t.updateFlexibleRowElementStyles_(i),t.executedLastChange_=n,t.adapter_.notifyChange({flexibleExpansionRatio:i})}})}},{key:"scrolledOutOfThreshold_",value:function(t){return t>this.calculations_.scrollThreshold}},{key:"initKeyRatio_",value:function(){var t=this.getRowHeight_(),e=this.adapter_.getFirstRowElementOffsetHeight()/t;this.calculations_.toolbarRatio=this.adapter_.getOffsetHeight()/t,this.calculations_.flexibleExpansionRatio=e-1,this.calculations_.maxTranslateYRatio=this.fixedLastrow_?this.calculations_.toolbarRatio-e:0,this.calculations_.scrollThresholdRatio=(this.fixedLastrow_?this.calculations_.toolbarRatio:e)-1}},{key:"getRowHeight_",value:function(){var t=e.numbers.TOOLBAR_MOBILE_BREAKPOINT;return this.adapter_.getViewportWidth()<t?e.numbers.TOOLBAR_ROW_MOBILE_HEIGHT:e.numbers.TOOLBAR_ROW_HEIGHT}},{key:"updateToolbarFlexibleState_",value:function(t){this.adapter_.removeClass(e.cssClasses.FLEXIBLE_MAX),this.adapter_.removeClass(e.cssClasses.FLEXIBLE_MIN),1===t?this.adapter_.addClass(e.cssClasses.FLEXIBLE_MAX):0===t&&this.adapter_.addClass(e.cssClasses.FLEXIBLE_MIN)}},{key:"updateToolbarFixedState_",value:function(t){var n=Math.max(0,Math.min(t-this.calculations_.flexibleExpansionHeight,this.calculations_.maxTranslateYDistance));this.adapter_.setStyle("transform","translateY("+-n+"px)"),n===this.calculations_.maxTranslateYDistance?this.adapter_.addClass(e.cssClasses.FIXED_AT_LAST_ROW):this.adapter_.removeClass(e.cssClasses.FIXED_AT_LAST_ROW)}},{key:"updateFlexibleRowElementStyles_",value:function(t){if(this.fixed_){var e=this.calculations_.flexibleExpansionHeight*t;this.adapter_.setStyleForFlexibleRowElement("height",e+this.calculations_.toolbarRowHeight+"px")}this.useFlexDefaultBehavior_&&this.updateElementStylesDefaultBehavior_(t)}},{key:"updateElementStylesDefaultBehavior_",value:function(t){var n=e.numbers.MAX_TITLE_SIZE,i=e.numbers.MIN_TITLE_SIZE,s=(n-i)*t+i;this.adapter_.setStyleForTitleElement("font-size",s+"rem")}}]),e}(),pn=void 0,vn=e({mdcToolbar:{render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mdc-toolbar-wrapper"},[e("div",{ref:"root",class:this.rootClasses,style:this.rootStyles},[this._t("default")],2),this._v(" "),this.fixed||this.waterfall||this.fixedLastrow?e("div",{ref:"fixed-adjust",staticClass:"mdc-toolbar-fixed-adjust",style:this.adjustStyles}):this._e()])},staticRenderFns:[],name:"mdc-toolbar",props:{fixed:Boolean,waterfall:Boolean,"fixed-lastrow":Boolean,flexible:Boolean,"flexible-default":{type:Boolean,default:!0}},data:function(){return{rootClasses:{"mdc-toolbar":!0,"mdc-toolbar--fixed":this.fixed||this.waterfall||this.fixedLastrow,"mdc-toolbar--waterfall":this.waterfall,"mdc-toolbar--fixed-lastrow-only":this.fixedLastrow,"mdc-toolbar--flexible":this.flexible,"mdc-toolbar--flexible-default-behavior":this.flexible&&this.flexibleDefault},rootStyles:{},adjustStyles:{},foundation:null}},mounted:function(){var t=this;this.foundation=new mn({addClass:function(e){t.$set(t.rootClasses,e,!0)},removeClass:function(e){t.$delete(t.rootClasses,e)},hasClass:function(e){return t.$refs.root.classList.contains(e)},registerScrollHandler:function(t){window.addEventListener("scroll",t,C())},deregisterScrollHandler:function(t){window.removeEventListener("scroll",t,C())},registerResizeHandler:function(t){window.addEventListener("resize",t)},deregisterResizeHandler:function(t){window.removeEventListener("resize",t)},getViewportWidth:function(){return window.innerWidth},getViewportScrollY:function(){return window.pageYOffset},getOffsetHeight:function(){return t.$refs.root.offsetHeight},getFirstRowElementOffsetHeight:function(){var e=t.$refs.root.querySelector(mn.strings.FIRST_ROW_SELECTOR);return e?e.offsetHeight:void 0},notifyChange:function(e){t.$emit("change",e)},setStyle:function(e,n){t.$set(t.rootStyles,e,n)},setStyleForTitleElement:function(e,n){var i=t.$refs.root.querySelector(mn.strings.TITLE_SELECTOR);i&&i.style.setProperty(e,n)},setStyleForFlexibleRowElement:function(e,n){var i=t.$refs.root.querySelector(mn.strings.FIRST_ROW_SELECTOR);i&&i.style.setProperty(e,n)},setStyleForFixedAdjustElement:function(e,n){t.$set(t.adjustStyles,e,n)}}),this.foundation.init()},beforeDestroy:function(){this.foundation.destroy()}},mdcToolbarRow:{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"mdc-toolbar-row mdc-toolbar__row"},[this._t("default")],2)},staticRenderFns:[],name:"mdc-toolbar-row"},mdcToolbarSection:{render:function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"mdc-toolbar-section mdc-toolbar__section",class:this.classes},[this._t("default")],2)},staticRenderFns:[],name:"mdc-toolbar-section",props:{"align-start":Boolean,"align-end":Boolean,"shrink-to-fit":Boolean},data:function(){return{classes:{"mdc-toolbar__section--align-start":this.alignStart,"mdc-toolbar__section--align-end":this.alignEnd,"mdc-toolbar__section--shrink-to-fit":this.shrinkToFit}}}},mdcToolbarMenuIcon:{render:function(){var t=this.$createElement;return(this._self._c||t)("a",{staticClass:"mdc-toolbar-menu-icon mdc-toolbar__menu-icon",class:{"material-icons":!!this.icon},on:{click:this.dispatchEvent}},[this._t("default",[this._v(this._s(this.icon))])],2)},staticRenderFns:[],name:"mdc-toolbar-menu-icon",mixins:[R],props:{icon:{type:String,default:"menu"}}},mdcToolbarTitle:{render:function(){var t=this.$createElement;return(this._self._c||t)("a",{staticClass:"mdc-toolbar-title mdc-toolbar__title",on:{click:this.dispatchEvent}},[this._t("default")],2)},staticRenderFns:[],name:"mdc-toolbar-title",mixins:[R]},mdcToolbarIcon:{render:function(){var t=this.$createElement;return(this._self._c||t)("a",{staticClass:"mdc-toolbar-icon mdc-toolbar__icon",class:{"material-icons":!!this.icon},on:{click:this.dispatchEvent}},[this._t("default",[this._v(this._s(this.icon))])],2)},staticRenderFns:[],name:"mdc-toolbar-icon",mixins:[R],props:{icon:String}}}),gn=function(t){return{render:function(e){var n;return e(this.tag,{class:(n={"mdc-typo":!0},S(n,t,!0),S(n,"mdc-typography--"+this.typo,!0),S(n,"mdc-typography--adjust-margin",this.adjustMargin),n),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}}},yn={name:"mdc-text-section",props:{tag:{type:String,default:"section"}},render:function(t){return t(this.tag,{class:{"mdc-typography":!0,"mdc-text-section":!0},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}},bn={name:"mdc-text",mixins:[gn("mdc-text"),E("p","body1",["display4","display3","display2","display1","headline","title","subheading1","subheading2","body1","body2","caption","button"])]},Cn={name:"mdc-display",mixins:[gn("mdc-display"),E("h1","display1",["display4","display3","display2","display1"])]},En={name:"mdc-headline",mixins:[gn("mdc-headline"),E("h2","headline",["headline"])]},Tn={name:"mdc-title",mixins:[gn("mdc-title"),E("h3","title",["title"])]},kn={name:"mdc-subheading",mixins:[gn("mdc-subheading"),E("h4","subheading2",["subheading1","subheading2"])]},An=e({mdcTextSection:yn,mdcText:bn,mdcBody:{name:"mdc-body",mixins:[gn("mdc-body"),E("p","body1",["body1","body2"])]},mdcCaption:{name:"mdc-caption",mixins:[gn("mdc-caption"),E("span","caption",["caption"])]},mdcDisplay:Cn,mdcHeadline:En,mdcSubHeading:kn,mdcTitle:Tn}),In={install:function(t){t.use(G),t.use(Q),t.use(dt),t.use(pt),t.use(Dt),t.use(Rt),t.use(Ft),t.use($t),t.use(Mt),t.use(zt),t.use(Kt),t.use(Wt),t.use(Zt),t.use(Qt),t.use(re),t.use(le),t.use(K),t.use(Te),t.use(Be),t.use(Ue),t.use(ze),t.use(Je),t.use(cn),t.use(un),t.use(vn),t.use(An)}};return function(e){var n=null;"undefined"!=typeof window?n=window.Vue:void 0!==t&&(n=t.Vue),n&&n.use(e)}(In),In});
},{}],4:[function(require,module,exports) {
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}require("vue-mdc-adapter/dist/vue-mdc-adapter.css"),require("../scss/index.scss");var r=require("firebase"),o=t(r),n=require("vue/dist/vue.js"),a=e(n),i=require("vue-router/dist/vue-router.js"),s=e(i),u=require("vue-mdc-adapter/dist/vue-mdc-adapter.js"),d=e(u),c=require("vuefire/dist/vuefire.js"),p=e(c);require("firebase/firestore"),a.default.use(s.default),a.default.use(d.default),a.default.use(p.default),o.initializeApp({apiKey:"AIzaSyC7VtLhSkzxNzl5jg5pbjSgHnHnHXCjRf4",authDomain:"jiroor-add68.firebaseapp.com",databaseURL:"https://jiroor-add68.firebaseio.com",projectId:"jiroor-add68",storageBucket:"jiroor-add68.appspot.com",messagingSenderId:"774646153392"});const m=o.firestore(),v={messages:m.collection("messages"),events:m.collection("events"),todos:m.collection("todos")},f=[{path:"/home",component:require("./home.js")(m,v)},{path:"/todo",component:require("./todo.js")(m,v)},{path:"/event",component:require("./event.js")(m,v)},{path:"/event/create",component:require("./event__create.js")(m,v)},{path:"/event/auth/:to",component:require("./event__auth.js")(m,v)},{path:"/event/register/:name",component:require("./event__register.js")(m,v)},{path:"/event/join/:name",component:require("./event__join.js")(m,v)},{path:"/event/confirm/:name/:id",component:require("./event__confirm.js")(m,v)},{path:"/event/complete/:name",component:require("./event__complete.js")(m,v)},{path:"/chat",component:require("./chat.js")(m,v)},{path:"*",redirect:"/home"}],l=new s.default({routes:f}),j=new a.default({router:l}).$mount("#app");
},{"../scss/index.scss":5,"./home.js":6,"./event__create.js":7,"./event.js":8,"./todo.js":9,"./event__join.js":10,"./event__register.js":11,"./event__auth.js":12,"./event__confirm.js":13,"./event__complete.js":14,"./chat.js":15,"firebase":16,"firebase/firestore":17,"vue/dist/vue.js":18,"vue-mdc-adapter/dist/vue-mdc-adapter.css":19,"vue-router/dist/vue-router.js":20,"vuefire/dist/vuefire.js":21,"vue-mdc-adapter/dist/vue-mdc-adapter.js":22}]},{},[4])